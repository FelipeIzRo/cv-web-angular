var WA=Object.defineProperty,GA=Object.defineProperties;var KA=Object.getOwnPropertyDescriptors;var N_=Object.getOwnPropertySymbols,QA=Object.getPrototypeOf,YA=Object.prototype.hasOwnProperty,ZA=Object.prototype.propertyIsEnumerable,JA=Reflect.get;var M_=(t,e,n)=>e in t?WA(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,F=(t,e)=>{for(var n in e||={})YA.call(e,n)&&M_(t,n,e[n]);if(N_)for(var n of N_(e))ZA.call(e,n)&&M_(t,n,e[n]);return t},ye=(t,e)=>GA(t,KA(e));var Zn=(t,e,n)=>JA(QA(t),n,e);var v=(t,e,n)=>new Promise((r,i)=>{var o=u=>{try{c(n.next(u))}catch(l){i(l)}},s=u=>{try{c(n.throw(u))}catch(l){i(l)}},c=u=>u.done?r(u.value):Promise.resolve(u.value).then(o,s);c((n=n.apply(t,e)).next())});function P_(t,e){return Object.is(t,e)}var Oe=null,ic=!1,gh=1,Ri=Symbol("SIGNAL");function me(t){let e=Oe;return Oe=t,e}function mh(){return Oe}var oc={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function yh(t){if(ic)throw new Error("");if(Oe===null)return;Oe.consumerOnSignalRead(t);let e=Oe.nextProducerIndex++;if(ac(Oe),e<Oe.producerNode.length&&Oe.producerNode[e]!==t&&ls(Oe)){let n=Oe.producerNode[e];sc(n,Oe.producerIndexOfThis[e])}Oe.producerNode[e]!==t&&(Oe.producerNode[e]=t,Oe.producerIndexOfThis[e]=ls(Oe)?L_(t,Oe,e):0),Oe.producerLastReadVersion[e]=t.version}function k_(){gh++}function x_(t){if(!(ls(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===gh)){if(!t.producerMustRecompute(t)&&!Ih(t)){ph(t);return}t.producerRecomputeValue(t),ph(t)}}function vh(t){if(t.liveConsumerNode===void 0)return;let e=ic;ic=!0;try{for(let n of t.liveConsumerNode)n.dirty||XA(n)}finally{ic=e}}function O_(){return Oe?.consumerAllowSignalWrites!==!1}function XA(t){t.dirty=!0,vh(t),t.consumerMarkedDirty?.(t)}function ph(t){t.dirty=!1,t.lastCleanEpoch=gh}function _h(t){return t&&(t.nextProducerIndex=0),me(t)}function F_(t,e){if(me(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(ls(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)sc(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function Ih(t){ac(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(x_(n),r!==n.version))return!0}return!1}function wh(t){if(ac(t),ls(t))for(let e=0;e<t.producerNode.length;e++)sc(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function L_(t,e,n){if(V_(t),t.liveConsumerNode.length===0&&j_(t))for(let r=0;r<t.producerNode.length;r++)t.producerIndexOfThis[r]=L_(t.producerNode[r],t,r);return t.liveConsumerIndexOfThis.push(n),t.liveConsumerNode.push(e)-1}function sc(t,e){if(V_(t),t.liveConsumerNode.length===1&&j_(t))for(let r=0;r<t.producerNode.length;r++)sc(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];ac(i),i.producerIndexOfThis[r]=e}}function ls(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function ac(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function V_(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function j_(t){return t.producerNode!==void 0}function eR(){throw new Error}var U_=eR;function tR(t){U_(t)}function Eh(t){U_=t}var nR=null;function Th(t,e){O_()||tR(t),t.equal(t.value,e)||(t.value=e,rR(t))}var Dh=ye(F({},oc),{equal:P_,value:void 0,kind:"signal"});function rR(t){t.version++,k_(),vh(t),nR?.()}var bh;function ds(){return bh}function bn(t){let e=bh;return bh=t,e}var cc=Symbol("NotFound");function K(t){return typeof t=="function"}function Ni(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var uc=Ni(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Pr(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Ce=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(K(r))try{r()}catch(o){e=o instanceof uc?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{B_(o)}catch(s){e=e??[],s instanceof uc?e=[...e,...s.errors]:e.push(s)}}if(e)throw new uc(e)}}add(e){var n;if(e&&e!==this)if(this.closed)B_(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Pr(n,e)}remove(e){let{_finalizers:n}=this;n&&Pr(n,e),e instanceof t&&e._removeParent(this)}};Ce.EMPTY=(()=>{let t=new Ce;return t.closed=!0,t})();var Ch=Ce.EMPTY;function lc(t){return t instanceof Ce||t&&"closed"in t&&K(t.remove)&&K(t.add)&&K(t.unsubscribe)}function B_(t){K(t)?t():t.unsubscribe()}var Bt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Mi={setTimeout(t,e,...n){let{delegate:r}=Mi;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=Mi;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function dc(t){Mi.setTimeout(()=>{let{onUnhandledError:e}=Bt;if(e)e(t);else throw t})}function hs(){}var $_=Sh("C",void 0,void 0);function H_(t){return Sh("E",void 0,t)}function q_(t){return Sh("N",t,void 0)}function Sh(t,e,n){return{kind:t,value:e,error:n}}var kr=null;function Pi(t){if(Bt.useDeprecatedSynchronousErrorHandling){let e=!kr;if(e&&(kr={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=kr;if(kr=null,n)throw r}}else t()}function z_(t){Bt.useDeprecatedSynchronousErrorHandling&&kr&&(kr.errorThrown=!0,kr.error=t)}var xr=class extends Ce{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,lc(e)&&e.add(this)):this.destination=fR}static create(e,n,r){return new ki(e,n,r)}next(e){this.isStopped?Rh(q_(e),this):this._next(e)}error(e){this.isStopped?Rh(H_(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Rh($_,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},dR=Function.prototype.bind;function Ah(t,e){return dR.call(t,e)}var Nh=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){hc(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){hc(r)}else hc(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){hc(n)}}},ki=class extends xr{constructor(e,n,r){super();let i;if(K(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&Bt.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Ah(e.next,o),error:e.error&&Ah(e.error,o),complete:e.complete&&Ah(e.complete,o)}):i=e}this.destination=new Nh(i)}};function hc(t){Bt.useDeprecatedSynchronousErrorHandling?z_(t):dc(t)}function hR(t){throw t}function Rh(t,e){let{onStoppedNotification:n}=Bt;n&&Mi.setTimeout(()=>n(t,e))}var fR={closed:!0,next:hs,error:hR,complete:hs};var xi=typeof Symbol=="function"&&Symbol.observable||"@@observable";function It(t){return t}function fc(...t){return Mh(t)}function Mh(t){return t.length===0?It:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var re=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=gR(n)?n:new ki(n,r,i);return Pi(()=>{let{operator:s,source:c}=this;o.add(s?s.call(o,c):c?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=W_(r),new r((i,o)=>{let s=new ki({next:c=>{try{n(c)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[xi](){return this}pipe(...n){return Mh(n)(this)}toPromise(n){return n=W_(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function W_(t){var e;return(e=t??Bt.Promise)!==null&&e!==void 0?e:Promise}function pR(t){return t&&K(t.next)&&K(t.error)&&K(t.complete)}function gR(t){return t&&t instanceof xr||pR(t)&&lc(t)}function Ph(t){return K(t?.lift)}function se(t){return e=>{if(Ph(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ae(t,e,n,r,i){return new kh(t,e,n,r,i)}var kh=class extends xr{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(c){try{n(c)}catch(u){e.error(u)}}:super._next,this._error=i?function(c){try{i(c)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Oi(){return se((t,e)=>{let n=null;t._refCount++;let r=ae(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var Fi=class extends re{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Ph(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Ce;let n=this.getSubject();e.add(this.source.subscribe(ae(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Ce.EMPTY)}return e}refCount(){return Oi()(this)}};var G_=Ni(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ze=(()=>{class t extends re{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new pc(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new G_}next(n){Pi(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){Pi(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Pi(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Ch:(this.currentObservers=null,o.push(n),new Ce(()=>{this.currentObservers=null,Pr(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new re;return n.source=this,n}}return t.create=(e,n)=>new pc(e,n),t})(),pc=class extends ze{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:Ch}};var We=class extends ze{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var xh={now(){return(xh.delegate||Date).now()},delegate:void 0};var gc=class extends Ce{constructor(e,n){super()}schedule(e,n=0){return this}};var fs={setInterval(t,e,...n){let{delegate:r}=fs;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=fs;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var Li=class extends gc{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,n),this}requestAsyncId(e,n,r=0){return fs.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&fs.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Pr(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var Vi=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};Vi.now=xh.now;var ji=class extends Vi{constructor(e,n=Vi.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var Oh=new ji(Li);var mc=class extends Li{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var yc=class extends ji{};var Fh=new yc(mc);var ht=new re(t=>t.complete());function K_(t){return t&&K(t.schedule)}function Q_(t){return t[t.length-1]}function Y_(t){return K(Q_(t))?t.pop():void 0}function Jn(t){return K_(Q_(t))?t.pop():void 0}function Lh(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function J_(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function c(f){try{l(r.next(f))}catch(p){s(p)}}function u(f){try{l(r.throw(f))}catch(p){s(p)}}function l(f){f.done?o(f.value):i(f.value).then(c,u)}l((r=r.apply(t,e||[])).next())})}function Z_(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Or(t){return this instanceof Or?(this.v=t,this):new Or(t)}function X_(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),c("next"),c("throw"),c("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(y){return function(A){return Promise.resolve(A).then(y,p)}}function c(y,A){r[y]&&(i[y]=function(R){return new Promise(function(P,V){o.push([y,R,P,V])>1||u(y,R)})},A&&(i[y]=A(i[y])))}function u(y,A){try{l(r[y](A))}catch(R){m(o[0][3],R)}}function l(y){y.value instanceof Or?Promise.resolve(y.value.v).then(f,p):m(o[0][2],y)}function f(y){u("next",y)}function p(y){u("throw",y)}function m(y,A){y(A),o.shift(),o.length&&u(o[0][0],o[0][1])}}function eI(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Z_=="function"?Z_(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(c,u){s=t[o](s),i(c,u,s.done,s.value)})}}function i(o,s,c,u){Promise.resolve(u).then(function(l){o({value:l,done:c})},s)}}var vc=t=>t&&typeof t.length=="number"&&typeof t!="function";function _c(t){return K(t?.then)}function Ic(t){return K(t[xi])}function wc(t){return Symbol.asyncIterator&&K(t?.[Symbol.asyncIterator])}function Ec(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function mR(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Tc=mR();function Dc(t){return K(t?.[Tc])}function bc(t){return X_(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield Or(n.read());if(i)return yield Or(void 0);yield yield Or(r)}}finally{n.releaseLock()}})}function Cc(t){return K(t?.getReader)}function Ve(t){if(t instanceof re)return t;if(t!=null){if(Ic(t))return yR(t);if(vc(t))return vR(t);if(_c(t))return _R(t);if(wc(t))return tI(t);if(Dc(t))return IR(t);if(Cc(t))return wR(t)}throw Ec(t)}function yR(t){return new re(e=>{let n=t[xi]();if(K(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function vR(t){return new re(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function _R(t){return new re(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,dc)})}function IR(t){return new re(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function tI(t){return new re(e=>{ER(t,e).catch(n=>e.error(n))})}function wR(t){return tI(bc(t))}function ER(t,e){var n,r,i,o;return J_(this,void 0,void 0,function*(){try{for(n=eI(t);r=yield n.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})}function ft(t,e,n,r=0,i=!1){let o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function Xn(t,e=0){return se((n,r)=>{n.subscribe(ae(r,i=>ft(r,t,()=>r.next(i),e),()=>ft(r,t,()=>r.complete(),e),i=>ft(r,t,()=>r.error(i),e)))})}function er(t,e=0){return se((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function nI(t,e){return Ve(t).pipe(er(e),Xn(e))}function rI(t,e){return Ve(t).pipe(er(e),Xn(e))}function iI(t,e){return new re(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function oI(t,e){return new re(n=>{let r;return ft(n,e,()=>{r=t[Tc](),ft(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>K(r?.return)&&r.return()})}function Sc(t,e){if(!t)throw new Error("Iterable cannot be null");return new re(n=>{ft(n,e,()=>{let r=t[Symbol.asyncIterator]();ft(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function sI(t,e){return Sc(bc(t),e)}function aI(t,e){if(t!=null){if(Ic(t))return nI(t,e);if(vc(t))return iI(t,e);if(_c(t))return rI(t,e);if(wc(t))return Sc(t,e);if(Dc(t))return oI(t,e);if(Cc(t))return sI(t,e)}throw Ec(t)}function Ae(t,e){return e?aI(t,e):Ve(t)}function Q(...t){let e=Jn(t);return Ae(t,e)}function Ui(t,e){let n=K(t)?t:()=>t,r=i=>i.error(n());return new re(e?i=>e.schedule(r,0,i):r)}function Vh(t){return!!t&&(t instanceof re||K(t.lift)&&K(t.subscribe))}var Cn=Ni(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function oe(t,e){return se((n,r)=>{let i=0;n.subscribe(ae(r,o=>{r.next(t.call(e,o,i++))}))})}var{isArray:TR}=Array;function DR(t,e){return TR(e)?t(...e):t(e)}function cI(t){return oe(e=>DR(t,e))}var{isArray:bR}=Array,{getPrototypeOf:CR,prototype:SR,keys:AR}=Object;function uI(t){if(t.length===1){let e=t[0];if(bR(e))return{args:e,keys:null};if(RR(e)){let n=AR(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function RR(t){return t&&typeof t=="object"&&CR(t)===SR}function lI(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function Ac(...t){let e=Jn(t),n=Y_(t),{args:r,keys:i}=uI(t);if(r.length===0)return Ae([],e);let o=new re(NR(r,e,i?s=>lI(i,s):It));return n?o.pipe(cI(n)):o}function NR(t,e,n=It){return r=>{dI(e,()=>{let{length:i}=t,o=new Array(i),s=i,c=i;for(let u=0;u<i;u++)dI(e,()=>{let l=Ae(t[u],e),f=!1;l.subscribe(ae(r,p=>{o[u]=p,f||(f=!0,c--),c||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function dI(t,e,n){t?ft(n,t,e):e()}function hI(t,e,n,r,i,o,s,c){let u=[],l=0,f=0,p=!1,m=()=>{p&&!u.length&&!l&&e.complete()},y=R=>l<r?A(R):u.push(R),A=R=>{o&&e.next(R),l++;let P=!1;Ve(n(R,f++)).subscribe(ae(e,V=>{i?.(V),o?y(V):e.next(V)},()=>{P=!0},void 0,()=>{if(P)try{for(l--;u.length&&l<r;){let V=u.shift();s?ft(e,s,()=>A(V)):A(V)}m()}catch(V){e.error(V)}}))};return t.subscribe(ae(e,y,()=>{p=!0,m()})),()=>{c?.()}}function Fe(t,e,n=1/0){return K(e)?Fe((r,i)=>oe((o,s)=>e(r,o,i,s))(Ve(t(r,i))),n):(typeof e=="number"&&(n=e),se((r,i)=>hI(r,i,t,n)))}function fI(t=1/0){return Fe(It,t)}function pI(){return fI(1)}function Bi(...t){return pI()(Ae(t,Jn(t)))}function Rc(t){return new re(e=>{Ve(t()).subscribe(e)})}function St(t,e){return se((n,r)=>{let i=0;n.subscribe(ae(r,o=>t.call(e,o,i++)&&r.next(o)))})}function tr(t){return se((e,n)=>{let r=null,i=!1,o;r=e.subscribe(ae(n,void 0,void 0,s=>{o=Ve(t(s,tr(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function gI(t,e,n,r,i){return(o,s)=>{let c=n,u=e,l=0;o.subscribe(ae(s,f=>{let p=l++;u=c?t(u,f,p):(c=!0,f),r&&s.next(u)},i&&(()=>{c&&s.next(u),s.complete()})))}}function $i(t,e){return K(e)?Fe(t,e,1):Fe(t,1)}function nr(t){return se((e,n)=>{let r=!1;e.subscribe(ae(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function Sn(t){return t<=0?()=>ht:se((e,n)=>{let r=0;e.subscribe(ae(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function Nc(t=MR){return se((e,n)=>{let r=!1;e.subscribe(ae(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function MR(){return new Cn}function ps(t){return se((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function An(t,e){let n=arguments.length>=2;return r=>r.pipe(t?St((i,o)=>t(i,o,r)):It,Sn(1),n?nr(e):Nc(()=>new Cn))}function Hi(t){return t<=0?()=>ht:se((e,n)=>{let r=[];e.subscribe(ae(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function jh(t,e){let n=arguments.length>=2;return r=>r.pipe(t?St((i,o)=>t(i,o,r)):It,Hi(1),n?nr(e):Nc(()=>new Cn))}function Mc(t,e){return se(gI(t,e,arguments.length>=2,!0))}function Pc(...t){let e=Jn(t);return se((n,r)=>{(e?Bi(t,n,e):Bi(t,n)).subscribe(r)})}function $t(t,e){return se((n,r)=>{let i=null,o=0,s=!1,c=()=>s&&!i&&r.complete();n.subscribe(ae(r,u=>{i?.unsubscribe();let l=0,f=o++;Ve(t(u,f)).subscribe(i=ae(r,p=>r.next(e?e(u,p,f,l++):p),()=>{i=null,c()}))},()=>{s=!0,c()}))})}function Uh(t){return se((e,n)=>{Ve(t).subscribe(ae(n,()=>n.complete(),hs)),!n.closed&&e.subscribe(n)})}function Ge(t,e,n){let r=K(t)||e||n?{next:t,error:e,complete:n}:t;return r?se((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let c=!0;i.subscribe(ae(o,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),o.next(u)},()=>{var u;c=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var l;c=!1,(l=r.error)===null||l===void 0||l.call(r,u),o.error(u)},()=>{var u,l;c&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):It}var U=class extends Error{code;constructor(e,n){super(kR(e,n)),this.code=e}};function PR(t){return`NG0${Math.abs(t)}`}function kR(t,e){return`${PR(t)}${e?": "+e:""}`}var XI=Symbol("InputSignalNode#UNSET"),xR=ye(F({},Dh),{transformFn:void 0,applyValueToInputSignal(t,e){Th(t,e)}});function ew(t,e){let n=Object.create(xR);n.value=t,n.transformFn=e?.transform;function r(){if(yh(n),n.value===XI){let i=null;throw new U(-950,i)}return n.value}return r[Ri]=n,r}function As(t){return{toString:t}.toString()}var kc="__parameters__";function OR(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function FR(t,e,n){return As(()=>{let r=OR(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return c.annotation=s,c;function c(u,l,f){let p=u.hasOwnProperty(kc)?u[kc]:Object.defineProperty(u,kc,{value:[]})[kc];for(;p.length<=f;)p.push(null);return(p[f]=p[f]||[]).push(s),u}}return i.prototype.ngMetadataName=t,i.annotationCls=i,i})}function we(t){for(let e in t)if(t[e]===we)return e;throw Error("Could not find renamed property on target object.")}function wt(t){if(typeof t=="string")return t;if(Array.isArray(t))return`[${t.map(wt).join(", ")}]`;if(t==null)return""+t;let e=t.overriddenName||t.name;if(e)return`${e}`;let n=t.toString();if(n==null)return""+n;let r=n.indexOf(`
`);return r>=0?n.slice(0,r):n}function mI(t,e){return t?e?`${t} ${e}`:t:e||""}var LR=we({__forward_ref__:we});function tw(t){return t.__forward_ref__=tw,t.toString=function(){return wt(this())},t}function Rt(t){return nw(t)?t():t}function nw(t){return typeof t=="function"&&t.hasOwnProperty(LR)&&t.__forward_ref__===tw}function B(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function ou(t){return{providers:t.providers||[],imports:t.imports||[]}}function su(t){return yI(t,iw)||yI(t,ow)}function rw(t){return su(t)!==null}function yI(t,e){return t.hasOwnProperty(e)?t[e]:null}function VR(t){let e=t&&(t[iw]||t[ow]);return e||null}function vI(t){return t&&(t.hasOwnProperty(_I)||t.hasOwnProperty(jR))?t[_I]:null}var iw=we({\u0275prov:we}),_I=we({\u0275inj:we}),ow=we({ngInjectableDef:we}),jR=we({ngInjectorDef:we}),j=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,n){this._desc=e,this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=B({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function sw(t){return t&&!!t.\u0275providers}var UR=we({\u0275cmp:we}),BR=we({\u0275dir:we}),$R=we({\u0275pipe:we}),HR=we({\u0275mod:we}),jc=we({\u0275fac:we}),vs=we({__NG_ELEMENT_ID__:we}),II=we({__NG_ENV_ID__:we});function qR(t){return typeof t=="string"?t:t==null?"":String(t)}function zR(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():qR(t)}function aw(t,e){throw new U(-200,t)}function Rf(t,e){throw new U(-201,!1)}var J=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(J||{}),Qh;function cw(){return Qh}function At(t){let e=Qh;return Qh=t,e}function uw(t,e,n){let r=su(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&J.Optional)return null;if(e!==void 0)return e;Rf(t,"Injector")}var WR={},Fr=WR,Yh="__NG_DI_FLAG__",Uc=class{injector;constructor(e){this.injector=e}retrieve(e,n){let r=n;return this.injector.get(e,r.optional?cc:Fr,r)}},Bc="ngTempTokenPath",GR="ngTokenPath",KR=/\n/gm,QR="\u0275",wI="__source";function YR(t,e=J.Default){if(ds()===void 0)throw new U(-203,!1);if(ds()===null)return uw(t,void 0,e);{let n=ds(),r;return n instanceof Uc?r=n.injector:r=n,r.get(t,e&J.Optional?null:void 0,e)}}function ee(t,e=J.Default){return(cw()||YR)(Rt(t),e)}function k(t,e=J.Default){return ee(t,au(e))}function au(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Zh(t){let e=[];for(let n=0;n<t.length;n++){let r=Rt(t[n]);if(Array.isArray(r)){if(r.length===0)throw new U(900,!1);let i,o=J.Default;for(let s=0;s<r.length;s++){let c=r[s],u=JR(c);typeof u=="number"?u===-1?i=c.token:o|=u:i=c}e.push(ee(i,o))}else e.push(ee(r))}return e}function ZR(t,e){return t[Yh]=e,t.prototype[Yh]=e,t}function JR(t){return t[Yh]}function XR(t,e,n,r){let i=t[Bc];throw e[wI]&&i.unshift(e[wI]),t.message=eN(`
`+t.message,i,n,r),t[GR]=i,t[Bc]=null,t}function eN(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==QR?t.slice(2):t;let i=wt(e);if(Array.isArray(e))i=e.map(wt).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let c=e[s];o.push(s+":"+(typeof c=="string"?JSON.stringify(c):wt(c)))}i=`{${o.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(KR,`
  `)}`}var ct=ZR(FR("Optional"),8);function Ki(t,e){let n=t.hasOwnProperty(jc);return n?t[jc]:null}function Nf(t,e){t.forEach(n=>Array.isArray(n)?Nf(n,e):e(n))}function lw(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function $c(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}var Qi={},Xt=[],_s=new j(""),dw=new j("",-1),hw=new j(""),Hc=class{get(e,n=Fr){if(n===Fr){let r=new Error(`NullInjectorError: No provider for ${wt(e)}!`);throw r.name="NullInjectorError",r}return n}};function fw(t,e){let n=t[HR]||null;if(!n&&e===!0)throw new Error(`Type ${wt(t)} does not have '\u0275mod' property.`);return n}function Yi(t){return t[UR]||null}function tN(t){return t[BR]||null}function nN(t){return t[$R]||null}function Wt(t){return{\u0275providers:t}}function rN(...t){return{\u0275providers:pw(!0,t),\u0275fromNgModule:!0}}function pw(t,...e){let n=[],r=new Set,i,o=s=>{n.push(s)};return Nf(e,s=>{let c=s;Jh(c,o,[],r)&&(i||=[],i.push(c))}),i!==void 0&&gw(i,o),n}function gw(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];Mf(i,o=>{e(o,r)})}}function Jh(t,e,n,r){if(t=Rt(t),!t)return!1;let i=null,o=vI(t),s=!o&&Yi(t);if(!o&&!s){let u=t.ngModule;if(o=vI(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=t}let c=r.has(i);if(s){if(c)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of u)Jh(l,e,n,r)}}else if(o){if(o.imports!=null&&!c){r.add(i);let l;try{Nf(o.imports,f=>{Jh(f,e,n,r)&&(l||=[],l.push(f))})}finally{}l!==void 0&&gw(l,e)}if(!c){let l=Ki(i)||(()=>new i);e({provide:i,useFactory:l,deps:Xt},i),e({provide:hw,useValue:i,multi:!0},i),e({provide:_s,useValue:()=>ee(i),multi:!0},i)}let u=o.providers;if(u!=null&&!c){let l=t;Mf(u,f=>{e(f,l)})}}else return!1;return i!==t&&t.providers!==void 0}function Mf(t,e){for(let n of t)sw(n)&&(n=n.\u0275providers),Array.isArray(n)?Mf(n,e):e(n)}var iN=we({provide:String,useValue:we});function mw(t){return t!==null&&typeof t=="object"&&iN in t}function oN(t){return!!(t&&t.useExisting)}function sN(t){return!!(t&&t.useFactory)}function Xh(t){return typeof t=="function"}var cu=new j(""),xc={},EI={},Bh;function Pf(){return Bh===void 0&&(Bh=new Hc),Bh}var gt=class{},Is=class extends gt{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,tf(e,s=>this.processProvider(s)),this.records.set(dw,qi(void 0,this)),i.has("environment")&&this.records.set(gt,qi(void 0,this));let o=this.records.get(cu);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(hw,Xt,J.Self))}retrieve(e,n){let r=n;return this.get(e,r.optional?cc:Fr,r)}destroy(){ms(this),this._destroyed=!0;let e=me(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),me(e)}}onDestroy(e){return ms(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){ms(this);let n=bn(this),r=At(void 0),i;try{return e()}finally{bn(n),At(r)}}get(e,n=Fr,r=J.Default){if(ms(this),e.hasOwnProperty(II))return e[II](this);r=au(r);let i,o=bn(this),s=At(void 0);try{if(!(r&J.SkipSelf)){let u=this.records.get(e);if(u===void 0){let l=hN(e)&&su(e);l&&this.injectableDefInScope(l)?u=qi(ef(e),xc):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u,r)}let c=r&J.Self?Pf():this.parent;return n=r&J.Optional&&n===Fr?null:n,c.get(e,n)}catch(c){if(c.name==="NullInjectorError"){if((c[Bc]=c[Bc]||[]).unshift(wt(e)),o)throw c;return XR(c,e,"R3InjectorError",this.source)}else throw c}finally{At(s),bn(o)}}resolveInjectorInitializers(){let e=me(null),n=bn(this),r=At(void 0),i;try{let o=this.get(_s,Xt,J.Self);for(let s of o)s()}finally{bn(n),At(r),me(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(wt(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=Rt(e);let n=Xh(e)?e:Rt(e&&e.provide),r=cN(e);if(!Xh(e)&&e.multi===!0){let i=this.records.get(n);i||(i=qi(void 0,xc,!0),i.factory=()=>Zh(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n,r){let i=me(null);try{return n.value===EI?aw(wt(e)):n.value===xc&&(n.value=EI,n.value=n.factory(void 0,r)),typeof n.value=="object"&&n.value&&dN(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{me(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=Rt(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function ef(t){let e=su(t),n=e!==null?e.factory:Ki(t);if(n!==null)return n;if(t instanceof j)throw new U(204,!1);if(t instanceof Function)return aN(t);throw new U(204,!1)}function aN(t){if(t.length>0)throw new U(204,!1);let n=VR(t);return n!==null?()=>n.factory(t):()=>new t}function cN(t){if(mw(t))return qi(void 0,t.useValue);{let e=uN(t);return qi(e,xc)}}function uN(t,e,n){let r;if(Xh(t)){let i=Rt(t);return Ki(i)||ef(i)}else if(mw(t))r=()=>Rt(t.useValue);else if(sN(t))r=()=>t.useFactory(...Zh(t.deps||[]));else if(oN(t))r=(i,o)=>ee(Rt(t.useExisting),o!==void 0&&o&J.Optional?J.Optional:void 0);else{let i=Rt(t&&(t.useClass||t.provide));if(lN(t))r=()=>new i(...Zh(t.deps));else return Ki(i)||ef(i)}return r}function ms(t){if(t.destroyed)throw new U(205,!1)}function qi(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function lN(t){return!!t.deps}function dN(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function hN(t){return typeof t=="function"||typeof t=="object"&&t instanceof j}function tf(t,e){for(let n of t)Array.isArray(n)?tf(n,e):n&&sw(n)?tf(n.\u0275providers,e):e(n)}function ut(t,e){let n;t instanceof Is?(ms(t),n=t):n=new Uc(t);let r,i=bn(n),o=At(void 0);try{return e()}finally{bn(i),At(o)}}function yw(){return cw()!==void 0||ds()!=null}function vw(t){if(!yw())throw new U(-203,!1)}function fN(t){return typeof t=="function"}var Rn=0,le=1,X=2,at=3,qt=4,Gt=5,qc=6,TI=7,zt=8,ws=9,ir=10,tn=11,Es=12,DI=13,Rs=14,nn=15,Ts=16,zi=17,uu=18,lu=19,_w=20,rr=21,$h=22,zc=23,Nt=24,Hh=25,or=26,Iw=1;var jr=7,Wc=8,Gc=9,Mt=10;function Lr(t){return Array.isArray(t)&&typeof t[Iw]=="object"}function Nn(t){return Array.isArray(t)&&t[Iw]===!0}function ww(t){return(t.flags&4)!==0}function du(t){return t.componentOffset>-1}function pN(t){return(t.flags&1)===1}function qr(t){return!!t.template}function Kc(t){return(t[X]&512)!==0}function Xi(t){return(t[X]&256)===256}var nf=class{previousValue;currentValue;firstChange;constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function Ew(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}var kf=(()=>{let t=()=>Tw;return t.ngInherit=!0,t})();function Tw(t){return t.type.prototype.ngOnChanges&&(t.setInput=mN),gN}function gN(){let t=bw(this),e=t?.current;if(e){let n=t.previous;if(n===Qi)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function mN(t,e,n,r,i){let o=this.declaredInputs[r],s=bw(t)||yN(t,{previous:Qi,current:null}),c=s.current||(s.current={}),u=s.previous,l=u[o];c[o]=new nf(l&&l.currentValue,n,u===Qi),Ew(t,e,i,n)}var Dw="__ngSimpleChanges__";function bw(t){return t[Dw]||null}function yN(t,e){return t[Dw]=e}var bI=null;var Te=function(t,e=null,n){bI?.(t,e,n)},vN="svg",_N="math";function sr(t){for(;Array.isArray(t);)t=t[Rn];return t}function zr(t,e){return sr(e[t.index])}function IN(t,e){return t.data[e]}function Ur(t,e){let n=e[t];return Lr(n)?n:n[Rn]}function xf(t){return(t[X]&128)===128}function wN(t){return Nn(t[at])}function CI(t,e){return e==null?null:t[e]}function Cw(t){t[zi]=0}function Sw(t){t[X]&1024||(t[X]|=1024,xf(t)&&fu(t))}function hu(t){return!!(t[X]&9216||t[Nt]?.dirty)}function rf(t){t[ir].changeDetectionScheduler?.notify(8),t[X]&64&&(t[X]|=1024),hu(t)&&fu(t)}function fu(t){t[ir].changeDetectionScheduler?.notify(0);let e=Br(t);for(;e!==null&&!(e[X]&8192||(e[X]|=8192,!xf(e)));)e=Br(e)}function Aw(t,e){if(Xi(t))throw new U(911,!1);t[rr]===null&&(t[rr]=[]),t[rr].push(e)}function EN(t,e){if(t[rr]===null)return;let n=t[rr].indexOf(e);n!==-1&&t[rr].splice(n,1)}function Br(t){let e=t[at];return Nn(e)?e[at]:e}var ve={lFrame:Ow(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var of=!1;function TN(){return ve.lFrame.elementDepthCount}function DN(){ve.lFrame.elementDepthCount++}function bN(){ve.lFrame.elementDepthCount--}function CN(){return ve.bindingsEnabled}function SN(){return ve.skipHydrationRootTNode!==null}function AN(t){return ve.skipHydrationRootTNode===t}function RN(){ve.skipHydrationRootTNode=null}function rn(){return ve.lFrame.lView}function Of(){return ve.lFrame.tView}function Wr(){let t=Rw();for(;t!==null&&t.type===64;)t=t.parent;return t}function Rw(){return ve.lFrame.currentTNode}function NN(){let t=ve.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function pu(t,e){let n=ve.lFrame;n.currentTNode=t,n.isParent=e}function Nw(){return ve.lFrame.isParent}function MN(){ve.lFrame.isParent=!1}function Mw(){return of}function SI(t){let e=of;return of=t,e}function PN(t){return ve.lFrame.bindingIndex=t}function kN(){return ve.lFrame.inI18n}function xN(t,e){let n=ve.lFrame;n.bindingIndex=n.bindingRootIndex=t,sf(e)}function ON(){return ve.lFrame.currentDirectiveIndex}function sf(t){ve.lFrame.currentDirectiveIndex=t}function Pw(t){ve.lFrame.currentQueryIndex=t}function FN(t){let e=t[le];return e.type===2?e.declTNode:e.type===1?t[Gt]:null}function kw(t,e,n){if(n&J.SkipSelf){let i=e,o=t;for(;i=i.parent,i===null&&!(n&J.Host);)if(i=FN(o),i===null||(o=o[Rs],i.type&10))break;if(i===null)return!1;e=i,t=o}let r=ve.lFrame=xw();return r.currentTNode=e,r.lView=t,!0}function Ff(t){let e=xw(),n=t[le];ve.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function xw(){let t=ve.lFrame,e=t===null?null:t.child;return e===null?Ow(t):e}function Ow(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function Fw(){let t=ve.lFrame;return ve.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var Lw=Fw;function Lf(){let t=Fw();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function LN(){return ve.lFrame.selectedIndex}function $r(t){ve.lFrame.selectedIndex=t}function VN(){return ve.lFrame.currentNamespace}var Vw=!0;function jw(){return Vw}function Uw(t){Vw=t}function jN(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=Tw(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function UN(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:c,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:f}=o;s&&(t.contentHooks??=[]).push(-n,s),c&&((t.contentHooks??=[]).push(n,c),(t.contentCheckHooks??=[]).push(n,c)),u&&(t.viewHooks??=[]).push(-n,u),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),f!=null&&(t.destroyHooks??=[]).push(n,f)}}function Oc(t,e,n){Bw(t,e,3,n)}function Fc(t,e,n,r){(t[X]&3)===n&&Bw(t,e,n,r)}function qh(t,e){let n=t[X];(n&3)===e&&(n&=16383,n+=1,t[X]=n)}function Bw(t,e,n,r){let i=r!==void 0?t[zi]&65535:0,o=r??-1,s=e.length-1,c=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(c=e[u],r!=null&&c>=r)break}else e[u]<0&&(t[zi]+=65536),(c<o||o==-1)&&(BN(t,n,e,u),t[zi]=(t[zi]&4294901760)+u+2),u++}function AI(t,e){Te(4,t,e);let n=me(null);try{e.call(t)}finally{me(n),Te(5,t,e)}}function BN(t,e,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],c=t[s];i?t[X]>>14<t[zi]>>16&&(t[X]&3)===e&&(t[X]+=16384,AI(c,o)):AI(c,o)}var Gi=-1,Ds=class{factory;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,n,r){this.factory=e,this.canSeeViewProviders=n,this.injectImpl=r}};function $N(t){return(t.flags&8)!==0}function HN(t){return(t.flags&16)!==0}function qN(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],c=n[r++];t.setAttribute(e,s,c,o)}else{let o=i,s=n[++r];WN(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}return r}function zN(t){return t===3||t===4||t===6}function WN(t){return t.charCodeAt(0)===64}function $w(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?RI(t,n,i,null,e[++r]):RI(t,n,i,null,null))}}return t}function RI(t,e,n,r,i){let o=0,s=t.length;if(e===-1)s=-1;else for(;o<t.length;){let c=t[o++];if(typeof c=="number"){if(c===e){s=-1;break}else if(c>e){s=o-1;break}}}for(;o<t.length;){let c=t[o];if(typeof c=="number")break;if(c===n){i!==null&&(t[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),i!==null&&t.splice(o++,0,i)}function Hw(t){return t!==Gi}function Qc(t){return t&32767}function GN(t){return t>>16}function Yc(t,e){let n=GN(t),r=e;for(;n>0;)r=r[Rs],n--;return r}var af=!0;function NI(t){let e=af;return af=t,e}var KN=256,qw=KN-1,zw=5,QN=0,en={};function YN(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(vs)&&(r=n[vs]),r==null&&(r=n[vs]=QN++);let i=r&qw,o=1<<i;e.data[t+(i>>zw)]|=o}function Ww(t,e){let n=Gw(t,e);if(n!==-1)return n;let r=e[le];r.firstCreatePass&&(t.injectorIndex=e.length,zh(r.data,t),zh(e,null),zh(r.blueprint,null));let i=Vf(t,e),o=t.injectorIndex;if(Hw(i)){let s=Qc(i),c=Yc(i,e),u=c[le].data;for(let l=0;l<8;l++)e[o+l]=c[s+l]|u[s+l]}return e[o+8]=i,o}function zh(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Gw(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function Vf(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=Jw(i),r===null)return Gi;if(n++,i=i[Rs],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return Gi}function ZN(t,e,n){YN(t,e,n)}function Kw(t,e,n){if(n&J.Optional||t!==void 0)return t;Rf(e,"NodeInjector")}function Qw(t,e,n,r){if(n&J.Optional&&r===void 0&&(r=null),(n&(J.Self|J.Host))===0){let i=t[ws],o=At(void 0);try{return i?i.get(e,r,n&J.Optional):uw(e,r,n&J.Optional)}finally{At(o)}}return Kw(r,e,n)}function Yw(t,e,n,r=J.Default,i){if(t!==null){if(e[X]&2048&&!(r&J.Self)){let s=nM(t,e,n,r,en);if(s!==en)return s}let o=Zw(t,e,n,r,en);if(o!==en)return o}return Qw(e,n,r,i)}function Zw(t,e,n,r,i){let o=eM(n);if(typeof o=="function"){if(!kw(e,t,r))return r&J.Host?Kw(i,n,r):Qw(e,n,r,i);try{let s;if(s=o(r),s==null&&!(r&J.Optional))Rf(n);else return s}finally{Lw()}}else if(typeof o=="number"){let s=null,c=Gw(t,e),u=Gi,l=r&J.Host?e[nn][Gt]:null;for((c===-1||r&J.SkipSelf)&&(u=c===-1?Vf(t,e):e[c+8],u===Gi||!PI(r,!1)?c=-1:(s=e[le],c=Qc(u),e=Yc(u,e)));c!==-1;){let f=e[le];if(MI(o,c,f.data)){let p=JN(c,e,n,s,r,l);if(p!==en)return p}u=e[c+8],u!==Gi&&PI(r,e[le].data[c+8]===l)&&MI(o,c,e)?(s=f,c=Qc(u),e=Yc(u,e)):c=-1}}return i}function JN(t,e,n,r,i,o){let s=e[le],c=s.data[t+8],u=r==null?du(c)&&af:r!=s&&(c.type&3)!==0,l=i&J.Host&&o===c,f=XN(c,s,n,u,l);return f!==null?cf(e,s,f,c,i):en}function XN(t,e,n,r,i){let o=t.providerIndexes,s=e.data,c=o&1048575,u=t.directiveStart,l=t.directiveEnd,f=o>>20,p=r?c:c+f,m=i?c+f:l;for(let y=p;y<m;y++){let A=s[y];if(y<u&&n===A||y>=u&&A.type===n)return y}if(i){let y=s[u];if(y&&qr(y)&&y.type===n)return u}return null}function cf(t,e,n,r,i){let o=t[n],s=e.data;if(o instanceof Ds){let c=o;c.resolving&&aw(zR(s[n]));let u=NI(c.canSeeViewProviders);c.resolving=!0;let l,f=c.injectImpl?At(c.injectImpl):null,p=kw(t,r,J.Default);try{o=t[n]=c.factory(void 0,i,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&jN(n,s[n],e)}finally{f!==null&&At(f),NI(u),c.resolving=!1,Lw()}}return o}function eM(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(vs)?t[vs]:void 0;return typeof e=="number"?e>=0?e&qw:tM:e}function MI(t,e,n){let r=1<<t;return!!(n[e+(t>>zw)]&r)}function PI(t,e){return!(t&J.Self)&&!(t&J.Host&&e)}var Vr=class{_tNode;_lView;constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return Yw(this._tNode,this._lView,e,au(r),n)}};function tM(){return new Vr(Wr(),rn())}function jf(t){return As(()=>{let e=t.prototype.constructor,n=e[jc]||uf(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let o=i[jc]||uf(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function uf(t){return nw(t)?()=>{let e=uf(Rt(t));return e&&e()}:Ki(t)}function nM(t,e,n,r,i){let o=t,s=e;for(;o!==null&&s!==null&&s[X]&2048&&!Kc(s);){let c=Zw(o,s,n,r|J.Self,en);if(c!==en)return c;let u=o.parent;if(!u){let l=s[_w];if(l){let f=l.get(n,en,r);if(f!==en)return f}u=Jw(s),s=s[Rs]}o=u}return i}function Jw(t){let e=t[le],n=e.type;return n===2?e.declTNode:n===1?t[Gt]:null}function kI(t,e=null,n=null,r){let i=Xw(t,e,n,r);return i.resolveInjectorInitializers(),i}function Xw(t,e=null,n=null,r,i=new Set){let o=[n||Xt,rN(t)];return r=r||(typeof t=="object"?void 0:wt(t)),new Is(o,e||Pf(),r||null,i)}var je=class t{static THROW_IF_NOT_FOUND=Fr;static NULL=new Hc;static create(e,n){if(Array.isArray(e))return kI({name:""},n,e,"");{let r=e.name??"";return kI({name:r},e.parent,e.providers,r)}}static \u0275prov=B({token:t,providedIn:"any",factory:()=>ee(dw)});static __NG_ELEMENT_ID__=-1};var rM=new j("");rM.__NG_ELEMENT_ID__=t=>{let e=Wr();if(e===null)throw new U(204,!1);if(e.type&2)return e.value;if(t&J.Optional)return null;throw new U(204,!1)};var eE=!1,Ns=(()=>{class t{static __NG_ELEMENT_ID__=iM;static __NG_ENV_ID__=n=>n}return t})(),lf=class extends Ns{_lView;constructor(e){super(),this._lView=e}onDestroy(e){let n=this._lView;return Xi(n)?(e(),()=>{}):(Aw(n,e),()=>EN(n,e))}};function iM(){return new lf(rn())}var Zi=class{},Uf=new j("",{providedIn:"root",factory:()=>!1});var tE=new j(""),nE=new j(""),Gr=(()=>{class t{taskId=0;pendingTasks=new Set;get _hasPendingTasks(){return this.hasPendingTasks.value}hasPendingTasks=new We(!1);add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}has(n){return this.pendingTasks.has(n)}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static \u0275prov=B({token:t,providedIn:"root",factory:()=>new t})}return t})(),gu=(()=>{class t{internalPendingTasks=k(Gr);scheduler=k(Zi);add(){let n=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(n)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(n))}}run(n){return v(this,null,function*(){let r=this.add();try{return yield n()}finally{r()}})}static \u0275prov=B({token:t,providedIn:"root",factory:()=>new t})}return t})(),df=class extends ze{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,yw()&&(this.destroyRef=k(Ns,{optional:!0})??void 0,this.pendingTasks=k(Gr,{optional:!0})??void 0)}emit(e){let n=me(null);try{super.next(e)}finally{me(n)}}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let c=super.subscribe({next:i,error:o,complete:s});return e instanceof Ce&&e.add(c),c}wrapInTimeout(e){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(n)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},pt=df;function Zc(...t){}function rE(t){let e,n;function r(){t=Zc;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{t(),r()})),()=>r()}function xI(t){return queueMicrotask(()=>t()),()=>{t=Zc}}var Bf="isAngularZone",Jc=Bf+"_ID",oM=0,he=class t{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new pt(!1);onMicrotaskEmpty=new pt(!1);onStable=new pt(!1);onError=new pt(!1);constructor(e){let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=eE}=e;if(typeof Zone>"u")throw new U(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,cM(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Bf)===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new U(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new U(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,sM,Zc,Zc);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},sM={};function $f(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function aM(t){if(t.isCheckStableRunning||t.callbackScheduled)return;t.callbackScheduled=!0;function e(){rE(()=>{t.callbackScheduled=!1,hf(t),t.isCheckStableRunning=!0,$f(t),t.isCheckStableRunning=!1})}t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),hf(t)}function cM(t){let e=()=>{aM(t)},n=oM++;t._inner=t._inner.fork({name:"angular",properties:{[Bf]:!0,[Jc]:n,[Jc+n]:!0},onInvokeTask:(r,i,o,s,c,u)=>{if(uM(u))return r.invokeTask(o,s,c,u);try{return OI(t),r.invokeTask(o,s,c,u)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),FI(t)}},onInvoke:(r,i,o,s,c,u,l)=>{try{return OI(t),r.invoke(o,s,c,u,l)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!lM(u)&&e(),FI(t)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,hf(t),$f(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function hf(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function OI(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function FI(t){t._nesting--,$f(t)}var ff=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new pt;onMicrotaskEmpty=new pt;onStable=new pt;onError=new pt;run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function uM(t){return iE(t,"__ignore_ng_zone__")}function lM(t){return iE(t,"__scheduler_tick__")}function iE(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var ar=class{_console=console;handleError(e){this._console.error("ERROR",e)}},dM=new j("",{providedIn:"root",factory:()=>{let t=k(he),e=k(ar);return n=>t.runOutsideAngular(()=>e.handleError(n))}});function LI(t,e){return ew(t,e)}function hM(t){return ew(XI,t)}var oE=(LI.required=hM,LI);function fM(){return Hf(Wr(),rn())}function Hf(t,e){return new sE(zr(t,e))}var sE=(()=>{class t{nativeElement;constructor(n){this.nativeElement=n}static __NG_ELEMENT_ID__=fM}return t})();function aE(t){return(t.flags&128)===128}var cE=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(cE||{}),uE=new Map,pM=0;function gM(){return pM++}function mM(t){uE.set(t[lu],t)}function pf(t){uE.delete(t[lu])}var VI="__ngContext__";function mu(t,e){Lr(e)?(t[VI]=e[lu],mM(e)):t[VI]=e}function lE(t){return hE(t[Es])}function dE(t){return hE(t[qt])}function hE(t){for(;t!==null&&!Nn(t);)t=t[qt];return t}var gf;function fE(t){gf=t}function yM(){if(gf!==void 0)return gf;if(typeof document<"u")return document;throw new U(210,!1)}var qf=new j("",{providedIn:"root",factory:()=>vM}),vM="ng",zf=new j(""),sn=new j("",{providedIn:"platform",factory:()=>"unknown"});var Wf=new j("",{providedIn:"root",factory:()=>yM().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var _M="h",IM="b";var pE=!1,wM=new j("",{providedIn:"root",factory:()=>pE});var gE=function(t){return t[t.CHANGE_DETECTION=0]="CHANGE_DETECTION",t[t.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",t}(gE||{}),yu=new j(""),jI=new Set;function Gf(t){jI.has(t)||(jI.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}var EM=(()=>{class t{impl=null;execute(){this.impl?.execute()}static \u0275prov=B({token:t,providedIn:"root",factory:()=>new t})}return t})();var TM=()=>null;function mE(t,e,n=!1){return TM(t,e,n)}function yE(t,e){let n=t.contentQueries;if(n!==null){let r=me(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let c=t.data[s];Pw(o),c.contentQueries(2,e[s],s)}}}finally{me(r)}}}function mf(t,e,n){Pw(0);let r=me(null);try{e(t,n)}finally{me(r)}}function vE(t,e,n){if(ww(e)){let r=me(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let c=t.data[s];if(c.contentQueries){let u=n[s];c.contentQueries(1,u,s)}}}finally{me(r)}}}var on=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(on||{});function _E(t){return t instanceof Function?t():t}function DM(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}var IE="ng-template";function bM(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&DM(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(Kf(t))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===n)return!0}return!1}function Kf(t){return t.type===4&&t.value!==IE}function CM(t,e,n){let r=t.type===4&&!n?IE:t.value;return e===r}function SM(t,e,n){let r=4,i=t.attrs,o=i!==null?NM(i):0,s=!1;for(let c=0;c<e.length;c++){let u=e[c];if(typeof u=="number"){if(!s&&!Ht(r)&&!Ht(u))return!1;if(s&&Ht(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!CM(t,u,n)||u===""&&e.length===1){if(Ht(r))return!1;s=!0}}else if(r&8){if(i===null||!bM(t,i,u,n)){if(Ht(r))return!1;s=!0}}else{let l=e[++c],f=AM(u,i,Kf(t),n);if(f===-1){if(Ht(r))return!1;s=!0;continue}if(l!==""){let p;if(f>o?p="":p=i[f+1].toLowerCase(),r&2&&l!==p){if(Ht(r))return!1;s=!0}}}}return Ht(r)||s}function Ht(t){return(t&1)===0}function AM(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){let s=e[i];if(s===t)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let c=e[++i];for(;typeof c=="string";)c=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return MM(e,t)}function RM(t,e,n=!1){for(let r=0;r<e.length;r++)if(SM(t,e[r],n))return!0;return!1}function NM(t){for(let e=0;e<t.length;e++){let n=t[e];if(zN(n))return e}return t.length}function MM(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function UI(t,e){return t?":not("+e.trim()+")":e}function PM(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(r&2){let c=t[++n];i+="["+s+(c.length>0?'="'+c+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!Ht(s)&&(e+=UI(o,i),i=""),r=s,o=o||!Ht(r);n++}return i!==""&&(e+=UI(o,i)),e}function kM(t){return t.map(PM).join(",")}function xM(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let o=t[r];if(typeof o=="string")i===2?o!==""&&e.push(o,t[++r]):i===8&&n.push(o);else{if(!Ht(i))break;i=o}r++}return n.length&&e.push(1,...n),e}var wE={};function OM(t,e){return t.createText(e)}function EE(t,e,n){return t.createElement(e,n)}function Xc(t,e,n,r,i){t.insertBefore(e,n,r,i)}function TE(t,e,n){t.appendChild(e,n)}function BI(t,e,n,r,i){r!==null?Xc(t,e,n,r,i):TE(t,e,n)}function FM(t,e,n){t.removeChild(null,e,n)}function LM(t,e,n){t.setAttribute(e,"style",n)}function VM(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function DE(t,e,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&qN(t,e,r),i!==null&&VM(t,e,i),o!==null&&LM(t,e,o)}function bE(t,e,n,r,i,o,s,c,u,l,f){let p=or+r,m=p+i,y=jM(p,m),A=typeof l=="function"?l():l;return y[le]={type:t,blueprint:y,template:n,queries:null,viewQuery:c,declTNode:e,data:y.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:A,incompleteFirstPass:!1,ssrId:f}}function jM(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:wE);return n}function UM(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=bE(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function CE(t,e,n,r,i,o,s,c,u,l,f){let p=e.blueprint.slice();return p[Rn]=i,p[X]=r|4|128|8|64|1024,(l!==null||t&&t[X]&2048)&&(p[X]|=2048),Cw(p),p[at]=p[Rs]=t,p[zt]=n,p[ir]=s||t&&t[ir],p[tn]=c||t&&t[tn],p[ws]=u||t&&t[ws]||null,p[Gt]=o,p[lu]=gM(),p[qc]=f,p[_w]=l,p[nn]=e.type==2?t[nn]:p,p}function BM(t,e,n){let r=zr(e,t),i=UM(n),o=t[ir].rendererFactory,s=RE(t,CE(t,i,null,SE(n),r,e,null,o.createRenderer(r,n),null,null,null));return t[e.index]=s}function SE(t){let e=16;return t.signals?e=4096:t.onPush&&(e=64),e}function AE(t,e,n,r){if(n===0)return-1;let i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function RE(t,e){return t[Es]?t[DI][qt]=e:t[Es]=e,t[DI]=e,e}function $M(t,e,n,r){if(!r)if((e[X]&3)===3){let o=t.preOrderCheckHooks;o!==null&&Oc(e,o,n)}else{let o=t.preOrderHooks;o!==null&&Fc(e,o,0,n)}$r(n)}var vu=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(vu||{});function yf(t,e,n,r){let i=me(null);try{let[o,s,c]=t.inputs[n],u=null;(s&vu.SignalBased)!==0&&(u=e[o][Ri]),u!==null&&u.transformFn!==void 0?r=u.transformFn(r):c!==null&&(r=c.call(e,r)),t.setInput!==null?t.setInput(e,u,r,n,o):Ew(e,u,o,r)}finally{me(i)}}function NE(t,e,n,r,i){let o=LN(),s=r&2;try{$r(-1),s&&e.length>or&&$M(t,e,or,!1),Te(s?2:0,i),n(r,i)}finally{$r(o),Te(s?3:1,i)}}function ME(t,e,n){GM(t,e,n),(n.flags&64)===64&&KM(t,e,n)}function HM(t,e,n=zr){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],c=s===-1?n(e,t):t[s];t[i++]=c}}}function qM(t,e,n,r){let o=r.get(wM,pE)||n===on.ShadowDom,s=t.selectRootElement(e,o);return zM(s),s}function zM(t){WM(t)}var WM=()=>null;function GM(t,e,n){let r=n.directiveStart,i=n.directiveEnd;du(n)&&BM(e,n,t.data[r+n.componentOffset]),t.firstCreatePass||Ww(n,e);let o=n.initialInputs;for(let s=r;s<i;s++){let c=t.data[s],u=cf(e,t,s,n);if(mu(u,e),o!==null&&ZM(e,s-r,u,c,n,o),qr(c)){let l=Ur(n.index,e);l[zt]=cf(e,t,s,n)}}}function KM(t,e,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=ON();try{$r(o);for(let c=r;c<i;c++){let u=t.data[c],l=e[c];sf(c),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&QM(u,l)}}finally{$r(-1),sf(s)}}function QM(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function YM(t,e){let n=t.directiveRegistry,r=null;if(n)for(let i=0;i<n.length;i++){let o=n[i];RM(e,o.selectors,!1)&&(r??=[],qr(o)?r.unshift(o):r.push(o))}return r}function ZM(t,e,n,r,i,o){let s=o[e];if(s!==null)for(let c=0;c<s.length;c+=2){let u=s[c],l=s[c+1];yf(r,n,u,l)}}function JM(t,e){let n=t[ws],r=n?n.get(ar,null):null;r&&r.handleError(e)}function PE(t,e,n,r,i){let o=t.inputs?.[r],s=t.hostDirectiveInputs?.[r],c=!1;if(s)for(let u=0;u<s.length;u+=2){let l=s[u],f=s[u+1],p=e.data[l];yf(p,n[l],f,i),c=!0}if(o)for(let u of o){let l=n[u],f=e.data[u];yf(f,l,r,i),c=!0}return c}function XM(t,e){let n=Ur(e,t),r=n[le];eP(r,n);let i=n[Rn];i!==null&&n[qc]===null&&(n[qc]=mE(i,n[ws])),Te(18),kE(r,n,n[zt]),Te(19,n[zt])}function eP(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function kE(t,e,n){Ff(e);try{let r=t.viewQuery;r!==null&&mf(1,r,n);let i=t.template;i!==null&&NE(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[uu]?.finishViewCreation(t),t.staticContentQueries&&yE(t,e),t.staticViewQueries&&mf(2,t.viewQuery,n);let o=t.components;o!==null&&tP(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[X]&=-5,Lf()}}function tP(t,e){for(let n=0;n<e.length;n++)XM(t,e[n])}function $I(t,e){return!e||e.firstChild===null||aE(t)}var nP;function Qf(t,e){return nP(t,e)}var eo=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(eo||{});function xE(t){return(t.flags&32)===32}function Wi(t,e,n,r,i){if(r!=null){let o,s=!1;Nn(r)?o=r:Lr(r)&&(s=!0,r=r[Rn]);let c=sr(r);t===0&&n!==null?i==null?TE(e,n,c):Xc(e,n,c,i||null,!0):t===1&&n!==null?Xc(e,n,c,i||null,!0):t===2?FM(e,c,s):t===3&&e.destroyNode(c),o!=null&&pP(e,t,o,n,i)}}function rP(t,e){OE(t,e),e[Rn]=null,e[Gt]=null}function iP(t,e,n,r,i,o){r[Rn]=i,r[Gt]=e,_u(t,r,n,1,i,o)}function OE(t,e){e[ir].changeDetectionScheduler?.notify(9),_u(t,e,e[tn],2,null,null)}function oP(t){let e=t[Es];if(!e)return Wh(t[le],t);for(;e;){let n=null;if(Lr(e))n=e[Es];else{let r=e[Mt];r&&(n=r)}if(!n){for(;e&&!e[qt]&&e!==t;)Lr(e)&&Wh(e[le],e),e=e[at];e===null&&(e=t),Lr(e)&&Wh(e[le],e),n=e&&e[qt]}e=n}}function Yf(t,e){let n=t[Gc],r=n.indexOf(e);n.splice(r,1)}function FE(t,e){if(Xi(e))return;let n=e[tn];n.destroyNode&&_u(t,e,n,3,null,null),oP(e)}function Wh(t,e){if(Xi(e))return;let n=me(null);try{e[X]&=-129,e[X]|=256,e[Nt]&&wh(e[Nt]),aP(t,e),sP(t,e),e[le].type===1&&e[tn].destroy();let r=e[Ts];if(r!==null&&Nn(e[at])){r!==e[at]&&Yf(r,e);let i=e[uu];i!==null&&i.detachView(t)}pf(e)}finally{me(n)}}function sP(t,e){let n=t.cleanup,r=e[TI];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let c=n[s+3];c>=0?r[c]():r[-c].unsubscribe(),s+=2}else{let c=r[n[s+1]];n[s].call(c)}r!==null&&(e[TI]=null);let i=e[rr];if(i!==null){e[rr]=null;for(let s=0;s<i.length;s++){let c=i[s];c()}}let o=e[zc];if(o!==null){e[zc]=null;for(let s of o)s.destroy()}}function aP(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof Ds)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let c=i[o[s]],u=o[s+1];Te(4,c,u);try{u.call(c)}finally{Te(5,c,u)}}else{Te(4,i,o);try{o.call(i)}finally{Te(5,i,o)}}}}}function cP(t,e,n){return uP(t,e.parent,n)}function uP(t,e,n){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return n[Rn];if(du(r)){let{encapsulation:i}=t.data[r.directiveStart+r.componentOffset];if(i===on.None||i===on.Emulated)return null}return zr(r,n)}function lP(t,e,n){return hP(t,e,n)}function dP(t,e,n){return t.type&40?zr(t,n):null}var hP=dP,HI;function LE(t,e,n,r){let i=cP(t,r,e),o=e[tn],s=r.parent||e[Gt],c=lP(s,r,e);if(i!=null)if(Array.isArray(n))for(let u=0;u<n.length;u++)BI(o,i,n[u],c,!1);else BI(o,i,n,c,!1);HI!==void 0&&HI(o,r,e,n,i)}function ys(t,e){if(e!==null){let n=e.type;if(n&3)return zr(e,t);if(n&4)return vf(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return ys(t,r);{let i=t[e.index];return Nn(i)?vf(-1,i):sr(i)}}else{if(n&128)return ys(t,e.next);if(n&32)return Qf(e,t)()||sr(t[e.index]);{let r=VE(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Br(t[nn]);return ys(i,r)}else return ys(t,e.next)}}}return null}function VE(t,e){if(e!==null){let r=t[nn][Gt],i=e.projection;return r.projection[i]}return null}function vf(t,e){let n=Mt+t+1;if(n<e.length){let r=e[n],i=r[le].firstChild;if(i!==null)return ys(r,i)}return e[jr]}function Zf(t,e,n,r,i,o,s){for(;n!=null;){if(n.type===128){n=n.next;continue}let c=r[n.index],u=n.type;if(s&&e===0&&(c&&mu(sr(c),r),n.flags|=2),!xE(n))if(u&8)Zf(t,e,n.child,r,i,o,!1),Wi(e,t,i,c,o);else if(u&32){let l=Qf(n,r),f;for(;f=l();)Wi(e,t,i,f,o);Wi(e,t,i,c,o)}else u&16?fP(t,e,r,n,i,o):Wi(e,t,i,c,o);n=s?n.projectionNext:n.next}}function _u(t,e,n,r,i,o){Zf(n,r,t.firstChild,e,i,o,!1)}function fP(t,e,n,r,i,o){let s=n[nn],u=s[Gt].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let f=u[l];Wi(e,t,i,f,o)}else{let l=u,f=s[at];aE(r)&&(l.flags|=128),Zf(t,e,l,f,i,o,!0)}}function pP(t,e,n,r,i){let o=n[jr],s=sr(n);o!==s&&Wi(e,t,r,o,i);for(let c=Mt;c<n.length;c++){let u=n[c];_u(u[le],u,t,e,r,o)}}function eu(t,e,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let o=e[n.index];o!==null&&r.push(sr(o)),Nn(o)&&gP(o,r);let s=n.type;if(s&8)eu(t,e,n.child,r);else if(s&32){let c=Qf(n,e),u;for(;u=c();)r.push(u)}else if(s&16){let c=VE(e,n);if(Array.isArray(c))r.push(...c);else{let u=Br(e[nn]);eu(u[le],u,c,r,!0)}}n=i?n.projectionNext:n.next}return r}function gP(t,e){for(let n=Mt;n<t.length;n++){let r=t[n],i=r[le].firstChild;i!==null&&eu(r[le],r,i,e)}t[jr]!==t[Rn]&&e.push(t[jr])}function jE(t){if(t[Hh]!==null){for(let e of t[Hh])e.impl.addSequence(e);t[Hh].length=0}}var UE=[];function mP(t){return t[Nt]??yP(t)}function yP(t){let e=UE.pop()??Object.create(_P);return e.lView=t,e}function vP(t){t.lView[Nt]!==t&&(t.lView=null,UE.push(t))}var _P=ye(F({},oc),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{fu(t.lView)},consumerOnSignalRead(){this.lView[Nt]=this}});function IP(t){let e=t[Nt]??Object.create(wP);return e.lView=t,e}var wP=ye(F({},oc),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{let e=Br(t.lView);for(;e&&!BE(e[le]);)e=Br(e);e&&Sw(e)},consumerOnSignalRead(){this.lView[Nt]=this}});function BE(t){return t.type!==2}function $E(t){if(t[zc]===null)return;let e=!0;for(;e;){let n=!1;for(let r of t[zc])r.dirty&&(n=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=n&&!!(t[X]&8192)}}var EP=100;function HE(t,e=!0,n=0){let i=t[ir].rendererFactory,o=!1;o||i.begin?.();try{TP(t,n)}catch(s){throw e&&JM(t,s),s}finally{o||i.end?.()}}function TP(t,e){let n=Mw();try{SI(!0),_f(t,e);let r=0;for(;hu(t);){if(r===EP)throw new U(103,!1);r++,_f(t,1)}}finally{SI(n)}}function DP(t,e,n,r){if(Xi(e))return;let i=e[X],o=!1,s=!1;Ff(e);let c=!0,u=null,l=null;o||(BE(t)?(l=mP(e),u=_h(l)):mh()===null?(c=!1,l=IP(e),u=_h(l)):e[Nt]&&(wh(e[Nt]),e[Nt]=null));try{Cw(e),PN(t.bindingStartIndex),n!==null&&NE(t,e,n,2,r);let f=(i&3)===3;if(!o)if(f){let y=t.preOrderCheckHooks;y!==null&&Oc(e,y,null)}else{let y=t.preOrderHooks;y!==null&&Fc(e,y,0,null),qh(e,0)}if(s||bP(e),$E(e),qE(e,0),t.contentQueries!==null&&yE(t,e),!o)if(f){let y=t.contentCheckHooks;y!==null&&Oc(e,y)}else{let y=t.contentHooks;y!==null&&Fc(e,y,1),qh(e,1)}SP(t,e);let p=t.components;p!==null&&WE(e,p,0);let m=t.viewQuery;if(m!==null&&mf(2,m,r),!o)if(f){let y=t.viewCheckHooks;y!==null&&Oc(e,y)}else{let y=t.viewHooks;y!==null&&Fc(e,y,2),qh(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[$h]){for(let y of e[$h])y();e[$h]=null}o||(jE(e),e[X]&=-73)}catch(f){throw o||fu(e),f}finally{l!==null&&(F_(l,u),c&&vP(l)),Lf()}}function qE(t,e){for(let n=lE(t);n!==null;n=dE(n))for(let r=Mt;r<n.length;r++){let i=n[r];zE(i,e)}}function bP(t){for(let e=lE(t);e!==null;e=dE(e)){if(!(e[X]&2))continue;let n=e[Gc];for(let r=0;r<n.length;r++){let i=n[r];Sw(i)}}}function CP(t,e,n){Te(18);let r=Ur(e,t);zE(r,n),Te(19,r[zt])}function zE(t,e){xf(t)&&_f(t,e)}function _f(t,e){let r=t[le],i=t[X],o=t[Nt],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&Ih(o)),s||=!1,o&&(o.dirty=!1),t[X]&=-9217,s)DP(r,t,r.template,t[zt]);else if(i&8192){$E(t),qE(t,1);let c=r.components;c!==null&&WE(t,c,1),jE(t)}}function WE(t,e,n){for(let r=0;r<e.length;r++)CP(t,e[r],n)}function SP(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)$r(~i);else{let o=i,s=n[++r],c=n[++r];xN(s,o);let u=e[o];Te(24,u),c(2,u),Te(25,u)}}}finally{$r(-1)}}function GE(t,e){let n=Mw()?64:1088;for(t[ir].changeDetectionScheduler?.notify(e);t;){t[X]|=n;let r=Br(t);if(Kc(t)&&!r)return t;t=r}return null}function AP(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function RP(t,e,n,r=!0){let i=e[le];if(NP(i,e,t,n),r){let s=vf(n,t),c=e[tn],u=c.parentNode(t[jr]);u!==null&&iP(i,t[Gt],c,e,u,s)}let o=e[qc];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function If(t,e){if(t.length<=Mt)return;let n=Mt+e,r=t[n];if(r){let i=r[Ts];i!==null&&i!==t&&Yf(i,r),e>0&&(t[n-1][qt]=r[qt]);let o=$c(t,Mt+e);rP(r[le],r);let s=o[uu];s!==null&&s.detachView(o[le]),r[at]=null,r[qt]=null,r[X]&=-129}return r}function NP(t,e,n,r){let i=Mt+r,o=n.length;r>0&&(n[i-1][qt]=e),r<o-Mt?(e[qt]=n[i],lw(n,Mt+r,e)):(n.push(e),e[qt]=null),e[at]=n;let s=e[Ts];s!==null&&n!==s&&KE(s,e);let c=e[uu];c!==null&&c.insertView(t),rf(e),e[X]|=128}function KE(t,e){let n=t[Gc],r=e[at];if(Lr(r))t[X]|=2;else{let i=r[at][nn];e[nn]!==i&&(t[X]|=2)}n===null?t[Gc]=[e]:n.push(e)}var tu=class{_lView;_cdRefInjectingView;notifyErrorHandler;_appRef=null;_attachedToViewContainer=!1;get rootNodes(){let e=this._lView,n=e[le];return eu(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r}get context(){return this._lView[zt]}set context(e){this._lView[zt]=e}get destroyed(){return Xi(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[at];if(Nn(e)){let n=e[Wc],r=n?n.indexOf(this):-1;r>-1&&(If(e,r),$c(n,r))}this._attachedToViewContainer=!1}FE(this._lView[le],this._lView)}onDestroy(e){Aw(this._lView,e)}markForCheck(){GE(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[X]&=-129}reattach(){rf(this._lView),this._lView[X]|=128}detectChanges(){this._lView[X]|=1024,HE(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new U(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Kc(this._lView),n=this._lView[Ts];n!==null&&!e&&Yf(n,this._lView),OE(this._lView[le],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new U(902,!1);this._appRef=e;let n=Kc(this._lView),r=this._lView[Ts];r!==null&&!n&&KE(r,this._lView),rf(this._lView)}};function QE(t,e,n,r,i){let o=t.data[e];if(o===null)o=MP(t,e,n,r,i),kN()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=NN();o.injectorIndex=s===null?-1:s.injectorIndex}return pu(o,!0),o}function MP(t,e,n,r,i){let o=Rw(),s=Nw(),c=s?o:o&&o.parent,u=t.data[e]=kP(t,c,n,e,r,i);return PP(t,u,o,s),u}function PP(t,e,n,r){t.firstChild===null&&(t.firstChild=e),n!==null&&(r?n.child==null&&e.parent!==null&&(n.child=e):n.next===null&&(n.next=e,e.prev=n))}function kP(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,c=0;return SN()&&(c|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:c,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var h6=new RegExp(`^(\\d+)*(${IM}|${_M})*(.*)`);var xP=()=>null;function qI(t,e){return xP(t,e)}var OP=class{},YE=class{},wf=class{resolveComponentFactory(e){throw Error(`No component factory found for ${wt(e)}.`)}},Iu=class{static NULL=new wf},Ji=class{};var FP=(()=>{class t{static \u0275prov=B({token:t,providedIn:"root",factory:()=>null})}return t})();var Gh={},Ef=class{injector;parentInjector;constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=au(r);let i=this.injector.get(e,Gh,r);return i!==Gh||n===Gh?i:this.parentInjector.get(e,n,r)}};function zI(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let c=e[s];if(typeof c=="number")o=c;else if(o==1)i=mI(i,c);else if(o==2){let u=c,l=e[++s];r=mI(r,u+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}function ZE(t,e=J.Default){let n=rn();if(n===null)return ee(t,e);let r=Wr();return Yw(r,n,Rt(t),e)}function LP(t,e,n,r,i){let o=r===null?null:{"":-1},s=i(t,n);if(s!==null){let c,u=null,l=null,f=jP(s);f===null?c=s:[c,u,l]=f,$P(t,e,n,c,o,u,l)}o!==null&&r!==null&&VP(n,r,o)}function VP(t,e,n){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let o=n[e[i+1]];if(o==null)throw new U(-301,!1);r.push(e[i],o)}}function jP(t){let e=null,n=!1;for(let s=0;s<t.length;s++){let c=t[s];if(s===0&&qr(c)&&(e=c),c.findHostDirectiveDefs!==null){n=!0;break}}if(!n)return null;let r=null,i=null,o=null;for(let s of t)s.findHostDirectiveDefs!==null&&(r??=[],i??=new Map,o??=new Map,UP(s,r,o,i)),s===e&&(r??=[],r.push(s));return r!==null?(r.push(...e===null?t:t.slice(1)),[r,i,o]):null}function UP(t,e,n,r){let i=e.length;t.findHostDirectiveDefs(t,e,r),n.set(t,[i,e.length-1])}function BP(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function $P(t,e,n,r,i,o,s){let c=r.length,u=!1;for(let m=0;m<c;m++){let y=r[m];!u&&qr(y)&&(u=!0,BP(t,n,m)),ZN(Ww(n,e),t,y.type)}KP(n,t.data.length,c);for(let m=0;m<c;m++){let y=r[m];y.providersResolver&&y.providersResolver(y)}let l=!1,f=!1,p=AE(t,e,c,null);c>0&&(n.directiveToIndex=new Map);for(let m=0;m<c;m++){let y=r[m];if(n.mergedAttrs=$w(n.mergedAttrs,y.hostAttrs),qP(t,n,e,p,y),GP(p,y,i),s!==null&&s.has(y)){let[R,P]=s.get(y);n.directiveToIndex.set(y.type,[p,R+n.directiveStart,P+n.directiveStart])}else(o===null||!o.has(y))&&n.directiveToIndex.set(y.type,p);y.contentQueries!==null&&(n.flags|=4),(y.hostBindings!==null||y.hostAttrs!==null||y.hostVars!==0)&&(n.flags|=64);let A=y.type.prototype;!l&&(A.ngOnChanges||A.ngOnInit||A.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),l=!0),!f&&(A.ngOnChanges||A.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),f=!0),p++}HP(t,n,o)}function HP(t,e,n){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=t.data[r];if(n===null||!n.has(i))WI(0,e,i,r),WI(1,e,i,r),KI(e,r,!1);else{let o=n.get(i);GI(0,e,o,r),GI(1,e,o,r),KI(e,r,!0)}}}function WI(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;t===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),JE(e,o)}}function GI(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],c;t===0?c=e.hostDirectiveInputs??={}:c=e.hostDirectiveOutputs??={},c[s]??=[],c[s].push(r,o),JE(e,s)}}function JE(t,e){e==="class"?t.flags|=8:e==="style"&&(t.flags|=16)}function KI(t,e,n){let{attrs:r,inputs:i,hostDirectiveInputs:o}=t;if(r===null||!n&&i===null||n&&o===null||Kf(t)){t.initialInputs??=[],t.initialInputs.push(null);return}let s=null,c=0;for(;c<r.length;){let u=r[c];if(u===0){c+=4;continue}else if(u===5){c+=2;continue}else if(typeof u=="number")break;if(!n&&i.hasOwnProperty(u)){let l=i[u];for(let f of l)if(f===e){s??=[],s.push(u,r[c+1]);break}}else if(n&&o.hasOwnProperty(u)){let l=o[u];for(let f=0;f<l.length;f+=2)if(l[f]===e){s??=[],s.push(l[f+1],r[c+1]);break}}c+=2}t.initialInputs??=[],t.initialInputs.push(s)}function qP(t,e,n,r,i){t.data[r]=i;let o=i.factory||(i.factory=Ki(i.type,!0)),s=new Ds(o,qr(i),ZE);t.blueprint[r]=s,n[r]=s,zP(t,e,r,AE(t,n,i.hostVars,wE),i)}function zP(t,e,n,r,i){let o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let c=~e.index;WP(s)!=c&&s.push(c),s.push(n,r,o)}}function WP(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function GP(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;qr(e)&&(n[""]=t)}}function KP(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function XE(t,e,n,r,i,o,s,c){let u=e.consts,l=CI(u,s),f=QE(e,t,2,r,l);return o&&LP(e,n,f,CI(u,c),i),f.mergedAttrs=$w(f.mergedAttrs,f.attrs),f.attrs!==null&&zI(f,f.attrs,!1),f.mergedAttrs!==null&&zI(f,f.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,f),f}function eT(t,e){UN(t,e),ww(e)&&t.queries.elementEnd(e)}var nu=class extends Iu{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=Yi(e);return new bs(n,this.ngModule)}};function QP(t){return Object.keys(t).map(e=>{let[n,r,i]=t[e],o={propName:n,templateName:e,isSignal:(r&vu.SignalBased)!==0};return i&&(o.transform=i),o})}function YP(t){return Object.keys(t).map(e=>({propName:t[e],templateName:e}))}function ZP(t,e,n){let r=e instanceof gt?e:e?.injector;return r&&t.getStandaloneInjector!==null&&(r=t.getStandaloneInjector(r)||r),r?new Ef(n,r):n}function JP(t){let e=t.get(Ji,null);if(e===null)throw new U(407,!1);let n=t.get(FP,null),r=t.get(Zi,null);return{rendererFactory:e,sanitizer:n,changeDetectionScheduler:r}}function XP(t,e){let n=(t.selectors[0][0]||"div").toLowerCase();return EE(e,n,n==="svg"?vN:n==="math"?_N:null)}var bs=class extends YE{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=QP(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=YP(this.componentDef.outputs),this.cachedOutputs}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=kM(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!n}create(e,n,r,i){Te(22);let o=me(null);try{let s=this.componentDef,c=r?["ng-version","19.2.15"]:xM(this.componentDef.selectors[0]),u=bE(0,null,null,1,0,null,null,null,null,[c],null),l=ZP(s,i||this.ngModule,e),f=JP(l),p=f.rendererFactory.createRenderer(null,s),m=r?qM(p,r,s.encapsulation,l):XP(s,p),y=CE(null,u,null,512|SE(s),null,null,f,p,l,null,mE(m,l,!0));y[or]=m,Ff(y);let A=null;try{let R=XE(or,u,y,"#host",()=>[this.componentDef],!0,0);m&&(DE(p,m,R),mu(m,y)),ME(u,y,R),vE(u,R,y),eT(u,R),n!==void 0&&ek(R,this.ngContentSelectors,n),A=Ur(R.index,y),y[zt]=A[zt],kE(u,y,null)}catch(R){throw A!==null&&pf(A),pf(y),R}finally{Te(23),Lf()}return new Tf(this.componentType,y)}finally{me(o)}}},Tf=class extends OP{_rootLView;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,n){super(),this._rootLView=n,this._tNode=IN(n[le],or),this.location=Hf(this._tNode,n),this.instance=Ur(this._tNode.index,n)[zt],this.hostView=this.changeDetectorRef=new tu(n,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let i=this._rootLView,o=PE(r,i[le],i,e,n);this.previousInputValues.set(e,n);let s=Ur(r.index,i);GE(s,1)}get injector(){return new Vr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function ek(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let o=n[i];r.push(o!=null&&o.length?Array.from(o):null)}}var wu=(()=>{class t{static __NG_ELEMENT_ID__=tk}return t})();function tk(){let t=Wr();return rk(t,rn())}var nk=wu,tT=class extends nk{_lContainer;_hostTNode;_hostLView;constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return Hf(this._hostTNode,this._hostLView)}get injector(){return new Vr(this._hostTNode,this._hostLView)}get parentInjector(){let e=Vf(this._hostTNode,this._hostLView);if(Hw(e)){let n=Yc(e,this._hostLView),r=Qc(e),i=n[le].data[r+8];return new Vr(i,n)}else return new Vr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=QI(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-Mt}createEmbeddedView(e,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=qI(this._lContainer,e.ssrId),c=e.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(c,i,$I(this._hostTNode,s)),c}createComponent(e,n,r,i,o){let s=e&&!fN(e),c;if(s)c=n;else{let A=n||{};c=A.index,r=A.injector,i=A.projectableNodes,o=A.environmentInjector||A.ngModuleRef}let u=s?e:new bs(Yi(e)),l=r||this.parentInjector;if(!o&&u.ngModule==null){let R=(s?l:this.parentInjector).get(gt,null);R&&(o=R)}let f=Yi(u.componentType??{}),p=qI(this._lContainer,f?.id??null),m=p?.firstChild??null,y=u.create(l,i,m,o);return this.insertImpl(y.hostView,c,$I(this._hostTNode,p)),y}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(wN(i)){let c=this.indexOf(e);if(c!==-1)this.detach(c);else{let u=i[at],l=new tT(u,u[Gt],u[at]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(n),s=this._lContainer;return RP(s,i,o,r),e.attachToViewContainerRef(),lw(Kh(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=QI(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=If(this._lContainer,n);r&&($c(Kh(this._lContainer),n),FE(r[le],r))}detach(e){let n=this._adjustIndex(e,-1),r=If(this._lContainer,n);return r&&$c(Kh(this._lContainer),n)!=null?new tu(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function QI(t){return t[Wc]}function Kh(t){return t[Wc]||(t[Wc]=[])}function rk(t,e){let n,r=e[t.index];return Nn(r)?n=r:(n=AP(r,e,null,t),e[t.index]=n,RE(e,n)),ok(n,e,t,r),new tT(n,t,e)}function ik(t,e){let n=t[tn],r=n.createComment(""),i=zr(e,t),o=n.parentNode(i);return Xc(n,o,r,n.nextSibling(i),!1),r}var ok=sk;function sk(t,e,n,r){if(t[jr])return;let i;n.type&8?i=sr(r):i=ik(e,n),t[jr]=i}var Cs=class{},Jf=class{};var Df=class extends Cs{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new nu(this);constructor(e,n,r,i=!0){super(),this.ngModuleType=e,this._parent=n;let o=fw(e);this._bootstrapComponents=_E(o.bootstrap),this._r3Injector=Xw(e,n,[{provide:Cs,useValue:this},{provide:Iu,useValue:this.componentFactoryResolver},...r],wt(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},bf=class extends Jf{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new Df(this.moduleType,e,[])}};var ru=class extends Cs{injector;componentFactoryResolver=new nu(this);instance=null;constructor(e){super();let n=new Is([...e.providers,{provide:Cs,useValue:this},{provide:Iu,useValue:this.componentFactoryResolver}],e.parent||Pf(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Eu(t,e,n=null){return new ru({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var ak=(()=>{class t{_injector;cachedInjectors=new Map;constructor(n){this._injector=n}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=pw(!1,n.type),i=r.length>0?Eu([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=B({token:t,providedIn:"environment",factory:()=>new t(ee(gt))})}return t})();function an(t){return As(()=>{let e=nT(t),n=ye(F({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===cE.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(ak).getOrCreateStandaloneInjector(n):null,getExternalStyles:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||on.Emulated,styles:t.styles||Xt,_:null,schemas:t.schemas||null,tView:null,id:""});e.standalone&&Gf("NgStandalone"),rT(n);let r=t.dependencies;return n.directiveDefs=YI(r,!1),n.pipeDefs=YI(r,!0),n.id=hk(n),n})}function ck(t){return Yi(t)||tN(t)}function uk(t){return t!==null}function Tu(t){return As(()=>({type:t.type,bootstrap:t.bootstrap||Xt,declarations:t.declarations||Xt,imports:t.imports||Xt,exports:t.exports||Xt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function lk(t,e){if(t==null)return Qi;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],o,s,c,u;Array.isArray(i)?(c=i[0],o=i[1],s=i[2]??o,u=i[3]||null):(o=i,s=i,c=vu.None,u=null),n[o]=[r,c,u],e[o]=s}return n}function dk(t){if(t==null)return Qi;let e={};for(let n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}function Xf(t){return As(()=>{let e=nT(t);return rT(e),e})}function nT(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputConfig:t.inputs||Qi,exportAs:t.exportAs||null,standalone:t.standalone??!0,signals:t.signals===!0,selectors:t.selectors||Xt,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:lk(t.inputs,e),outputs:dk(t.outputs),debugInfo:null}}function rT(t){t.features?.forEach(e=>e(t))}function YI(t,e){if(!t)return null;let n=e?nN:ck;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(uk)}function hk(t){let e=0,n=typeof t.consts=="function"?"":t.consts,r=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,n,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}var iT=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();var oT=new j("");var fk=(()=>{class t{static \u0275prov=B({token:t,providedIn:"root",factory:()=>new Cf})}return t})(),Cf=class{queuedEffectCount=0;queues=new Map;schedule(e){this.enqueue(e)}remove(e){let n=e.zone,r=this.queues.get(n);r.has(e)&&(r.delete(e),this.queuedEffectCount--)}enqueue(e){let n=e.zone;this.queues.has(n)||this.queues.set(n,new Set);let r=this.queues.get(n);r.has(e)||(this.queuedEffectCount++,r.add(e))}flush(){for(;this.queuedEffectCount>0;)for(let[e,n]of this.queues)e===null?this.flushQueue(n):e.run(()=>this.flushQueue(n))}flushQueue(e){for(let n of e)e.delete(n),this.queuedEffectCount--,n.run()}};function Du(t){return!!t&&typeof t.then=="function"}function pk(t){return!!t&&typeof t.subscribe=="function"}var gk=new j("");var sT=(()=>{class t{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r});appInits=k(gk,{optional:!0})??[];injector=k(je);constructor(){}runInitializers(){if(this.initialized)return;let n=[];for(let i of this.appInits){let o=ut(this.injector,i);if(Du(o))n.push(o);else if(pk(o)){let s=new Promise((c,u)=>{o.subscribe({complete:c,error:u})});n.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),n.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),ep=new j("");function mk(){Eh(()=>{throw new U(600,!1)})}function yk(t){return t.isBoundToModule}var vk=10;var Hr=(()=>{class t{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=k(dM);afterRenderManager=k(EM);zonelessEnabled=k(Uf);rootEffectScheduler=k(fk);dirtyFlags=0;tracingSnapshot=null;externalTestViews=new Set;afterTick=new ze;get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];isStable=k(Gr).hasPendingTasks.pipe(oe(n=>!n));constructor(){k(yu,{optional:!0})}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{n.unsubscribe()})}_injector=k(gt);_rendererFactory=null;get injector(){return this._injector}bootstrap(n,r){return this.bootstrapImpl(n,r)}bootstrapImpl(n,r,i=je.NULL){Te(10);let o=n instanceof YE;if(!this._injector.get(sT).done){let y="";throw new U(405,y)}let c;o?c=n:c=this._injector.get(Iu).resolveComponentFactory(n),this.componentTypes.push(c.componentType);let u=yk(c)?void 0:this._injector.get(Cs),l=r||c.selector,f=c.create(i,[],l,u),p=f.location.nativeElement,m=f.injector.get(oT,null);return m?.registerApplication(p),f.onDestroy(()=>{this.detachView(f.hostView),Lc(this.components,f),m?.unregisterApplication(p)}),this._loadComponent(f),Te(11,f),f}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){Te(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(gE.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new U(101,!1);let n=me(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,me(n),this.afterTick.next(),Te(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Ji,null,{optional:!0}));let n=0;for(;this.dirtyFlags!==0&&n++<vk;)Te(14),this.synchronizeOnce(),Te(15)}synchronizeOnce(){if(this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush()),this.dirtyFlags&7){let n=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:r,notifyErrorHandler:i}of this.allViews)_k(r,i,n,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}else this._rendererFactory?.begin?.(),this._rendererFactory?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>hu(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;Lc(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n),this._injector.get(ep,[]).forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>Lc(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new U(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Lc(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function _k(t,e,n,r){if(!n&&!hu(t))return;HE(t,e,n&&!r?0:1)}function ZI(t,e,n,r,i){PE(e,t,n,i?"class":"style",r)}function Pt(t,e,n,r){let i=rn(),o=Of(),s=or+t,c=i[tn],u=o.firstCreatePass?XE(s,o,i,e,YM,CN(),n,r):o.data[s],l=Ik(o,i,u,c,e,t);i[s]=l;let f=pN(u);return pu(u,!0),DE(c,l,u),!xE(u)&&jw()&&LE(o,i,l,u),(TN()===0||f)&&mu(l,i),DN(),f&&(ME(o,i,u),vE(o,u,i)),r!==null&&HM(i,u),Pt}function Et(){let t=Wr();Nw()?MN():(t=t.parent,pu(t,!1));let e=t;AN(e)&&RN(),bN();let n=Of();return n.firstCreatePass&&eT(n,e),e.classesWithoutHost!=null&&$N(e)&&ZI(n,e,rn(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&HN(e)&&ZI(n,e,rn(),e.stylesWithoutHost,!1),Et}function mt(t,e,n,r){return Pt(t,e,n,r),Et(),mt}var Ik=(t,e,n,r,i,o)=>(Uw(!0),EE(r,i,VN()));var iu="en-US";var wk=iu;function Ek(t){typeof t=="string"&&(wk=t.toLowerCase().replace(/_/g,"-"))}function aT(t,e=""){let n=rn(),r=Of(),i=t+or,o=r.firstCreatePass?QE(r,i,1,e,null):r.data[i],s=Tk(r,n,o,e,t);n[i]=s,jw()&&LE(r,n,s,o),pu(o,!1)}var Tk=(t,e,n,r,i)=>(Uw(!0),OM(e[tn],r));var Ss=class{full;major;minor;patch;constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},cT=new Ss("19.2.15"),Sf=class{ngModuleFactory;componentFactories;constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},uT=(()=>{class t{compileModuleSync(n){return new bf(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),i=fw(n),o=_E(i.declarations).reduce((s,c)=>{let u=Yi(c);return u&&s.push(new bs(u)),s},[]);return new Sf(r,o)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Dk=(()=>{class t{zone=k(he);changeDetectionScheduler=k(Zi);applicationRef=k(Hr);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),bk=new j("",{factory:()=>!1});function lT({ngZoneFactory:t,ignoreChangesOutsideZone:e,scheduleInRootZone:n}){return t??=()=>new he(ye(F({},hT()),{scheduleInRootZone:n})),[{provide:he,useFactory:t},{provide:_s,multi:!0,useFactory:()=>{let r=k(Dk,{optional:!0});return()=>r.initialize()}},{provide:_s,multi:!0,useFactory:()=>{let r=k(Ck);return()=>{r.initialize()}}},e===!0?{provide:tE,useValue:!0}:[],{provide:nE,useValue:n??eE}]}function dT(t){let e=t?.ignoreChangesOutsideZone,n=t?.scheduleInRootZone,r=lT({ngZoneFactory:()=>{let i=hT(t);return i.scheduleInRootZone=n,i.shouldCoalesceEventChangeDetection&&Gf("NgZone_CoalesceEvent"),new he(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:n});return Wt([{provide:bk,useValue:!0},{provide:Uf,useValue:!1},r])}function hT(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var Ck=(()=>{class t{subscription=new Ce;initialized=!1;zone=k(he);pendingTasks=k(Gr);initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{he.assertNotInAngularZone(),queueMicrotask(()=>{n!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{he.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Sk=(()=>{class t{appRef=k(Hr);taskService=k(Gr);ngZone=k(he);zonelessEnabled=k(Uf);tracing=k(yu,{optional:!0});disableScheduling=k(tE,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Ce;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Jc):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(k(nE,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof ff||!this.zoneIsDefined)}notify(n){if(!this.zonelessEnabled&&n===5)return;let r=!1;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?xI:rE;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(n){return!(this.disableScheduling&&!n||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Jc+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(n),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,xI(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Ak(){return typeof $localize<"u"&&$localize.locale||iu}var fT=new j("",{providedIn:"root",factory:()=>k(fT,J.Optional|J.SkipSelf)||Ak()});var Af=new j(""),Rk=new j("");function gs(t){return!t.moduleRef}function Nk(t){let e=gs(t)?t.r3Injector:t.moduleRef.injector,n=e.get(he);return n.run(()=>{gs(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();let r=e.get(ar,null),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:o=>{r.handleError(o)}})}),gs(t)){let o=()=>e.destroy(),s=t.platformInjector.get(Af);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>t.moduleRef.destroy(),s=t.platformInjector.get(Af);s.add(o),t.moduleRef.onDestroy(()=>{Lc(t.allPlatformModules,t.moduleRef),i.unsubscribe(),s.delete(o)})}return Pk(r,n,()=>{let o=e.get(sT);return o.runInitializers(),o.donePromise.then(()=>{let s=e.get(fT,iu);if(Ek(s||iu),!e.get(Rk,!0))return gs(t)?e.get(Hr):(t.allPlatformModules.push(t.moduleRef),t.moduleRef);if(gs(t)){let u=e.get(Hr);return t.rootComponent!==void 0&&u.bootstrap(t.rootComponent),u}else return Mk(t.moduleRef,t.allPlatformModules),t.moduleRef})})})}function Mk(t,e){let n=t.injector.get(Hr);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(r=>n.bootstrap(r));else if(t.instance.ngDoBootstrap)t.instance.ngDoBootstrap(n);else throw new U(-403,!1);e.push(t)}function Pk(t,e,n){try{let r=n();return Du(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}var Vc=null;function kk(t=[],e){return je.create({name:e,providers:[{provide:cu,useValue:"platform"},{provide:Af,useValue:new Set([()=>Vc=null])},...t]})}function xk(t=[]){if(Vc)return Vc;let e=kk(t);return Vc=e,mk(),Ok(e),e}function Ok(t){let e=t.get(zf,null);ut(t,()=>{e?.forEach(n=>n())})}function tp(){return!1}var np=(()=>{class t{static __NG_ELEMENT_ID__=Fk}return t})();function Fk(t){return Lk(Wr(),rn(),(t&16)===16)}function Lk(t,e,n){if(du(t)&&!n){let r=Ur(t.index,e);return new tu(r,r)}else if(t.type&175){let r=e[nn];return new tu(r,e)}return null}function pT(t){let{rootComponent:e,appProviders:n,platformProviders:r,platformRef:i}=t;Te(8);try{let o=i?.injector??xk(r),s=[lT({}),{provide:Zi,useExisting:Sk},...n||[]],c=new ru({providers:s,parent:o,debugName:"",runEnvironmentInitializers:!1});return Nk({r3Injector:c.injector,platformInjector:o,rootComponent:e})}catch(o){return Promise.reject(o)}finally{Te(9)}}var JI=class{[Ri];constructor(e){this[Ri]=e}destroy(){this[Ri].destroy()}};var tt=new j("");var yT=null;function Mn(){return yT}function rp(t){yT??=t}var Ms=class{},ip=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:()=>k(vT),providedIn:"platform"})}return t})();var vT=(()=>{class t extends ip{_location;_history;_doc=k(tt);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Mn().getBaseHref(this._doc)}onPopState(n){let r=Mn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=Mn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:()=>new t,providedIn:"platform"})}return t})();function _T(t,e){return t?e?t.endsWith("/")?e.startsWith("/")?t+e.slice(1):t+e:e.startsWith("/")?t+e:`${t}/${e}`:t:e}function gT(t){let e=t.search(/#|\?|$/);return t[e-1]==="/"?t.slice(0,e-1)+t.slice(e):t}function cr(t){return t&&t[0]!=="?"?`?${t}`:t}var bu=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:()=>k(wT),providedIn:"root"})}return t})(),IT=new j(""),wT=(()=>{class t extends bu{_platformLocation;_baseHref;_removeListenerFns=[];constructor(n,r){super(),this._platformLocation=n,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??k(tt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return _T(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+cr(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,o){let s=this.prepareExternalUrl(i+cr(o));this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){let s=this.prepareExternalUrl(i+cr(o));this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static \u0275fac=function(r){return new(r||t)(ee(ip),ee(IT,8))};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),to=(()=>{class t{_subject=new ze;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(n){this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=Uk(gT(mT(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+cr(r))}normalize(n){return t.stripTrailingSlash(jk(this._basePath,mT(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+cr(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+cr(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=cr;static joinWithSlash=_T;static stripTrailingSlash=gT;static \u0275fac=function(r){return new(r||t)(ee(bu))};static \u0275prov=B({token:t,factory:()=>Vk(),providedIn:"root"})}return t})();function Vk(){return new to(ee(bu))}function jk(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function mT(t){return t.replace(/\/index.html$/,"")}function Uk(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}var no=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=Tu({type:t});static \u0275inj=ou({})}return t})();function op(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var Cu="browser",ET="server";function Su(t){return t===Cu}function Au(t){return t===ET}var Ps=class{};var Mu=new j(""),up=(()=>{class t{_zone;_plugins;_eventNameToPlugin=new Map;constructor(n,r){this._zone=r,n.forEach(i=>{i.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,i,o){return this._findPluginFor(r).addEventListener(n,r,i,o)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(o=>o.supports(n)),!r)throw new U(5101,!1);return this._eventNameToPlugin.set(n,r),r}static \u0275fac=function(r){return new(r||t)(ee(Mu),ee(he))};static \u0275prov=B({token:t,factory:t.\u0275fac})}return t})(),ks=class{_doc;constructor(e){this._doc=e}manager},Ru="ng-app-id";function TT(t){for(let e of t)e.remove()}function DT(t,e){let n=e.createElement("style");return n.textContent=t,n}function $k(t,e,n,r){let i=t.head?.querySelectorAll(`style[${Ru}="${e}"],link[${Ru}="${e}"]`);if(i)for(let o of i)o.removeAttribute(Ru),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&n.set(o.textContent,{usage:0,elements:[o]})}function ap(t,e){let n=e.createElement("link");return n.setAttribute("rel","stylesheet"),n.setAttribute("href",t),n}var lp=(()=>{class t{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(n,r,i,o={}){this.doc=n,this.appId=r,this.nonce=i,this.isServer=Au(o),$k(n,r,this.inline,this.external),this.hosts.add(n.head)}addStyles(n,r){for(let i of n)this.addUsage(i,this.inline,DT);r?.forEach(i=>this.addUsage(i,this.external,ap))}removeStyles(n,r){for(let i of n)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(n,r,i){let o=r.get(n);o?o.usage++:r.set(n,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(n,this.doc)))})}removeUsage(n,r){let i=r.get(n);i&&(i.usage--,i.usage<=0&&(TT(i.elements),r.delete(n)))}ngOnDestroy(){for(let[,{elements:n}]of[...this.inline,...this.external])TT(n);this.hosts.clear()}addHost(n){this.hosts.add(n);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(n,DT(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(n,ap(r,this.doc)))}removeHost(n){this.hosts.delete(n)}addElement(n,r){return this.nonce&&r.setAttribute("nonce",this.nonce),this.isServer&&r.setAttribute(Ru,this.appId),n.appendChild(r)}static \u0275fac=function(r){return new(r||t)(ee(tt),ee(qf),ee(Wf,8),ee(sn))};static \u0275prov=B({token:t,factory:t.\u0275fac})}return t})(),sp={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},dp=/%COMP%/g;var CT="%COMP%",Hk=`_nghost-${CT}`,qk=`_ngcontent-${CT}`,zk=!0,Wk=new j("",{providedIn:"root",factory:()=>zk});function Gk(t){return qk.replace(dp,t)}function Kk(t){return Hk.replace(dp,t)}function ST(t,e){return e.map(n=>n.replace(dp,t))}var hp=(()=>{class t{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(n,r,i,o,s,c,u,l=null,f=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=c,this.ngZone=u,this.nonce=l,this.tracingService=f,this.platformIsServer=Au(c),this.defaultRenderer=new xs(n,s,u,this.platformIsServer,this.tracingService)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===on.ShadowDom&&(r=ye(F({},r),{encapsulation:on.Emulated}));let i=this.getOrCreateRenderer(n,r);return i instanceof Nu?i.applyToHost(n):i instanceof Os&&i.applyStyles(),i}getOrCreateRenderer(n,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,c=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,f=this.removeStylesOnCompDestroy,p=this.platformIsServer,m=this.tracingService;switch(r.encapsulation){case on.Emulated:o=new Nu(u,l,r,this.appId,f,s,c,p,m);break;case on.ShadowDom:return new cp(u,l,n,r,s,c,this.nonce,p,m);default:o=new Os(u,l,r,f,s,c,p,m);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(n){this.rendererByCompId.delete(n)}static \u0275fac=function(r){return new(r||t)(ee(up),ee(lp),ee(qf),ee(Wk),ee(tt),ee(sn),ee(he),ee(Wf),ee(yu,8))};static \u0275prov=B({token:t,factory:t.\u0275fac})}return t})(),xs=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,n,r,i,o){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,n){return n?this.doc.createElementNS(sp[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(bT(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(bT(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){n.remove()}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new U(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let o=sp[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=sp[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(eo.DashCase|eo.Important)?e.style.setProperty(n,r,i&eo.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&eo.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r,i){if(typeof e=="string"&&(e=Mn().getGlobalEventTarget(this.doc,e),!e))throw new U(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,n,o)),this.eventManager.addEventListener(e,n,o,i)}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function bT(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var cp=class extends xs{sharedStylesHost;hostEl;shadowRoot;constructor(e,n,r,i,o,s,c,u,l){super(e,o,s,u,l),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let f=i.styles;f=ST(i.id,f);for(let m of f){let y=document.createElement("style");c&&y.setAttribute("nonce",c),y.textContent=m,this.shadowRoot.appendChild(y)}let p=i.getExternalStyles?.();if(p)for(let m of p){let y=ap(m,o);c&&y.setAttribute("nonce",c),this.shadowRoot.appendChild(y)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(null,n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Os=class extends xs{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,n,r,i,o,s,c,u,l){super(e,o,s,c,u),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i;let f=r.styles;this.styles=l?ST(l,f):f,this.styleUrls=r.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Nu=class extends Os{contentAttr;hostAttr;constructor(e,n,r,i,o,s,c,u,l){let f=i+"-"+r.id;super(e,n,r,o,s,c,u,l,f),this.contentAttr=Gk(f),this.hostAttr=Kk(f)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}};var Pu=class t extends Ms{supportsDOMEvents=!0;static makeCurrent(){rp(new t)}onAndCancel(e,n,r,i){return e.addEventListener(n,r,i),()=>{e.removeEventListener(n,r,i)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.remove()}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=Qk();return n==null?null:Yk(n)}resetBaseElement(){Fs=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return op(document.cookie,e)}},Fs=null;function Qk(){return Fs=Fs||document.head.querySelector("base"),Fs?Fs.getAttribute("href"):null}function Yk(t){return new URL(t,document.baseURI).pathname}var Zk=(()=>{class t{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:t.\u0275fac})}return t})(),RT=(()=>{class t extends ks{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i,o){return n.addEventListener(r,i,o),()=>this.removeEventListener(n,r,i,o)}removeEventListener(n,r,i,o){return n.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||t)(ee(tt))};static \u0275prov=B({token:t,factory:t.\u0275fac})}return t})(),AT=["alt","control","meta","shift"],Jk={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Xk={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},NT=(()=>{class t extends ks{constructor(n){super(n)}supports(n){return t.parseEventName(n)!=null}addEventListener(n,r,i,o){let s=t.parseEventName(r),c=t.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Mn().onAndCancel(n,s.domEventName,c,o))}static parseEventName(n){let r=n.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=t._normalizeKey(r.pop()),s="",c=r.indexOf("code");if(c>-1&&(r.splice(c,1),s="code."),AT.forEach(l=>{let f=r.indexOf(l);f>-1&&(r.splice(f,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(n,r){let i=Jk[n.key]||n.key,o="";return r.indexOf("code.")>-1&&(i=n.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),AT.forEach(s=>{if(s!==i){let c=Xk[s];c(n)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(n,r,i){return o=>{t.matchEventFullKeyCode(o,n)&&i.runGuarded(()=>r(o))}}static _normalizeKey(n){return n==="esc"?"escape":n}static \u0275fac=function(r){return new(r||t)(ee(tt))};static \u0275prov=B({token:t,factory:t.\u0275fac})}return t})();function fp(t,e,n){return pT(F({rootComponent:t,platformRef:n?.platformRef},ex(e)))}function ex(t){return{appProviders:[...ox,...t?.providers??[]],platformProviders:ix}}function tx(){Pu.makeCurrent()}function nx(){return new ar}function rx(){return fE(document),document}var ix=[{provide:sn,useValue:Cu},{provide:zf,useValue:tx,multi:!0},{provide:tt,useFactory:rx}];var ox=[{provide:cu,useValue:"root"},{provide:ar,useFactory:nx},{provide:Mu,useClass:RT,multi:!0,deps:[tt]},{provide:Mu,useClass:NT,multi:!0,deps:[tt]},hp,lp,up,{provide:Ji,useExisting:hp},{provide:Ps,useClass:Zk},[]];var MT=(()=>{class t{_doc;constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static \u0275fac=function(r){return new(r||t)(ee(tt))};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Z="primary",Ys=Symbol("RouteTitle"),vp=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function Yr(t){return new vp(t)}function jT(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],c=t[o];if(s[0]===":")i[s.substring(1)]=c;else if(s!==c.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function ax(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!cn(t[n],e[n]))return!1;return!0}function cn(t,e){let n=t?_p(t):void 0,r=e?_p(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!UT(t[i],e[i]))return!1;return!0}function _p(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function UT(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,o)=>r[o]===i)}else return t===e}function BT(t){return t.length>0?t[t.length-1]:null}function dr(t){return Vh(t)?t:Du(t)?Ae(Promise.resolve(t)):Q(t)}var cx={exact:HT,subset:qT},$T={exact:ux,subset:lx,ignored:()=>!0};function PT(t,e,n){return cx[n.paths](t.root,e.root,n.matrixParams)&&$T[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function ux(t,e){return cn(t,e)}function HT(t,e,n){if(!Kr(t.segments,e.segments)||!Ou(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!HT(t.children[r],e.children[r],n))return!1;return!0}function lx(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>UT(t[n],e[n]))}function qT(t,e,n){return zT(t,e,e.segments,n)}function zT(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!Kr(i,n)||e.hasChildren()||!Ou(i,n,r))}else if(t.segments.length===n.length){if(!Kr(t.segments,n)||!Ou(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!qT(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!Kr(t.segments,i)||!Ou(t.segments,i,r)||!t.children[Z]?!1:zT(t.children[Z],e,o,r)}}function Ou(t,e,n){return e.every((r,i)=>$T[n](t[i].parameters,r.parameters))}var ln=class{root;queryParams;fragment;_queryParamMap;constructor(e=new de([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Yr(this.queryParams),this._queryParamMap}toString(){return fx.serialize(this)}},de=class{segments;children;parent=null;constructor(e,n){this.segments=e,this.children=n,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Fu(this)}},ur=class{path;parameters;_parameterMap;constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=Yr(this.parameters),this._parameterMap}toString(){return GT(this)}};function dx(t,e){return Kr(t,e)&&t.every((n,r)=>cn(n.parameters,e[r].parameters))}function Kr(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function hx(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===Z&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==Z&&(n=n.concat(e(i,r)))}),n}var Zs=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:()=>new Zr,providedIn:"root"})}return t})(),Zr=class{parse(e){let n=new wp(e);return new ln(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${Ls(e.root,!0)}`,r=mx(e.queryParams),i=typeof e.fragment=="string"?`#${px(e.fragment)}`:"";return`${n}${r}${i}`}},fx=new Zr;function Fu(t){return t.segments.map(e=>GT(e)).join("/")}function Ls(t,e){if(!t.hasChildren())return Fu(t);if(e){let n=t.children[Z]?Ls(t.children[Z],!1):"",r=[];return Object.entries(t.children).forEach(([i,o])=>{i!==Z&&r.push(`${i}:${Ls(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=hx(t,(r,i)=>i===Z?[Ls(t.children[Z],!1)]:[`${i}:${Ls(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[Z]!=null?`${Fu(t)}/${n[0]}`:`${Fu(t)}/(${n.join("//")})`}}function WT(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ku(t){return WT(t).replace(/%3B/gi,";")}function px(t){return encodeURI(t)}function Ip(t){return WT(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Lu(t){return decodeURIComponent(t)}function kT(t){return Lu(t.replace(/\+/g,"%20"))}function GT(t){return`${Ip(t.path)}${gx(t.parameters)}`}function gx(t){return Object.entries(t).map(([e,n])=>`;${Ip(e)}=${Ip(n)}`).join("")}function mx(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${ku(n)}=${ku(i)}`).join("&"):`${ku(n)}=${ku(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var yx=/^[^\/()?;#]+/;function pp(t){let e=t.match(yx);return e?e[0]:""}var vx=/^[^\/()?;=#]+/;function _x(t){let e=t.match(vx);return e?e[0]:""}var Ix=/^[^=?&#]+/;function wx(t){let e=t.match(Ix);return e?e[0]:""}var Ex=/^[^&#]+/;function Tx(t){let e=t.match(Ex);return e?e[0]:""}var wp=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new de([],{}):new de([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[Z]=new de(e,n)),r}parseSegment(){let e=pp(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new U(4009,!1);return this.capture(e),new ur(Lu(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=_x(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=pp(this.remaining);i&&(r=i,this.capture(r))}e[Lu(n)]=Lu(r)}parseQueryParam(e){let n=wx(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=Tx(this.remaining);s&&(r=s,this.capture(r))}let i=kT(n),o=kT(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=pp(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new U(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=Z);let s=this.parseChildren();n[o]=Object.keys(s).length===1?s[Z]:new de([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new U(4011,!1)}};function KT(t){return t.segments.length>0?new de([],{[Z]:t}):t}function QT(t){let e={};for(let[r,i]of Object.entries(t.children)){let o=QT(i);if(r===Z&&o.segments.length===0&&o.hasChildren())for(let[s,c]of Object.entries(o.children))e[s]=c;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let n=new de(t.segments,e);return Dx(n)}function Dx(t){if(t.numberOfChildren===1&&t.children[Z]){let e=t.children[Z];return new de(t.segments.concat(e.segments),e.children)}return t}function ao(t){return t instanceof ln}function YT(t,e,n=null,r=null){let i=ZT(t);return JT(i,e,n,r)}function ZT(t){let e;function n(o){let s={};for(let u of o.children){let l=n(u);s[u.outlet]=l}let c=new de(o.url,s);return o===t&&(e=c),c}let r=n(t.root),i=KT(r);return e??i}function JT(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return gp(i,i,i,n,r);let o=bx(e);if(o.toRoot())return gp(i,i,new de([],{}),n,r);let s=Cx(o,i,t),c=s.processChildren?js(s.segmentGroup,s.index,o.commands):eD(s.segmentGroup,s.index,o.commands);return gp(i,s.segmentGroup,c,n,r)}function ju(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function Bs(t){return typeof t=="object"&&t!=null&&t.outlets}function gp(t,e,n,r,i){let o={};r&&Object.entries(r).forEach(([u,l])=>{o[u]=Array.isArray(l)?l.map(f=>`${f}`):`${l}`});let s;t===e?s=n:s=XT(t,e,n);let c=KT(QT(s));return new ln(c,o,i)}function XT(t,e,n){let r={};return Object.entries(t.children).forEach(([i,o])=>{o===e?r[i]=n:r[i]=XT(o,e,n)}),new de(t.segments,r)}var Uu=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&ju(r[0]))throw new U(4003,!1);let i=r.find(Bs);if(i&&i!==BT(r))throw new U(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function bx(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new Uu(!0,0,t);let e=0,n=!1,r=t.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let c={};return Object.entries(o.outlets).forEach(([u,l])=>{c[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:c}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((c,u)=>{u==0&&c==="."||(u==0&&c===""?n=!0:c===".."?e++:c!=""&&i.push(c))}),i):[...i,o]},[]);return new Uu(n,e,r)}var oo=class{segmentGroup;processChildren;index;constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function Cx(t,e,n){if(t.isAbsolute)return new oo(e,!0,0);if(!n)return new oo(e,!1,NaN);if(n.parent===null)return new oo(n,!0,0);let r=ju(t.commands[0])?0:1,i=n.segments.length-1+r;return Sx(n,i,t.numberOfDoubleDots)}function Sx(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new U(4005,!1);i=r.segments.length}return new oo(r,!1,i-o)}function Ax(t){return Bs(t[0])?t[0].outlets:{[Z]:t}}function eD(t,e,n){if(t??=new de([],{}),t.segments.length===0&&t.hasChildren())return js(t,e,n);let r=Rx(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let o=new de(t.segments.slice(0,r.pathIndex),{});return o.children[Z]=new de(t.segments.slice(r.pathIndex),t.children),js(o,0,i)}else return r.match&&i.length===0?new de(t.segments,{}):r.match&&!t.hasChildren()?Ep(t,e,n):r.match?js(t,0,i):Ep(t,e,n)}function js(t,e,n){if(n.length===0)return new de(t.segments,{});{let r=Ax(n),i={};if(Object.keys(r).some(o=>o!==Z)&&t.children[Z]&&t.numberOfChildren===1&&t.children[Z].segments.length===0){let o=js(t.children[Z],e,n);return new de(t.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=eD(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new de(t.segments,i)}}function Rx(t,e,n){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;let s=t.segments[i],c=n[r];if(Bs(c))break;let u=`${c}`,l=r<n.length-1?n[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!OT(u,l,s))return o;r+=2}else{if(!OT(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Ep(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let o=n[i];if(Bs(o)){let u=Nx(o.outlets);return new de(r,u)}if(i===0&&ju(n[0])){let u=t.segments[e];r.push(new ur(u.path,xT(n[0]))),i++;continue}let s=Bs(o)?o.outlets[Z]:`${o}`,c=i<n.length-1?n[i+1]:null;s&&c&&ju(c)?(r.push(new ur(s,xT(c))),i+=2):(r.push(new ur(s,{})),i++)}return new de(r,{})}function Nx(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=Ep(new de([],{}),0,r))}),e}function xT(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function OT(t,e,n){return t==n.path&&cn(e,n.parameters)}var Vu="imperative",Ue=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(Ue||{}),Dt=class{id;url;constructor(e,n){this.id=e,this.url=n}},Jr=class extends Dt{type=Ue.NavigationStart;navigationTrigger;restoredState;constructor(e,n,r="imperative",i=null){super(e,n),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Pn=class extends Dt{urlAfterRedirects;type=Ue.NavigationEnd;constructor(e,n,r){super(e,n),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},yt=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(yt||{}),$s=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}($s||{}),un=class extends Dt{reason;code;type=Ue.NavigationCancel;constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},kn=class extends Dt{reason;code;type=Ue.NavigationSkipped;constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i}},co=class extends Dt{error;target;type=Ue.NavigationError;constructor(e,n,r,i){super(e,n),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Hs=class extends Dt{urlAfterRedirects;state;type=Ue.RoutesRecognized;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Bu=class extends Dt{urlAfterRedirects;state;type=Ue.GuardsCheckStart;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},$u=class extends Dt{urlAfterRedirects;state;shouldActivate;type=Ue.GuardsCheckEnd;constructor(e,n,r,i,o){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Hu=class extends Dt{urlAfterRedirects;state;type=Ue.ResolveStart;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},qu=class extends Dt{urlAfterRedirects;state;type=Ue.ResolveEnd;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},zu=class{route;type=Ue.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Wu=class{route;type=Ue.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Gu=class{snapshot;type=Ue.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ku=class{snapshot;type=Ue.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Qu=class{snapshot;type=Ue.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Yu=class{snapshot;type=Ue.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var qs=class{},uo=class{url;navigationBehaviorOptions;constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}};function Mx(t,e){return t.providers&&!t._injector&&(t._injector=Eu(t.providers,e,`Route: ${t.path}`)),t._injector??e}function Kt(t){return t.outlet||Z}function Px(t,e){let n=t.filter(r=>Kt(r)===e);return n.push(...t.filter(r=>Kt(r)!==e)),n}function Js(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var Zu=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Js(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new fo(this.rootInjector)}},fo=(()=>{class t{rootInjector;contexts=new Map;constructor(n){this.rootInjector=n}onChildOutletCreated(n,r){let i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){let r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new Zu(this.rootInjector),this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static \u0275fac=function(r){return new(r||t)(ee(gt))};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Ju=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=Tp(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=Tp(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=Dp(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Dp(e,this._root).map(n=>n.value)}};function Tp(t,e){if(t===e.value)return e;for(let n of e.children){let r=Tp(t,n);if(r)return r}return null}function Dp(t,e){if(t===e.value)return[e];for(let n of e.children){let r=Dp(t,n);if(r.length)return r.unshift(e),r}return[]}var Tt=class{value;children;constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function io(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var zs=class extends Ju{snapshot;constructor(e,n){super(e),this.snapshot=n,Pp(this,e)}toString(){return this.snapshot.toString()}};function tD(t){let e=kx(t),n=new We([new ur("",{})]),r=new We({}),i=new We({}),o=new We({}),s=new We(""),c=new lr(n,r,o,s,i,Z,t,e.root);return c.snapshot=e.root,new zs(new Tt(c,[]),e)}function kx(t){let e={},n={},r={},i="",o=new Qr([],e,r,i,n,Z,t,null,{});return new Ws("",new Tt(o,[]))}var lr=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,n,r,i,o,s,c,u){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=c,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(oe(l=>l[Ys]))??Q(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(oe(e=>Yr(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(oe(e=>Yr(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Xu(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:F(F({},e.params),t.params),data:F(F({},e.data),t.data),resolve:F(F(F(F({},t.data),e.data),i?.data),t._resolvedData)}:r={params:F({},t.params),data:F({},t.data),resolve:F(F({},t.data),t._resolvedData??{})},i&&rD(i)&&(r.resolve[Ys]=i.title),r}var Qr=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Ys]}constructor(e,n,r,i,o,s,c,u,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=c,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Yr(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Yr(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},Ws=class extends Ju{url;constructor(e,n){super(n),this.url=e,Pp(this,n)}toString(){return nD(this._root)}};function Pp(t,e){e.value._routerState=t,e.children.forEach(n=>Pp(t,n))}function nD(t){let e=t.children.length>0?` { ${t.children.map(nD).join(", ")} } `:"";return`${t.value}${e}`}function mp(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,cn(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),cn(e.params,n.params)||t.paramsSubject.next(n.params),ax(e.url,n.url)||t.urlSubject.next(n.url),cn(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function bp(t,e){let n=cn(t.params,e.params)&&dx(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||bp(t.parent,e.parent))}function rD(t){return typeof t.title=="string"||t.title===null}var iD=new j(""),Xs=(()=>{class t{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=Z;activateEvents=new pt;deactivateEvents=new pt;attachEvents=new pt;detachEvents=new pt;routerOutletData=oE(void 0);parentContexts=k(fo);location=k(wu);changeDetector=k(np);inputBinder=k(rl,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(n){if(n.name){let{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new U(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new U(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new U(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new U(4013,!1);this._activatedRoute=n;let i=this.location,s=n.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,u=new Cp(n,c,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||t)};static \u0275dir=Xf({type:t,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[kf]})}return t})(),Cp=class{route;childContexts;parent;outletData;constructor(e,n,r,i){this.route=e,this.childContexts=n,this.parent=r,this.outletData=i}get(e,n){return e===lr?this.route:e===fo?this.childContexts:e===iD?this.outletData:this.parent.get(e,n)}},rl=new j("");var kp=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275cmp=an({type:t,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&mt(0,"router-outlet")},dependencies:[Xs],encapsulation:2})}return t})();function xp(t){let e=t.children&&t.children.map(xp),n=e?ye(F({},t),{children:e}):F({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==Z&&(n.component=kp),n}function xx(t,e,n){let r=Gs(t,e._root,n?n._root:void 0);return new zs(r,e)}function Gs(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=Ox(t,e,n);return new Tt(r,i)}else{if(t.shouldAttach(e.value)){let o=t.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(c=>Gs(t,c)),s}}let r=Fx(e.value),i=e.children.map(o=>Gs(t,o));return new Tt(r,i)}}function Ox(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return Gs(t,r,i);return Gs(t,r)})}function Fx(t){return new lr(new We(t.url),new We(t.params),new We(t.queryParams),new We(t.fragment),new We(t.data),t.outlet,t.component,t)}var lo=class{redirectTo;navigationBehaviorOptions;constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}},oD="ngNavigationCancelingError";function el(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=ao(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=sD(!1,yt.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function sD(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[oD]=!0,n.cancellationCode=e,n}function Lx(t){return aD(t)&&ao(t.url)}function aD(t){return!!t&&t[oD]}var Vx=(t,e,n,r)=>oe(i=>(new Sp(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),Sp=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,n,r,i,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),mp(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=io(n);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=io(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),c=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:c})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=io(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=io(n);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Yu(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Ku(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(mp(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let c=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(c.contexts),s.attachRef=c.componentRef,s.route=c.route.value,s.outlet&&s.outlet.attach(c.componentRef,c.route.value),mp(c.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},tl=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},so=class{component;route;constructor(e,n){this.component=e,this.route=n}};function jx(t,e,n){let r=t._root,i=e?e._root:null;return Vs(r,i,n,[r.value])}function Ux(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function po(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!rw(t)?t:e.get(t):r}function Vs(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=io(e);return t.children.forEach(s=>{Bx(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,c])=>Us(c,n.getContext(s),i)),i}function Bx(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,s=e?e.value:null,c=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let u=$x(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new tl(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Vs(t,e,c?c.children:null,r,i):Vs(t,e,n,r,i),u&&c&&c.outlet&&c.outlet.isActivated&&i.canDeactivateChecks.push(new so(c.outlet.component,s))}else s&&Us(e,c,i),i.canActivateChecks.push(new tl(r)),o.component?Vs(t,null,c?c.children:null,r,i):Vs(t,null,n,r,i);return i}function $x(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!Kr(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Kr(t.url,e.url)||!cn(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!bp(t,e)||!cn(t.queryParams,e.queryParams);case"paramsChange":default:return!bp(t,e)}}function Us(t,e,n){let r=io(t),i=t.value;Object.entries(r).forEach(([o,s])=>{i.component?e?Us(s,e.children.getContext(o),n):Us(s,null,n):Us(s,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new so(e.outlet.component,i)):n.canDeactivateChecks.push(new so(null,i)):n.canDeactivateChecks.push(new so(null,i))}function ea(t){return typeof t=="function"}function Hx(t){return typeof t=="boolean"}function qx(t){return t&&ea(t.canLoad)}function zx(t){return t&&ea(t.canActivate)}function Wx(t){return t&&ea(t.canActivateChild)}function Gx(t){return t&&ea(t.canDeactivate)}function Kx(t){return t&&ea(t.canMatch)}function cD(t){return t instanceof Cn||t?.name==="EmptyError"}var xu=Symbol("INITIAL_VALUE");function ho(){return $t(t=>Ac(t.map(e=>e.pipe(Sn(1),Pc(xu)))).pipe(oe(e=>{for(let n of e)if(n!==!0){if(n===xu)return xu;if(n===!1||Qx(n))return n}return!0}),St(e=>e!==xu),Sn(1)))}function Qx(t){return ao(t)||t instanceof lo}function Yx(t,e){return Fe(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?Q(ye(F({},n),{guardsResult:!0})):Zx(s,r,i,t).pipe(Fe(c=>c&&Hx(c)?Jx(r,o,t,e):Q(c)),oe(c=>ye(F({},n),{guardsResult:c})))})}function Zx(t,e,n,r){return Ae(t).pipe(Fe(i=>rO(i.component,i.route,n,e,r)),An(i=>i!==!0,!0))}function Jx(t,e,n,r){return Ae(e).pipe($i(i=>Bi(eO(i.route.parent,r),Xx(i.route,r),nO(t,i.path,n),tO(t,i.route,n))),An(i=>i!==!0,!0))}function Xx(t,e){return t!==null&&e&&e(new Qu(t)),Q(!0)}function eO(t,e){return t!==null&&e&&e(new Gu(t)),Q(!0)}function tO(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return Q(!0);let i=r.map(o=>Rc(()=>{let s=Js(e)??n,c=po(o,s),u=zx(c)?c.canActivate(e,t):ut(s,()=>c(e,t));return dr(u).pipe(An())}));return Q(i).pipe(ho())}function nO(t,e,n){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>Ux(s)).filter(s=>s!==null).map(s=>Rc(()=>{let c=s.guards.map(u=>{let l=Js(s.node)??n,f=po(u,l),p=Wx(f)?f.canActivateChild(r,t):ut(l,()=>f(r,t));return dr(p).pipe(An())});return Q(c).pipe(ho())}));return Q(o).pipe(ho())}function rO(t,e,n,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return Q(!0);let s=o.map(c=>{let u=Js(e)??i,l=po(c,u),f=Gx(l)?l.canDeactivate(t,e,n,r):ut(u,()=>l(t,e,n,r));return dr(f).pipe(An())});return Q(s).pipe(ho())}function iO(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return Q(!0);let o=i.map(s=>{let c=po(s,t),u=qx(c)?c.canLoad(e,n):ut(t,()=>c(e,n));return dr(u)});return Q(o).pipe(ho(),uD(r))}function uD(t){return fc(Ge(e=>{if(typeof e!="boolean")throw el(t,e)}),oe(e=>e===!0))}function oO(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return Q(!0);let o=i.map(s=>{let c=po(s,t),u=Kx(c)?c.canMatch(e,n):ut(t,()=>c(e,n));return dr(u)});return Q(o).pipe(ho(),uD(r))}var Ks=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},Qs=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function ro(t){return Ui(new Ks(t))}function sO(t){return Ui(new U(4e3,!1))}function aO(t){return Ui(sD(!1,yt.GuardRejected))}var Ap=class{urlSerializer;urlTree;constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return Q(r);if(i.numberOfChildren>1||!i.children[Z])return sO(`${e.redirectTo}`);i=i.children[Z]}}applyRedirectCommands(e,n,r,i,o){if(typeof n!="string"){let c=n,{queryParams:u,fragment:l,routeConfig:f,url:p,outlet:m,params:y,data:A,title:R}=i,P=ut(o,()=>c({params:y,data:A,queryParams:u,fragment:l,routeConfig:f,url:p,outlet:m,title:R}));if(P instanceof ln)throw new Qs(P);n=P}let s=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n[0]==="/")throw new Qs(s);return s}applyRedirectCreateUrlTree(e,n,r,i){let o=this.createSegmentGroup(e,n.root,r,i);return new ln(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let c=o.substring(1);r[i]=n[c]}else r[i]=o}),r}createSegmentGroup(e,n,r,i){let o=this.createSegments(e,n.segments,r,i),s={};return Object.entries(n.children).forEach(([c,u])=>{s[c]=this.createSegmentGroup(e,u,r,i)}),new de(o,s)}createSegments(e,n,r,i){return n.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new U(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},Rp={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function cO(t,e,n,r,i){let o=lD(t,e,n);return o.matched?(r=Mx(e,r),oO(r,e,n,i).pipe(oe(s=>s===!0?o:F({},Rp)))):Q(o)}function lD(t,e,n){if(e.path==="**")return uO(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?F({},Rp):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||jT)(n,t,e);if(!i)return F({},Rp);let o={};Object.entries(i.posParams??{}).forEach(([c,u])=>{o[c]=u.path});let s=i.consumed.length>0?F(F({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function uO(t){return{matched:!0,parameters:t.length>0?BT(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function FT(t,e,n,r){return n.length>0&&hO(t,n,r)?{segmentGroup:new de(e,dO(r,new de(n,t.children))),slicedSegments:[]}:n.length===0&&fO(t,n,r)?{segmentGroup:new de(t.segments,lO(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new de(t.segments,t.children),slicedSegments:n}}function lO(t,e,n,r){let i={};for(let o of n)if(il(t,e,o)&&!r[Kt(o)]){let s=new de([],{});i[Kt(o)]=s}return F(F({},r),i)}function dO(t,e){let n={};n[Z]=e;for(let r of t)if(r.path===""&&Kt(r)!==Z){let i=new de([],{});n[Kt(r)]=i}return n}function hO(t,e,n){return n.some(r=>il(t,e,r)&&Kt(r)!==Z)}function fO(t,e,n){return n.some(r=>il(t,e,r))}function il(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function pO(t,e,n){return e.length===0&&!t.children[n]}var Np=class{};function gO(t,e,n,r,i,o,s="emptyOnly"){return new Mp(t,e,n,r,i,s,o).recognize()}var mO=31,Mp=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,n,r,i,o,s,c){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=c,this.applyRedirects=new Ap(this.urlSerializer,this.urlTree)}noMatchError(e){return new U(4002,`'${e.segmentGroup}'`)}recognize(){let e=FT(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(oe(({children:n,rootSnapshot:r})=>{let i=new Tt(r,n),o=new Ws("",i),s=YT(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let n=new Qr([],Object.freeze({}),Object.freeze(F({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),Z,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,Z,n).pipe(oe(r=>({children:r,rootSnapshot:n})),tr(r=>{if(r instanceof Qs)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Ks?this.noMatchError(r):r}))}processSegmentGroup(e,n,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r,o):this.processSegment(e,n,r,r.segments,i,!0,o).pipe(oe(s=>s instanceof Tt?[s]:[]))}processChildren(e,n,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return Ae(o).pipe($i(s=>{let c=r.children[s],u=Px(n,s);return this.processSegmentGroup(e,u,c,s,i)}),Mc((s,c)=>(s.push(...c),s)),nr(null),jh(),Fe(s=>{if(s===null)return ro(r);let c=dD(s);return yO(c),Q(c)}))}processSegment(e,n,r,i,o,s,c){return Ae(n).pipe($i(u=>this.processSegmentAgainstRoute(u._injector??e,n,u,r,i,o,s,c).pipe(tr(l=>{if(l instanceof Ks)return Q(null);throw l}))),An(u=>!!u),tr(u=>{if(cD(u))return pO(r,i,o)?Q(new Np):ro(r);throw u}))}processSegmentAgainstRoute(e,n,r,i,o,s,c,u){return Kt(r)!==s&&(s===Z||!il(i,o,r))?ro(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,u):this.allowRedirects&&c?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,o,s,u):ro(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s,c){let{matched:u,parameters:l,consumedSegments:f,positionalParamSegments:p,remainingSegments:m}=lD(n,i,o);if(!u)return ro(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>mO&&(this.allowRedirects=!1));let y=new Qr(o,l,Object.freeze(F({},this.urlTree.queryParams)),this.urlTree.fragment,LT(i),Kt(i),i.component??i._loadedComponent??null,i,VT(i)),A=Xu(y,c,this.paramsInheritanceStrategy);y.params=Object.freeze(A.params),y.data=Object.freeze(A.data);let R=this.applyRedirects.applyRedirectCommands(f,i.redirectTo,p,y,e);return this.applyRedirects.lineralizeSegments(i,R).pipe(Fe(P=>this.processSegment(e,r,n,P.concat(m),s,!1,c)))}matchSegmentAgainstRoute(e,n,r,i,o,s){let c=cO(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),c.pipe($t(u=>u.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe($t(({routes:l})=>{let f=r._loadedInjector??e,{parameters:p,consumedSegments:m,remainingSegments:y}=u,A=new Qr(m,p,Object.freeze(F({},this.urlTree.queryParams)),this.urlTree.fragment,LT(r),Kt(r),r.component??r._loadedComponent??null,r,VT(r)),R=Xu(A,s,this.paramsInheritanceStrategy);A.params=Object.freeze(R.params),A.data=Object.freeze(R.data);let{segmentGroup:P,slicedSegments:V}=FT(n,m,y,l);if(V.length===0&&P.hasChildren())return this.processChildren(f,l,P,A).pipe(oe(W=>new Tt(A,W)));if(l.length===0&&V.length===0)return Q(new Tt(A,[]));let q=Kt(r)===o;return this.processSegment(f,l,P,V,q?Z:o,!0,A).pipe(oe(W=>new Tt(A,W instanceof Tt?[W]:[])))}))):ro(n)))}getChildConfig(e,n,r){return n.children?Q({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?Q({routes:n._loadedRoutes,injector:n._loadedInjector}):iO(e,n,r,this.urlSerializer).pipe(Fe(i=>i?this.configLoader.loadChildren(e,n).pipe(Ge(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):aO(n))):Q({routes:[],injector:e})}};function yO(t){t.sort((e,n)=>e.value.outlet===Z?-1:n.value.outlet===Z?1:e.value.outlet.localeCompare(n.value.outlet))}function vO(t){let e=t.value.routeConfig;return e&&e.path===""}function dD(t){let e=[],n=new Set;for(let r of t){if(!vO(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=dD(r.children);e.push(new Tt(r.value,i))}return e.filter(r=>!n.has(r))}function LT(t){return t.data||{}}function VT(t){return t.resolve||{}}function _O(t,e,n,r,i,o){return Fe(s=>gO(t,e,n,r,s.extractedUrl,i,o).pipe(oe(({state:c,tree:u})=>ye(F({},s),{targetSnapshot:c,urlAfterRedirects:u}))))}function IO(t,e){return Fe(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return Q(n);let o=new Set(i.map(u=>u.route)),s=new Set;for(let u of o)if(!s.has(u))for(let l of hD(u))s.add(l);let c=0;return Ae(s).pipe($i(u=>o.has(u)?wO(u,r,t,e):(u.data=Xu(u,u.parent,t).resolve,Q(void 0))),Ge(()=>c++),Hi(1),Fe(u=>c===s.size?Q(n):ht))})}function hD(t){let e=t.children.map(n=>hD(n)).flat();return[t,...e]}function wO(t,e,n,r){let i=t.routeConfig,o=t._resolve;return i?.title!==void 0&&!rD(i)&&(o[Ys]=i.title),EO(o,t,e,r).pipe(oe(s=>(t._resolvedData=s,t.data=Xu(t,t.parent,n).resolve,null)))}function EO(t,e,n,r){let i=_p(t);if(i.length===0)return Q({});let o={};return Ae(i).pipe(Fe(s=>TO(t[s],e,n,r).pipe(An(),Ge(c=>{if(c instanceof lo)throw el(new Zr,c);o[s]=c}))),Hi(1),oe(()=>o),tr(s=>cD(s)?ht:Ui(s)))}function TO(t,e,n,r){let i=Js(e)??r,o=po(t,i),s=o.resolve?o.resolve(e,n):ut(i,()=>o(e,n));return dr(s)}function yp(t){return $t(e=>{let n=t(e);return n?Ae(n).pipe(oe(()=>e)):Q(e)})}var Op=(()=>{class t{buildTitle(n){let r,i=n.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===Z);return r}getResolvedTitleForRoute(n){return n.data[Ys]}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:()=>k(fD),providedIn:"root"})}return t})(),fD=(()=>{class t extends Op{title;constructor(n){super(),this.title=n}updateTitle(n){let r=this.buildTitle(n);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||t)(ee(MT))};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),ta=new j("",{providedIn:"root",factory:()=>({})}),na=new j(""),pD=(()=>{class t{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=k(uT);loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return Q(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);let r=dr(n.loadComponent()).pipe(oe(mD),Ge(o=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=o}),ps(()=>{this.componentLoaders.delete(n)})),i=new Fi(r,()=>new ze).pipe(Oi());return this.componentLoaders.set(n,i),i}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Q({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=gD(r,this.compiler,n,this.onLoadEndListener).pipe(ps(()=>{this.childrenLoaders.delete(r)})),s=new Fi(o,()=>new ze).pipe(Oi());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function gD(t,e,n,r){return dr(t.loadChildren()).pipe(oe(mD),Fe(i=>i instanceof Jf||Array.isArray(i)?Q(i):Ae(e.compileModuleAsync(i))),oe(i=>{r&&r(t);let o,s,c=!1;return Array.isArray(i)?(s=i,c=!0):(o=i.create(n).injector,s=o.get(na,[],{optional:!0,self:!0}).flat()),{routes:s.map(xp),injector:o}}))}function DO(t){return t&&typeof t=="object"&&"default"in t}function mD(t){return DO(t)?t.default:t}var ol=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:()=>k(bO),providedIn:"root"})}return t})(),bO=(()=>{class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),yD=new j("");var vD=new j(""),_D=(()=>{class t{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new ze;transitionAbortSubject=new ze;configLoader=k(pD);environmentInjector=k(gt);destroyRef=k(Ns);urlSerializer=k(Zs);rootContexts=k(fo);location=k(to);inputBindingEnabled=k(rl,{optional:!0})!==null;titleStrategy=k(Op);options=k(ta,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=k(ol);createViewTransition=k(yD,{optional:!0});navigationErrorHandler=k(vD,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>Q(void 0);rootComponentType=null;destroyed=!1;constructor(){let n=i=>this.events.next(new zu(i)),r=i=>this.events.next(new Wu(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=n,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(n){let r=++this.navigationId;this.transitions?.next(ye(F({},n),{extractedUrl:this.urlHandlingStrategy.extract(n.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:r}))}setupNavigations(n){return this.transitions=new We(null),this.transitions.pipe(St(r=>r!==null),$t(r=>{let i=!1,o=!1;return Q(r).pipe($t(s=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",yt.SupersededByNewNavigation),ht;this.currentTransition=r,this.currentNavigation={id:s.id,initialUrl:s.rawUrl,extractedUrl:s.extractedUrl,targetBrowserUrl:typeof s.extras.browserUrl=="string"?this.urlSerializer.parse(s.extras.browserUrl):s.extras.browserUrl,trigger:s.source,extras:s.extras,previousNavigation:this.lastSuccessfulNavigation?ye(F({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let c=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),u=s.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!c&&u!=="reload"){let l="";return this.events.next(new kn(s.id,this.urlSerializer.serialize(s.rawUrl),l,$s.IgnoredSameUrlNavigation)),s.resolve(!1),ht}if(this.urlHandlingStrategy.shouldProcessUrl(s.rawUrl))return Q(s).pipe($t(l=>(this.events.next(new Jr(l.id,this.urlSerializer.serialize(l.extractedUrl),l.source,l.restoredState)),l.id!==this.navigationId?ht:Promise.resolve(l))),_O(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy),Ge(l=>{r.targetSnapshot=l.targetSnapshot,r.urlAfterRedirects=l.urlAfterRedirects,this.currentNavigation=ye(F({},this.currentNavigation),{finalUrl:l.urlAfterRedirects});let f=new Hs(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(f)}));if(c&&this.urlHandlingStrategy.shouldProcessUrl(s.currentRawUrl)){let{id:l,extractedUrl:f,source:p,restoredState:m,extras:y}=s,A=new Jr(l,this.urlSerializer.serialize(f),p,m);this.events.next(A);let R=tD(this.rootComponentType).snapshot;return this.currentTransition=r=ye(F({},s),{targetSnapshot:R,urlAfterRedirects:f,extras:ye(F({},y),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=f,Q(r)}else{let l="";return this.events.next(new kn(s.id,this.urlSerializer.serialize(s.extractedUrl),l,$s.IgnoredByUrlHandlingStrategy)),s.resolve(!1),ht}}),Ge(s=>{let c=new Bu(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(c)}),oe(s=>(this.currentTransition=r=ye(F({},s),{guards:jx(s.targetSnapshot,s.currentSnapshot,this.rootContexts)}),r)),Yx(this.environmentInjector,s=>this.events.next(s)),Ge(s=>{if(r.guardsResult=s.guardsResult,s.guardsResult&&typeof s.guardsResult!="boolean")throw el(this.urlSerializer,s.guardsResult);let c=new $u(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot,!!s.guardsResult);this.events.next(c)}),St(s=>s.guardsResult?!0:(this.cancelNavigationTransition(s,"",yt.GuardRejected),!1)),yp(s=>{if(s.guards.canActivateChecks.length!==0)return Q(s).pipe(Ge(c=>{let u=new Hu(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}),$t(c=>{let u=!1;return Q(c).pipe(IO(this.paramsInheritanceStrategy,this.environmentInjector),Ge({next:()=>u=!0,complete:()=>{u||this.cancelNavigationTransition(c,"",yt.NoDataFromResolver)}}))}),Ge(c=>{let u=new qu(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}))}),yp(s=>{let c=u=>{let l=[];u.routeConfig?.loadComponent&&!u.routeConfig._loadedComponent&&l.push(this.configLoader.loadComponent(u.routeConfig).pipe(Ge(f=>{u.component=f}),oe(()=>{})));for(let f of u.children)l.push(...c(f));return l};return Ac(c(s.targetSnapshot.root)).pipe(nr(null),Sn(1))}),yp(()=>this.afterPreactivation()),$t(()=>{let{currentSnapshot:s,targetSnapshot:c}=r,u=this.createViewTransition?.(this.environmentInjector,s.root,c.root);return u?Ae(u).pipe(oe(()=>r)):Q(r)}),oe(s=>{let c=xx(n.routeReuseStrategy,s.targetSnapshot,s.currentRouterState);return this.currentTransition=r=ye(F({},s),{targetRouterState:c}),this.currentNavigation.targetRouterState=c,r}),Ge(()=>{this.events.next(new qs)}),Vx(this.rootContexts,n.routeReuseStrategy,s=>this.events.next(s),this.inputBindingEnabled),Sn(1),Ge({next:s=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Pn(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects))),this.titleStrategy?.updateTitle(s.targetRouterState.snapshot),s.resolve(!0)},complete:()=>{i=!0}}),Uh(this.transitionAbortSubject.pipe(Ge(s=>{throw s}))),ps(()=>{!i&&!o&&this.cancelNavigationTransition(r,"",yt.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation=null,this.currentTransition=null)}),tr(s=>{if(this.destroyed)return r.resolve(!1),ht;if(o=!0,aD(s))this.events.next(new un(r.id,this.urlSerializer.serialize(r.extractedUrl),s.message,s.cancellationCode)),Lx(s)?this.events.next(new uo(s.url,s.navigationBehaviorOptions)):r.resolve(!1);else{let c=new co(r.id,this.urlSerializer.serialize(r.extractedUrl),s,r.targetSnapshot??void 0);try{let u=ut(this.environmentInjector,()=>this.navigationErrorHandler?.(c));if(u instanceof lo){let{message:l,cancellationCode:f}=el(this.urlSerializer,u);this.events.next(new un(r.id,this.urlSerializer.serialize(r.extractedUrl),l,f)),this.events.next(new uo(u.redirectTo,u.navigationBehaviorOptions))}else throw this.events.next(c),s}catch(u){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(u)}}return ht}))}))}cancelNavigationTransition(n,r,i){let o=new un(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(o),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return n.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function CO(t){return t!==Vu}var ID=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:()=>k(SO),providedIn:"root"})}return t})(),nl=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},SO=(()=>{class t extends nl{static \u0275fac=(()=>{let n;return function(i){return(n||(n=jf(t)))(i||t)}})();static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),wD=(()=>{class t{urlSerializer=k(Zs);options=k(ta,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=k(to);urlHandlingStrategy=k(ol);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new ln;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:n,initialUrl:r,targetBrowserUrl:i}){let o=n!==void 0?this.urlHandlingStrategy.merge(n,r):r,s=i??o;return s instanceof ln?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:n,finalUrl:r,initialUrl:i}){r&&n?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=n):this.rawUrlTree=i}routerState=tD(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:n}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n??this.rawUrlTree)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:()=>k(AO),providedIn:"root"})}return t})(),AO=(()=>{class t extends wD{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{n(r.url,r.state,"popstate")})})}handleRouterEvent(n,r){n instanceof Jr?this.updateStateMemento():n instanceof kn?this.commitTransition(r):n instanceof Hs?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof qs?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof un&&(n.code===yt.GuardRejected||n.code===yt.NoDataFromResolver)?this.restoreHistory(r):n instanceof co?this.restoreHistory(r,!0):n instanceof Pn&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(n)||o){let c=this.browserPageId,u=F(F({},s),this.generateNgRouterState(i,c));this.location.replaceState(n,"",u)}else{let c=F(F({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(n,"",c)}}restoreHistory(n,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===n.finalUrl&&o===0&&(this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static \u0275fac=(()=>{let n;return function(i){return(n||(n=jf(t)))(i||t)}})();static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Fp(t,e){t.events.pipe(St(n=>n instanceof Pn||n instanceof un||n instanceof co||n instanceof kn),oe(n=>n instanceof Pn||n instanceof kn?0:(n instanceof un?n.code===yt.Redirect||n.code===yt.SupersededByNewNavigation:!1)?2:1),St(n=>n!==2),Sn(1)).subscribe(()=>{e()})}var RO={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},NO={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},sl=(()=>{class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=k(iT);stateManager=k(wD);options=k(ta,{optional:!0})||{};pendingTasks=k(Gr);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=k(_D);urlSerializer=k(Zs);location=k(to);urlHandlingStrategy=k(ol);_events=new ze;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=k(ID);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=k(na,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!k(rl,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Ce;subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof un&&r.code!==yt.Redirect&&r.code!==yt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Pn)this.navigated=!0;else if(r instanceof uo){let s=r.navigationBehaviorOptions,c=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u=F({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||CO(i.source)},s);this.scheduleNavigation(c,Vu,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}PO(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Vu,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r,i)=>{this.navigateToSyncWithBrowser(n,i,r)})}navigateToSyncWithBrowser(n,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let u=F({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let c=this.parseUrl(n);this.scheduleNavigation(c,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(xp),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:c,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:s,f=null;switch(c??this.options.defaultQueryParamsHandling){case"merge":f=F(F({},this.currentUrlTree.queryParams),o);break;case"preserve":f=this.currentUrlTree.queryParams;break;default:f=o||null}f!==null&&(f=this.removeEmptyProps(f));let p;try{let m=i?i.snapshot:this.routerState.snapshot.root;p=ZT(m)}catch{(typeof n[0]!="string"||n[0][0]!=="/")&&(n=[]),p=this.currentUrlTree.root}return JT(p,n,f,l??null)}navigateByUrl(n,r={skipLocationChange:!1}){let i=ao(n)?n:this.parseUrl(n),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,Vu,null,r)}navigate(n,r={skipLocationChange:!1}){return MO(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.urlSerializer.parse("/")}}isActive(n,r){let i;if(r===!0?i=F({},RO):r===!1?i=F({},NO):i=r,ao(n))return PT(this.currentUrlTree,n,i);let o=this.parseUrl(n);return PT(this.currentUrlTree,o,i)}removeEmptyProps(n){return Object.entries(n).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(n,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let c,u,l;s?(c=s.resolve,u=s.reject,l=s.promise):l=new Promise((p,m)=>{c=p,u=m});let f=this.pendingTasks.add();return Fp(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(f))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:o,resolve:c,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function MO(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new U(4008,!1)}function PO(t){return!(t instanceof qs)&&!(t instanceof uo)}var xO=new j("");function Lp(t,...e){return Wt([{provide:na,multi:!0,useValue:t},[],{provide:lr,useFactory:OO,deps:[sl]},{provide:ep,multi:!0,useFactory:FO},e.map(n=>n.\u0275providers)])}function OO(t){return t.routerState.root}function FO(){let t=k(je);return e=>{let n=t.get(Hr);if(e!==n.components[0])return;let r=t.get(sl),i=t.get(LO);t.get(VO)===1&&r.initialNavigation(),t.get(jO,null,J.Optional)?.setUpPreloading(),t.get(xO,null,J.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var LO=new j("",{factory:()=>new ze}),VO=new j("",{providedIn:"root",factory:()=>1});var jO=new j("");var al=class t{static \u0275fac=function(n){return new(n||t)};static \u0275cmp=an({type:t,selectors:[["app-root"]],decls:1,vars:0,template:function(n,r){n&1&&mt(0,"router-outlet")},dependencies:[no,Xs],encapsulation:2})};var ED=()=>{};var bD=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},BO=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=t[n++],s=t[n++],c=t[n++],u=((i&7)<<18|(o&63)<<12|(s&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let o=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},cl={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let o=t[i],s=i+1<t.length,c=s?t[i+1]:0,u=i+2<t.length,l=u?t[i+2]:0,f=o>>2,p=(o&3)<<4|c>>4,m=(c&15)<<2|l>>6,y=l&63;u||(y=64,s||(m=64)),r.push(n[f],n[p],n[m],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(bD(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):BO(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let o=n[t.charAt(i++)],c=i<t.length?n[t.charAt(i)]:0;++i;let l=i<t.length?n[t.charAt(i)]:64;++i;let p=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||c==null||l==null||p==null)throw new Up;let m=o<<2|c>>4;if(r.push(m),l!==64){let y=c<<4&240|l>>2;if(r.push(y),p!==64){let A=l<<6&192|p;r.push(A)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},Up=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},$O=function(t){let e=bD(t);return cl.encodeByteArray(e,!0)},ia=function(t){return $O(t).replace(/\./g,"")},ul=function(t){try{return cl.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function $p(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var HO=()=>$p().__FIREBASE_DEFAULTS__,qO=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},zO=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&ul(t[1]);return e&&JSON.parse(e)},ll=()=>{try{return ED()||HO()||qO()||zO()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Hp=t=>{var e,n;return(n=(e=ll())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},CD=t=>{let e=Hp(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},qp=()=>{var t;return(t=ll())===null||t===void 0?void 0:t.config},zp=t=>{var e;return(e=ll())===null||e===void 0?void 0:e[`_${t}`]};var Xr=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function hr(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}function dl(t){return v(this,null,function*(){return(yield fetch(t,{credentials:"include"})).ok})}function SD(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[ia(JSON.stringify(n)),ia(JSON.stringify(s)),""].join(".")}var ra={};function WO(){let t={prod:[],emulator:[]};for(let e of Object.keys(ra))ra[e]?t.emulator.push(e):t.prod.push(e);return t}function GO(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}var TD=!1;function hl(t,e){if(typeof window>"u"||typeof document>"u"||!hr(window.location.host)||ra[t]===e||ra[t]||TD)return;ra[t]=e;function n(m){return`__firebase__banner__${m}`}let r="__firebase__banner",o=WO().prod.length>0;function s(){let m=document.getElementById(r);m&&m.remove()}function c(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function u(m,y){m.setAttribute("width","24"),m.setAttribute("id",y),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function l(){let m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{TD=!0,s()},m}function f(m,y){m.setAttribute("id",y),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function p(){let m=GO(r),y=n("text"),A=document.getElementById(y)||document.createElement("span"),R=n("learnmore"),P=document.getElementById(R)||document.createElement("a"),V=n("preprendIcon"),q=document.getElementById(V)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){let W=m.element;c(W),f(P,R);let _e=l();u(q,V),W.append(q,A,P,_e),document.body.appendChild(W)}o?(A.innerText="Preview backend disconnected.",q.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(q.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,A.innerText="Preview backend running in this workspace."),A.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function Be(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function AD(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Be())}function KO(){var t;let e=(t=ll())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function RD(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function fl(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function ND(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function MD(){let t=Be();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function PD(){return!KO()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ei(){try{return typeof indexedDB=="object"}catch{return!1}}function pl(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}function kD(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}var QO="FirebaseError",Ke=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=QO,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,lt.prototype.create)}},lt=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?YO(o,r):"Error",c=`${this.serviceName}: ${s} (${i}).`;return new Ke(i,c,r)}};function YO(t,e){return t.replace(ZO,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var ZO=/\{\$([^}]+)}/g;function xD(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function xt(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let o=t[i],s=e[i];if(DD(o)&&DD(s)){if(!xt(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function DD(t){return t!==null&&typeof t=="object"}function oa(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function OD(t,e){let n=new Bp(t,e);return n.subscribe.bind(n)}var Bp=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");JO(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=jp),i.error===void 0&&(i.error=jp),i.complete===void 0&&(i.complete=jp);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function JO(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function jp(){}var XO=1e3,e1=2,t1=4*60*60*1e3,n1=.5;function gl(t,e=XO,n=e1){let r=e*Math.pow(n,t),i=Math.round(n1*r*(Math.random()-.5)*2);return Math.min(t1,r+i)}function Qe(t){return t&&t._delegate?t._delegate:t}var Re=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var ti="[DEFAULT]";var Wp=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new Xr;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(i1(e))try{this.getOrInitializeService({instanceIdentifier:ti})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=ti){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return v(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=ti){return this.instances.has(e)}getOptions(e=ti){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[o,s]of this.instancesDeferred.entries()){let c=this.normalizeInstanceIdentifier(o);r===c&&s.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:r1(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ti){return this.component?this.component.multipleInstances?e:ti:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function r1(t){return t===ti?void 0:t}function i1(t){return t.instantiationMode==="EAGER"}var ml=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new Wp(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var o1=[],ne=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(ne||{}),s1={debug:ne.DEBUG,verbose:ne.VERBOSE,info:ne.INFO,warn:ne.WARN,error:ne.ERROR,silent:ne.SILENT},a1=ne.INFO,c1={[ne.DEBUG]:"log",[ne.VERBOSE]:"log",[ne.INFO]:"info",[ne.WARN]:"warn",[ne.ERROR]:"error"},u1=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=c1[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Ot=class{constructor(e){this.name=e,this._logLevel=a1,this._logHandler=u1,this._userLogHandler=null,o1.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ne))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?s1[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ne.DEBUG,...e),this._logHandler(this,ne.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ne.VERBOSE,...e),this._logHandler(this,ne.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ne.INFO,...e),this._logHandler(this,ne.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ne.WARN,...e),this._logHandler(this,ne.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ne.ERROR,...e),this._logHandler(this,ne.ERROR,...e)}};var l1=(t,e)=>e.some(n=>t instanceof n),FD,LD;function d1(){return FD||(FD=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function h1(){return LD||(LD=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var VD=new WeakMap,Kp=new WeakMap,jD=new WeakMap,Gp=new WeakMap,Yp=new WeakMap;function f1(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(dn(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&VD.set(n,t)}).catch(()=>{}),Yp.set(e,t),e}function p1(t){if(Kp.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});Kp.set(t,e)}var Qp={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Kp.get(t);if(e==="objectStoreNames")return t.objectStoreNames||jD.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return dn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function UD(t){Qp=t(Qp)}function g1(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(yl(this),e,...n);return jD.set(r,e.sort?e.sort():[e]),dn(r)}:h1().includes(t)?function(...e){return t.apply(yl(this),e),dn(VD.get(this))}:function(...e){return dn(t.apply(yl(this),e))}}function m1(t){return typeof t=="function"?g1(t):(t instanceof IDBTransaction&&p1(t),l1(t,d1())?new Proxy(t,Qp):t)}function dn(t){if(t instanceof IDBRequest)return f1(t);if(Gp.has(t))return Gp.get(t);let e=m1(t);return e!==t&&(Gp.set(t,e),Yp.set(e,t)),e}var yl=t=>Yp.get(t);function vl(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(t,e),c=dn(s);return r&&s.addEventListener("upgradeneeded",u=>{r(dn(s.result),u.oldVersion,u.newVersion,dn(s.transaction),u)}),n&&s.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),c.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),c}var y1=["get","getKey","getAll","getAllKeys","count"],v1=["put","add","delete","clear"],Zp=new Map;function BD(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Zp.get(e))return Zp.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=v1.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||y1.includes(n)))return;let o=function(s,...c){return v(this,null,function*(){let u=this.transaction(s,i?"readwrite":"readonly"),l=u.store;return r&&(l=l.index(c.shift())),(yield Promise.all([l[n](...c),i&&u.done]))[0]})};return Zp.set(e,o),o}UD(t=>ye(F({},t),{get:(e,n,r)=>BD(e,n)||t.get(e,n,r),has:(e,n)=>!!BD(e,n)||t.has(e,n)}));var Xp=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(_1(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function _1(t){let e=t.getComponent();return e?.type==="VERSION"}var eg="@firebase/app",$D="0.13.2";var xn=new Ot("@firebase/app"),I1="@firebase/app-compat",w1="@firebase/analytics-compat",E1="@firebase/analytics",T1="@firebase/app-check-compat",D1="@firebase/app-check",b1="@firebase/auth",C1="@firebase/auth-compat",S1="@firebase/database",A1="@firebase/data-connect",R1="@firebase/database-compat",N1="@firebase/functions",M1="@firebase/functions-compat",P1="@firebase/installations",k1="@firebase/installations-compat",x1="@firebase/messaging",O1="@firebase/messaging-compat",F1="@firebase/performance",L1="@firebase/performance-compat",V1="@firebase/remote-config",j1="@firebase/remote-config-compat",U1="@firebase/storage",B1="@firebase/storage-compat",$1="@firebase/firestore",H1="@firebase/ai",q1="@firebase/firestore-compat",z1="firebase",W1="11.10.0";var tg="[DEFAULT]",G1={[eg]:"fire-core",[I1]:"fire-core-compat",[E1]:"fire-analytics",[w1]:"fire-analytics-compat",[D1]:"fire-app-check",[T1]:"fire-app-check-compat",[b1]:"fire-auth",[C1]:"fire-auth-compat",[S1]:"fire-rtdb",[A1]:"fire-data-connect",[R1]:"fire-rtdb-compat",[N1]:"fire-fn",[M1]:"fire-fn-compat",[P1]:"fire-iid",[k1]:"fire-iid-compat",[x1]:"fire-fcm",[O1]:"fire-fcm-compat",[F1]:"fire-perf",[L1]:"fire-perf-compat",[V1]:"fire-rc",[j1]:"fire-rc-compat",[U1]:"fire-gcs",[B1]:"fire-gcs-compat",[$1]:"fire-fst",[q1]:"fire-fst-compat",[H1]:"fire-vertex","fire-js":"fire-js",[z1]:"fire-js-all"};var sa=new Map,K1=new Map,ng=new Map;function HD(t,e){try{t.container.addComponent(e)}catch(n){xn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ye(t){let e=t.name;if(ng.has(e))return xn.debug(`There were multiple attempts to register component ${e}.`),!1;ng.set(e,t);for(let n of sa.values())HD(n,t);for(let n of K1.values())HD(n,t);return!0}function Ft(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Lt(t){return t==null?!1:t.settings!==void 0}var Q1={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},fr=new lt("app","Firebase",Q1);var rg=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Re("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw fr.create("app-deleted",{appName:this._name})}};var pr=W1;function sg(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:tg,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw fr.create("bad-app-name",{appName:String(i)});if(n||(n=qp()),!n)throw fr.create("no-options");let o=sa.get(i);if(o){if(xt(n,o.options)&&xt(r,o.config))return o;throw fr.create("duplicate-app",{appName:i})}let s=new ml(i);for(let u of ng.values())s.addComponent(u);let c=new rg(n,r,s);return sa.set(i,c),c}function hn(t=tg){let e=sa.get(t);if(!e&&t===tg&&qp())return sg();if(!e)throw fr.create("no-app",{appName:t});return e}function _l(){return Array.from(sa.values())}function fe(t,e,n){var r;let i=(r=G1[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let c=[`Unable to register library "${i}" with version "${e}":`];o&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&c.push("and"),s&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),xn.warn(c.join(" "));return}Ye(new Re(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var Y1="firebase-heartbeat-database",Z1=1,aa="firebase-heartbeat-store",Jp=null;function GD(){return Jp||(Jp=vl(Y1,Z1,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(aa)}catch(n){console.warn(n)}}}}).catch(t=>{throw fr.create("idb-open",{originalErrorMessage:t.message})})),Jp}function J1(t){return v(this,null,function*(){try{let n=(yield GD()).transaction(aa),r=yield n.objectStore(aa).get(KD(t));return yield n.done,r}catch(e){if(e instanceof Ke)xn.warn(e.message);else{let n=fr.create("idb-get",{originalErrorMessage:e?.message});xn.warn(n.message)}}})}function qD(t,e){return v(this,null,function*(){try{let r=(yield GD()).transaction(aa,"readwrite");yield r.objectStore(aa).put(e,KD(t)),yield r.done}catch(n){if(n instanceof Ke)xn.warn(n.message);else{let r=fr.create("idb-set",{originalErrorMessage:n?.message});xn.warn(r.message)}}})}function KD(t){return`${t.name}!${t.options.appId}`}var X1=1024,eF=30,ig=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new og(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return v(this,null,function*(){var e,n;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=zD();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>eF){let s=nF(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){xn.warn(r)}})}getHeartbeatsHeader(){return v(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=zD(),{heartbeatsToSend:r,unsentEntries:i}=tF(this._heartbeatsCache.heartbeats),o=ia(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return xn.warn(n),""}})}};function zD(){return new Date().toISOString().substring(0,10)}function tF(t,e=X1){let n=[],r=t.slice();for(let i of t){let o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),WD(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),WD(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var og=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return v(this,null,function*(){return ei()?pl().then(()=>!0).catch(()=>!1):!1})}read(){return v(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield J1(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return v(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return qD(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return v(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return qD(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function WD(t){return ia(JSON.stringify({version:2,heartbeats:t})).length}function nF(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}function rF(t){Ye(new Re("platform-logger",e=>new Xp(e),"PRIVATE")),Ye(new Re("heartbeat",e=>new ig(e),"PRIVATE")),fe(eg,$D,t),fe(eg,$D,"esm2017"),fe("fire-js","")}rF("");var iF="firebase",oF="11.10.0";fe(iF,oF,"app");function ag(t){t===void 0&&(vw(ag),t=k(je));let e=t.get(gu);return n=>new re(r=>{let i=e.add(),o=!1;function s(){o||(i(),o=!0)}let c=n.subscribe({next:u=>{r.next(u),s()},complete:()=>{r.complete(),s()},error:u=>{r.error(u),s()}});return c.add(()=>{r.unsubscribe(),s()}),c})}var fn=new Ss("ANGULARFIRE2_VERSION");function ri(t,e,n){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===n);if(o.length===1)return o[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var gr=(t,e)=>{let n=e?[e]:_l(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},go=function(t){return t[t.SILENT=0]="SILENT",t[t.WARN=1]="WARN",t[t.VERBOSE=2]="VERBOSE",t}(go||{}),QD=tp()&&typeof Zone<"u"?go.WARN:go.SILENT;var Il=class{zone;delegate;constructor(e,n=Fh){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,o=function(s){i?i.runGuarded(()=>{e.apply(this,[s])}):e.apply(this,[s])};return this.delegate.schedule(o,n,r)}},pn=(()=>{class t{outsideAngular;insideAngular;constructor(){let n=k(he);this.outsideAngular=n.runOutsideAngular(()=>new Il(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=n.run(()=>new Il(typeof Zone>"u"?void 0:Zone.current,Oh))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),YD=!1;function sF(t,e){!YD&&(QD>go.SILENT||tp())&&(YD=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),QD>=e&&console.warn(`Firebase API called outside injection context: ${t.name}`)}function aF(t){let e=k(he,{optional:!0});return e?e.runOutsideAngular(()=>t()):t()}function ni(t){let e=k(he,{optional:!0});return e?e.run(()=>t()):t()}var cF=(t,e,n)=>(...r)=>(e&&setTimeout(e,0),ut(n,()=>ni(()=>t.apply(void 0,r)))),Vt=(t,e,n)=>(n||=e?go.WARN:go.VERBOSE,function(){let r,i=arguments,o,s,c;try{o=k(pn),s=k(gu),c=k(gt)}catch{return sF(t,n),t.apply(this,i)}for(let l=0;l<arguments.length;l++)typeof i[l]=="function"&&(e&&(r||=ni(()=>s.add())),i[l]=cF(i[l],r,c));let u=aF(()=>t.apply(this,i));return e?u instanceof re?u.pipe(er(o.outsideAngular),Xn(o.insideAngular),ag(c)):u instanceof Promise?ni(()=>new Promise((l,f)=>{s.run(()=>u).then(p=>ut(c,()=>ni(()=>l(p))),p=>ut(c,()=>ni(()=>f(p))))})):typeof u=="function"&&r?function(){return setTimeout(r,0),u.apply(this,arguments)}:ni(()=>u):u instanceof re?u.pipe(er(o.outsideAngular),Xn(o.insideAngular)):ni(()=>u)});var Qt=class{constructor(e){return e}},On=class{constructor(){return _l()}};function uF(t){return t&&t.length===1?t[0]:new Qt(hn())}var cg=new j("angularfire2._apps"),lF={provide:Qt,useFactory:uF,deps:[[new ct,cg]]},dF={provide:On,deps:[[new ct,cg]]};function hF(t){return(e,n)=>{let r=n.get(sn);fe("angularfire",fn.full,"core"),fe("angularfire",fn.full,"app"),fe("angular",cT.full,r.toString());let i=e.runOutsideAngular(()=>t(n));return new Qt(i)}}function ZD(t,...e){return Wt([lF,dF,{provide:cg,useFactory:hF(t),multi:!0,deps:[he,je,pn,...e]}])}var JD=Vt(sg,!0);var fF=new Map,pF={activated:!1,tokenObservers:[]},gF={initialized:!1,enabled:!1};function Yt(t){return fF.get(t)||Object.assign({},pF)}function nb(){return gF}var mF="https://content-firebaseappcheck.googleapis.com/v1";var yF="exchangeDebugToken",XD={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},GW=24*60*60*1e3;var dg=class{constructor(e,n,r,i,o){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return v(this,null,function*(){this.stop();try{this.pending=new Xr,this.pending.promise.catch(n=>{}),yield vF(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new Xr,this.pending.promise.catch(n=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}};function vF(t){return new Promise(e=>{setTimeout(e,t)})}var _F={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},mr=new lt("appCheck","AppCheck",_F);function rb(t){if(!Yt(t).activated)throw mr.create("use-before-activation",{appName:t.name})}function ib(r,i){return v(this,arguments,function*({url:t,body:e},n){let o={"Content-Type":"application/json"},s=n.getImmediate({optional:!0});if(s){let y=yield s.getHeartbeatsHeader();y&&(o["X-Firebase-Client"]=y)}let c={method:"POST",body:JSON.stringify(e),headers:o},u;try{u=yield fetch(t,c)}catch(y){throw mr.create("fetch-network-error",{originalErrorMessage:y?.message})}if(u.status!==200)throw mr.create("fetch-status-error",{httpStatus:u.status});let l;try{l=yield u.json()}catch(y){throw mr.create("fetch-parse-error",{originalErrorMessage:y?.message})}let f=l.ttl.match(/^([\d.]+)(s)$/);if(!f||!f[2]||isNaN(Number(f[1])))throw mr.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let p=Number(f[1])*1e3,m=Date.now();return{token:l.token,expireTimeMillis:m+p,issuedAtTimeMillis:m}})}function ob(t,e){let{projectId:n,appId:r,apiKey:i}=t.options;return{url:`${mF}/projects/${n}/apps/${r}:${yF}?key=${i}`,body:{debug_token:e}}}var IF="firebase-app-check-database",wF=1,hg="firebase-app-check-store";var wl=null;function EF(){return wl||(wl=new Promise((t,e)=>{try{let n=indexedDB.open(IF,wF);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var i;e(mr.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(hg,{keyPath:"compositeKey"})}}}catch(n){e(mr.create("storage-open",{originalErrorMessage:n?.message}))}}),wl)}function TF(t,e){return DF(bF(t),e)}function DF(t,e){return v(this,null,function*(){let r=(yield EF()).transaction(hg,"readwrite"),o=r.objectStore(hg).put({compositeKey:t,value:e});return new Promise((s,c)=>{o.onsuccess=u=>{s()},r.onerror=u=>{var l;c(mr.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})})}function bF(t){return`${t.options.appId}-${t.name}`}var ca=new Ot("@firebase/app-check");function ug(t,e){return ei()?TF(t,e).catch(n=>{ca.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function sb(){return nb().enabled}function ab(){return v(this,null,function*(){let t=nb();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var CF={error:"UNKNOWN_ERROR"};function SF(t){return cl.encodeString(JSON.stringify(t),!1)}function fg(t,e=!1,n=!1){return v(this,null,function*(){let r=t.app;rb(r);let i=Yt(r),o=i.token,s;if(o&&!ua(o)&&(i.token=void 0,o=void 0),!o){let l=yield i.cachedTokenPromise;l&&(ua(l)?o=l:yield ug(r,void 0))}if(!e&&o&&ua(o))return{token:o.token};let c=!1;if(sb())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=ib(ob(r,yield ab()),t.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),c=!0);let l=yield i.exchangeTokenPromise;return yield ug(r,l),i.token=l,{token:l.token}}catch(l){return l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?ca.warn(l.message):n&&ca.error(l),lg(l)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),c=!0),o=yield Yt(r).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?ca.warn(l.message):n&&ca.error(l),s=l}let u;return o?s?ua(o)?u={token:o.token,internalError:s}:u=lg(s):(u={token:o.token},i.token=o,yield ug(r,o)):u=lg(s),c&&MF(r,u),u})}function AF(t){return v(this,null,function*(){let e=t.app;rb(e);let{provider:n}=Yt(e);if(sb()){let r=yield ab(),{token:i}=yield ib(ob(e,r),t.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield n.getToken();return{token:r}}})}function RF(t,e,n,r){let{app:i}=t,o=Yt(i),s={next:n,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&ua(o.token)){let c=o.token;Promise.resolve().then(()=>{n({token:c.token}),eb(t)}).catch(()=>{})}o.cachedTokenPromise.then(()=>eb(t))}function cb(t,e){let n=Yt(t),r=n.tokenObservers.filter(i=>i.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function eb(t){let{app:e}=t,n=Yt(e),r=n.tokenRefresher;r||(r=NF(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function NF(t){let{app:e}=t;return new dg(()=>v(null,null,function*(){let n=Yt(e),r;if(n.token?r=yield fg(t,!0):r=yield fg(t),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let n=Yt(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5,i=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},XD.RETRIAL_MIN_WAIT,XD.RETRIAL_MAX_WAIT)}function MF(t,e){let n=Yt(t).tokenObservers;for(let r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function ua(t){return t.expireTimeMillis-Date.now()>0}function lg(t){return{token:SF(CF),error:t}}var pg=class{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){let{tokenObservers:e}=Yt(this.app);for(let n of e)cb(this.app,n.next);return Promise.resolve()}};function PF(t,e){return new pg(t,e)}function kF(t){return{getToken:e=>fg(t,e),getLimitedUseToken:()=>AF(t),addTokenListener:e=>RF(t,"INTERNAL",e),removeTokenListener:e=>cb(t.app,e)}}var xF="@firebase/app-check",OF="0.10.1";var FF="app-check",tb="app-check-internal";function LF(){Ye(new Re(FF,t=>{let e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return PF(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(tb).initialize()})),Ye(new Re(tb,t=>{let e=t.getProvider("app-check").getImmediate();return kF(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),fe(xF,OF)}LF();var VF="app-check";var mo=class{constructor(){return gr(VF)}};var jF=["localhost","0.0.0.0","127.0.0.1"],sG=typeof window<"u"&&jF.includes(window.location.hostname);function Tb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var Db=Tb,bb=new lt("auth","Firebase",Tb());var Sl=new Ot("@firebase/auth");function UF(t,...e){Sl.logLevel<=ne.WARN&&Sl.warn(`Auth (${pr}): ${t}`,...e)}function Tl(t,...e){Sl.logLevel<=ne.ERROR&&Sl.error(`Auth (${pr}): ${t}`,...e)}function _r(t,...e){throw xg(t,...e)}function oi(t,...e){return xg(t,...e)}function Cb(t,e,n){let r=Object.assign(Object.assign({},Db()),{[e]:n});return new lt("auth","Firebase",r).create(e,{appName:t.name})}function ii(t){return Cb(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function xg(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return bb.create(t,...e)}function z(t,e,...n){if(!t)throw xg(e,...n)}function Fn(t){let e="INTERNAL ASSERTION FAILED: "+t;throw Tl(e),new Error(e)}function Ir(t,e){t||Fn(e)}function vg(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function BF(){return ub()==="http:"||ub()==="https:"}function ub(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function $F(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(BF()||fl()||"connection"in navigator)?navigator.onLine:!0}function HF(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var si=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ir(n>e,"Short delay should be less than long delay!"),this.isMobile=AD()||ND()}get(){return $F()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function Og(t,e){Ir(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var Al=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Fn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Fn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Fn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var qF={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var zF=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],WF=new si(3e4,6e4);function Fg(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function yo(o,s,c,u){return v(this,arguments,function*(t,e,n,r,i={}){return Sb(t,i,()=>v(null,null,function*(){let l={},f={};r&&(e==="GET"?f=r:l={body:JSON.stringify(r)});let p=oa(Object.assign({key:t.config.apiKey},f)).slice(1),m=yield t._getAdditionalHeaders();m["Content-Type"]="application/json",t.languageCode&&(m["X-Firebase-Locale"]=t.languageCode);let y=Object.assign({method:e,headers:m},l);return RD()||(y.referrerPolicy="no-referrer"),t.emulatorConfig&&hr(t.emulatorConfig.host)&&(y.credentials="include"),Al.fetch()(yield Ab(t,t.config.apiHost,n,p),y)}))})}function Sb(t,e,n){return v(this,null,function*(){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},qF),e);try{let i=new _g(t),o=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw El(t,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let c=o.ok?s.errorMessage:s.error.message,[u,l]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw El(t,"credential-already-in-use",s);if(u==="EMAIL_EXISTS")throw El(t,"email-already-in-use",s);if(u==="USER_DISABLED")throw El(t,"user-disabled",s);let f=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw Cb(t,f,l);_r(t,f)}}catch(i){if(i instanceof Ke)throw i;_r(t,"network-request-failed",{message:String(i)})}})}function GF(o,s,c,u){return v(this,arguments,function*(t,e,n,r,i={}){let l=yield yo(t,e,n,r,i);return"mfaPendingCredential"in l&&_r(t,"multi-factor-auth-required",{_serverResponse:l}),l})}function Ab(t,e,n,r){return v(this,null,function*(){let i=`${e}${n}?${r}`,o=t,s=o.config.emulator?Og(t.config,i):`${t.config.apiScheme}://${i}`;return zF.includes(n)&&(yield o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s})}var _g=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(oi(this.auth,"network-request-failed")),WF.get())})}};function El(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=oi(t,e,r);return i.customData._tokenResponse=n,i}function KF(t,e){return v(this,null,function*(){return yo(t,"POST","/v1/accounts:delete",e)})}function Rl(t,e){return v(this,null,function*(){return yo(t,"POST","/v1/accounts:lookup",e)})}function la(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function Lg(t,e=!1){return v(this,null,function*(){let n=Qe(t),r=yield n.getIdToken(e),i=Vg(r);z(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:la(gg(i.auth_time)),issuedAtTime:la(gg(i.iat)),expirationTime:la(gg(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function gg(t){return Number(t)*1e3}function Vg(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Tl("JWT malformed, contained fewer than 3 sections"),null;try{let i=ul(n);return i?JSON.parse(i):(Tl("Failed to decode base64 JWT payload"),null)}catch(i){return Tl("Caught error parsing JWT payload as JSON",i?.toString()),null}}function lb(t){let e=Vg(t);return z(e,"internal-error"),z(typeof e.exp<"u","internal-error"),z(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function ha(t,e,n=!1){return v(this,null,function*(){if(n)return e;try{return yield e}catch(r){throw r instanceof Ke&&QF(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})}function QF({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var Ig=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>v(this,null,function*(){yield this.iteration()}),n)}iteration(){return v(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var fa=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=la(this.lastLoginAt),this.creationTime=la(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Nl(t){return v(this,null,function*(){var e;let n=t.auth,r=yield t.getIdToken(),i=yield ha(t,Rl(n,{idToken:r}));z(i?.users.length,n,"internal-error");let o=i.users[0];t._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?Rb(o.providerUserInfo):[],c=YF(t.providerData,s),u=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!c?.length,f=u?l:!1,p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new fa(o.createdAt,o.lastLoginAt),isAnonymous:f};Object.assign(t,p)})}function jg(t){return v(this,null,function*(){let e=Qe(t);yield Nl(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function YF(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function Rb(t){return t.map(e=>{var{providerId:n}=e,r=Lh(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function ZF(t,e){return v(this,null,function*(){let n=yield Sb(t,{},()=>v(null,null,function*(){let r=oa({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,s=yield Ab(t,i,"/v1/token",`key=${o}`),c=yield t._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";let u={method:"POST",headers:c,body:r};return t.emulatorConfig&&hr(t.emulatorConfig.host)&&(u.credentials="include"),Al.fetch()(s,u)}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function JF(t,e){return v(this,null,function*(){return yo(t,"POST","/v2/accounts:revokeToken",Fg(t,e))})}var da=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){z(e.idToken,"internal-error"),z(typeof e.idToken<"u","internal-error"),z(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):lb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){z(e.length!==0,"internal-error");let n=lb(e);this.updateTokensAndExpiration(e,null,n)}getToken(e,n=!1){return v(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(z(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return v(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield ZF(e,n);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:o}=n,s=new t;return r&&(z(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(z(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(z(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return Fn("not implemented")}};function yr(t,e){z(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var vr=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,o=Lh(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Ig(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new fa(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return v(this,null,function*(){let n=yield ha(this,this.stsTokenManager.getToken(this.auth,e));return z(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return Lg(this,e)}reload(){return jg(this)}_assign(e){this!==e&&(z(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){z(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return v(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&(yield Nl(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return v(this,null,function*(){if(Lt(this.auth.app))return Promise.reject(ii(this.auth));let e=yield this.getIdToken();return yield ha(this,KF(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,o,s,c,u,l,f;let p=(r=n.displayName)!==null&&r!==void 0?r:void 0,m=(i=n.email)!==null&&i!==void 0?i:void 0,y=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,A=(s=n.photoURL)!==null&&s!==void 0?s:void 0,R=(c=n.tenantId)!==null&&c!==void 0?c:void 0,P=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,V=(l=n.createdAt)!==null&&l!==void 0?l:void 0,q=(f=n.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:W,emailVerified:_e,isAnonymous:it,providerData:ge,stsTokenManager:T}=n;z(W&&T,e,"internal-error");let _=da.fromJSON(this.name,T);z(typeof W=="string",e,"internal-error"),yr(p,e.name),yr(m,e.name),z(typeof _e=="boolean",e,"internal-error"),z(typeof it=="boolean",e,"internal-error"),yr(y,e.name),yr(A,e.name),yr(R,e.name),yr(P,e.name),yr(V,e.name),yr(q,e.name);let w=new t({uid:W,auth:e,email:m,emailVerified:_e,displayName:p,isAnonymous:it,photoURL:A,phoneNumber:y,tenantId:R,stsTokenManager:_,createdAt:V,lastLoginAt:q});return ge&&Array.isArray(ge)&&(w.providerData=ge.map(E=>Object.assign({},E))),P&&(w._redirectEventId=P),w}static _fromIdTokenResponse(e,n,r=!1){return v(this,null,function*(){let i=new da;i.updateFromServerResponse(n);let o=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield Nl(o),o})}static _fromGetAccountInfoResponse(e,n,r){return v(this,null,function*(){let i=n.users[0];z(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?Rb(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,c=new da;c.updateFromIdToken(r);let u=new t({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new fa(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(u,l),u})}};var db=new Map;function Ln(t){Ir(t instanceof Function,"Expected a class definition");let e=db.get(t);return e?(Ir(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,db.set(t,e),e)}var XF=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return v(this,null,function*(){return!0})}_set(n,r){return v(this,null,function*(){this.storage[n]=r})}_get(n){return v(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return v(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),wg=XF;function Dl(t,e,n){return`firebase:${t}:${e}:${n}`}var Ml=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=Dl(this.userKey,i.apiKey,o),this.fullPersistenceKey=Dl("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return v(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let n=yield Rl(this.auth,{idToken:e}).catch(()=>{});return n?vr._fromGetAccountInfoResponse(this.auth,n,e):null}return vr._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return v(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return v(this,null,function*(){if(!n.length)return new t(Ln(wg),e,r);let i=(yield Promise.all(n.map(l=>v(null,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),o=i[0]||Ln(wg),s=Dl(r,e.config.apiKey,e.name),c=null;for(let l of n)try{let f=yield l._get(s);if(f){let p;if(typeof f=="string"){let m=yield Rl(e,{idToken:f}).catch(()=>{});if(!m)break;p=yield vr._fromGetAccountInfoResponse(e,m,f)}else p=vr._fromJSON(e,f);l!==o&&(c=p),o=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new t(o,e,r):(o=u[0],c&&(yield o._set(s,c.toJSON())),yield Promise.all(n.map(l=>v(null,null,function*(){if(l!==o)try{yield l._remove(s)}catch{}}))),new t(o,e,r))})}};function hb(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(kb(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Nb(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Ob(e))return"Blackberry";if(Fb(e))return"Webos";if(Mb(e))return"Safari";if((e.includes("chrome/")||Pb(e))&&!e.includes("edge/"))return"Chrome";if(xb(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function Nb(t=Be()){return/firefox\//i.test(t)}function Mb(t=Be()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Pb(t=Be()){return/crios\//i.test(t)}function kb(t=Be()){return/iemobile/i.test(t)}function xb(t=Be()){return/android/i.test(t)}function Ob(t=Be()){return/blackberry/i.test(t)}function Fb(t=Be()){return/webos/i.test(t)}function Ug(t=Be()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function eL(t=Be()){var e;return Ug(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function tL(){return MD()&&document.documentMode===10}function Lb(t=Be()){return Ug(t)||xb(t)||Fb(t)||Ob(t)||/windows phone/i.test(t)||kb(t)}function Vb(t,e=[]){let n;switch(t){case"Browser":n=hb(Be());break;case"Worker":n=`${hb(Be())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${pr}/${r}`}var Eg=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=o=>new Promise((s,c)=>{try{let u=e(o);s(u)}catch(u){c(u)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return v(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function nL(n){return v(this,arguments,function*(t,e={}){return yo(t,"GET","/v2/passwordPolicy",Fg(t,e))})}var rL=6,Tg=class{constructor(e){var n,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=s.minPasswordLength)!==null&&n!==void 0?n:rL,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,o,s,c;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsUppercaseLetter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(s=u.containsNumericCharacter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(c=u.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),u}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var Dg=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Pl(this),this.idTokenSubscription=new Pl(this),this.beforeStateQueue=new Eg(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=bb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ln(n)),this._initializationPromise=this.queue(()=>v(this,null,function*(){var r,i,o;if(!this._deleted&&(this.persistenceManager=yield Ml.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return v(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return v(this,null,function*(){try{let n=yield Rl(this,{idToken:e}),r=yield vr._fromGetAccountInfoResponse(this,n,e);yield this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return v(this,null,function*(){var n;if(Lt(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(c,c))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let s=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,c=i?._redirectEventId,u=yield this.tryRedirectSignIn(e);(!s||s===c)&&u?.user&&(i=u.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return z(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return v(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return v(this,null,function*(){try{yield Nl(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=HF()}_delete(){return v(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return v(this,null,function*(){if(Lt(this.app))return Promise.reject(ii(this));let n=e?Qe(e):null;return n&&z(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return v(this,null,function*(){if(!this._deleted)return e&&z(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>v(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return v(this,null,function*(){return Lt(this.app)?Promise.reject(ii(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Lt(this.app)?Promise.reject(ii(this)):this.queue(()=>v(this,null,function*(){yield this.assertedPersistence.setPersistence(Ln(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return v(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return v(this,null,function*(){let e=yield nL(this),n=new Tg(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new lt("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){return v(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield JF(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return v(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return v(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&Ln(e)||this._popupRedirectResolver;z(n,this,"argument-error"),this.redirectPersistenceManager=yield Ml.create(this,[Ln(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return v(this,null,function*(){var n,r;return this._isInitialized&&(yield this.queue(()=>v(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return v(this,null,function*(){if(e===this.currentUser)return this.queue(()=>v(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let o=typeof n=="function"?n:n.next.bind(n),s=!1,c=this._isInitialized?Promise.resolve():this._initializationPromise;if(z(c,this,"internal-error"),c.then(()=>{s||o(this.currentUser)}),typeof n=="function"){let u=e.addObserver(n,r,i);return()=>{s=!0,u()}}else{let u=e.addObserver(n);return()=>{s=!0,u()}}}directlySetCurrentUser(e){return v(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return z(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Vb(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return v(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n})}_getAppCheckToken(){return v(this,null,function*(){var e;if(Lt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&UF(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function Bg(t){return Qe(t)}var Pl=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=OD(n=>this.observer=n)}get next(){return z(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var $g={loadJS(){return v(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function iL(t){$g=t}function oL(t){return $g.loadJS(t)}function sL(){return $g.gapiScript}function jb(t){return`__${t}${Math.floor(Math.random()*1e6)}`}function Hg(t,e){let n=Ft(t,"auth");if(n.isInitialized()){let i=n.getImmediate(),o=n.getOptions();if(xt(o,e??{}))return i;_r(i,"already-initialized")}return n.initialize({options:e})}function aL(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Ln);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function qg(t,e,n){let r=Bg(t);z(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!n?.disableWarnings,o=Ub(e),{host:s,port:c}=cL(e),u=c===null?"":`:${c}`,l={url:`${o}//${s}${u}/`},f=Object.freeze({host:s,port:c,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){z(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),z(xt(l,r.config.emulator)&&xt(f,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=l,r.emulatorConfig=f,r.settings.appVerificationDisabledForTesting=!0,hr(s)?(dl(`${o}//${s}${u}`),hl("Auth",!0)):i||uL()}function Ub(t){let e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function cL(t){let e=Ub(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};let r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:fb(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:fb(s)}}}function fb(t){if(!t)return null;let e=Number(t);return isNaN(e)?null:e}function uL(){function t(){let e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}var kl=class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Fn("not implemented")}_getIdTokenResponse(e){return Fn("not implemented")}_linkToIdToken(e,n){return Fn("not implemented")}_getReauthenticationResolver(e){return Fn("not implemented")}};function mg(t,e){return v(this,null,function*(){return GF(t,"POST","/v1/accounts:signInWithIdp",Fg(t,e))})}var xl=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var bg=class extends xl{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var pa=class t{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,n,r,i=!1){return v(this,null,function*(){let o=yield vr._fromIdTokenResponse(e,r,i),s=pb(r);return new t({user:o,providerId:s,_tokenResponse:r,operationType:n})})}static _forOperation(e,n,r){return v(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=pb(r);return new t({user:e,providerId:i,_tokenResponse:r,operationType:n})})}};function pb(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}var Cg=class t extends Ke{constructor(e,n,r,i){var o;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,t.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new t(e,n,r,i)}};function Bb(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Cg._fromErrorAndOperation(t,o,e,r):o})}function lL(t,e,n=!1){return v(this,null,function*(){let r=yield ha(t,e._linkToIdToken(t.auth,yield t.getIdToken()),n);return pa._forOperation(t,"link",r)})}function dL(t,e,n=!1){return v(this,null,function*(){let{auth:r}=t;if(Lt(r.app))return Promise.reject(ii(r));let i="reauthenticate";try{let o=yield ha(t,Bb(r,i,e,t),n);z(o.idToken,r,"internal-error");let s=Vg(o.idToken);z(s,r,"internal-error");let{sub:c}=s;return z(t.uid===c,r,"user-mismatch"),pa._forOperation(t,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&_r(r,"user-mismatch"),o}})}function hL(t,e,n=!1){return v(this,null,function*(){if(Lt(t.app))return Promise.reject(ii(t));let r="signIn",i=yield Bb(t,r,e),o=yield pa._fromIdTokenResponse(t,r,i);return n||(yield t._updateCurrentUser(o.user)),o})}function zg(t,e,n,r){return Qe(t).onIdTokenChanged(e,n,r)}function Wg(t,e,n){return Qe(t).beforeAuthStateChanged(e,n)}var Ol="__sak";var Fl=class{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Ol,"1"),this.storage.removeItem(Ol),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){let n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var fL=1e3,pL=10,gL=(()=>{class t extends Fl{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Lb(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&n(r,o,i)}}onStorageEvent(n,r=!1){if(!n.key){this.forAllChangedKeys((c,u,l)=>{this.notifyListeners(c,l)});return}let i=n.key;r?this.detachListener():this.stopPolling();let o=()=>{let c=this.storage.getItem(i);!r&&this.localCache[i]===c||this.notifyListeners(i,c)},s=this.storage.getItem(i);tL()&&s!==n.newValue&&n.newValue!==n.oldValue?setTimeout(o,pL):o()}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},fL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(n,r){return v(this,null,function*(){yield Zn(t.prototype,this,"_set").call(this,n,r),this.localCache[n]=JSON.stringify(r)})}_get(n){return v(this,null,function*(){let r=yield Zn(t.prototype,this,"_get").call(this,n);return this.localCache[n]=JSON.stringify(r),r})}_remove(n){return v(this,null,function*(){yield Zn(t.prototype,this,"_remove").call(this,n),delete this.localCache[n]})}}return t.type="LOCAL",t})(),$b=gL;var mL=(()=>{class t extends Fl{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return t.type="SESSION",t})(),Gg=mL;function yL(t){return Promise.all(t.map(e=>v(null,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(n){return{fulfilled:!1,reason:n}}})))}var vL=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){let r=this.receivers.find(o=>o.isListeningto(n));if(r)return r;let i=new t(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}handleEvent(n){return v(this,null,function*(){let r=n,{eventId:i,eventType:o,data:s}=r.data,c=this.handlersMap[o];if(!c?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let u=Array.from(c).map(f=>v(this,null,function*(){return f(r.origin,s)})),l=yield yL(u);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:l})})}_subscribe(n,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}t.receivers=[];return t})();function Hb(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}var Sg=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,n,r=50){return v(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((c,u)=>{let l=Hb("",20);i.port1.start();let f=setTimeout(()=>{u(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(p){let m=p;if(m.data.eventId===l)switch(m.data.status){case"ack":clearTimeout(f),o=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),c(m.data.response);break;default:clearTimeout(f),clearTimeout(o),u(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:n},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})})}};function gn(){return window}function _L(t){gn().location.href=t}function qb(){return typeof gn().WorkerGlobalScope<"u"&&typeof gn().importScripts=="function"}function IL(){return v(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function wL(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function EL(){return qb()?self:null}var zb="firebaseLocalStorageDb",TL=1,Ll="firebaseLocalStorage",Wb="fbase_key",ai=class{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function jl(t,e){return t.transaction([Ll],e?"readwrite":"readonly").objectStore(Ll)}function DL(){let t=indexedDB.deleteDatabase(zb);return new ai(t).toPromise()}function Ag(){let t=indexedDB.open(zb,TL);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{let r=t.result;try{r.createObjectStore(Ll,{keyPath:Wb})}catch(i){n(i)}}),t.addEventListener("success",()=>v(null,null,function*(){let r=t.result;r.objectStoreNames.contains(Ll)?e(r):(r.close(),yield DL(),e(yield Ag()))}))})}function gb(t,e,n){return v(this,null,function*(){let r=jl(t,!0).put({[Wb]:e,value:n});return new ai(r).toPromise()})}function bL(t,e){return v(this,null,function*(){let n=jl(t,!1).get(e),r=yield new ai(n).toPromise();return r===void 0?null:r.value})}function mb(t,e){let n=jl(t,!0).delete(e);return new ai(n).toPromise()}var CL=800,SL=3,AL=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return v(this,null,function*(){return this.db?this.db:(this.db=yield Ag(),this.db)})}_withRetries(n){return v(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield n(i)}catch(i){if(r++>SL)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return v(this,null,function*(){return qb()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return v(this,null,function*(){this.receiver=vL._getInstance(EL()),this.receiver._subscribe("keyChanged",(n,r)=>v(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(n,r)=>v(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return v(this,null,function*(){var n,r;if(this.activeServiceWorker=yield IL(),!this.activeServiceWorker)return;this.sender=new Sg(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((n=i[0])===null||n===void 0)&&n.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(n){return v(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||wL()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return v(this,null,function*(){try{if(!indexedDB)return!1;let n=yield Ag();return yield gb(n,Ol,"1"),yield mb(n,Ol),!0}catch{}return!1})}_withPendingWrite(n){return v(this,null,function*(){this.pendingWrites++;try{yield n()}finally{this.pendingWrites--}})}_set(n,r){return v(this,null,function*(){return this._withPendingWrite(()=>v(this,null,function*(){return yield this._withRetries(i=>gb(i,n,r)),this.localCache[n]=r,this.notifyServiceWorker(n)}))})}_get(n){return v(this,null,function*(){let r=yield this._withRetries(i=>bL(i,n));return this.localCache[n]=r,r})}_remove(n){return v(this,null,function*(){return this._withPendingWrite(()=>v(this,null,function*(){return yield this._withRetries(r=>mb(r,n)),delete this.localCache[n],this.notifyServiceWorker(n)}))})}_poll(){return v(this,null,function*(){let n=yield this._withRetries(o=>{let s=jl(o,!1).getAll();return new ai(s).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(n.length!==0)for(let{fbase_key:o,value:s}of n)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r})}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>v(this,null,function*(){return this._poll()}),CL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return t.type="LOCAL",t})(),Gb=AL;var mG=jb("rcb"),yG=new si(3e4,6e4);function RL(t,e){return e?Ln(e):(z(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}var ga=class extends kl{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return mg(e,this._buildIdpRequest())}_linkToIdToken(e,n){return mg(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return mg(e,this._buildIdpRequest())}_buildIdpRequest(e){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}};function NL(t){return hL(t.auth,new ga(t),t.bypassAuthState)}function ML(t){let{auth:e,user:n}=t;return z(n,e,"internal-error"),dL(n,new ga(t),t.bypassAuthState)}function PL(t){return v(this,null,function*(){let{auth:e,user:n}=t;return z(n,e,"internal-error"),lL(n,new ga(t),t.bypassAuthState)})}var Rg=class{constructor(e,n,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise((e,n)=>v(this,null,function*(){this.pendingPromise={resolve:e,reject:n};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return v(this,null,function*(){let{urlResponse:n,sessionId:r,postBody:i,tenantId:o,error:s,type:c}=e;if(s){this.reject(s);return}let u={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(c)(u))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return NL;case"linkViaPopup":case"linkViaRedirect":return PL;case"reauthViaPopup":case"reauthViaRedirect":return ML;default:_r(this.auth,"internal-error")}}resolve(e){Ir(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ir(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var vG=new si(2e3,1e4);var kL="pendingRedirect",bl=new Map,Ng=class t extends Rg{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}execute(){return v(this,null,function*(){let e=bl.get(this.auth._key());if(!e){try{let r=(yield xL(this.resolver,this.auth))?yield Zn(t.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}bl.set(this.auth._key(),e)}return this.bypassAuthState||bl.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return v(this,null,function*(){if(e.type==="signInViaRedirect")return Zn(t.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let n=yield this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,Zn(t.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return v(this,null,function*(){})}cleanUp(){}};function xL(t,e){return v(this,null,function*(){let n=LL(e),r=FL(t);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(n))==="true";return yield r._remove(n),i})}function OL(t,e){bl.set(t._key(),e)}function FL(t){return Ln(t._redirectPersistence)}function LL(t){return Dl(kL,t.config.apiKey,t.name)}function VL(t,e,n=!1){return v(this,null,function*(){if(Lt(t.app))return Promise.reject(ii(t));let r=Bg(t),i=RL(r,e),s=yield new Ng(r,i,n).execute();return s&&!n&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,e)),s})}var jL=10*60*1e3,Mg=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!UL(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!Kb(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(oi(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){let r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=jL&&this.cachedEventUids.clear(),this.cachedEventUids.has(yb(e))}saveEventToCache(e){this.cachedEventUids.add(yb(e)),this.lastProcessedEventTime=Date.now()}};function yb(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Kb({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function UL(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Kb(t);default:return!1}}function BL(n){return v(this,arguments,function*(t,e={}){return yo(t,"GET","/v1/projects",e)})}var $L=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,HL=/^https?/;function qL(t){return v(this,null,function*(){if(t.config.emulator)return;let{authorizedDomains:e}=yield BL(t);for(let n of e)try{if(zL(n))return}catch{}_r(t,"unauthorized-domain")})}function zL(t){let e=vg(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){let s=new URL(t);return s.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&s.hostname===r}if(!HL.test(n))return!1;if($L.test(t))return r===t;let i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var WL=new si(3e4,6e4);function vb(){let t=gn().___jsl;if(t?.H){for(let e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function GL(t){return new Promise((e,n)=>{var r,i,o;function s(){vb(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{vb(),n(oi(t,"network-request-failed"))},timeout:WL.get()})}if(!((i=(r=gn().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=gn().gapi)===null||o===void 0)&&o.load)s();else{let c=jb("iframefcb");return gn()[c]=()=>{gapi.load?s():n(oi(t,"network-request-failed"))},oL(`${sL()}?onload=${c}`).catch(u=>n(u))}}).catch(e=>{throw Cl=null,e})}var Cl=null;function KL(t){return Cl=Cl||GL(t),Cl}var QL=new si(5e3,15e3),YL="__/auth/iframe",ZL="emulator/auth/iframe",JL={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},XL=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function eV(t){let e=t.config;z(e.authDomain,t,"auth-domain-config-required");let n=e.emulator?Og(e,ZL):`https://${t.config.authDomain}/${YL}`,r={apiKey:e.apiKey,appName:t.name,v:pr},i=XL.get(t.config.apiHost);i&&(r.eid=i);let o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${oa(r).slice(1)}`}function tV(t){return v(this,null,function*(){let e=yield KL(t),n=gn().gapi;return z(n,t,"internal-error"),e.open({where:document.body,url:eV(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:JL,dontclear:!0},r=>new Promise((i,o)=>v(null,null,function*(){yield r.restyle({setHideOnLeave:!1});let s=oi(t,"network-request-failed"),c=gn().setTimeout(()=>{o(s)},QL.get());function u(){gn().clearTimeout(c),i(r)}r.ping(u).then(u,()=>{o(s)})})))})}var nV={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},rV=500,iV=600,oV="_blank",sV="http://localhost",Vl=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function aV(t,e,n,r=rV,i=iV){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),c="",u=Object.assign(Object.assign({},nV),{width:r.toString(),height:i.toString(),top:o,left:s}),l=Be().toLowerCase();n&&(c=Pb(l)?oV:n),Nb(l)&&(e=e||sV,u.scrollbars="yes");let f=Object.entries(u).reduce((m,[y,A])=>`${m}${y}=${A},`,"");if(eL(l)&&c!=="_self")return cV(e||"",c),new Vl(null);let p=window.open(e||"",c,f);z(p,t,"popup-blocked");try{p.focus()}catch{}return new Vl(p)}function cV(t,e){let n=document.createElement("a");n.href=t,n.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var uV="__/auth/handler",lV="emulator/auth/handler",dV=encodeURIComponent("fac");function _b(t,e,n,r,i,o){return v(this,null,function*(){z(t.config.authDomain,t,"auth-domain-config-required"),z(t.config.apiKey,t,"invalid-api-key");let s={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:pr,eventId:i};if(e instanceof xl){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",xD(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[f,p]of Object.entries(o||{}))s[f]=p}if(e instanceof bg){let f=e.getScopes().filter(p=>p!=="");f.length>0&&(s.scopes=f.join(","))}t.tenantId&&(s.tid=t.tenantId);let c=s;for(let f of Object.keys(c))c[f]===void 0&&delete c[f];let u=yield t._getAppCheckToken(),l=u?`#${dV}=${encodeURIComponent(u)}`:"";return`${hV(t)}?${oa(c).slice(1)}${l}`})}function hV({config:t}){return t.emulator?Og(t,lV):`https://${t.authDomain}/${uV}`}var yg="webStorageSupport",Pg=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Gg,this._completeRedirectFn=VL,this._overrideRedirectResult=OL}_openPopup(e,n,r,i){return v(this,null,function*(){var o;Ir((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let s=yield _b(e,n,r,vg(),i);return aV(e,s,Hb())})}_openRedirect(e,n,r,i){return v(this,null,function*(){yield this._originValidation(e);let o=yield _b(e,n,r,vg(),i);return _L(o),new Promise(()=>{})})}_initialize(e){let n=e._key();if(this.eventManagers[n]){let{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(Ir(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}initAndGetManager(e){return v(this,null,function*(){let n=yield tV(e),r=new Mg(e);return n.register("authEvent",i=>(z(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r})}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(yg,{type:yg},i=>{var o;let s=(o=i?.[0])===null||o===void 0?void 0:o[yg];s!==void 0&&n(!!s),_r(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=qL(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Lb()||Mb()||Ug()}},Qb=Pg;var Ib="@firebase/auth",wb="1.10.8";var kg=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return v(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){z(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function fV(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function pV(t){Ye(new Re("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:c}=r.options;z(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:s,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Vb(t)},l=new Dg(r,i,o,u);return aL(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ye(new Re("auth-internal",e=>{let n=Bg(e.getProvider("auth").getImmediate());return(r=>new kg(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),fe(Ib,wb,fV(t)),fe(Ib,wb,"esm2017")}var gV=5*60,mV=zp("authIdTokenMaxAge")||gV,Eb=null,yV=t=>e=>v(null,null,function*(){let n=e&&(yield e.getIdTokenResult()),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>mV)return;let i=n?.token;Eb!==i&&(Eb=i,yield fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function Kg(t=hn()){let e=Ft(t,"auth");if(e.isInitialized())return e.getImmediate();let n=Hg(t,{popupRedirectResolver:Qb,persistence:[Gb,$b,Gg]}),r=zp("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=yV(o.toString());Wg(n,s,()=>s(n.currentUser)),zg(n,c=>s(c))}}let i=Hp("auth");return i&&qg(n,`http://${i}`),n}function vV(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}iL({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let o=oi("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",vV().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});pV("Browser");var Yb="auth",ma=class{constructor(e){return e}},ya=class{constructor(){return gr(Yb)}};var Qg=new j("angularfire2.auth-instances");function d2(t,e){let n=ri(Yb,t,e);return n&&new ma(n)}function h2(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new ma(r)}}var f2={provide:ya,deps:[[new ct,Qg]]},p2={provide:ma,useFactory:d2,deps:[[new ct,Qg],Qt]};function Zb(t,...e){return fe("angularfire",fn.full,"auth"),Wt([p2,f2,{provide:Qg,useFactory:h2(t),multi:!0,deps:[he,je,pn,On,[new ct,mo],...e]}])}var Jb=Vt(Kg,!0);var Xb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},eC={};var Vn,Yg;(function(){var t;function e(T,_){function w(){}w.prototype=_.prototype,T.D=_.prototype,T.prototype=new w,T.prototype.constructor=T,T.C=function(E,D,C){for(var I=Array(arguments.length-2),En=2;En<arguments.length;En++)I[En-2]=arguments[En];return _.prototype[D].apply(E,I)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(T,_,w){w||(w=0);var E=Array(16);if(typeof _=="string")for(var D=0;16>D;++D)E[D]=_.charCodeAt(w++)|_.charCodeAt(w++)<<8|_.charCodeAt(w++)<<16|_.charCodeAt(w++)<<24;else for(D=0;16>D;++D)E[D]=_[w++]|_[w++]<<8|_[w++]<<16|_[w++]<<24;_=T.g[0],w=T.g[1],D=T.g[2];var C=T.g[3],I=_+(C^w&(D^C))+E[0]+3614090360&4294967295;_=w+(I<<7&4294967295|I>>>25),I=C+(D^_&(w^D))+E[1]+3905402710&4294967295,C=_+(I<<12&4294967295|I>>>20),I=D+(w^C&(_^w))+E[2]+606105819&4294967295,D=C+(I<<17&4294967295|I>>>15),I=w+(_^D&(C^_))+E[3]+3250441966&4294967295,w=D+(I<<22&4294967295|I>>>10),I=_+(C^w&(D^C))+E[4]+4118548399&4294967295,_=w+(I<<7&4294967295|I>>>25),I=C+(D^_&(w^D))+E[5]+1200080426&4294967295,C=_+(I<<12&4294967295|I>>>20),I=D+(w^C&(_^w))+E[6]+2821735955&4294967295,D=C+(I<<17&4294967295|I>>>15),I=w+(_^D&(C^_))+E[7]+4249261313&4294967295,w=D+(I<<22&4294967295|I>>>10),I=_+(C^w&(D^C))+E[8]+1770035416&4294967295,_=w+(I<<7&4294967295|I>>>25),I=C+(D^_&(w^D))+E[9]+2336552879&4294967295,C=_+(I<<12&4294967295|I>>>20),I=D+(w^C&(_^w))+E[10]+4294925233&4294967295,D=C+(I<<17&4294967295|I>>>15),I=w+(_^D&(C^_))+E[11]+2304563134&4294967295,w=D+(I<<22&4294967295|I>>>10),I=_+(C^w&(D^C))+E[12]+1804603682&4294967295,_=w+(I<<7&4294967295|I>>>25),I=C+(D^_&(w^D))+E[13]+4254626195&4294967295,C=_+(I<<12&4294967295|I>>>20),I=D+(w^C&(_^w))+E[14]+2792965006&4294967295,D=C+(I<<17&4294967295|I>>>15),I=w+(_^D&(C^_))+E[15]+1236535329&4294967295,w=D+(I<<22&4294967295|I>>>10),I=_+(D^C&(w^D))+E[1]+4129170786&4294967295,_=w+(I<<5&4294967295|I>>>27),I=C+(w^D&(_^w))+E[6]+3225465664&4294967295,C=_+(I<<9&4294967295|I>>>23),I=D+(_^w&(C^_))+E[11]+643717713&4294967295,D=C+(I<<14&4294967295|I>>>18),I=w+(C^_&(D^C))+E[0]+3921069994&4294967295,w=D+(I<<20&4294967295|I>>>12),I=_+(D^C&(w^D))+E[5]+3593408605&4294967295,_=w+(I<<5&4294967295|I>>>27),I=C+(w^D&(_^w))+E[10]+38016083&4294967295,C=_+(I<<9&4294967295|I>>>23),I=D+(_^w&(C^_))+E[15]+3634488961&4294967295,D=C+(I<<14&4294967295|I>>>18),I=w+(C^_&(D^C))+E[4]+3889429448&4294967295,w=D+(I<<20&4294967295|I>>>12),I=_+(D^C&(w^D))+E[9]+568446438&4294967295,_=w+(I<<5&4294967295|I>>>27),I=C+(w^D&(_^w))+E[14]+3275163606&4294967295,C=_+(I<<9&4294967295|I>>>23),I=D+(_^w&(C^_))+E[3]+4107603335&4294967295,D=C+(I<<14&4294967295|I>>>18),I=w+(C^_&(D^C))+E[8]+1163531501&4294967295,w=D+(I<<20&4294967295|I>>>12),I=_+(D^C&(w^D))+E[13]+2850285829&4294967295,_=w+(I<<5&4294967295|I>>>27),I=C+(w^D&(_^w))+E[2]+4243563512&4294967295,C=_+(I<<9&4294967295|I>>>23),I=D+(_^w&(C^_))+E[7]+1735328473&4294967295,D=C+(I<<14&4294967295|I>>>18),I=w+(C^_&(D^C))+E[12]+2368359562&4294967295,w=D+(I<<20&4294967295|I>>>12),I=_+(w^D^C)+E[5]+4294588738&4294967295,_=w+(I<<4&4294967295|I>>>28),I=C+(_^w^D)+E[8]+2272392833&4294967295,C=_+(I<<11&4294967295|I>>>21),I=D+(C^_^w)+E[11]+1839030562&4294967295,D=C+(I<<16&4294967295|I>>>16),I=w+(D^C^_)+E[14]+4259657740&4294967295,w=D+(I<<23&4294967295|I>>>9),I=_+(w^D^C)+E[1]+2763975236&4294967295,_=w+(I<<4&4294967295|I>>>28),I=C+(_^w^D)+E[4]+1272893353&4294967295,C=_+(I<<11&4294967295|I>>>21),I=D+(C^_^w)+E[7]+4139469664&4294967295,D=C+(I<<16&4294967295|I>>>16),I=w+(D^C^_)+E[10]+3200236656&4294967295,w=D+(I<<23&4294967295|I>>>9),I=_+(w^D^C)+E[13]+681279174&4294967295,_=w+(I<<4&4294967295|I>>>28),I=C+(_^w^D)+E[0]+3936430074&4294967295,C=_+(I<<11&4294967295|I>>>21),I=D+(C^_^w)+E[3]+3572445317&4294967295,D=C+(I<<16&4294967295|I>>>16),I=w+(D^C^_)+E[6]+76029189&4294967295,w=D+(I<<23&4294967295|I>>>9),I=_+(w^D^C)+E[9]+3654602809&4294967295,_=w+(I<<4&4294967295|I>>>28),I=C+(_^w^D)+E[12]+3873151461&4294967295,C=_+(I<<11&4294967295|I>>>21),I=D+(C^_^w)+E[15]+530742520&4294967295,D=C+(I<<16&4294967295|I>>>16),I=w+(D^C^_)+E[2]+3299628645&4294967295,w=D+(I<<23&4294967295|I>>>9),I=_+(D^(w|~C))+E[0]+4096336452&4294967295,_=w+(I<<6&4294967295|I>>>26),I=C+(w^(_|~D))+E[7]+1126891415&4294967295,C=_+(I<<10&4294967295|I>>>22),I=D+(_^(C|~w))+E[14]+2878612391&4294967295,D=C+(I<<15&4294967295|I>>>17),I=w+(C^(D|~_))+E[5]+4237533241&4294967295,w=D+(I<<21&4294967295|I>>>11),I=_+(D^(w|~C))+E[12]+1700485571&4294967295,_=w+(I<<6&4294967295|I>>>26),I=C+(w^(_|~D))+E[3]+2399980690&4294967295,C=_+(I<<10&4294967295|I>>>22),I=D+(_^(C|~w))+E[10]+4293915773&4294967295,D=C+(I<<15&4294967295|I>>>17),I=w+(C^(D|~_))+E[1]+2240044497&4294967295,w=D+(I<<21&4294967295|I>>>11),I=_+(D^(w|~C))+E[8]+1873313359&4294967295,_=w+(I<<6&4294967295|I>>>26),I=C+(w^(_|~D))+E[15]+4264355552&4294967295,C=_+(I<<10&4294967295|I>>>22),I=D+(_^(C|~w))+E[6]+2734768916&4294967295,D=C+(I<<15&4294967295|I>>>17),I=w+(C^(D|~_))+E[13]+1309151649&4294967295,w=D+(I<<21&4294967295|I>>>11),I=_+(D^(w|~C))+E[4]+4149444226&4294967295,_=w+(I<<6&4294967295|I>>>26),I=C+(w^(_|~D))+E[11]+3174756917&4294967295,C=_+(I<<10&4294967295|I>>>22),I=D+(_^(C|~w))+E[2]+718787259&4294967295,D=C+(I<<15&4294967295|I>>>17),I=w+(C^(D|~_))+E[9]+3951481745&4294967295,T.g[0]=T.g[0]+_&4294967295,T.g[1]=T.g[1]+(D+(I<<21&4294967295|I>>>11))&4294967295,T.g[2]=T.g[2]+D&4294967295,T.g[3]=T.g[3]+C&4294967295}r.prototype.u=function(T,_){_===void 0&&(_=T.length);for(var w=_-this.blockSize,E=this.B,D=this.h,C=0;C<_;){if(D==0)for(;C<=w;)i(this,T,C),C+=this.blockSize;if(typeof T=="string"){for(;C<_;)if(E[D++]=T.charCodeAt(C++),D==this.blockSize){i(this,E),D=0;break}}else for(;C<_;)if(E[D++]=T[C++],D==this.blockSize){i(this,E),D=0;break}}this.h=D,this.o+=_},r.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var _=1;_<T.length-8;++_)T[_]=0;var w=8*this.o;for(_=T.length-8;_<T.length;++_)T[_]=w&255,w/=256;for(this.u(T),T=Array(16),_=w=0;4>_;++_)for(var E=0;32>E;E+=8)T[w++]=this.g[_]>>>E&255;return T};function o(T,_){var w=c;return Object.prototype.hasOwnProperty.call(w,T)?w[T]:w[T]=_(T)}function s(T,_){this.h=_;for(var w=[],E=!0,D=T.length-1;0<=D;D--){var C=T[D]|0;E&&C==_||(w[D]=C,E=!1)}this.g=w}var c={};function u(T){return-128<=T&&128>T?o(T,function(_){return new s([_|0],0>_?-1:0)}):new s([T|0],0>T?-1:0)}function l(T){if(isNaN(T)||!isFinite(T))return p;if(0>T)return P(l(-T));for(var _=[],w=1,E=0;T>=w;E++)_[E]=T/w|0,w*=4294967296;return new s(_,0)}function f(T,_){if(T.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(T.charAt(0)=="-")return P(f(T.substring(1),_));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=l(Math.pow(_,8)),E=p,D=0;D<T.length;D+=8){var C=Math.min(8,T.length-D),I=parseInt(T.substring(D,D+C),_);8>C?(C=l(Math.pow(_,C)),E=E.j(C).add(l(I))):(E=E.j(w),E=E.add(l(I)))}return E}var p=u(0),m=u(1),y=u(16777216);t=s.prototype,t.m=function(){if(R(this))return-P(this).m();for(var T=0,_=1,w=0;w<this.g.length;w++){var E=this.i(w);T+=(0<=E?E:4294967296+E)*_,_*=4294967296}return T},t.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(A(this))return"0";if(R(this))return"-"+P(this).toString(T);for(var _=l(Math.pow(T,6)),w=this,E="";;){var D=_e(w,_).g;w=V(w,D.j(_));var C=((0<w.g.length?w.g[0]:w.h)>>>0).toString(T);if(w=D,A(w))return C+E;for(;6>C.length;)C="0"+C;E=C+E}},t.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function A(T){if(T.h!=0)return!1;for(var _=0;_<T.g.length;_++)if(T.g[_]!=0)return!1;return!0}function R(T){return T.h==-1}t.l=function(T){return T=V(this,T),R(T)?-1:A(T)?0:1};function P(T){for(var _=T.g.length,w=[],E=0;E<_;E++)w[E]=~T.g[E];return new s(w,~T.h).add(m)}t.abs=function(){return R(this)?P(this):this},t.add=function(T){for(var _=Math.max(this.g.length,T.g.length),w=[],E=0,D=0;D<=_;D++){var C=E+(this.i(D)&65535)+(T.i(D)&65535),I=(C>>>16)+(this.i(D)>>>16)+(T.i(D)>>>16);E=I>>>16,C&=65535,I&=65535,w[D]=I<<16|C}return new s(w,w[w.length-1]&-2147483648?-1:0)};function V(T,_){return T.add(P(_))}t.j=function(T){if(A(this)||A(T))return p;if(R(this))return R(T)?P(this).j(P(T)):P(P(this).j(T));if(R(T))return P(this.j(P(T)));if(0>this.l(y)&&0>T.l(y))return l(this.m()*T.m());for(var _=this.g.length+T.g.length,w=[],E=0;E<2*_;E++)w[E]=0;for(E=0;E<this.g.length;E++)for(var D=0;D<T.g.length;D++){var C=this.i(E)>>>16,I=this.i(E)&65535,En=T.i(D)>>>16,zo=T.i(D)&65535;w[2*E+2*D]+=I*zo,q(w,2*E+2*D),w[2*E+2*D+1]+=C*zo,q(w,2*E+2*D+1),w[2*E+2*D+1]+=I*En,q(w,2*E+2*D+1),w[2*E+2*D+2]+=C*En,q(w,2*E+2*D+2)}for(E=0;E<_;E++)w[E]=w[2*E+1]<<16|w[2*E];for(E=_;E<2*_;E++)w[E]=0;return new s(w,0)};function q(T,_){for(;(T[_]&65535)!=T[_];)T[_+1]+=T[_]>>>16,T[_]&=65535,_++}function W(T,_){this.g=T,this.h=_}function _e(T,_){if(A(_))throw Error("division by zero");if(A(T))return new W(p,p);if(R(T))return _=_e(P(T),_),new W(P(_.g),P(_.h));if(R(_))return _=_e(T,P(_)),new W(P(_.g),_.h);if(30<T.g.length){if(R(T)||R(_))throw Error("slowDivide_ only works with positive integers.");for(var w=m,E=_;0>=E.l(T);)w=it(w),E=it(E);var D=ge(w,1),C=ge(E,1);for(E=ge(E,2),w=ge(w,2);!A(E);){var I=C.add(E);0>=I.l(T)&&(D=D.add(w),C=I),E=ge(E,1),w=ge(w,1)}return _=V(T,D.j(_)),new W(D,_)}for(D=p;0<=T.l(_);){for(w=Math.max(1,Math.floor(T.m()/_.m())),E=Math.ceil(Math.log(w)/Math.LN2),E=48>=E?1:Math.pow(2,E-48),C=l(w),I=C.j(_);R(I)||0<I.l(T);)w-=E,C=l(w),I=C.j(_);A(C)&&(C=m),D=D.add(C),T=V(T,I)}return new W(D,T)}t.A=function(T){return _e(this,T).h},t.and=function(T){for(var _=Math.max(this.g.length,T.g.length),w=[],E=0;E<_;E++)w[E]=this.i(E)&T.i(E);return new s(w,this.h&T.h)},t.or=function(T){for(var _=Math.max(this.g.length,T.g.length),w=[],E=0;E<_;E++)w[E]=this.i(E)|T.i(E);return new s(w,this.h|T.h)},t.xor=function(T){for(var _=Math.max(this.g.length,T.g.length),w=[],E=0;E<_;E++)w[E]=this.i(E)^T.i(E);return new s(w,this.h^T.h)};function it(T){for(var _=T.g.length+1,w=[],E=0;E<_;E++)w[E]=T.i(E)<<1|T.i(E-1)>>>31;return new s(w,T.h)}function ge(T,_){var w=_>>5;_%=32;for(var E=T.g.length-w,D=[],C=0;C<E;C++)D[C]=0<_?T.i(C+w)>>>_|T.i(C+w+1)<<32-_:T.i(C+w);return new s(D,T.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Yg=eC.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=f,Vn=eC.Integer=s}).apply(typeof Xb<"u"?Xb:typeof self<"u"?self:typeof window<"u"?window:{});var Ul=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},jn={};var Zg,g2,vo,Jg,va,Bl,Xg,em,tm;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,d,h){return a==Array.prototype||a==Object.prototype||(a[d]=h.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ul=="object"&&Ul];for(var d=0;d<a.length;++d){var h=a[d];if(h&&h.Math==Math)return h}throw Error("Cannot find global object")}var r=n(this);function i(a,d){if(d)e:{var h=r;a=a.split(".");for(var g=0;g<a.length-1;g++){var b=a[g];if(!(b in h))break e;h=h[b]}a=a[a.length-1],g=h[a],d=d(g),d!=g&&d!=null&&e(h,a,{configurable:!0,writable:!0,value:d})}}function o(a,d){a instanceof String&&(a+="");var h=0,g=!1,b={next:function(){if(!g&&h<a.length){var S=h++;return{value:d(S,a[S]),done:!1}}return g=!0,{done:!0,value:void 0}}};return b[Symbol.iterator]=function(){return b},b}i("Array.prototype.values",function(a){return a||function(){return o(this,function(d,h){return h})}});var s=s||{},c=this||self;function u(a){var d=typeof a;return d=d!="object"?d:a?Array.isArray(a)?"array":d:"null",d=="array"||d=="object"&&typeof a.length=="number"}function l(a){var d=typeof a;return d=="object"&&a!=null||d=="function"}function f(a,d,h){return a.call.apply(a.bind,arguments)}function p(a,d,h){if(!a)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var b=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(b,g),a.apply(d,b)}}return function(){return a.apply(d,arguments)}}function m(a,d,h){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:p,m.apply(null,arguments)}function y(a,d){var h=Array.prototype.slice.call(arguments,1);return function(){var g=h.slice();return g.push.apply(g,arguments),a.apply(this,g)}}function A(a,d){function h(){}h.prototype=d.prototype,a.aa=d.prototype,a.prototype=new h,a.prototype.constructor=a,a.Qb=function(g,b,S){for(var x=Array(arguments.length-2),Ie=2;Ie<arguments.length;Ie++)x[Ie-2]=arguments[Ie];return d.prototype[b].apply(g,x)}}function R(a){let d=a.length;if(0<d){let h=Array(d);for(let g=0;g<d;g++)h[g]=a[g];return h}return[]}function P(a,d){for(let h=1;h<arguments.length;h++){let g=arguments[h];if(u(g)){let b=a.length||0,S=g.length||0;a.length=b+S;for(let x=0;x<S;x++)a[b+x]=g[x]}else a.push(g)}}class V{constructor(d,h){this.i=d,this.j=h,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function q(a){return/^[\s\xa0]*$/.test(a)}function W(){var a=c.navigator;return a&&(a=a.userAgent)?a:""}function _e(a){return _e[" "](a),a}_e[" "]=function(){};var it=W().indexOf("Gecko")!=-1&&!(W().toLowerCase().indexOf("webkit")!=-1&&W().indexOf("Edge")==-1)&&!(W().indexOf("Trident")!=-1||W().indexOf("MSIE")!=-1)&&W().indexOf("Edge")==-1;function ge(a,d,h){for(let g in a)d.call(h,a[g],g,a)}function T(a,d){for(let h in a)d.call(void 0,a[h],h,a)}function _(a){let d={};for(let h in a)d[h]=a[h];return d}let w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function E(a,d){let h,g;for(let b=1;b<arguments.length;b++){g=arguments[b];for(h in g)a[h]=g[h];for(let S=0;S<w.length;S++)h=w[S],Object.prototype.hasOwnProperty.call(g,h)&&(a[h]=g[h])}}function D(a){var d=1;a=a.split(":");let h=[];for(;0<d&&a.length;)h.push(a.shift()),d--;return a.length&&h.push(a.join(":")),h}function C(a){c.setTimeout(()=>{throw a},0)}function I(){var a=Hd;let d=null;return a.g&&(d=a.g,a.g=a.g.next,a.g||(a.h=null),d.next=null),d}class En{constructor(){this.h=this.g=null}add(d,h){let g=zo.get();g.set(d,h),this.h?this.h.next=g:this.g=g,this.h=g}}var zo=new V(()=>new hA,a=>a.reset());class hA{constructor(){this.next=this.g=this.h=null}set(d,h){this.h=d,this.g=h,this.next=null}reset(){this.next=this.g=this.h=null}}let Wo,Go=!1,Hd=new En,Rv=()=>{let a=c.Promise.resolve(void 0);Wo=()=>{a.then(fA)}};var fA=()=>{for(var a;a=I();){try{a.h.call(a.g)}catch(h){C(h)}var d=zo;d.j(a),100>d.h&&(d.h++,a.next=d.g,d.g=a)}Go=!1};function Gn(){this.s=this.s,this.C=this.C}Gn.prototype.s=!1,Gn.prototype.ma=function(){this.s||(this.s=!0,this.N())},Gn.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ze(a,d){this.type=a,this.g=this.target=d,this.defaultPrevented=!1}Ze.prototype.h=function(){this.defaultPrevented=!0};var pA=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var a=!1,d=Object.defineProperty({},"passive",{get:function(){a=!0}});try{let h=()=>{};c.addEventListener("test",h,d),c.removeEventListener("test",h,d)}catch{}return a}();function Ko(a,d){if(Ze.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var h=this.type=a.type,g=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=d,d=a.relatedTarget){if(it){e:{try{_e(d.nodeName);var b=!0;break e}catch{}b=!1}b||(d=null)}}else h=="mouseover"?d=a.fromElement:h=="mouseout"&&(d=a.toElement);this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:gA[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&Ko.aa.h.call(this)}}A(Ko,Ze);var gA={2:"touch",3:"pen",4:"mouse"};Ko.prototype.h=function(){Ko.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var Qo="closure_listenable_"+(1e6*Math.random()|0),mA=0;function yA(a,d,h,g,b){this.listener=a,this.proxy=null,this.src=d,this.type=h,this.capture=!!g,this.ha=b,this.key=++mA,this.da=this.fa=!1}function Ba(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function $a(a){this.src=a,this.g={},this.h=0}$a.prototype.add=function(a,d,h,g,b){var S=a.toString();a=this.g[S],a||(a=this.g[S]=[],this.h++);var x=zd(a,d,g,b);return-1<x?(d=a[x],h||(d.fa=!1)):(d=new yA(d,this.src,S,!!g,b),d.fa=h,a.push(d)),d};function qd(a,d){var h=d.type;if(h in a.g){var g=a.g[h],b=Array.prototype.indexOf.call(g,d,void 0),S;(S=0<=b)&&Array.prototype.splice.call(g,b,1),S&&(Ba(d),a.g[h].length==0&&(delete a.g[h],a.h--))}}function zd(a,d,h,g){for(var b=0;b<a.length;++b){var S=a[b];if(!S.da&&S.listener==d&&S.capture==!!h&&S.ha==g)return b}return-1}var Wd="closure_lm_"+(1e6*Math.random()|0),Gd={};function Nv(a,d,h,g,b){if(g&&g.once)return Pv(a,d,h,g,b);if(Array.isArray(d)){for(var S=0;S<d.length;S++)Nv(a,d[S],h,g,b);return null}return h=Zd(h),a&&a[Qo]?a.K(d,h,l(g)?!!g.capture:!!g,b):Mv(a,d,h,!1,g,b)}function Mv(a,d,h,g,b,S){if(!d)throw Error("Invalid event type");var x=l(b)?!!b.capture:!!b,Ie=Qd(a);if(Ie||(a[Wd]=Ie=new $a(a)),h=Ie.add(d,h,g,x,S),h.proxy)return h;if(g=vA(),h.proxy=g,g.src=a,g.listener=h,a.addEventListener)pA||(b=x),b===void 0&&(b=!1),a.addEventListener(d.toString(),g,b);else if(a.attachEvent)a.attachEvent(xv(d.toString()),g);else if(a.addListener&&a.removeListener)a.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return h}function vA(){function a(h){return d.call(a.src,a.listener,h)}let d=_A;return a}function Pv(a,d,h,g,b){if(Array.isArray(d)){for(var S=0;S<d.length;S++)Pv(a,d[S],h,g,b);return null}return h=Zd(h),a&&a[Qo]?a.L(d,h,l(g)?!!g.capture:!!g,b):Mv(a,d,h,!0,g,b)}function kv(a,d,h,g,b){if(Array.isArray(d))for(var S=0;S<d.length;S++)kv(a,d[S],h,g,b);else g=l(g)?!!g.capture:!!g,h=Zd(h),a&&a[Qo]?(a=a.i,d=String(d).toString(),d in a.g&&(S=a.g[d],h=zd(S,h,g,b),-1<h&&(Ba(S[h]),Array.prototype.splice.call(S,h,1),S.length==0&&(delete a.g[d],a.h--)))):a&&(a=Qd(a))&&(d=a.g[d.toString()],a=-1,d&&(a=zd(d,h,g,b)),(h=-1<a?d[a]:null)&&Kd(h))}function Kd(a){if(typeof a!="number"&&a&&!a.da){var d=a.src;if(d&&d[Qo])qd(d.i,a);else{var h=a.type,g=a.proxy;d.removeEventListener?d.removeEventListener(h,g,a.capture):d.detachEvent?d.detachEvent(xv(h),g):d.addListener&&d.removeListener&&d.removeListener(g),(h=Qd(d))?(qd(h,a),h.h==0&&(h.src=null,d[Wd]=null)):Ba(a)}}}function xv(a){return a in Gd?Gd[a]:Gd[a]="on"+a}function _A(a,d){if(a.da)a=!0;else{d=new Ko(d,this);var h=a.listener,g=a.ha||a.src;a.fa&&Kd(a),a=h.call(g,d)}return a}function Qd(a){return a=a[Wd],a instanceof $a?a:null}var Yd="__closure_events_fn_"+(1e9*Math.random()>>>0);function Zd(a){return typeof a=="function"?a:(a[Yd]||(a[Yd]=function(d){return a.handleEvent(d)}),a[Yd])}function Je(){Gn.call(this),this.i=new $a(this),this.M=this,this.F=null}A(Je,Gn),Je.prototype[Qo]=!0,Je.prototype.removeEventListener=function(a,d,h,g){kv(this,a,d,h,g)};function ot(a,d){var h,g=a.F;if(g)for(h=[];g;g=g.F)h.push(g);if(a=a.M,g=d.type||d,typeof d=="string")d=new Ze(d,a);else if(d instanceof Ze)d.target=d.target||a;else{var b=d;d=new Ze(g,a),E(d,b)}if(b=!0,h)for(var S=h.length-1;0<=S;S--){var x=d.g=h[S];b=Ha(x,g,!0,d)&&b}if(x=d.g=a,b=Ha(x,g,!0,d)&&b,b=Ha(x,g,!1,d)&&b,h)for(S=0;S<h.length;S++)x=d.g=h[S],b=Ha(x,g,!1,d)&&b}Je.prototype.N=function(){if(Je.aa.N.call(this),this.i){var a=this.i,d;for(d in a.g){for(var h=a.g[d],g=0;g<h.length;g++)Ba(h[g]);delete a.g[d],a.h--}}this.F=null},Je.prototype.K=function(a,d,h,g){return this.i.add(String(a),d,!1,h,g)},Je.prototype.L=function(a,d,h,g){return this.i.add(String(a),d,!0,h,g)};function Ha(a,d,h,g){if(d=a.i.g[String(d)],!d)return!0;d=d.concat();for(var b=!0,S=0;S<d.length;++S){var x=d[S];if(x&&!x.da&&x.capture==h){var Ie=x.listener,qe=x.ha||x.src;x.fa&&qd(a.i,x),b=Ie.call(qe,g)!==!1&&b}}return b&&!g.defaultPrevented}function Ov(a,d,h){if(typeof a=="function")h&&(a=m(a,h));else if(a&&typeof a.handleEvent=="function")a=m(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:c.setTimeout(a,d||0)}function Fv(a){a.g=Ov(()=>{a.g=null,a.i&&(a.i=!1,Fv(a))},a.l);let d=a.h;a.h=null,a.m.apply(null,d)}class IA extends Gn{constructor(d,h){super(),this.m=d,this.l=h,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:Fv(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Yo(a){Gn.call(this),this.h=a,this.g={}}A(Yo,Gn);var Lv=[];function Vv(a){ge(a.g,function(d,h){this.g.hasOwnProperty(h)&&Kd(d)},a),a.g={}}Yo.prototype.N=function(){Yo.aa.N.call(this),Vv(this)},Yo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Jd=c.JSON.stringify,wA=c.JSON.parse,EA=class{stringify(a){return c.JSON.stringify(a,void 0)}parse(a){return c.JSON.parse(a,void 0)}};function Xd(){}Xd.prototype.h=null;function jv(a){return a.h||(a.h=a.i())}function Uv(){}var Zo={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function eh(){Ze.call(this,"d")}A(eh,Ze);function th(){Ze.call(this,"c")}A(th,Ze);var Ar={},Bv=null;function qa(){return Bv=Bv||new Je}Ar.La="serverreachability";function $v(a){Ze.call(this,Ar.La,a)}A($v,Ze);function Jo(a){let d=qa();ot(d,new $v(d))}Ar.STAT_EVENT="statevent";function Hv(a,d){Ze.call(this,Ar.STAT_EVENT,a),this.stat=d}A(Hv,Ze);function st(a){let d=qa();ot(d,new Hv(d,a))}Ar.Ma="timingevent";function qv(a,d){Ze.call(this,Ar.Ma,a),this.size=d}A(qv,Ze);function Xo(a,d){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){a()},d)}function es(){this.g=!0}es.prototype.xa=function(){this.g=!1};function TA(a,d,h,g,b,S){a.info(function(){if(a.g)if(S)for(var x="",Ie=S.split("&"),qe=0;qe<Ie.length;qe++){var ue=Ie[qe].split("=");if(1<ue.length){var Xe=ue[0];ue=ue[1];var et=Xe.split("_");x=2<=et.length&&et[1]=="type"?x+(Xe+"="+ue+"&"):x+(Xe+"=redacted&")}}else x=null;else x=S;return"XMLHTTP REQ ("+g+") [attempt "+b+"]: "+d+`
`+h+`
`+x})}function DA(a,d,h,g,b,S,x){a.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+b+"]: "+d+`
`+h+`
`+S+" "+x})}function bi(a,d,h,g){a.info(function(){return"XMLHTTP TEXT ("+d+"): "+CA(a,h)+(g?" "+g:"")})}function bA(a,d){a.info(function(){return"TIMEOUT: "+d})}es.prototype.info=function(){};function CA(a,d){if(!a.g)return d;if(!d)return null;try{var h=JSON.parse(d);if(h){for(a=0;a<h.length;a++)if(Array.isArray(h[a])){var g=h[a];if(!(2>g.length)){var b=g[1];if(Array.isArray(b)&&!(1>b.length)){var S=b[0];if(S!="noop"&&S!="stop"&&S!="close")for(var x=1;x<b.length;x++)b[x]=""}}}}return Jd(h)}catch{return d}}var za={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},zv={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},nh;function Wa(){}A(Wa,Xd),Wa.prototype.g=function(){return new XMLHttpRequest},Wa.prototype.i=function(){return{}},nh=new Wa;function Kn(a,d,h,g){this.j=a,this.i=d,this.l=h,this.R=g||1,this.U=new Yo(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Wv}function Wv(){this.i=null,this.g="",this.h=!1}var Gv={},rh={};function ih(a,d,h){a.L=1,a.v=Ya(Tn(d)),a.m=h,a.P=!0,Kv(a,null)}function Kv(a,d){a.F=Date.now(),Ga(a),a.A=Tn(a.v);var h=a.A,g=a.R;Array.isArray(g)||(g=[String(g)]),c_(h.i,"t",g),a.C=0,h=a.j.J,a.h=new Wv,a.g=C_(a.j,h?d:null,!a.m),0<a.O&&(a.M=new IA(m(a.Y,a,a.g),a.O)),d=a.U,h=a.g,g=a.ca;var b="readystatechange";Array.isArray(b)||(b&&(Lv[0]=b.toString()),b=Lv);for(var S=0;S<b.length;S++){var x=Nv(h,b[S],g||d.handleEvent,!1,d.h||d);if(!x)break;d.g[x.key]=x}d=a.H?_(a.H):{},a.m?(a.u||(a.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,d)):(a.u="GET",a.g.ea(a.A,a.u,null,d)),Jo(),TA(a.i,a.u,a.A,a.l,a.R,a.m)}Kn.prototype.ca=function(a){a=a.target;let d=this.M;d&&Dn(a)==3?d.j():this.Y(a)},Kn.prototype.Y=function(a){try{if(a==this.g)e:{let et=Dn(this.g);var d=this.g.Ba();let Ai=this.g.Z();if(!(3>et)&&(et!=3||this.g&&(this.h.h||this.g.oa()||g_(this.g)))){this.J||et!=4||d==7||(d==8||0>=Ai?Jo(3):Jo(2)),oh(this);var h=this.g.Z();this.X=h;t:if(Qv(this)){var g=g_(this.g);a="";var b=g.length,S=Dn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Rr(this),ts(this);var x="";break t}this.h.i=new c.TextDecoder}for(d=0;d<b;d++)this.h.h=!0,a+=this.h.i.decode(g[d],{stream:!(S&&d==b-1)});g.length=0,this.h.g+=a,this.C=0,x=this.h.g}else x=this.g.oa();if(this.o=h==200,DA(this.i,this.u,this.A,this.l,this.R,et,h),this.o){if(this.T&&!this.K){t:{if(this.g){var Ie,qe=this.g;if((Ie=qe.g?qe.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!q(Ie)){var ue=Ie;break t}}ue=null}if(h=ue)bi(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,sh(this,h);else{this.o=!1,this.s=3,st(12),Rr(this),ts(this);break e}}if(this.P){h=!0;let Ut;for(;!this.J&&this.C<x.length;)if(Ut=SA(this,x),Ut==rh){et==4&&(this.s=4,st(14),h=!1),bi(this.i,this.l,null,"[Incomplete Response]");break}else if(Ut==Gv){this.s=4,st(15),bi(this.i,this.l,x,"[Invalid Chunk]"),h=!1;break}else bi(this.i,this.l,Ut,null),sh(this,Ut);if(Qv(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),et!=4||x.length!=0||this.h.h||(this.s=1,st(16),h=!1),this.o=this.o&&h,!h)bi(this.i,this.l,x,"[Invalid Chunked Response]"),Rr(this),ts(this);else if(0<x.length&&!this.W){this.W=!0;var Xe=this.j;Xe.g==this&&Xe.ba&&!Xe.M&&(Xe.j.info("Great, no buffering proxy detected. Bytes received: "+x.length),hh(Xe),Xe.M=!0,st(11))}}else bi(this.i,this.l,x,null),sh(this,x);et==4&&Rr(this),this.o&&!this.J&&(et==4?E_(this.j,this):(this.o=!1,Ga(this)))}else qA(this.g),h==400&&0<x.indexOf("Unknown SID")?(this.s=3,st(12)):(this.s=0,st(13)),Rr(this),ts(this)}}}catch{}finally{}};function Qv(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function SA(a,d){var h=a.C,g=d.indexOf(`
`,h);return g==-1?rh:(h=Number(d.substring(h,g)),isNaN(h)?Gv:(g+=1,g+h>d.length?rh:(d=d.slice(g,g+h),a.C=g+h,d)))}Kn.prototype.cancel=function(){this.J=!0,Rr(this)};function Ga(a){a.S=Date.now()+a.I,Yv(a,a.I)}function Yv(a,d){if(a.B!=null)throw Error("WatchDog timer not null");a.B=Xo(m(a.ba,a),d)}function oh(a){a.B&&(c.clearTimeout(a.B),a.B=null)}Kn.prototype.ba=function(){this.B=null;let a=Date.now();0<=a-this.S?(bA(this.i,this.A),this.L!=2&&(Jo(),st(17)),Rr(this),this.s=2,ts(this)):Yv(this,this.S-a)};function ts(a){a.j.G==0||a.J||E_(a.j,a)}function Rr(a){oh(a);var d=a.M;d&&typeof d.ma=="function"&&d.ma(),a.M=null,Vv(a.U),a.g&&(d=a.g,a.g=null,d.abort(),d.ma())}function sh(a,d){try{var h=a.j;if(h.G!=0&&(h.g==a||ah(h.h,a))){if(!a.K&&ah(h.h,a)&&h.G==3){try{var g=h.Da.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var b=g;if(b[0]==0){e:if(!h.u){if(h.g)if(h.g.F+3e3<a.F)tc(h),Xa(h);else break e;dh(h),st(18)}}else h.za=b[1],0<h.za-h.T&&37500>b[2]&&h.F&&h.v==0&&!h.C&&(h.C=Xo(m(h.Za,h),6e3));if(1>=Xv(h.h)&&h.ca){try{h.ca()}catch{}h.ca=void 0}}else Mr(h,11)}else if((a.K||h.g==a)&&tc(h),!q(d))for(b=h.Da.g.parse(d),d=0;d<b.length;d++){let ue=b[d];if(h.T=ue[0],ue=ue[1],h.G==2)if(ue[0]=="c"){h.K=ue[1],h.ia=ue[2];let Xe=ue[3];Xe!=null&&(h.la=Xe,h.j.info("VER="+h.la));let et=ue[4];et!=null&&(h.Aa=et,h.j.info("SVER="+h.Aa));let Ai=ue[5];Ai!=null&&typeof Ai=="number"&&0<Ai&&(g=1.5*Ai,h.L=g,h.j.info("backChannelRequestTimeoutMs_="+g)),g=h;let Ut=a.g;if(Ut){let rc=Ut.g?Ut.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(rc){var S=g.h;S.g||rc.indexOf("spdy")==-1&&rc.indexOf("quic")==-1&&rc.indexOf("h2")==-1||(S.j=S.l,S.g=new Set,S.h&&(ch(S,S.h),S.h=null))}if(g.D){let fh=Ut.g?Ut.g.getResponseHeader("X-HTTP-Session-Id"):null;fh&&(g.ya=fh,Ee(g.I,g.D,fh))}}h.G=3,h.l&&h.l.ua(),h.ba&&(h.R=Date.now()-a.F,h.j.info("Handshake RTT: "+h.R+"ms")),g=h;var x=a;if(g.qa=b_(g,g.J?g.ia:null,g.W),x.K){e_(g.h,x);var Ie=x,qe=g.L;qe&&(Ie.I=qe),Ie.B&&(oh(Ie),Ga(Ie)),g.g=x}else I_(g);0<h.i.length&&ec(h)}else ue[0]!="stop"&&ue[0]!="close"||Mr(h,7);else h.G==3&&(ue[0]=="stop"||ue[0]=="close"?ue[0]=="stop"?Mr(h,7):lh(h):ue[0]!="noop"&&h.l&&h.l.ta(ue),h.v=0)}}Jo(4)}catch{}}var AA=class{constructor(a,d){this.g=a,this.map=d}};function Zv(a){this.l=a||10,c.PerformanceNavigationTiming?(a=c.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Jv(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function Xv(a){return a.h?1:a.g?a.g.size:0}function ah(a,d){return a.h?a.h==d:a.g?a.g.has(d):!1}function ch(a,d){a.g?a.g.add(d):a.h=d}function e_(a,d){a.h&&a.h==d?a.h=null:a.g&&a.g.has(d)&&a.g.delete(d)}Zv.prototype.cancel=function(){if(this.i=t_(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let a of this.g.values())a.cancel();this.g.clear()}};function t_(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let d=a.i;for(let h of a.g.values())d=d.concat(h.D);return d}return R(a.i)}function RA(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(u(a)){for(var d=[],h=a.length,g=0;g<h;g++)d.push(a[g]);return d}d=[],h=0;for(g in a)d[h++]=a[g];return d}function NA(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(u(a)||typeof a=="string"){var d=[];a=a.length;for(var h=0;h<a;h++)d.push(h);return d}d=[],h=0;for(let g in a)d[h++]=g;return d}}}function n_(a,d){if(a.forEach&&typeof a.forEach=="function")a.forEach(d,void 0);else if(u(a)||typeof a=="string")Array.prototype.forEach.call(a,d,void 0);else for(var h=NA(a),g=RA(a),b=g.length,S=0;S<b;S++)d.call(void 0,g[S],h&&h[S],a)}var r_=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function MA(a,d){if(a){a=a.split("&");for(var h=0;h<a.length;h++){var g=a[h].indexOf("="),b=null;if(0<=g){var S=a[h].substring(0,g);b=a[h].substring(g+1)}else S=a[h];d(S,b?decodeURIComponent(b.replace(/\+/g," ")):"")}}}function Nr(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof Nr){this.h=a.h,Ka(this,a.j),this.o=a.o,this.g=a.g,Qa(this,a.s),this.l=a.l;var d=a.i,h=new is;h.i=d.i,d.g&&(h.g=new Map(d.g),h.h=d.h),i_(this,h),this.m=a.m}else a&&(d=String(a).match(r_))?(this.h=!1,Ka(this,d[1]||"",!0),this.o=ns(d[2]||""),this.g=ns(d[3]||"",!0),Qa(this,d[4]),this.l=ns(d[5]||"",!0),i_(this,d[6]||"",!0),this.m=ns(d[7]||"")):(this.h=!1,this.i=new is(null,this.h))}Nr.prototype.toString=function(){var a=[],d=this.j;d&&a.push(rs(d,o_,!0),":");var h=this.g;return(h||d=="file")&&(a.push("//"),(d=this.o)&&a.push(rs(d,o_,!0),"@"),a.push(encodeURIComponent(String(h)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h=this.s,h!=null&&a.push(":",String(h))),(h=this.l)&&(this.g&&h.charAt(0)!="/"&&a.push("/"),a.push(rs(h,h.charAt(0)=="/"?xA:kA,!0))),(h=this.i.toString())&&a.push("?",h),(h=this.m)&&a.push("#",rs(h,FA)),a.join("")};function Tn(a){return new Nr(a)}function Ka(a,d,h){a.j=h?ns(d,!0):d,a.j&&(a.j=a.j.replace(/:$/,""))}function Qa(a,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);a.s=d}else a.s=null}function i_(a,d,h){d instanceof is?(a.i=d,LA(a.i,a.h)):(h||(d=rs(d,OA)),a.i=new is(d,a.h))}function Ee(a,d,h){a.i.set(d,h)}function Ya(a){return Ee(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function ns(a,d){return a?d?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function rs(a,d,h){return typeof a=="string"?(a=encodeURI(a).replace(d,PA),h&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function PA(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var o_=/[#\/\?@]/g,kA=/[#\?:]/g,xA=/[#\?]/g,OA=/[#\?@]/g,FA=/#/g;function is(a,d){this.h=this.g=null,this.i=a||null,this.j=!!d}function Qn(a){a.g||(a.g=new Map,a.h=0,a.i&&MA(a.i,function(d,h){a.add(decodeURIComponent(d.replace(/\+/g," ")),h)}))}t=is.prototype,t.add=function(a,d){Qn(this),this.i=null,a=Ci(this,a);var h=this.g.get(a);return h||this.g.set(a,h=[]),h.push(d),this.h+=1,this};function s_(a,d){Qn(a),d=Ci(a,d),a.g.has(d)&&(a.i=null,a.h-=a.g.get(d).length,a.g.delete(d))}function a_(a,d){return Qn(a),d=Ci(a,d),a.g.has(d)}t.forEach=function(a,d){Qn(this),this.g.forEach(function(h,g){h.forEach(function(b){a.call(d,b,g,this)},this)},this)},t.na=function(){Qn(this);let a=Array.from(this.g.values()),d=Array.from(this.g.keys()),h=[];for(let g=0;g<d.length;g++){let b=a[g];for(let S=0;S<b.length;S++)h.push(d[g])}return h},t.V=function(a){Qn(this);let d=[];if(typeof a=="string")a_(this,a)&&(d=d.concat(this.g.get(Ci(this,a))));else{a=Array.from(this.g.values());for(let h=0;h<a.length;h++)d=d.concat(a[h])}return d},t.set=function(a,d){return Qn(this),this.i=null,a=Ci(this,a),a_(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[d]),this.h+=1,this},t.get=function(a,d){return a?(a=this.V(a),0<a.length?String(a[0]):d):d};function c_(a,d,h){s_(a,d),0<h.length&&(a.i=null,a.g.set(Ci(a,d),R(h)),a.h+=h.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let a=[],d=Array.from(this.g.keys());for(var h=0;h<d.length;h++){var g=d[h];let S=encodeURIComponent(String(g)),x=this.V(g);for(g=0;g<x.length;g++){var b=S;x[g]!==""&&(b+="="+encodeURIComponent(String(x[g]))),a.push(b)}}return this.i=a.join("&")};function Ci(a,d){return d=String(d),a.j&&(d=d.toLowerCase()),d}function LA(a,d){d&&!a.j&&(Qn(a),a.i=null,a.g.forEach(function(h,g){var b=g.toLowerCase();g!=b&&(s_(this,g),c_(this,b,h))},a)),a.j=d}function VA(a,d){let h=new es;if(c.Image){let g=new Image;g.onload=y(Yn,h,"TestLoadImage: loaded",!0,d,g),g.onerror=y(Yn,h,"TestLoadImage: error",!1,d,g),g.onabort=y(Yn,h,"TestLoadImage: abort",!1,d,g),g.ontimeout=y(Yn,h,"TestLoadImage: timeout",!1,d,g),c.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=a}else d(!1)}function jA(a,d){let h=new es,g=new AbortController,b=setTimeout(()=>{g.abort(),Yn(h,"TestPingServer: timeout",!1,d)},1e4);fetch(a,{signal:g.signal}).then(S=>{clearTimeout(b),S.ok?Yn(h,"TestPingServer: ok",!0,d):Yn(h,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(b),Yn(h,"TestPingServer: error",!1,d)})}function Yn(a,d,h,g,b){try{b&&(b.onload=null,b.onerror=null,b.onabort=null,b.ontimeout=null),g(h)}catch{}}function UA(){this.g=new EA}function BA(a,d,h){let g=h||"";try{n_(a,function(b,S){let x=b;l(b)&&(x=Jd(b)),d.push(g+S+"="+encodeURIComponent(x))})}catch(b){throw d.push(g+"type="+encodeURIComponent("_badmap")),b}}function os(a){this.l=a.Ub||null,this.j=a.eb||!1}A(os,Xd),os.prototype.g=function(){return new Za(this.l,this.j)},os.prototype.i=function(a){return function(){return a}}({});function Za(a,d){Je.call(this),this.D=a,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}A(Za,Je),t=Za.prototype,t.open=function(a,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=d,this.readyState=1,as(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(d.body=a),(this.D||c).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ss(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,as(this)),this.g&&(this.readyState=3,as(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;u_(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function u_(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var d=a.value?a.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!a.done}))&&(this.response=this.responseText+=d)}a.done?ss(this):as(this),this.readyState==3&&u_(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,ss(this))},t.Qa=function(a){this.g&&(this.response=a,ss(this))},t.ga=function(){this.g&&ss(this)};function ss(a){a.readyState=4,a.l=null,a.j=null,a.v=null,as(a)}t.setRequestHeader=function(a,d){this.u.append(a,d)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let a=[],d=this.h.entries();for(var h=d.next();!h.done;)h=h.value,a.push(h[0]+": "+h[1]),h=d.next();return a.join(`\r
`)};function as(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(Za.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function l_(a){let d="";return ge(a,function(h,g){d+=g,d+=":",d+=h,d+=`\r
`}),d}function uh(a,d,h){e:{for(g in h){var g=!1;break e}g=!0}g||(h=l_(h),typeof a=="string"?h!=null&&encodeURIComponent(String(h)):Ee(a,d,h))}function be(a){Je.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}A(be,Je);var $A=/^https?$/i,HA=["POST","PUT"];t=be.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,d,h,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);d=d?d.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():nh.g(),this.v=this.o?jv(this.o):jv(nh),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(d,String(a),!0),this.B=!1}catch(S){d_(this,S);return}if(a=h||"",h=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var b in g)h.set(b,g[b]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let S of g.keys())h.set(S,g.get(S));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(h.keys()).find(S=>S.toLowerCase()=="content-type"),b=c.FormData&&a instanceof c.FormData,!(0<=Array.prototype.indexOf.call(HA,d,void 0))||g||b||h.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[S,x]of h)this.g.setRequestHeader(S,x);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{p_(this),this.u=!0,this.g.send(a),this.u=!1}catch(S){d_(this,S)}};function d_(a,d){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=d,a.m=5,h_(a),Ja(a)}function h_(a){a.A||(a.A=!0,ot(a,"complete"),ot(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,ot(this,"complete"),ot(this,"abort"),Ja(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ja(this,!0)),be.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?f_(this):this.bb())},t.bb=function(){f_(this)};function f_(a){if(a.h&&typeof s<"u"&&(!a.v[1]||Dn(a)!=4||a.Z()!=2)){if(a.u&&Dn(a)==4)Ov(a.Ea,0,a);else if(ot(a,"readystatechange"),Dn(a)==4){a.h=!1;try{let x=a.Z();e:switch(x){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var h;if(!(h=d)){var g;if(g=x===0){var b=String(a.D).match(r_)[1]||null;!b&&c.self&&c.self.location&&(b=c.self.location.protocol.slice(0,-1)),g=!$A.test(b?b.toLowerCase():"")}h=g}if(h)ot(a,"complete"),ot(a,"success");else{a.m=6;try{var S=2<Dn(a)?a.g.statusText:""}catch{S=""}a.l=S+" ["+a.Z()+"]",h_(a)}}finally{Ja(a)}}}}function Ja(a,d){if(a.g){p_(a);let h=a.g,g=a.v[0]?()=>{}:null;a.g=null,a.v=null,d||ot(a,"ready");try{h.onreadystatechange=g}catch{}}}function p_(a){a.I&&(c.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function Dn(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<Dn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var d=this.g.responseText;return a&&d.indexOf(a)==0&&(d=d.substring(a.length)),wA(d)}};function g_(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function qA(a){let d={};a=(a.g&&2<=Dn(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<a.length;g++){if(q(a[g]))continue;var h=D(a[g]);let b=h[0];if(h=h[1],typeof h!="string")continue;h=h.trim();let S=d[b]||[];d[b]=S,S.push(h)}T(d,function(g){return g.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function cs(a,d,h){return h&&h.internalChannelParams&&h.internalChannelParams[a]||d}function m_(a){this.Aa=0,this.i=[],this.j=new es,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=cs("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=cs("baseRetryDelayMs",5e3,a),this.cb=cs("retryDelaySeedMs",1e4,a),this.Wa=cs("forwardChannelMaxRetries",2,a),this.wa=cs("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new Zv(a&&a.concurrentRequestLimit),this.Da=new UA,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=m_.prototype,t.la=8,t.G=1,t.connect=function(a,d,h,g){st(0),this.W=a,this.H=d||{},h&&g!==void 0&&(this.H.OSID=h,this.H.OAID=g),this.F=this.X,this.I=b_(this,null,this.W),ec(this)};function lh(a){if(y_(a),a.G==3){var d=a.U++,h=Tn(a.I);if(Ee(h,"SID",a.K),Ee(h,"RID",d),Ee(h,"TYPE","terminate"),us(a,h),d=new Kn(a,a.j,d),d.L=2,d.v=Ya(Tn(h)),h=!1,c.navigator&&c.navigator.sendBeacon)try{h=c.navigator.sendBeacon(d.v.toString(),"")}catch{}!h&&c.Image&&(new Image().src=d.v,h=!0),h||(d.g=C_(d.j,null),d.g.ea(d.v)),d.F=Date.now(),Ga(d)}D_(a)}function Xa(a){a.g&&(hh(a),a.g.cancel(),a.g=null)}function y_(a){Xa(a),a.u&&(c.clearTimeout(a.u),a.u=null),tc(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&c.clearTimeout(a.s),a.s=null)}function ec(a){if(!Jv(a.h)&&!a.s){a.s=!0;var d=a.Ga;Wo||Rv(),Go||(Wo(),Go=!0),Hd.add(d,a),a.B=0}}function zA(a,d){return Xv(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=d.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=Xo(m(a.Ga,a,d),T_(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;let b=new Kn(this,this.j,a),S=this.o;if(this.S&&(S?(S=_(S),E(S,this.S)):S=this.S),this.m!==null||this.O||(b.H=S,S=null),this.P)e:{for(var d=0,h=0;h<this.i.length;h++){t:{var g=this.i[h];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,4096<d){d=h;break e}if(d===4096||h===this.i.length-1){d=h+1;break e}}d=1e3}else d=1e3;d=__(this,b,d),h=Tn(this.I),Ee(h,"RID",a),Ee(h,"CVER",22),this.D&&Ee(h,"X-HTTP-Session-Id",this.D),us(this,h),S&&(this.O?d="headers="+encodeURIComponent(String(l_(S)))+"&"+d:this.m&&uh(h,this.m,S)),ch(this.h,b),this.Ua&&Ee(h,"TYPE","init"),this.P?(Ee(h,"$req",d),Ee(h,"SID","null"),b.T=!0,ih(b,h,null)):ih(b,h,d),this.G=2}}else this.G==3&&(a?v_(this,a):this.i.length==0||Jv(this.h)||v_(this))};function v_(a,d){var h;d?h=d.l:h=a.U++;let g=Tn(a.I);Ee(g,"SID",a.K),Ee(g,"RID",h),Ee(g,"AID",a.T),us(a,g),a.m&&a.o&&uh(g,a.m,a.o),h=new Kn(a,a.j,h,a.B+1),a.m===null&&(h.H=a.o),d&&(a.i=d.D.concat(a.i)),d=__(a,h,1e3),h.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),ch(a.h,h),ih(h,g,d)}function us(a,d){a.H&&ge(a.H,function(h,g){Ee(d,g,h)}),a.l&&n_({},function(h,g){Ee(d,g,h)})}function __(a,d,h){h=Math.min(a.i.length,h);var g=a.l?m(a.l.Na,a.l,a):null;e:{var b=a.i;let S=-1;for(;;){let x=["count="+h];S==-1?0<h?(S=b[0].g,x.push("ofs="+S)):S=0:x.push("ofs="+S);let Ie=!0;for(let qe=0;qe<h;qe++){let ue=b[qe].g,Xe=b[qe].map;if(ue-=S,0>ue)S=Math.max(0,b[qe].g-100),Ie=!1;else try{BA(Xe,x,"req"+ue+"_")}catch{g&&g(Xe)}}if(Ie){g=x.join("&");break e}}}return a=a.i.splice(0,h),d.D=a,g}function I_(a){if(!a.g&&!a.u){a.Y=1;var d=a.Fa;Wo||Rv(),Go||(Wo(),Go=!0),Hd.add(d,a),a.v=0}}function dh(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=Xo(m(a.Fa,a),T_(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,w_(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=Xo(m(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,st(10),Xa(this),w_(this))};function hh(a){a.A!=null&&(c.clearTimeout(a.A),a.A=null)}function w_(a){a.g=new Kn(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var d=Tn(a.qa);Ee(d,"RID","rpc"),Ee(d,"SID",a.K),Ee(d,"AID",a.T),Ee(d,"CI",a.F?"0":"1"),!a.F&&a.ja&&Ee(d,"TO",a.ja),Ee(d,"TYPE","xmlhttp"),us(a,d),a.m&&a.o&&uh(d,a.m,a.o),a.L&&(a.g.I=a.L);var h=a.g;a=a.ia,h.L=1,h.v=Ya(Tn(d)),h.m=null,h.P=!0,Kv(h,a)}t.Za=function(){this.C!=null&&(this.C=null,Xa(this),dh(this),st(19))};function tc(a){a.C!=null&&(c.clearTimeout(a.C),a.C=null)}function E_(a,d){var h=null;if(a.g==d){tc(a),hh(a),a.g=null;var g=2}else if(ah(a.h,d))h=d.D,e_(a.h,d),g=1;else return;if(a.G!=0){if(d.o)if(g==1){h=d.m?d.m.length:0,d=Date.now()-d.F;var b=a.B;g=qa(),ot(g,new qv(g,h)),ec(a)}else I_(a);else if(b=d.s,b==3||b==0&&0<d.X||!(g==1&&zA(a,d)||g==2&&dh(a)))switch(h&&0<h.length&&(d=a.h,d.i=d.i.concat(h)),b){case 1:Mr(a,5);break;case 4:Mr(a,10);break;case 3:Mr(a,6);break;default:Mr(a,2)}}}function T_(a,d){let h=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(h*=2),h*d}function Mr(a,d){if(a.j.info("Error code "+d),d==2){var h=m(a.fb,a),g=a.Xa;let b=!g;g=new Nr(g||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Ka(g,"https"),Ya(g),b?VA(g.toString(),h):jA(g.toString(),h)}else st(2);a.G=0,a.l&&a.l.sa(d),D_(a),y_(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),st(2)):(this.j.info("Failed to ping google.com"),st(1))};function D_(a){if(a.G=0,a.ka=[],a.l){let d=t_(a.h);(d.length!=0||a.i.length!=0)&&(P(a.ka,d),P(a.ka,a.i),a.h.i.length=0,R(a.i),a.i.length=0),a.l.ra()}}function b_(a,d,h){var g=h instanceof Nr?Tn(h):new Nr(h);if(g.g!="")d&&(g.g=d+"."+g.g),Qa(g,g.s);else{var b=c.location;g=b.protocol,d=d?d+"."+b.hostname:b.hostname,b=+b.port;var S=new Nr(null);g&&Ka(S,g),d&&(S.g=d),b&&Qa(S,b),h&&(S.l=h),g=S}return h=a.D,d=a.ya,h&&d&&Ee(g,h,d),Ee(g,"VER",a.la),us(a,g),g}function C_(a,d,h){if(d&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=a.Ca&&!a.pa?new be(new os({eb:h})):new be(a.pa),d.Ha(a.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function S_(){}t=S_.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function nc(){}nc.prototype.g=function(a,d){return new _t(a,d)};function _t(a,d){Je.call(this),this.g=new m_(d),this.l=a,this.h=d&&d.messageUrlParams||null,a=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(a?a["X-WebChannel-Content-Type"]=d.messageContentType:a={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(a?a["X-WebChannel-Client-Profile"]=d.va:a={"X-WebChannel-Client-Profile":d.va}),this.g.S=a,(a=d&&d.Sb)&&!q(a)&&(this.g.m=a),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!q(d)&&(this.g.D=d,a=this.h,a!==null&&d in a&&(a=this.h,d in a&&delete a[d])),this.j=new Si(this)}A(_t,Je),_t.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},_t.prototype.close=function(){lh(this.g)},_t.prototype.o=function(a){var d=this.g;if(typeof a=="string"){var h={};h.__data__=a,a=h}else this.u&&(h={},h.__data__=Jd(a),a=h);d.i.push(new AA(d.Ya++,a)),d.G==3&&ec(d)},_t.prototype.N=function(){this.g.l=null,delete this.j,lh(this.g),delete this.g,_t.aa.N.call(this)};function A_(a){eh.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var d=a.__sm__;if(d){e:{for(let h in d){a=h;break e}a=void 0}(this.i=a)&&(a=this.i,d=d!==null&&a in d?d[a]:void 0),this.data=d}else this.data=a}A(A_,eh);function R_(){th.call(this),this.status=1}A(R_,th);function Si(a){this.g=a}A(Si,S_),Si.prototype.ua=function(){ot(this.g,"a")},Si.prototype.ta=function(a){ot(this.g,new A_(a))},Si.prototype.sa=function(a){ot(this.g,new R_)},Si.prototype.ra=function(){ot(this.g,"b")},nc.prototype.createWebChannel=nc.prototype.g,_t.prototype.send=_t.prototype.o,_t.prototype.open=_t.prototype.m,_t.prototype.close=_t.prototype.close,tm=jn.createWebChannelTransport=function(){return new nc},em=jn.getStatEventTarget=function(){return qa()},Xg=jn.Event=Ar,Bl=jn.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},za.NO_ERROR=0,za.TIMEOUT=8,za.HTTP_ERROR=6,va=jn.ErrorCode=za,zv.COMPLETE="complete",Jg=jn.EventType=zv,Uv.EventType=Zo,Zo.OPEN="a",Zo.CLOSE="b",Zo.ERROR="c",Zo.MESSAGE="d",Je.prototype.listen=Je.prototype.K,vo=jn.WebChannel=Uv,g2=jn.FetchXmlHttpFactory=os,be.prototype.listenOnce=be.prototype.L,be.prototype.getLastError=be.prototype.Ka,be.prototype.getLastErrorCode=be.prototype.Ba,be.prototype.getStatus=be.prototype.Z,be.prototype.getResponseJson=be.prototype.Oa,be.prototype.getResponseText=be.prototype.oa,be.prototype.send=be.prototype.ea,be.prototype.setWithCredentials=be.prototype.Ha,Zg=jn.XhrIo=be}).apply(typeof Ul<"u"?Ul:typeof self<"u"?self:typeof window<"u"?window:{});var tC="@firebase/firestore",nC="4.8.0";var $e=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};$e.UNAUTHENTICATED=new $e(null),$e.GOOGLE_CREDENTIALS=new $e("google-credentials-uid"),$e.FIRST_PARTY=new $e("first-party-uid"),$e.MOCK_USER=new $e("mock-user");var Bo="11.10.0";var fi=new Ot("@firebase/firestore");function _o(){return fi.logLevel}function O(t,...e){if(fi.logLevel<=ne.DEBUG){let n=e.map(By);fi.debug(`Firestore (${Bo}): ${t}`,...n)}}function Bn(t,...e){if(fi.logLevel<=ne.ERROR){let n=e.map(By);fi.error(`Firestore (${Bo}): ${t}`,...n)}}function Dr(t,...e){if(fi.logLevel<=ne.WARN){let n=e.map(By);fi.warn(`Firestore (${Bo}): ${t}`,...n)}}function By(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function $(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,zC(t,r,n)}function zC(t,e,n){let r=`FIRESTORE (${Bo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Bn(r),new Error(r)}function pe(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||zC(e,i,r)}function G(t,e){return t}var N={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},L=class extends Ke{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Un=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var Kl=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},sm=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n($e.UNAUTHENTICATED))}shutdown(){}},am=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},cm=class{constructor(e){this.t=e,this.currentUser=$e.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){pe(this.o===void 0,42304);let r=this.i,i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve(),o=new Un;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Un,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(()=>v(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},c=u=>{O("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?c(u):(O("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Un)}},0),s()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(O("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(pe(typeof r.accessToken=="string",31837,{l:r}),new Kl(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return pe(e===null||typeof e=="string",2055,{h:e}),new $e(e)}},um=class{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=$e.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},lm=class{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new um(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n($e.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Ql=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},dm=class{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Lt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){pe(this.o===void 0,3512);let r=o=>{o.error!=null&&O("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,O("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{O("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):O("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Ql(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(pe(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Ql(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function m2(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}function WC(){return new TextEncoder}var Da=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=m2(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%62))}return r}};function te(t,e){return t<e?-1:t>e?1:0}function hm(t,e){let n=0;for(;n<t.length&&n<e.length;){let r=t.codePointAt(n),i=e.codePointAt(n);if(r!==i){if(r<128&&i<128)return te(r,i);{let o=WC(),s=y2(o.encode(rC(t,n)),o.encode(rC(e,n)));return s!==0?s:te(r,i)}}n+=r>65535?2:1}return te(t.length,e.length)}function rC(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function y2(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return te(t[n],e[n]);return te(t.length,e.length)}function Ao(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}var iC="__name__",Yl=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&$(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&$(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let o=t.compareSegments(e.get(i),n.get(i));if(o!==0)return o}return te(e.length,n.length)}static compareSegments(e,n){let r=t.isNumericId(e),i=t.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?t.extractNumericId(e).compare(t.extractNumericId(n)):hm(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Vn.fromString(e.substring(4,e.length-2))}},Ne=class t extends Yl{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new L(N.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},v2=/^[_a-zA-Z][_a-zA-Z0-9]*$/,bt=class t extends Yl{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return v2.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===iC}static keyField(){return new t([iC])}static fromServerFormat(e){let n=[],r="",i=0,o=()=>{if(r.length===0)throw new L(N.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},s=!1;for(;i<e.length;){let c=e[i];if(c==="\\"){if(i+1===e.length)throw new L(N.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new L(N.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else c==="`"?(s=!s,i++):c!=="."||s?(r+=c,i++):(o(),i++)}if(o(),s)throw new L(N.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var H=class t{constructor(e){this.path=e}static fromPath(e){return new t(Ne.fromString(e))}static fromName(e){return new t(Ne.fromString(e).popFirst(5))}static empty(){return new t(Ne.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ne.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ne.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new Ne(e.slice()))}};function _2(t,e,n){if(!n)throw new L(N.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function I2(t,e,n,r){if(e===!0&&r===!0)throw new L(N.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function oC(t){if(!H.isDocumentKey(t))throw new L(N.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function GC(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function $y(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":$(12329,{type:typeof t})}function Do(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new L(N.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=$y(t);throw new L(N.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function ke(t,e){let n={typeString:t};return e&&(n.value=e),n}function Fa(t,e){if(!GC(t))throw new L(N.INVALID_ARGUMENT,"JSON must be an object");let n;for(let r in e)if(e[r]){let i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}let s=t[r];if(i&&typeof s!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){n=`Expected '${r}' field to equal '${o.value}'`;break}}if(n)throw new L(N.INVALID_ARGUMENT,n);return!0}var sC=-62135596800,aC=1e6,xe=class t{static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*aC);return new t(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new L(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new L(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<sC)throw new L(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new L(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/aC}_compareTo(e){return this.seconds===e.seconds?te(this.nanoseconds,e.nanoseconds):te(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:t._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Fa(e,t._jsonSchema))return new t(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-sC;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};xe._jsonSchemaVersion="firestore/timestamp/1.0",xe._jsonSchema={type:ke("string",xe._jsonSchemaVersion),seconds:ke("number"),nanoseconds:ke("number")};var Y=class t{static fromTimestamp(e){return new t(e)}static min(){return new t(new xe(0,0))}static max(){return new t(new xe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var ba=-1,fm=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};fm.UNKNOWN_ID=-1;function w2(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Y.fromTimestamp(r===1e9?new xe(n+1,0):new xe(n,r));return new pi(i,H.empty(),e)}function E2(t){return new pi(t.readTime,t.key,ba)}var pi=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(Y.min(),H.empty(),ba)}static max(){return new t(Y.max(),H.empty(),ba)}};function T2(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=H.comparator(t.documentKey,e.documentKey),n!==0?n:te(t.largestBatchId,e.largestBatchId))}var D2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",pm=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function $o(t){return v(this,null,function*(){if(t.code!==N.FAILED_PRECONDITION||t.message!==D2)throw t;O("LocalStore","Unexpectedly lost primary lease")})}var M=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&$(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,o=0,s=!1;e.forEach(c=>{++i,c.next(()=>{++o,s&&o===i&&n()},u=>r(u))}),s=!0,o===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let o=e.length,s=new Array(o),c=0;for(let u=0;u<o;u++){let l=u;n(e[l]).next(f=>{s[l]=f,++c,c===o&&r(s)},f=>i(f))}})}static doWhile(e,n){return new t((r,i)=>{let o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}};function b2(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ho(t){return t.name==="IndexedDbTransactionError"}var Hy=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this._e(i),this.ae=i=>r.writeSequenceNumber(i))}_e(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.ae&&this.ae(n),n}}t.ue=-1;return t})(),qy=-1;function Sd(t){return t==null}function Ca(t){return t===0&&1/t==-1/0}function C2(t){return typeof t=="number"&&Number.isInteger(t)&&!Ca(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var KC="";function S2(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=cC(e)),e=A2(t.get(n),e);return cC(e)}function A2(t,e){let n=e,r=t.length;for(let i=0;i<r;i++){let o=t.charAt(i);switch(o){case"\0":n+="";break;case KC:n+="";break;default:n+=o}}return n}function cC(t){return t+KC+""}var R2="remoteDocuments",QC="owner";var YC="mutationQueues";var ZC="mutations";var JC="documentMutations",N2="remoteDocumentsV14";var XC="remoteDocumentGlobal";var eS="targets";var tS="targetDocuments";var nS="targetGlobal",rS="collectionParents";var iS="clientMetadata";var oS="bundles";var sS="namedQueries";var M2="indexConfiguration";var P2="indexState";var k2="indexEntries";var aS="documentOverlays";var x2="globals";var O2=[YC,ZC,JC,R2,eS,QC,nS,tS,iS,XC,rS,oS,sS],w7=[...O2,aS],F2=[YC,ZC,JC,N2,eS,QC,nS,tS,iS,XC,rS,oS,sS,aS],L2=F2,V2=[...L2,M2,P2,k2];var E7=[...V2,x2];function uC(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function _i(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function cS(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Se=class t{constructor(e,n){this.comparator=e,this.root=n||yn.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,yn.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,yn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new To(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new To(this.root,e,this.comparator,!1)}getReverseIterator(){return new To(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new To(this.root,e,this.comparator,!0)}},To=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},yn=class t{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=o??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new t(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw $(43730,{key:this.key,value:this.value});if(this.right.isRed())throw $(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw $(27949);return e+(this.isRed()?0:1)}};yn.EMPTY=null,yn.RED=!0,yn.BLACK=!1;yn.EMPTY=new class{constructor(){this.size=0}get key(){throw $(57766)}get value(){throw $(16141)}get color(){throw $(16727)}get left(){throw $(29726)}get right(){throw $(36894)}copy(e,n,r,i,o){return this}insert(e,n,r){return new yn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var He=class t{constructor(e){this.comparator=e,this.data=new Se(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Zl(this.data.getIterator())}getIteratorFrom(e){return new Zl(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},Zl=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var mn=class t{constructor(e){this.fields=e,e.sort(bt.comparator)}static empty(){return new t([])}unionWith(e){let n=new He(bt.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ao(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var Jl=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var rt=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Jl("Invalid base64 string: "+o):o}}(e);return new t(n)}static fromUint8Array(e){let n=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return te(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};rt.EMPTY_BYTE_STRING=new rt("");var j2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function $n(t){if(pe(!!t,39018),typeof t=="string"){let e=0,n=j2.exec(t);if(pe(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:De(t.seconds),nanos:De(t.nanos)}}function De(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Hn(t){return typeof t=="string"?rt.fromBase64String(t):rt.fromUint8Array(t)}var uS="server_timestamp",lS="__type__",dS="__previous_value__",hS="__local_write_time__";function zy(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[lS])===null||n===void 0?void 0:n.stringValue)===uS}function Ad(t){let e=t.mapValue.fields[dS];return zy(e)?Ad(e):e}function Sa(t){let e=$n(t.mapValue.fields[hS].timestampValue);return new xe(e.seconds,e.nanos)}var gm=class{constructor(e,n,r,i,o,s,c,u,l,f){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=l,this.isUsingEmulator=f}},Xl="(default)",ed=class t{constructor(e,n){this.projectId=e,this.database=n||Xl}static empty(){return new t("","")}get isDefaultDatabase(){return this.database===Xl}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var Wy="__type__",fS="__max__",$l={mapValue:{fields:{__type__:{stringValue:fS}}}},Gy="__vector__",Ro="value";function br(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?zy(t)?4:gS(t)?9007199254740991:pS(t)?10:11:$(28295,{value:t})}function In(t,e){if(t===e)return!0;let n=br(t);if(n!==br(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Sa(t).isEqual(Sa(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=$n(i.timestampValue),c=$n(o.timestampValue);return s.seconds===c.seconds&&s.nanos===c.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,o){return Hn(i.bytesValue).isEqual(Hn(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return De(i.geoPointValue.latitude)===De(o.geoPointValue.latitude)&&De(i.geoPointValue.longitude)===De(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return De(i.integerValue)===De(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=De(i.doubleValue),c=De(o.doubleValue);return s===c?Ca(s)===Ca(c):isNaN(s)&&isNaN(c)}return!1}(t,e);case 9:return Ao(t.arrayValue.values||[],e.arrayValue.values||[],In);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},c=o.mapValue.fields||{};if(uC(s)!==uC(c))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(c[u]===void 0||!In(s[u],c[u])))return!1;return!0}(t,e);default:return $(52216,{left:t})}}function Aa(t,e){return(t.values||[]).find(n=>In(n,e))!==void 0}function No(t,e){if(t===e)return 0;let n=br(t),r=br(e);if(n!==r)return te(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return te(t.booleanValue,e.booleanValue);case 2:return function(o,s){let c=De(o.integerValue||o.doubleValue),u=De(s.integerValue||s.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1}(t,e);case 3:return lC(t.timestampValue,e.timestampValue);case 4:return lC(Sa(t),Sa(e));case 5:return hm(t.stringValue,e.stringValue);case 6:return function(o,s){let c=Hn(o),u=Hn(s);return c.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(o,s){let c=o.split("/"),u=s.split("/");for(let l=0;l<c.length&&l<u.length;l++){let f=te(c[l],u[l]);if(f!==0)return f}return te(c.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,s){let c=te(De(o.latitude),De(s.latitude));return c!==0?c:te(De(o.longitude),De(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return dC(t.arrayValue,e.arrayValue);case 10:return function(o,s){var c,u,l,f;let p=o.fields||{},m=s.fields||{},y=(c=p[Ro])===null||c===void 0?void 0:c.arrayValue,A=(u=m[Ro])===null||u===void 0?void 0:u.arrayValue,R=te(((l=y?.values)===null||l===void 0?void 0:l.length)||0,((f=A?.values)===null||f===void 0?void 0:f.length)||0);return R!==0?R:dC(y,A)}(t.mapValue,e.mapValue);case 11:return function(o,s){if(o===$l.mapValue&&s===$l.mapValue)return 0;if(o===$l.mapValue)return 1;if(s===$l.mapValue)return-1;let c=o.fields||{},u=Object.keys(c),l=s.fields||{},f=Object.keys(l);u.sort(),f.sort();for(let p=0;p<u.length&&p<f.length;++p){let m=hm(u[p],f[p]);if(m!==0)return m;let y=No(c[u[p]],l[f[p]]);if(y!==0)return y}return te(u.length,f.length)}(t.mapValue,e.mapValue);default:throw $(23264,{le:n})}}function lC(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return te(t,e);let n=$n(t),r=$n(e),i=te(n.seconds,r.seconds);return i!==0?i:te(n.nanos,r.nanos)}function dC(t,e){let n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){let o=No(n[i],r[i]);if(o)return o}return te(n.length,r.length)}function Mo(t){return mm(t)}function mm(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let r=$n(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Hn(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return H.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(let o of n.values||[])i?i=!1:r+=",",r+=mm(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){let r=Object.keys(n.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${mm(n.fields[s])}`;return i+"}"}(t.mapValue):$(61005,{value:t})}function zl(t){switch(br(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=Ad(t);return e?16+zl(e):16;case 5:return 2*t.stringValue.length;case 6:return Hn(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,o)=>i+zl(o),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return _i(r.fields,(o,s)=>{i+=o.length+zl(s)}),i}(t.mapValue);default:throw $(13486,{value:t})}}function ym(t){return!!t&&"integerValue"in t}function Ky(t){return!!t&&"arrayValue"in t}function hC(t){return!!t&&"nullValue"in t}function fC(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Wl(t){return!!t&&"mapValue"in t}function pS(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[Wy])===null||n===void 0?void 0:n.stringValue)===Gy}function Ia(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return _i(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Ia(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ia(t.arrayValue.values[n]);return e}return Object.assign({},t)}function gS(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===fS}var D7={mapValue:{fields:{[Wy]:{stringValue:Gy},[Ro]:{arrayValue:{}}}}};var Zt=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Wl(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ia(n)}setAll(e){let n=bt.emptyPath(),r={},i=[];e.forEach((s,c)=>{if(!n.isImmediateParentOf(c)){let u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=c.popLast()}s?r[c.lastSegment()]=Ia(s):i.push(c.lastSegment())});let o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){let n=this.field(e.popLast());Wl(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return In(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Wl(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){_i(n,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new t(Ia(this.value))}};function mS(t){let e=[];return _i(t.fields,(n,r)=>{let i=new bt([n]);if(Wl(r)){let o=mS(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new mn(e)}var Jt=class t{constructor(e,n,r,i,o,s,c){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=c}static newInvalidDocument(e){return new t(e,0,Y.min(),Y.min(),Y.min(),Zt.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,Y.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,Y.min(),Y.min(),Zt.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,Y.min(),Y.min(),Zt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Y.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Zt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Zt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Y.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Po=class{constructor(e,n){this.position=e,this.inclusive=n}};function pC(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let o=e[i],s=t.position[i];if(o.field.isKeyField()?r=H.comparator(H.fromName(s.referenceValue),n.key):r=No(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function gC(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!In(t.position[n],e.position[n]))return!1;return!0}var ko=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function U2(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var td=class{},Le=class t extends td{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new _m(e,n,r):n==="array-contains"?new Em(e,r):n==="in"?new Tm(e,r):n==="not-in"?new Dm(e,r):n==="array-contains-any"?new bm(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Im(e,r):new wm(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(No(n,this.value)):n!==null&&br(this.value)===br(n)&&this.matchesComparison(No(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return $(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},wn=class t extends td{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new t(e,n)}matches(e){return yS(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}};function yS(t){return t.op==="and"}function vS(t){return B2(t)&&yS(t)}function B2(t){for(let e of t.filters)if(e instanceof wn)return!1;return!0}function vm(t){if(t instanceof Le)return t.field.canonicalString()+t.op.toString()+Mo(t.value);if(vS(t))return t.filters.map(e=>vm(e)).join(",");{let e=t.filters.map(n=>vm(n)).join(",");return`${t.op}(${e})`}}function _S(t,e){return t instanceof Le?function(r,i){return i instanceof Le&&r.op===i.op&&r.field.isEqual(i.field)&&In(r.value,i.value)}(t,e):t instanceof wn?function(r,i){return i instanceof wn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,c)=>o&&_S(s,i.filters[c]),!0):!1}(t,e):void $(19439)}function IS(t){return t instanceof Le?function(n){return`${n.field.canonicalString()} ${n.op} ${Mo(n.value)}`}(t):t instanceof wn?function(n){return n.op.toString()+" {"+n.getFilters().map(IS).join(" ,")+"}"}(t):"Filter"}var _m=class extends Le{constructor(e,n,r){super(e,n,r),this.key=H.fromName(r.referenceValue)}matches(e){let n=H.comparator(e.key,this.key);return this.matchesComparison(n)}},Im=class extends Le{constructor(e,n){super(e,"in",n),this.keys=wS("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},wm=class extends Le{constructor(e,n){super(e,"not-in",n),this.keys=wS("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function wS(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>H.fromName(r.referenceValue))}var Em=class extends Le{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return Ky(n)&&Aa(n.arrayValue,this.value)}},Tm=class extends Le{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&Aa(this.value.arrayValue,n)}},Dm=class extends Le{constructor(e,n){super(e,"not-in",n)}matches(e){if(Aa(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Aa(this.value.arrayValue,n)}},bm=class extends Le{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!Ky(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Aa(this.value.arrayValue,r))}};var Cm=class{constructor(e,n=null,r=[],i=[],o=null,s=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=c,this.Pe=null}};function mC(t,e=null,n=[],r=[],i=null,o=null,s=null){return new Cm(t,e,n,r,i,o,s)}function Qy(t){let e=G(t);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>vm(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Sd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Mo(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Mo(r)).join(",")),e.Pe=n}return e.Pe}function Yy(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!U2(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!_S(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!gC(t.startAt,e.startAt)&&gC(t.endAt,e.endAt)}function Sm(t){return H.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var xo=class{constructor(e,n=null,r=[],i=[],o=null,s="F",c=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=c,this.endAt=u,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}};function $2(t,e,n,r,i,o,s,c){return new xo(t,e,n,r,i,o,s,c)}function Zy(t){return new xo(t)}function yC(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function H2(t){return t.collectionGroup!==null}function wa(t){let e=G(t);if(e.Te===null){e.Te=[];let n=new Set;for(let o of e.explicitOrderBy)e.Te.push(o),n.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let c=new He(bt.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(c=c.add(l.field))})}),c})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.Te.push(new ko(o,r))}),n.has(bt.keyField().canonicalString())||e.Te.push(new ko(bt.keyField(),r))}return e.Te}function vn(t){let e=G(t);return e.Ie||(e.Ie=q2(e,wa(t))),e.Ie}function q2(t,e){if(t.limitType==="F")return mC(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new ko(i.field,o)});let n=t.endAt?new Po(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Po(t.startAt.position,t.startAt.inclusive):null;return mC(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Am(t,e,n){return new xo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Rd(t,e){return Yy(vn(t),vn(e))&&t.limitType===e.limitType}function ES(t){return`${Qy(vn(t))}|lt:${t.limitType}`}function Io(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>IS(i)).join(", ")}]`),Sd(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Mo(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Mo(i)).join(",")),`Target(${r})`}(vn(t))}; limitType=${t.limitType})`}function Nd(t,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):H.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,i){for(let o of wa(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(s,c,u){let l=pC(s,c,u);return s.inclusive?l<=0:l<0}(r.startAt,wa(r),i)||r.endAt&&!function(s,c,u){let l=pC(s,c,u);return s.inclusive?l>=0:l>0}(r.endAt,wa(r),i))}(t,e)}function z2(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function TS(t){return(e,n)=>{let r=!1;for(let i of wa(t)){let o=W2(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function W2(t,e,n){let r=t.field.isKeyField()?H.comparator(e.key,n.key):function(o,s,c){let u=s.data.field(o),l=c.data.field(o);return u!==null&&l!==null?No(u,l):$(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return $(19790,{direction:t.dir})}}var qn=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){_i(this.inner,(n,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return cS(this.inner)}size(){return this.innerSize}};var G2=new Se(H.comparator);function zn(){return G2}var DS=new Se(H.comparator);function _a(...t){let e=DS;for(let n of t)e=e.insert(n.key,n);return e}function bS(t){let e=DS;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ci(){return Ea()}function CS(){return Ea()}function Ea(){return new qn(t=>t.toString(),(t,e)=>t.isEqual(e))}var K2=new Se(H.comparator),Q2=new He(H.comparator);function ie(...t){let e=Q2;for(let n of t)e=e.add(n);return e}var Y2=new He(te);function Z2(){return Y2}function Jy(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ca(e)?"-0":e}}function SS(t){return{integerValue:""+t}}function J2(t,e){return C2(e)?SS(e):Jy(t,e)}var Oo=class{constructor(){this._=void 0}};function X2(t,e,n){return t instanceof Fo?function(i,o){let s={fields:{[lS]:{stringValue:uS},[hS]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&zy(o)&&(o=Ad(o)),o&&(s.fields[dS]=o),{mapValue:s}}(n,e):t instanceof gi?RS(t,e):t instanceof mi?NS(t,e):function(i,o){let s=AS(i,o),c=vC(s)+vC(i.Ee);return ym(s)&&ym(i.Ee)?SS(c):Jy(i.serializer,c)}(t,e)}function ej(t,e,n){return t instanceof gi?RS(t,e):t instanceof mi?NS(t,e):n}function AS(t,e){return t instanceof Lo?function(r){return ym(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var Fo=class extends Oo{},gi=class extends Oo{constructor(e){super(),this.elements=e}};function RS(t,e){let n=MS(e);for(let r of t.elements)n.some(i=>In(i,r))||n.push(r);return{arrayValue:{values:n}}}var mi=class extends Oo{constructor(e){super(),this.elements=e}};function NS(t,e){let n=MS(e);for(let r of t.elements)n=n.filter(i=>!In(i,r));return{arrayValue:{values:n}}}var Lo=class extends Oo{constructor(e,n){super(),this.serializer=e,this.Ee=n}};function vC(t){return De(t.integerValue||t.doubleValue)}function MS(t){return Ky(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function tj(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof gi&&i instanceof gi||r instanceof mi&&i instanceof mi?Ao(r.elements,i.elements,In):r instanceof Lo&&i instanceof Lo?In(r.Ee,i.Ee):r instanceof Fo&&i instanceof Fo}(t.transform,e.transform)}var Rm=class{constructor(e,n){this.version=e,this.transformResults=n}},di=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Gl(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var Vo=class{};function PS(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new nd(t.key,di.none()):new yi(t.key,t.data,di.none());{let n=t.data,r=Zt.empty(),i=new He(bt.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Wn(t.key,r,new mn(i.toArray()),di.none())}}function nj(t,e,n){t instanceof yi?function(i,o,s){let c=i.value.clone(),u=IC(i.fieldTransforms,o,s.transformResults);c.setAll(u),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(t,e,n):t instanceof Wn?function(i,o,s){if(!Gl(i.precondition,o))return void o.convertToUnknownDocument(s.version);let c=IC(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(kS(i)),u.setAll(c),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(t,e,n):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function Ta(t,e,n,r){return t instanceof yi?function(o,s,c,u){if(!Gl(o.precondition,s))return c;let l=o.value.clone(),f=wC(o.fieldTransforms,u,s);return l.setAll(f),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(t,e,n,r):t instanceof Wn?function(o,s,c,u){if(!Gl(o.precondition,s))return c;let l=wC(o.fieldTransforms,u,s),f=s.data;return f.setAll(kS(o)),f.setAll(l),s.convertToFoundDocument(s.version,f).setHasLocalMutations(),c===null?null:c.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(o,s,c){return Gl(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):c}(t,e,n)}function rj(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),o=AS(r.transform,i||null);o!=null&&(n===null&&(n=Zt.empty()),n.set(r.field,o))}return n||null}function _C(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Ao(r,i,(o,s)=>tj(o,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var yi=class extends Vo{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Wn=class extends Vo{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function kS(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function IC(t,e,n){let r=new Map;pe(t.length===n.length,32656,{Ae:n.length,Re:t.length});for(let i=0;i<n.length;i++){let o=t[i],s=o.transform,c=e.data.field(o.field);r.set(o.field,ej(s,c,n[i]))}return r}function wC(t,e,n){let r=new Map;for(let i of t){let o=i.transform,s=n.data.field(i.field);r.set(i.field,X2(o,s,e))}return r}var nd=class extends Vo{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Nm=class extends Vo{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Mm=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&nj(o,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=Ta(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=Ta(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=CS();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,c=this.applyToLocalView(s,o.mutatedFields);c=n.has(i.key)?null:c;let u=PS(s,c);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(Y.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ie())}isEqual(e){return this.batchId===e.batchId&&Ao(this.mutations,e.mutations,(n,r)=>_C(n,r))&&Ao(this.baseMutations,e.baseMutations,(n,r)=>_C(n,r))}},Pm=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){pe(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=function(){return K2}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)}};var km=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var xm=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var Me,ce;function ij(t){switch(t){case N.OK:return $(64938);case N.CANCELLED:case N.UNKNOWN:case N.DEADLINE_EXCEEDED:case N.RESOURCE_EXHAUSTED:case N.INTERNAL:case N.UNAVAILABLE:case N.UNAUTHENTICATED:return!1;case N.INVALID_ARGUMENT:case N.NOT_FOUND:case N.ALREADY_EXISTS:case N.PERMISSION_DENIED:case N.FAILED_PRECONDITION:case N.ABORTED:case N.OUT_OF_RANGE:case N.UNIMPLEMENTED:case N.DATA_LOSS:return!0;default:return $(15467,{code:t})}}function xS(t){if(t===void 0)return Bn("GRPC error has no .code"),N.UNKNOWN;switch(t){case Me.OK:return N.OK;case Me.CANCELLED:return N.CANCELLED;case Me.UNKNOWN:return N.UNKNOWN;case Me.DEADLINE_EXCEEDED:return N.DEADLINE_EXCEEDED;case Me.RESOURCE_EXHAUSTED:return N.RESOURCE_EXHAUSTED;case Me.INTERNAL:return N.INTERNAL;case Me.UNAVAILABLE:return N.UNAVAILABLE;case Me.UNAUTHENTICATED:return N.UNAUTHENTICATED;case Me.INVALID_ARGUMENT:return N.INVALID_ARGUMENT;case Me.NOT_FOUND:return N.NOT_FOUND;case Me.ALREADY_EXISTS:return N.ALREADY_EXISTS;case Me.PERMISSION_DENIED:return N.PERMISSION_DENIED;case Me.FAILED_PRECONDITION:return N.FAILED_PRECONDITION;case Me.ABORTED:return N.ABORTED;case Me.OUT_OF_RANGE:return N.OUT_OF_RANGE;case Me.UNIMPLEMENTED:return N.UNIMPLEMENTED;case Me.DATA_LOSS:return N.DATA_LOSS;default:return $(39323,{code:t})}}(ce=Me||(Me={}))[ce.OK=0]="OK",ce[ce.CANCELLED=1]="CANCELLED",ce[ce.UNKNOWN=2]="UNKNOWN",ce[ce.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ce[ce.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ce[ce.NOT_FOUND=5]="NOT_FOUND",ce[ce.ALREADY_EXISTS=6]="ALREADY_EXISTS",ce[ce.PERMISSION_DENIED=7]="PERMISSION_DENIED",ce[ce.UNAUTHENTICATED=16]="UNAUTHENTICATED",ce[ce.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ce[ce.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ce[ce.ABORTED=10]="ABORTED",ce[ce.OUT_OF_RANGE=11]="OUT_OF_RANGE",ce[ce.UNIMPLEMENTED=12]="UNIMPLEMENTED",ce[ce.INTERNAL=13]="INTERNAL",ce[ce.UNAVAILABLE=14]="UNAVAILABLE",ce[ce.DATA_LOSS=15]="DATA_LOSS";var EC=null;var oj=new Vn([4294967295,4294967295],0);function TC(t){let e=WC().encode(t),n=new Yg;return n.update(e),new Uint8Array(n.digest())}function DC(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Vn([n,r],0),new Vn([i,o],0)]}var Om=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ui(`Invalid padding: ${n}`);if(r<0)throw new ui(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ui(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ui(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=Vn.fromNumber(this.fe)}pe(e,n,r){let i=e.add(n.multiply(Vn.fromNumber(r)));return i.compare(oj)===1&&(i=new Vn([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;let n=TC(e),[r,i]=DC(n);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);if(!this.ye(s))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new t(o,i,n);return r.forEach(c=>s.insert(c)),s}insert(e){if(this.fe===0)return;let n=TC(e),[r,i]=DC(n);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);this.we(s)}}we(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},ui=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var rd=class t{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,Ra.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(Y.min(),i,new Se(te),zn(),ie())}},Ra=class t{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,ie(),ie(),ie())}};var bo=class{constructor(e,n,r,i){this.Se=e,this.removedTargetIds=n,this.key=r,this.be=i}},id=class{constructor(e,n){this.targetId=e,this.De=n}},od=class{constructor(e,n,r=rt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},sd=class{constructor(){this.ve=0,this.Ce=bC(),this.Fe=rt.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=ie(),n=ie(),r=ie();return this.Ce.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:$(38017,{changeType:o})}}),new Ra(this.Fe,this.Me,e,n,r)}ke(){this.xe=!1,this.Ce=bC()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,pe(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}},Fm=class{constructor(e){this.We=e,this.Ge=new Map,this.ze=zn(),this.je=Hl(),this.Je=Hl(),this.He=new Se(te)}Ye(e){for(let n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(let n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,n=>{let r=this.tt(n);switch(e.state){case 0:this.nt(n)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),r.Be(e.resumeToken));break;default:$(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach((r,i)=>{this.nt(i)&&n(i)})}it(e){let n=e.targetId,r=e.De.count,i=this.st(n);if(i){let o=i.target;if(Sm(o))if(r===0){let s=new H(o.path);this.Xe(n,s,Jt.newNoDocument(s,Y.min()))}else pe(r===1,20013,{expectedCount:r});else{let s=this.ot(n);if(s!==r){let c=this._t(e),u=c?this.ut(c,e,s):1;if(u!==0){this.rt(n);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,l)}EC?.ct(function(f,p,m,y,A){var R,P,V,q,W,_e;let it={localCacheCount:f,existenceFilterCount:p.count,databaseId:m.database,projectId:m.projectId},ge=p.unchangedNames;return ge&&(it.bloomFilter={applied:A===0,hashCount:(R=ge?.hashCount)!==null&&R!==void 0?R:0,bitmapLength:(q=(V=(P=ge?.bits)===null||P===void 0?void 0:P.bitmap)===null||V===void 0?void 0:V.length)!==null&&q!==void 0?q:0,padding:(_e=(W=ge?.bits)===null||W===void 0?void 0:W.padding)!==null&&_e!==void 0?_e:0,mightContain:T=>{var _;return(_=y?.mightContain(T))!==null&&_!==void 0&&_}}),it}(s,e.De,this.We.lt(),c,u))}}}}_t(e){let n=e.De.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n,s,c;try{s=Hn(r).toUint8Array()}catch(u){if(u instanceof Jl)return Dr("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new Om(s,i,o)}catch(u){return Dr(u instanceof ui?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.fe===0?null:c}ut(e,n,r){return n.De.count===r-this.ht(e,n.targetId)?0:2}ht(e,n){let r=this.We.getRemoteKeysForTarget(n),i=0;return r.forEach(o=>{let s=this.We.lt(),c=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(c)||(this.Xe(n,o,null),i++)}),i}Pt(e){let n=new Map;this.Ge.forEach((o,s)=>{let c=this.st(s);if(c){if(o.current&&Sm(c.target)){let u=new H(c.target.path);this.Tt(u).has(s)||this.It(s,u)||this.Xe(s,u,Jt.newNoDocument(u,e))}o.Ne&&(n.set(s,o.Le()),o.ke())}});let r=ie();this.Je.forEach((o,s)=>{let c=!0;s.forEachWhile(u=>{let l=this.st(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(o))}),this.ze.forEach((o,s)=>s.setReadTime(e));let i=new rd(e,n,this.He,this.ze,r);return this.ze=zn(),this.je=Hl(),this.Je=Hl(),this.He=new Se(te),i}Ze(e,n){if(!this.nt(e))return;let r=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,r),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,r){if(!this.nt(e))return;let i=this.tt(e);this.It(e,n)?i.qe(n,1):i.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),r&&(this.ze=this.ze.insert(n,r))}removeTarget(e){this.Ge.delete(e)}ot(e){let n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new sd,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new He(te),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new He(te),this.je=this.je.insert(e,n)),n}nt(e){let n=this.st(e)!==null;return n||O("WatchChangeAggregator","Detected inactive target",e),n}st(e){let n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new sd),this.We.getRemoteKeysForTarget(e).forEach(n=>{this.Xe(e,n,null)})}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}};function Hl(){return new Se(H.comparator)}function bC(){return new Se(H.comparator)}var sj={asc:"ASCENDING",desc:"DESCENDING"},aj={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},cj={and:"AND",or:"OR"},Lm=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function Vm(t,e){return t.useProto3Json||Sd(e)?e:{value:e}}function ad(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function OS(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function uj(t,e){return ad(t,e.toTimestamp())}function _n(t){return pe(!!t,49232),Y.fromTimestamp(function(n){let r=$n(n);return new xe(r.seconds,r.nanos)}(t))}function Xy(t,e){return jm(t,e).canonicalString()}function jm(t,e){let n=function(i){return new Ne(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function FS(t){let e=Ne.fromString(t);return pe(BS(e),10190,{key:e.toString()}),e}function Um(t,e){return Xy(t.databaseId,e.path)}function nm(t,e){let n=FS(e);if(n.get(1)!==t.databaseId.projectId)throw new L(N.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new L(N.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new H(VS(n))}function LS(t,e){return Xy(t.databaseId,e)}function lj(t){let e=FS(t);return e.length===4?Ne.emptyPath():VS(e)}function Bm(t){return new Ne(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function VS(t){return pe(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function CC(t,e,n){return{name:Um(t,e),fields:n.value.mapValue.fields}}function dj(t,e){let n;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:$(39313,{state:l})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(l,f){return l.useProto3Json?(pe(f===void 0||typeof f=="string",58123),rt.fromBase64String(f||"")):(pe(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),rt.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,c=s&&function(l){let f=l.code===void 0?N.UNKNOWN:xS(l.code);return new L(f,l.message||"")}(s);n=new od(r,i,o,c||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=nm(t,r.document.name),o=_n(r.document.updateTime),s=r.document.createTime?_n(r.document.createTime):Y.min(),c=new Zt({mapValue:{fields:r.document.fields}}),u=Jt.newFoundDocument(i,o,s,c),l=r.targetIds||[],f=r.removedTargetIds||[];n=new bo(l,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=nm(t,r.document),o=r.readTime?_n(r.readTime):Y.min(),s=Jt.newNoDocument(i,o),c=r.removedTargetIds||[];n=new bo([],c,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=nm(t,r.document),o=r.removedTargetIds||[];n=new bo([],o,i,null)}else{if(!("filter"in e))return $(11601,{At:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new xm(i,o),c=r.targetId;n=new id(c,s)}}return n}function hj(t,e){let n;if(e instanceof yi)n={update:CC(t,e.key,e.value)};else if(e instanceof nd)n={delete:Um(t,e.key)};else if(e instanceof Wn)n={update:CC(t,e.key,e.data),updateMask:wj(e.fieldMask)};else{if(!(e instanceof Nm))return $(16599,{Rt:e.type});n={verify:Um(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let c=s.transform;if(c instanceof Fo)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof gi)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof mi)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Lo)return{fieldPath:s.field.canonicalString(),increment:c.Ee};throw $(20930,{transform:s.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:uj(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:$(27497)}(t,e.precondition)),n}function fj(t,e){return t&&t.length>0?(pe(e!==void 0,14353),t.map(n=>function(i,o){let s=i.updateTime?_n(i.updateTime):_n(o);return s.isEqual(Y.min())&&(s=_n(o)),new Rm(s,i.transformResults||[])}(n,e))):[]}function pj(t,e){return{documents:[LS(t,e.path)]}}function gj(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=LS(t,i);let o=function(l){if(l.length!==0)return US(wn.create(l,"and"))}(e.filters);o&&(n.structuredQuery.where=o);let s=function(l){if(l.length!==0)return l.map(f=>function(m){return{field:wo(m.field),direction:vj(m.dir)}}(f))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);let c=Vm(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{Vt:n,parent:i}}function mj(t){let e=lj(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){pe(r===1,65062);let f=n.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let o=[];n.where&&(o=function(p){let m=jS(p);return m instanceof wn&&vS(m)?m.getFilters():[m]}(n.where));let s=[];n.orderBy&&(s=function(p){return p.map(m=>function(A){return new ko(Eo(A.field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(A.direction))}(m))}(n.orderBy));let c=null;n.limit&&(c=function(p){let m;return m=typeof p=="object"?p.value:p,Sd(m)?null:m}(n.limit));let u=null;n.startAt&&(u=function(p){let m=!!p.before,y=p.values||[];return new Po(y,m)}(n.startAt));let l=null;return n.endAt&&(l=function(p){let m=!p.before,y=p.values||[];return new Po(y,m)}(n.endAt)),$2(e,i,s,o,c,"F",u,l)}function yj(t,e){let n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return $(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function jS(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=Eo(n.unaryFilter.field);return Le.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Eo(n.unaryFilter.field);return Le.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Eo(n.unaryFilter.field);return Le.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=Eo(n.unaryFilter.field);return Le.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return $(61313);default:return $(60726)}}(t):t.fieldFilter!==void 0?function(n){return Le.create(Eo(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return $(58110);default:return $(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return wn.create(n.compositeFilter.filters.map(r=>jS(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return $(1026)}}(n.compositeFilter.op))}(t):$(30097,{filter:t})}function vj(t){return sj[t]}function _j(t){return aj[t]}function Ij(t){return cj[t]}function wo(t){return{fieldPath:t.canonicalString()}}function Eo(t){return bt.fromServerFormat(t.fieldPath)}function US(t){return t instanceof Le?function(n){if(n.op==="=="){if(fC(n.value))return{unaryFilter:{field:wo(n.field),op:"IS_NAN"}};if(hC(n.value))return{unaryFilter:{field:wo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(fC(n.value))return{unaryFilter:{field:wo(n.field),op:"IS_NOT_NAN"}};if(hC(n.value))return{unaryFilter:{field:wo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:wo(n.field),op:_j(n.op),value:n.value}}}(t):t instanceof wn?function(n){let r=n.getFilters().map(i=>US(i));return r.length===1?r[0]:{compositeFilter:{op:Ij(n.op),filters:r}}}(t):$(54877,{filter:t})}function wj(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function BS(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var Na=class t{constructor(e,n,r,i,o=Y.min(),s=Y.min(),c=rt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var $m=class{constructor(e){this.gt=e}};function Ej(t){let e=mj({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Am(e,e.limit,"L"):e}var cd=class{constructor(){}bt(e,n){this.Dt(e,n),n.vt()}Dt(e,n){if("nullValue"in e)this.Ct(n,5);else if("booleanValue"in e)this.Ct(n,10),n.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(n,15),n.Ft(De(e.integerValue));else if("doubleValue"in e){let r=De(e.doubleValue);isNaN(r)?this.Ct(n,13):(this.Ct(n,15),Ca(r)?n.Ft(0):n.Ft(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ct(n,20),typeof r=="string"&&(r=$n(r)),n.Mt(`${r.seconds||""}`),n.Ft(r.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,n),this.Ot(n);else if("bytesValue"in e)this.Ct(n,30),n.Nt(Hn(e.bytesValue)),this.Ot(n);else if("referenceValue"in e)this.Bt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ct(n,45),n.Ft(r.latitude||0),n.Ft(r.longitude||0)}else"mapValue"in e?gS(e)?this.Ct(n,Number.MAX_SAFE_INTEGER):pS(e)?this.Lt(e.mapValue,n):(this.kt(e.mapValue,n),this.Ot(n)):"arrayValue"in e?(this.qt(e.arrayValue,n),this.Ot(n)):$(19022,{Qt:e})}xt(e,n){this.Ct(n,25),this.$t(e,n)}$t(e,n){n.Mt(e)}kt(e,n){let r=e.fields||{};this.Ct(n,55);for(let i of Object.keys(r))this.xt(i,n),this.Dt(r[i],n)}Lt(e,n){var r,i;let o=e.fields||{};this.Ct(n,53);let s=Ro,c=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Ct(n,15),n.Ft(De(c)),this.xt(s,n),this.Dt(o[s],n)}qt(e,n){let r=e.values||[];this.Ct(n,50);for(let i of r)this.Dt(i,n)}Bt(e,n){this.Ct(n,37),H.fromName(e).path.forEach(r=>{this.Ct(n,60),this.$t(r,n)})}Ct(e,n){e.Ft(n)}Ot(e){e.Ft(2)}};cd.Ut=new cd;var Hm=class{constructor(){this.Dn=new qm}addToCollectionParentIndex(e,n){return this.Dn.add(n),M.resolve()}getCollectionParents(e,n){return M.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return M.resolve()}deleteFieldIndex(e,n){return M.resolve()}deleteAllFieldIndexes(e){return M.resolve()}createTargetIndexes(e,n){return M.resolve()}getDocumentsMatchingTarget(e,n){return M.resolve(null)}getIndexType(e,n){return M.resolve(0)}getFieldIndexes(e,n){return M.resolve([])}getNextCollectionGroupToUpdate(e){return M.resolve(null)}getMinOffset(e,n){return M.resolve(pi.min())}getMinOffsetFromCollectionGroup(e,n){return M.resolve(pi.min())}updateCollectionGroup(e,n,r){return M.resolve()}updateIndexEntries(e,n){return M.resolve()}},qm=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new He(Ne.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new He(Ne.comparator)).toArray()}};var b7=new Uint8Array(0);var SC={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},$S=41943040,jt=class t{static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}};jt.DEFAULT_COLLECTION_PERCENTILE=10,jt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,jt.DEFAULT=new jt($S,jt.DEFAULT_COLLECTION_PERCENTILE,jt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),jt.DISABLED=new jt(-1,0,0);var Ma=class t{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new t(0)}static ur(){return new t(-1)}};var AC="LruGarbageCollector",Tj=1048576;function RC([t,e],[n,r]){let i=te(t,n);return i===0?te(e,r):i}var zm=class{constructor(e){this.Tr=e,this.buffer=new He(RC),this.Ir=0}dr(){return++this.Ir}Er(e){let n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{let r=this.buffer.last();RC(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}},Wm=class{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){O(AC,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>v(this,null,function*(){this.Ar=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ho(n)?O(AC,"Ignoring IndexedDB error during garbage collection: ",n):yield $o(n)}yield this.Rr(3e5)}))}},Gm=class{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return M.resolve(Hy.ue);let r=new zm(n);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(O("LruGarbageCollector","Garbage collection skipped; disabled"),M.resolve(SC)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(O("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),SC):this.pr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let r,i,o,s,c,u,l,f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(O("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,c=Date.now(),this.removeTargets(e,r,n))).next(p=>(o=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),_o()<=ne.DEBUG&&O("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-f}ms
	Determined least recently used ${i} in `+(c-s)+`ms
	Removed ${o} targets in `+(u-c)+`ms
	Removed ${p} documents in `+(l-u)+`ms
Total Duration: ${l-f}ms`),M.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function Dj(t,e){return new Gm(t,e)}var Km=class{constructor(){this.changes=new qn(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Jt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?M.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Qm=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var Ym=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Ta(r.mutation,i,mn.empty(),xe.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ie()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ie()){let i=ci();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=_a();return o.forEach((c,u)=>{s=s.insert(c,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){let r=ci();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ie()))}populateOverlays(e,n,r){let i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,c)=>{n.set(s,c)})})}computeViews(e,n,r,i){let o=zn(),s=Ea(),c=function(){return Ea()}();return n.forEach((u,l)=>{let f=r.get(l.key);i.has(l.key)&&(f===void 0||f.mutation instanceof Wn)?o=o.insert(l.key,l):f!==void 0?(s.set(l.key,f.mutation.getFieldMask()),Ta(f.mutation,l,f.mutation.getFieldMask(),xe.now())):s.set(l.key,mn.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,f)=>s.set(l,f)),n.forEach((l,f)=>{var p;return c.set(l,new Qm(f,(p=s.get(l))!==null&&p!==void 0?p:null))}),c))}recalculateAndSaveOverlays(e,n){let r=Ea(),i=new Se((s,c)=>s-c),o=ie();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(let c of s)c.keys().forEach(u=>{let l=n.get(u);if(l===null)return;let f=r.get(u)||mn.empty();f=c.applyToLocalView(l,f),r.set(u,f);let p=(i.get(c.batchId)||ie()).add(u);i=i.insert(c.batchId,p)})}).next(()=>{let s=[],c=i.getReverseIterator();for(;c.hasNext();){let u=c.getNext(),l=u.key,f=u.value,p=CS();f.forEach(m=>{if(!o.has(m)){let y=PS(n.get(m),r.get(m));y!==null&&p.set(m,y),o=o.add(m)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return M.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(s){return H.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):H2(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):M.resolve(ci()),c=ba,u=o;return s.next(l=>M.forEach(l,(f,p)=>(c<p.largestBatchId&&(c=p.largestBatchId),o.get(f)?M.resolve():this.remoteDocumentCache.getEntry(e,f).next(m=>{u=u.insert(f,m)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,ie())).next(f=>({batchId:c,changes:bS(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new H(n)).next(r=>{let i=_a();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let o=n.collectionGroup,s=_a();return this.indexManager.getCollectionParents(e,o).next(c=>M.forEach(c,u=>{let l=function(p,m){return new xo(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(f=>{f.forEach((p,m)=>{s=s.insert(p,m)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((u,l)=>{let f=l.getKey();s.get(f)===null&&(s=s.insert(f,Jt.newInvalidDocument(f)))});let c=_a();return s.forEach((u,l)=>{let f=o.get(u);f!==void 0&&Ta(f.mutation,l,mn.empty(),xe.now()),Nd(n,l)&&(c=c.insert(u,l))}),c})}};var Zm=class{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return M.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,function(i){return{id:i.id,version:i.version,createTime:_n(i.createTime)}}(n)),M.resolve()}getNamedQuery(e,n){return M.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,function(i){return{name:i.name,query:Ej(i.bundledQuery),readTime:_n(i.readTime)}}(n)),M.resolve()}};var Jm=class{constructor(){this.overlays=new Se(H.comparator),this.kr=new Map}getOverlay(e,n){return M.resolve(this.overlays.get(n))}getOverlays(e,n){let r=ci();return M.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.wt(e,n,o)}),M.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.kr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.kr.delete(r)),M.resolve()}getOverlaysForCollection(e,n,r){let i=ci(),o=n.length+1,s=new H(n.child("")),c=this.overlays.getIteratorFrom(s);for(;c.hasNext();){let u=c.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return M.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new Se((l,f)=>l-f),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let f=o.get(l.largestBatchId);f===null&&(f=ci(),o=o.insert(l.largestBatchId,f)),f.set(l.getKey(),l)}}let c=ci(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,f)=>c.set(l,f)),!(c.size()>=i)););return M.resolve(c)}wt(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new km(n,r));let o=this.kr.get(n);o===void 0&&(o=ie(),this.kr.set(n,o)),this.kr.set(n,o.add(r.key))}};var Xm=class{constructor(){this.sessionToken=rt.EMPTY_BYTE_STRING}getSessionToken(e){return M.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,M.resolve()}};var Pa=class{constructor(){this.qr=new He(Pe.Qr),this.$r=new He(Pe.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){let r=new Pe(e,n);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new Pe(e,n))}Gr(e,n){e.forEach(r=>this.removeReference(r,n))}zr(e){let n=new H(new Ne([])),r=new Pe(n,e),i=new Pe(n,e+1),o=[];return this.$r.forEachInRange([r,i],s=>{this.Wr(s),o.push(s.key)}),o}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){let n=new H(new Ne([])),r=new Pe(n,e),i=new Pe(n,e+1),o=ie();return this.$r.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let n=new Pe(e,0),r=this.qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},Pe=class{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return H.comparator(e.key,n.key)||te(e.Hr,n.Hr)}static Ur(e,n){return te(e.Hr,n.Hr)||H.comparator(e.key,n.key)}};var ey=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new He(Pe.Qr)}checkEmpty(e){return M.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let o=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new Mm(o,n,r,i);this.mutationQueue.push(s);for(let c of i)this.Yr=this.Yr.add(new Pe(c.key,o)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return M.resolve(s)}lookupMutationBatch(e,n){return M.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.Xr(r),o=i<0?0:i;return M.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return M.resolve(this.mutationQueue.length===0?qy:this.er-1)}getAllMutationBatches(e){return M.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new Pe(n,0),i=new Pe(n,Number.POSITIVE_INFINITY),o=[];return this.Yr.forEachInRange([r,i],s=>{let c=this.Zr(s.Hr);o.push(c)}),M.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new He(te);return n.forEach(i=>{let o=new Pe(i,0),s=new Pe(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([o,s],c=>{r=r.add(c.Hr)})}),M.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,o=r;H.isDocumentKey(o)||(o=o.child(""));let s=new Pe(new H(o),0),c=new He(te);return this.Yr.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(c=c.add(u.Hr)),!0)},s),M.resolve(this.ei(c))}ei(e){let n=[];return e.forEach(r=>{let i=this.Zr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){pe(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return M.forEach(n.mutations,i=>{let o=new Pe(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,n){let r=new Pe(n,0),i=this.Yr.firstAfterOrEqual(r);return M.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,M.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var ty=class{constructor(e){this.ni=e,this.docs=function(){return new Se(H.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.ni(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return M.resolve(r?r.document.mutableCopy():Jt.newInvalidDocument(n))}getEntries(e,n){let r=zn();return n.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Jt.newInvalidDocument(i))}),M.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=zn(),s=n.path,c=new H(s.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){let{key:l,value:{document:f}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||T2(E2(f),r)<=0||(i.has(f.key)||Nd(n,f))&&(o=o.insert(f.key,f.mutableCopy()))}return M.resolve(o)}getAllFromCollectionGroup(e,n,r,i){$(9500)}ri(e,n){return M.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new ny(this)}getSize(e){return M.resolve(this.size)}},ny=class extends Km{constructor(e){super(),this.Or=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),M.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}};var ry=class{constructor(e){this.persistence=e,this.ii=new qn(n=>Qy(n),Yy),this.lastRemoteSnapshotVersion=Y.min(),this.highestTargetId=0,this.si=0,this.oi=new Pa,this.targetCount=0,this._i=Ma.ar()}forEachTarget(e,n){return this.ii.forEach((r,i)=>n(i)),M.resolve()}getLastRemoteSnapshotVersion(e){return M.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return M.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),M.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.si&&(this.si=n),M.resolve()}hr(e){this.ii.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this._i=new Ma(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,M.resolve()}updateTargetData(e,n){return this.hr(n),M.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,M.resolve()}removeTargets(e,n,r){let i=0,o=[];return this.ii.forEach((s,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.ii.delete(s),o.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)}),M.waitFor(o).next(()=>i)}getTargetCount(e){return M.resolve(this.targetCount)}getTargetData(e,n){let r=this.ii.get(n)||null;return M.resolve(r)}addMatchingKeys(e,n,r){return this.oi.Kr(n,r),M.resolve()}removeMatchingKeys(e,n,r){this.oi.Gr(n,r);let i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),M.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),M.resolve()}getMatchingKeysForTargetId(e,n){let r=this.oi.Jr(n);return M.resolve(r)}containsKey(e,n){return M.resolve(this.oi.containsKey(n))}};var ud=class{constructor(e,n){this.ai={},this.overlays={},this.ui=new Hy(0),this.ci=!1,this.ci=!0,this.li=new Xm,this.referenceDelegate=e(this),this.hi=new ry(this),this.indexManager=new Hm,this.remoteDocumentCache=function(i){return new ty(i)}(r=>this.referenceDelegate.Pi(r)),this.serializer=new $m(n),this.Ti=new Zm(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Jm,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ai[e.toKey()];return r||(r=new ey(n,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,r){O("MemoryPersistence","Starting transaction:",e);let i=new iy(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ei(e,n){return M.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,n)))}},iy=class extends pm{constructor(e){super(),this.currentSequenceNumber=e}},oy=class t{constructor(e){this.persistence=e,this.Ai=new Pa,this.Ri=null}static Vi(e){return new t(e)}get mi(){if(this.Ri)return this.Ri;throw $(60996)}addReference(e,n,r){return this.Ai.addReference(r,n),this.mi.delete(r.toString()),M.resolve()}removeReference(e,n,r){return this.Ai.removeReference(r,n),this.mi.add(r.toString()),M.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),M.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach(i=>this.mi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.mi.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}Ii(){this.Ri=new Set}di(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return M.forEach(this.mi,r=>{let i=H.fromPath(r);return this.fi(e,i).next(o=>{o||n.removeEntry(i,Y.min())})}).next(()=>(this.Ri=null,n.apply(e)))}updateLimboDocument(e,n){return this.fi(e,n).next(r=>{r?this.mi.delete(n.toString()):this.mi.add(n.toString())})}Pi(e){return 0}fi(e,n){return M.or([()=>M.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}},ld=class t{constructor(e,n){this.persistence=e,this.gi=new qn(r=>S2(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=Dj(this,n)}static Vi(e,n){return new t(e,n)}Ii(){}di(e){return M.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){let n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}yr(e){let n=0;return this.gr(e,r=>{n++}).next(()=>n)}gr(e,n){return M.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(o=>o?M.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ri(e,s=>this.Sr(e,s,n).next(c=>{c||(r++,o.removeEntry(s,Y.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),M.resolve()}removeTarget(e,n){let r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),M.resolve()}removeReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),M.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),M.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=zl(e.data.value)),n}Sr(e,n,r){return M.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{let i=this.gi.get(n);return M.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var sy=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Is=r,this.ds=i}static Es(e,n){let r=ie(),i=ie();for(let o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new t(e,n.fromCache,r,i)}};var ay=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var cy=class{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return PD()?8:b2(Be())>0?6:4}()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,r,i){let o={result:null};return this.ps(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ys(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new ay;return this.ws(e,n,s).next(c=>{if(o.result=c,this.Rs)return this.Ss(e,n,s,c.size)})}).next(()=>o.result)}Ss(e,n,r,i){return r.documentReadCount<this.Vs?(_o()<=ne.DEBUG&&O("QueryEngine","SDK will not create cache indexes for query:",Io(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),M.resolve()):(_o()<=ne.DEBUG&&O("QueryEngine","Query:",Io(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(_o()<=ne.DEBUG&&O("QueryEngine","The SDK decides to create cache indexes for query:",Io(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,vn(n))):M.resolve())}ps(e,n){if(yC(n))return M.resolve(null);let r=vn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Am(n,null,"F"),r=vn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=ie(...o);return this.gs.getDocuments(e,s).next(c=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.bs(n,c);return this.Ds(n,l,s,u.readTime)?this.ps(e,Am(n,null,"F")):this.vs(e,l,n,u)}))})))}ys(e,n,r,i){return yC(n)||i.isEqual(Y.min())?M.resolve(null):this.gs.getDocuments(e,r).next(o=>{let s=this.bs(n,o);return this.Ds(n,s,r,i)?M.resolve(null):(_o()<=ne.DEBUG&&O("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Io(n)),this.vs(e,s,n,w2(i,ba)).next(c=>c))})}bs(e,n){let r=new He(TS(e));return n.forEach((i,o)=>{Nd(e,o)&&(r=r.add(o))}),r}Ds(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ws(e,n,r){return _o()<=ne.DEBUG&&O("QueryEngine","Using full collection scan to execute query:",Io(n)),this.gs.getDocumentsMatchingQuery(e,n,pi.min(),r)}vs(e,n,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}};var ev="LocalStore",bj=3e8,uy=class{constructor(e,n,r,i){this.persistence=e,this.Cs=n,this.serializer=i,this.Fs=new Se(te),this.Ms=new qn(o=>Qy(o),Yy),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Ym(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Fs))}};function Cj(t,e,n,r){return new uy(t,e,n,r)}function HS(t,e){return v(this,null,function*(){let n=G(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.Ns(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],c=[],u=ie();for(let l of i){s.push(l.batchId);for(let f of l.mutations)u=u.add(f.key)}for(let l of o){c.push(l.batchId);for(let f of l.mutations)u=u.add(f.key)}return n.localDocuments.getDocuments(r,u).next(l=>({Bs:l,removedBatchIds:s,addedBatchIds:c}))})})})}function Sj(t,e){let n=G(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=n.Os.newChangeBuffer({trackRemovals:!0});return function(c,u,l,f){let p=l.batch,m=p.keys(),y=M.resolve();return m.forEach(A=>{y=y.next(()=>f.getEntry(u,A)).next(R=>{let P=l.docVersions.get(A);pe(P!==null,48541),R.version.compareTo(P)<0&&(p.applyToRemoteDocument(R,l),R.isValidDocument()&&(R.setReadTime(l.commitVersion),f.addEntry(R)))})}),y.next(()=>c.mutationQueue.removeMutationBatch(u,p))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let u=ie();for(let l=0;l<c.mutationResults.length;++l)c.mutationResults[l].transformResults.length>0&&(u=u.add(c.batch.mutations[l].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function qS(t){let e=G(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.hi.getLastRemoteSnapshotVersion(n))}function Aj(t,e){let n=G(t),r=e.snapshotVersion,i=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=n.Os.newChangeBuffer({trackRemovals:!0});i=n.Fs;let c=[];e.targetChanges.forEach((f,p)=>{let m=i.get(p);if(!m)return;c.push(n.hi.removeMatchingKeys(o,f.removedDocuments,p).next(()=>n.hi.addMatchingKeys(o,f.addedDocuments,p)));let y=m.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(rt.EMPTY_BYTE_STRING,Y.min()).withLastLimboFreeSnapshotVersion(Y.min()):f.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(f.resumeToken,r)),i=i.insert(p,y),function(R,P,V){return R.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=bj?!0:V.addedDocuments.size+V.modifiedDocuments.size+V.removedDocuments.size>0}(m,y,f)&&c.push(n.hi.updateTargetData(o,y))});let u=zn(),l=ie();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(o,f))}),c.push(Rj(o,s,e.documentUpdates).next(f=>{u=f.Ls,l=f.ks})),!r.isEqual(Y.min())){let f=n.hi.getLastRemoteSnapshotVersion(o).next(p=>n.hi.setTargetsMetadata(o,o.currentSequenceNumber,r));c.push(f)}return M.waitFor(c).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(n.Fs=i,o))}function Rj(t,e,n){let r=ie(),i=ie();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=zn();return n.forEach((c,u)=>{let l=o.get(c);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(c)),u.isNoDocument()&&u.version.isEqual(Y.min())?(e.removeEntry(c,u.readTime),s=s.insert(c,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(c,u)):O(ev,"Ignoring outdated watch update for ",c,". Current version:",l.version," Watch version:",u.version)}),{Ls:s,ks:i}})}function Nj(t,e){let n=G(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=qy),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Mj(t,e){let n=G(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.hi.getTargetData(r,e).next(o=>o?(i=o,M.resolve(i)):n.hi.allocateTargetId(r).next(s=>(i=new Na(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(r.targetId,r),n.Ms.set(e,r.targetId)),r})}function ly(t,e,n){return v(this,null,function*(){let r=G(t),i=r.Fs.get(e),o=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!Ho(s))throw s;O(ev,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)})}function NC(t,e,n){let r=G(t),i=Y.min(),o=ie();return r.persistence.runTransaction("Execute query","readwrite",s=>function(u,l,f){let p=G(u),m=p.Ms.get(f);return m!==void 0?M.resolve(p.Fs.get(m)):p.hi.getTargetData(l,f)}(r,s,vn(e)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(s,c.targetId).next(u=>{o=u})}).next(()=>r.Cs.getDocumentsMatchingQuery(s,e,n?i:Y.min(),n?o:ie())).next(c=>(Pj(r,z2(e),c),{documents:c,qs:o})))}function Pj(t,e,n){let r=t.xs.get(e)||Y.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.xs.set(e,r)}var dd=class{constructor(){this.activeTargetIds=Z2()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var dy=class{constructor(){this.Fo=new dd,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,r){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new dd,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var hy=class{xo(e){}shutdown(){}};var MC="ConnectivityMonitor",hd=class{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){O(MC,"Network connectivity changed: AVAILABLE");for(let e of this.ko)e(0)}Lo(){O(MC,"Network connectivity changed: UNAVAILABLE");for(let e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var ql=null;function fy(){return ql===null?ql=function(){return 268435456+Math.round(2147483648*Math.random())}():ql++,"0x"+ql.toString(16)}var rm="RestConnection",kj={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},py=class{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===Xl?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,n,r,i,o){let s=fy(),c=this.Go(e,n.toUriEncodedString());O(rm,`Sending RPC '${e}' ${s}:`,c,r);let u={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(u,i,o);let{host:l}=new URL(c),f=hr(l);return this.jo(e,c,u,r,f).then(p=>(O(rm,`Received RPC '${e}' ${s}: `,p),p),p=>{throw Dr(rm,`RPC '${e}' ${s} failed with error: `,p,"url: ",c,"request:",r),p})}Jo(e,n,r,i,o,s){return this.Wo(e,n,r,i,o)}zo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Bo}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}Go(e,n){let r=kj[e];return`${this.$o}/v1/${n}:${r}`}terminate(){}};var gy=class{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}};var nt="WebChannelConnection",my=class extends py{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,r,i,o){let s=fy();return new Promise((c,u)=>{let l=new Zg;l.setWithCredentials(!0),l.listenOnce(Jg.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case va.NO_ERROR:let p=l.getResponseJson();O(nt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),c(p);break;case va.TIMEOUT:O(nt,`RPC '${e}' ${s} timed out`),u(new L(N.DEADLINE_EXCEEDED,"Request time out"));break;case va.HTTP_ERROR:let m=l.getStatus();if(O(nt,`RPC '${e}' ${s} failed with status:`,m,"response text:",l.getResponseText()),m>0){let y=l.getResponseJson();Array.isArray(y)&&(y=y[0]);let A=y?.error;if(A&&A.status&&A.message){let R=function(V){let q=V.toLowerCase().replace(/_/g,"-");return Object.values(N).indexOf(q)>=0?q:N.UNKNOWN}(A.status);u(new L(R,A.message))}else u(new L(N.UNKNOWN,"Server responded with status "+l.getStatus()))}else u(new L(N.UNAVAILABLE,"Connection failed."));break;default:$(9055,{c_:e,streamId:s,l_:l.getLastErrorCode(),h_:l.getLastError()})}}finally{O(nt,`RPC '${e}' ${s} completed.`)}});let f=JSON.stringify(i);O(nt,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",f,r,15)})}P_(e,n,r){let i=fy(),o=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=tm(),c=em(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.zo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;let f=o.join("");O(nt,`Creating RPC '${e}' stream ${i}: ${f}`,u);let p=s.createWebChannel(f,u);this.T_(p);let m=!1,y=!1,A=new gy({Ho:P=>{y?O(nt,`Not sending because RPC '${e}' stream ${i} is closed:`,P):(m||(O(nt,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),O(nt,`RPC '${e}' stream ${i} sending:`,P),p.send(P))},Yo:()=>p.close()}),R=(P,V,q)=>{P.listen(V,W=>{try{q(W)}catch(_e){setTimeout(()=>{throw _e},0)}})};return R(p,vo.EventType.OPEN,()=>{y||(O(nt,`RPC '${e}' stream ${i} transport opened.`),A.s_())}),R(p,vo.EventType.CLOSE,()=>{y||(y=!0,O(nt,`RPC '${e}' stream ${i} transport closed`),A.__(),this.I_(p))}),R(p,vo.EventType.ERROR,P=>{y||(y=!0,Dr(nt,`RPC '${e}' stream ${i} transport errored. Name:`,P.name,"Message:",P.message),A.__(new L(N.UNAVAILABLE,"The operation could not be completed")))}),R(p,vo.EventType.MESSAGE,P=>{var V;if(!y){let q=P.data[0];pe(!!q,16349);let W=q,_e=W?.error||((V=W[0])===null||V===void 0?void 0:V.error);if(_e){O(nt,`RPC '${e}' stream ${i} received error:`,_e);let it=_e.status,ge=function(w){let E=Me[w];if(E!==void 0)return xS(E)}(it),T=_e.message;ge===void 0&&(ge=N.INTERNAL,T="Unknown error status: "+it+" with message "+_e.message),y=!0,A.__(new L(ge,T)),p.close()}else O(nt,`RPC '${e}' stream ${i} received:`,q),A.a_(q)}}),R(c,Xg.STAT_EVENT,P=>{P.stat===Bl.PROXY?O(nt,`RPC '${e}' stream ${i} detected buffering proxy`):P.stat===Bl.NOPROXY&&O(nt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{A.o_()},0),A}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(n=>n===e)}};function im(){return typeof document<"u"?document:null}function Md(t){return new Lm(t,!0)}var fd=class{constructor(e,n,r=1e3,i=1.5,o=6e4){this.Fi=e,this.timerId=n,this.d_=r,this.E_=i,this.A_=o,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();let n=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,n-r);i>0&&O("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}};var PC="PersistentStream",pd=class{constructor(e,n,r,i,o,s,c,u){this.Fi=e,this.w_=r,this.S_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new fd(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}stop(){return v(this,null,function*(){this.M_()&&(yield this.close(0))})}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}L_(){return v(this,null,function*(){if(this.x_())return this.close(0)})}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}close(e,n){return v(this,null,function*(){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===N.RESOURCE_EXHAUSTED?(Bn(n.toString()),Bn("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===N.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.n_(n)})}U_(){}auth(){this.state=1;let e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===n&&this.W_(r,i)},r=>{e(()=>{let i=new L(N.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,n){let r=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(()=>v(this,null,function*(){this.state=0,this.start()}))}G_(e){return O(PC,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget(()=>this.b_===e?n():(O(PC,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},yy=class extends pd{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();let n=dj(this.serializer,e),r=function(o){if(!("targetChange"in o))return Y.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?Y.min():s.readTime?_n(s.readTime):Y.min()}(e);return this.listener.J_(n,r)}H_(e){let n={};n.database=Bm(this.serializer),n.addTarget=function(o,s){let c,u=s.target;if(c=Sm(u)?{documents:pj(o,u)}:{query:gj(o,u).Vt},c.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){c.resumeToken=OS(o,s.resumeToken);let l=Vm(o,s.expectedCount);l!==null&&(c.expectedCount=l)}else if(s.snapshotVersion.compareTo(Y.min())>0){c.readTime=ad(o,s.snapshotVersion.toTimestamp());let l=Vm(o,s.expectedCount);l!==null&&(c.expectedCount=l)}return c}(this.serializer,e);let r=yj(this.serializer,e);r&&(n.labels=r),this.k_(n)}Y_(e){let n={};n.database=Bm(this.serializer),n.removeTarget=e,this.k_(n)}},vy=class extends pd{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return pe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,pe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){pe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();let n=fj(e.writeResults,e.commitTime),r=_n(e.commitTime);return this.listener.ta(r,n)}na(){let e={};e.database=Bm(this.serializer),this.k_(e)}X_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>hj(this.serializer,r))};this.k_(n)}};var _y=class{},Iy=class extends _y{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new L(N.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Wo(e,jm(n,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new L(N.UNKNOWN,o.toString())})}Jo(e,n,r,i,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,c])=>this.connection.Jo(e,jm(n,r),i,s,c,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new L(N.UNKNOWN,s.toString())})}terminate(){this.ra=!0,this.connection.terminate()}},wy=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Bn(n),this._a=!1):O("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}};var vi="RemoteStore",Ey=class{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=o,this.Ea.xo(s=>{r.enqueueAndForget(()=>v(this,null,function*(){Ii(this)&&(O(vi,"Restarting streams for network reachability change."),yield function(u){return v(this,null,function*(){let l=G(u);l.Ia.add(4),yield La(l),l.Aa.set("Unknown"),l.Ia.delete(4),yield Pd(l)})}(this))}))}),this.Aa=new wy(r,i)}};function Pd(t){return v(this,null,function*(){if(Ii(t))for(let e of t.da)yield e(!0)})}function La(t){return v(this,null,function*(){for(let e of t.da)yield e(!1)})}function zS(t,e){let n=G(t);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),iv(n)?rv(n):qo(n).x_()&&nv(n,e))}function tv(t,e){let n=G(t),r=qo(n);n.Ta.delete(e),r.x_()&&WS(n,e),n.Ta.size===0&&(r.x_()?r.B_():Ii(n)&&n.Aa.set("Unknown"))}function nv(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Y.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}qo(t).H_(e)}function WS(t,e){t.Ra.$e(e),qo(t).Y_(e)}function rv(t){t.Ra=new Fm({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),qo(t).start(),t.Aa.aa()}function iv(t){return Ii(t)&&!qo(t).M_()&&t.Ta.size>0}function Ii(t){return G(t).Ia.size===0}function GS(t){t.Ra=void 0}function xj(t){return v(this,null,function*(){t.Aa.set("Online")})}function Oj(t){return v(this,null,function*(){t.Ta.forEach((e,n)=>{nv(t,e)})})}function Fj(t,e){return v(this,null,function*(){GS(t),iv(t)?(t.Aa.la(e),rv(t)):t.Aa.set("Unknown")})}function Lj(t,e,n){return v(this,null,function*(){if(t.Aa.set("Online"),e instanceof od&&e.state===2&&e.cause)try{yield function(i,o){return v(this,null,function*(){let s=o.cause;for(let c of o.targetIds)i.Ta.has(c)&&(yield i.remoteSyncer.rejectListen(c,s),i.Ta.delete(c),i.Ra.removeTarget(c))})}(t,e)}catch(r){O(vi,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield gd(t,r)}else if(e instanceof bo?t.Ra.Ye(e):e instanceof id?t.Ra.it(e):t.Ra.et(e),!n.isEqual(Y.min()))try{let r=yield qS(t.localStore);n.compareTo(r)>=0&&(yield function(o,s){let c=o.Ra.Pt(s);return c.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let f=o.Ta.get(l);f&&o.Ta.set(l,f.withResumeToken(u.resumeToken,s))}}),c.targetMismatches.forEach((u,l)=>{let f=o.Ta.get(u);if(!f)return;o.Ta.set(u,f.withResumeToken(rt.EMPTY_BYTE_STRING,f.snapshotVersion)),WS(o,u);let p=new Na(f.target,u,l,f.sequenceNumber);nv(o,p)}),o.remoteSyncer.applyRemoteEvent(c)}(t,n))}catch(r){O(vi,"Failed to raise snapshot:",r),yield gd(t,r)}})}function gd(t,e,n){return v(this,null,function*(){if(!Ho(e))throw e;t.Ia.add(1),yield La(t),t.Aa.set("Offline"),n||(n=()=>qS(t.localStore)),t.asyncQueue.enqueueRetryable(()=>v(null,null,function*(){O(vi,"Retrying IndexedDB access"),yield n(),t.Ia.delete(1),yield Pd(t)}))})}function KS(t,e){return e().catch(n=>gd(t,n,e))}function kd(t){return v(this,null,function*(){let e=G(t),n=Cr(e),r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:qy;for(;Vj(e);)try{let i=yield Nj(e.localStore,r);if(i===null){e.Pa.length===0&&n.B_();break}r=i.batchId,jj(e,i)}catch(i){yield gd(e,i)}QS(e)&&YS(e)})}function Vj(t){return Ii(t)&&t.Pa.length<10}function jj(t,e){t.Pa.push(e);let n=Cr(t);n.x_()&&n.Z_&&n.X_(e.mutations)}function QS(t){return Ii(t)&&!Cr(t).M_()&&t.Pa.length>0}function YS(t){Cr(t).start()}function Uj(t){return v(this,null,function*(){Cr(t).na()})}function Bj(t){return v(this,null,function*(){let e=Cr(t);for(let n of t.Pa)e.X_(n.mutations)})}function $j(t,e,n){return v(this,null,function*(){let r=t.Pa.shift(),i=Pm.from(r,e,n);yield KS(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield kd(t)})}function Hj(t,e){return v(this,null,function*(){e&&Cr(t).Z_&&(yield function(r,i){return v(this,null,function*(){if(function(s){return ij(s)&&s!==N.ABORTED}(i.code)){let o=r.Pa.shift();Cr(r).N_(),yield KS(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield kd(r)}})}(t,e)),QS(t)&&YS(t)})}function kC(t,e){return v(this,null,function*(){let n=G(t);n.asyncQueue.verifyOperationInProgress(),O(vi,"RemoteStore received new credentials");let r=Ii(n);n.Ia.add(3),yield La(n),r&&n.Aa.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),yield Pd(n)})}function qj(t,e){return v(this,null,function*(){let n=G(t);e?(n.Ia.delete(2),yield Pd(n)):e||(n.Ia.add(2),yield La(n),n.Aa.set("Unknown"))})}function qo(t){return t.Va||(t.Va=function(n,r,i){let o=G(n);return o.ia(),new yy(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Zo:xj.bind(null,t),e_:Oj.bind(null,t),n_:Fj.bind(null,t),J_:Lj.bind(null,t)}),t.da.push(e=>v(null,null,function*(){e?(t.Va.N_(),iv(t)?rv(t):t.Aa.set("Unknown")):(yield t.Va.stop(),GS(t))}))),t.Va}function Cr(t){return t.ma||(t.ma=function(n,r,i){let o=G(n);return o.ia(),new vy(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:Uj.bind(null,t),n_:Hj.bind(null,t),ea:Bj.bind(null,t),ta:$j.bind(null,t)}),t.da.push(e=>v(null,null,function*(){e?(t.ma.N_(),yield kd(t)):(yield t.ma.stop(),t.Pa.length>0&&(O(vi,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))}))),t.ma}var Ty=class t{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Un,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){let s=Date.now()+r,c=new t(e,n,s,i,o);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new L(N.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function ov(t,e){if(Bn("AsyncQueue",`${e}: ${t}`),Ho(t))return new L(N.UNAVAILABLE,`${e}: ${t}`);throw t}var md=class t{static emptySet(e){return new t(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||H.comparator(n.key,r.key):(n,r)=>H.comparator(n.key,r.key),this.keyedMap=_a(),this.sortedSet=new Se(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var yd=class{constructor(){this.fa=new Se(H.comparator)}track(e){let n=e.doc.key,r=this.fa.get(n);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(n,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(n):e.type===1&&r.type===2?this.fa=this.fa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):$(63341,{At:e,ga:r}):this.fa=this.fa.insert(n,e)}pa(){let e=[];return this.fa.inorderTraversal((n,r)=>{e.push(r)}),e}},jo=class t{constructor(e,n,r,i,o,s,c,u,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,i,o){let s=[];return n.forEach(c=>{s.push({type:0,doc:c})}),new t(e,n,md.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Rd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var Dy=class{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}},by=class{constructor(){this.queries=xC(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,r){let i=G(n),o=i.queries;i.queries=xC(),o.forEach((s,c)=>{for(let u of c.wa)u.onError(r)})})(this,new L(N.ABORTED,"Firestore shutting down"))}};function xC(){return new qn(t=>ES(t),Rd)}function zj(t,e){return v(this,null,function*(){let n=G(t),r=3,i=e.query,o=n.queries.get(i);o?!o.Sa()&&e.ba()&&(r=2):(o=new Dy,r=e.ba()?0:1);try{switch(r){case 0:o.ya=yield n.onListen(i,!0);break;case 1:o.ya=yield n.onListen(i,!1);break;case 2:yield n.onFirstRemoteStoreListen(i)}}catch(s){let c=ov(s,`Initialization of query '${Io(e.query)}' failed`);return void e.onError(c)}n.queries.set(i,o),o.wa.push(e),e.va(n.onlineState),o.ya&&e.Ca(o.ya)&&sv(n)})}function Wj(t,e){return v(this,null,function*(){let n=G(t),r=e.query,i=3,o=n.queries.get(r);if(o){let s=o.wa.indexOf(e);s>=0&&(o.wa.splice(s,1),o.wa.length===0?i=e.ba()?0:1:!o.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}})}function Gj(t,e){let n=G(t),r=!1;for(let i of e){let o=i.query,s=n.queries.get(o);if(s){for(let c of s.wa)c.Ca(i)&&(r=!0);s.ya=i}}r&&sv(n)}function Kj(t,e,n){let r=G(t),i=r.queries.get(e);if(i)for(let o of i.wa)o.onError(n);r.queries.delete(e)}function sv(t){t.Da.forEach(e=>{e.next()})}var Cy,OC;(OC=Cy||(Cy={})).Fa="default",OC.Cache="cache";var Sy=class{constructor(e,n,r){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new jo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;let r=n!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;let n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=jo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==Cy.Cache}};var vd=class{constructor(e){this.key=e}},_d=class{constructor(e){this.key=e}},Ay=class{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=ie(),this.mutatedKeys=ie(),this.Xa=TS(e),this.eu=new md(this.Xa)}get tu(){return this.Ha}nu(e,n){let r=n?n.ru:new yd,i=n?n.eu:this.eu,o=n?n.mutatedKeys:this.mutatedKeys,s=i,c=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((f,p)=>{let m=i.get(f),y=Nd(this.query,p)?p:null,A=!!m&&this.mutatedKeys.has(m.key),R=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),P=!1;m&&y?m.data.isEqual(y.data)?A!==R&&(r.track({type:3,doc:y}),P=!0):this.iu(m,y)||(r.track({type:2,doc:y}),P=!0,(u&&this.Xa(y,u)>0||l&&this.Xa(y,l)<0)&&(c=!0)):!m&&y?(r.track({type:0,doc:y}),P=!0):m&&!y&&(r.track({type:1,doc:m}),P=!0,(u||l)&&(c=!0)),P&&(y?(s=s.add(y),o=R?o.add(f):o.delete(f)):(s=s.delete(f),o=o.delete(f)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let f=this.query.limitType==="F"?s.last():s.first();s=s.delete(f.key),o=o.delete(f.key),r.track({type:1,doc:f})}return{eu:s,ru:r,Ds:c,mutatedKeys:o}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let o=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;let s=e.ru.pa();s.sort((f,p)=>function(y,A){let R=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return $(20277,{At:P})}};return R(y)-R(A)}(f.type,p.type)||this.Xa(f.doc,p.doc)),this.su(r),i=i!=null&&i;let c=n&&!i?this.ou():[],u=this.Za.size===0&&this.current&&!i?1:0,l=u!==this.Ya;return this.Ya=u,s.length!==0||l?{snapshot:new jo(this.query,e.eu,o,s,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:c}:{_u:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new yd,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}ou(){if(!this.current)return[];let e=this.Za;this.Za=ie(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});let n=[];return e.forEach(r=>{this.Za.has(r)||n.push(new _d(r))}),this.Za.forEach(r=>{e.has(r)||n.push(new vd(r))}),n}uu(e){this.Ha=e.qs,this.Za=ie();let n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return jo.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}},av="SyncEngine",Ry=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},Ny=class{constructor(e){this.key=e,this.lu=!1}},My=class{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.hu={},this.Pu=new qn(c=>ES(c),Rd),this.Tu=new Map,this.Iu=new Set,this.du=new Se(H.comparator),this.Eu=new Map,this.Au=new Pa,this.Ru={},this.Vu=new Map,this.mu=Ma.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}};function Qj(t,e,n=!0){return v(this,null,function*(){let r=n0(t),i,o=r.Pu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.cu()):i=yield ZS(r,e,n,!0),i})}function Yj(t,e){return v(this,null,function*(){let n=n0(t);yield ZS(n,e,!0,!1)})}function ZS(t,e,n,r){return v(this,null,function*(){let i=yield Mj(t.localStore,vn(e)),o=i.targetId,s=t.sharedClientState.addLocalQueryTarget(o,n),c;return r&&(c=yield Zj(t,e,o,s==="current",i.resumeToken)),t.isPrimaryClient&&n&&zS(t.remoteStore,i),c})}function Zj(t,e,n,r,i){return v(this,null,function*(){t.gu=(p,m,y)=>function(R,P,V,q){return v(this,null,function*(){let W=P.view.nu(V);W.Ds&&(W=yield NC(R.localStore,P.query,!1).then(({documents:T})=>P.view.nu(T,W)));let _e=q&&q.targetChanges.get(P.targetId),it=q&&q.targetMismatches.get(P.targetId)!=null,ge=P.view.applyChanges(W,R.isPrimaryClient,_e,it);return LC(R,P.targetId,ge._u),ge.snapshot})}(t,p,m,y);let o=yield NC(t.localStore,e,!0),s=new Ay(e,o.qs),c=s.nu(o.documents),u=Ra.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),l=s.applyChanges(c,t.isPrimaryClient,u);LC(t,n,l._u);let f=new Ry(e,n,s);return t.Pu.set(e,f),t.Tu.has(n)?t.Tu.get(n).push(e):t.Tu.set(n,[e]),l.snapshot})}function Jj(t,e,n){return v(this,null,function*(){let r=G(t),i=r.Pu.get(e),o=r.Tu.get(i.targetId);if(o.length>1)return r.Tu.set(i.targetId,o.filter(s=>!Rd(s,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield ly(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&tv(r.remoteStore,i.targetId),Py(r,i.targetId)}).catch($o))):(Py(r,i.targetId),yield ly(r.localStore,i.targetId,!0))})}function Xj(t,e){return v(this,null,function*(){let n=G(t),r=n.Pu.get(e),i=n.Tu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),tv(n.remoteStore,r.targetId))})}function eU(t,e,n){return v(this,null,function*(){let r=aU(t);try{let i=yield function(s,c){let u=G(s),l=xe.now(),f=c.reduce((y,A)=>y.add(A.key),ie()),p,m;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let A=zn(),R=ie();return u.Os.getEntries(y,f).next(P=>{A=P,A.forEach((V,q)=>{q.isValidDocument()||(R=R.add(V))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,A)).next(P=>{p=P;let V=[];for(let q of c){let W=rj(q,p.get(q.key).overlayedDocument);W!=null&&V.push(new Wn(q.key,W,mS(W.value.mapValue),di.exists(!0)))}return u.mutationQueue.addMutationBatch(y,l,V,c)}).next(P=>{m=P;let V=P.applyToLocalDocumentSet(p,R);return u.documentOverlayCache.saveOverlays(y,P.batchId,V)})}).then(()=>({batchId:m.batchId,changes:bS(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,c,u){let l=s.Ru[s.currentUser.toKey()];l||(l=new Se(te)),l=l.insert(c,u),s.Ru[s.currentUser.toKey()]=l}(r,i.batchId,n),yield Va(r,i.changes),yield kd(r.remoteStore)}catch(i){let o=ov(i,"Failed to persist write");n.reject(o)}})}function JS(t,e){return v(this,null,function*(){let n=G(t);try{let r=yield Aj(n.localStore,e);e.targetChanges.forEach((i,o)=>{let s=n.Eu.get(o);s&&(pe(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.lu=!0:i.modifiedDocuments.size>0?pe(s.lu,14607):i.removedDocuments.size>0&&(pe(s.lu,42227),s.lu=!1))}),yield Va(n,r,e)}catch(r){yield $o(r)}})}function FC(t,e,n){let r=G(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.Pu.forEach((o,s)=>{let c=s.view.va(e);c.snapshot&&i.push(c.snapshot)}),function(s,c){let u=G(s);u.onlineState=c;let l=!1;u.queries.forEach((f,p)=>{for(let m of p.wa)m.va(c)&&(l=!0)}),l&&sv(u)}(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function tU(t,e,n){return v(this,null,function*(){let r=G(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Eu.get(e),o=i&&i.key;if(o){let s=new Se(H.comparator);s=s.insert(o,Jt.newNoDocument(o,Y.min()));let c=ie().add(o),u=new rd(Y.min(),new Map,new Se(te),s,c);yield JS(r,u),r.du=r.du.remove(o),r.Eu.delete(e),cv(r)}else yield ly(r.localStore,e,!1).then(()=>Py(r,e,n)).catch($o)})}function nU(t,e){return v(this,null,function*(){let n=G(t),r=e.batch.batchId;try{let i=yield Sj(n.localStore,e);e0(n,r,null),XS(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield Va(n,i)}catch(i){yield $o(i)}})}function rU(t,e,n){return v(this,null,function*(){let r=G(t);try{let i=yield function(s,c){let u=G(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let f;return u.mutationQueue.lookupMutationBatch(l,c).next(p=>(pe(p!==null,37113),f=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,f,c)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,f)).next(()=>u.localDocuments.getDocuments(l,f))})}(r.localStore,e);e0(r,e,n),XS(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield Va(r,i)}catch(i){yield $o(i)}})}function XS(t,e){(t.Vu.get(e)||[]).forEach(n=>{n.resolve()}),t.Vu.delete(e)}function e0(t,e,n){let r=G(t),i=r.Ru[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function Py(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Tu.get(e))t.Pu.delete(r),n&&t.hu.pu(r,n);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach(r=>{t.Au.containsKey(r)||t0(t,r)})}function t0(t,e){t.Iu.delete(e.path.canonicalString());let n=t.du.get(e);n!==null&&(tv(t.remoteStore,n),t.du=t.du.remove(e),t.Eu.delete(n),cv(t))}function LC(t,e,n){for(let r of n)r instanceof vd?(t.Au.addReference(r.key,e),iU(t,r)):r instanceof _d?(O(av,"Document no longer in limbo: "+r.key),t.Au.removeReference(r.key,e),t.Au.containsKey(r.key)||t0(t,r.key)):$(19791,{yu:r})}function iU(t,e){let n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Iu.has(r)||(O(av,"New document in limbo: "+n),t.Iu.add(r),cv(t))}function cv(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){let e=t.Iu.values().next().value;t.Iu.delete(e);let n=new H(Ne.fromString(e)),r=t.mu.next();t.Eu.set(r,new Ny(n)),t.du=t.du.insert(n,r),zS(t.remoteStore,new Na(vn(Zy(n.path)),r,"TargetPurposeLimboResolution",Hy.ue))}}function Va(t,e,n){return v(this,null,function*(){let r=G(t),i=[],o=[],s=[];r.Pu.isEmpty()||(r.Pu.forEach((c,u)=>{s.push(r.gu(u,e,n).then(l=>{var f;if((l||n)&&r.isPrimaryClient){let p=l?!l.fromCache:(f=n?.targetChanges.get(u.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(l){i.push(l);let p=sy.Es(u.targetId,l);o.push(p)}}))}),yield Promise.all(s),r.hu.J_(i),yield function(u,l){return v(this,null,function*(){let f=G(u);try{yield f.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>M.forEach(l,m=>M.forEach(m.Is,y=>f.persistence.referenceDelegate.addReference(p,m.targetId,y)).next(()=>M.forEach(m.ds,y=>f.persistence.referenceDelegate.removeReference(p,m.targetId,y)))))}catch(p){if(!Ho(p))throw p;O(ev,"Failed to update sequence numbers: "+p)}for(let p of l){let m=p.targetId;if(!p.fromCache){let y=f.Fs.get(m),A=y.snapshotVersion,R=y.withLastLimboFreeSnapshotVersion(A);f.Fs=f.Fs.insert(m,R)}}})}(r.localStore,o))})}function oU(t,e){return v(this,null,function*(){let n=G(t);if(!n.currentUser.isEqual(e)){O(av,"User change. New user:",e.toKey());let r=yield HS(n.localStore,e);n.currentUser=e,function(o,s){o.Vu.forEach(c=>{c.forEach(u=>{u.reject(new L(N.CANCELLED,s))})}),o.Vu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Va(n,r.Bs)}})}function sU(t,e){let n=G(t),r=n.Eu.get(e);if(r&&r.lu)return ie().add(r.key);{let i=ie(),o=n.Tu.get(e);if(!o)return i;for(let s of o){let c=n.Pu.get(s);i=i.unionWith(c.view.tu)}return i}}function n0(t){let e=G(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=JS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=sU.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=tU.bind(null,e),e.hu.J_=Gj.bind(null,e.eventManager),e.hu.pu=Kj.bind(null,e.eventManager),e}function aU(t){let e=G(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=nU.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=rU.bind(null,e),e}var r0=(()=>{class t{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(n){return v(this,null,function*(){this.serializer=Md(n.databaseInfo.databaseId),this.sharedClientState=this.bu(n),this.persistence=this.Du(n),yield this.persistence.start(),this.localStore=this.vu(n),this.gcScheduler=this.Cu(n,this.localStore),this.indexBackfillerScheduler=this.Fu(n,this.localStore)})}Cu(n,r){return null}Fu(n,r){return null}vu(n){return Cj(this.persistence,new cy,n.initialUser,this.serializer)}Du(n){return new ud(oy.Vi,this.serializer)}bu(n){return new dy}terminate(){return v(this,null,function*(){var n,r;(n=this.gcScheduler)===null||n===void 0||n.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return t.provider={build:()=>new t},t})(),ky=class extends r0{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){pe(this.persistence.referenceDelegate instanceof ld,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new Wm(r,e.asyncQueue,n)}Du(e){let n=this.cacheSizeBytes!==void 0?jt.withCacheSize(this.cacheSizeBytes):jt.DEFAULT;return new ud(r=>ld.Vi(r,n),this.serializer)}};var cU=(()=>{class t{initialize(n,r){return v(this,null,function*(){this.localStore||(this.localStore=n.localStore,this.sharedClientState=n.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!n.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>FC(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=oU.bind(null,this.syncEngine),yield qj(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(n){return function(){return new by}()}createDatastore(n){let r=Md(n.databaseInfo.databaseId),i=function(s){return new my(s)}(n.databaseInfo);return function(s,c,u,l){return new Iy(s,c,u,l)}(n.authCredentials,n.appCheckCredentials,i,r)}createRemoteStore(n){return function(i,o,s,c,u){return new Ey(i,o,s,c,u)}(this.localStore,this.datastore,n.asyncQueue,r=>FC(this.syncEngine,r,0),function(){return hd.C()?new hd:new hy}())}createSyncEngine(n,r){return function(o,s,c,u,l,f,p){let m=new My(o,s,c,u,l,f);return p&&(m.fu=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,n.initialUser,n.maxConcurrentLimboResolutions,r)}terminate(){return v(this,null,function*(){var n,r;yield function(o){return v(this,null,function*(){let s=G(o);O(vi,"RemoteStore shutting down."),s.Ia.add(5),yield La(s),s.Ea.shutdown(),s.Aa.set("Unknown")})}(this.remoteStore),(n=this.datastore)===null||n===void 0||n.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return t.provider={build:()=>new t},t})();var xy=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Bn("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout(()=>{this.muted||e(n)},0)}};var Sr="FirestoreClient",Oy=class{constructor(e,n,r,i,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=$e.UNAUTHENTICATED,this.clientId=Da.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>v(this,null,function*(){O(Sr,"Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(O(Sr,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Un;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>v(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=ov(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function om(t,e){return v(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),O(Sr,"Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>v(null,null,function*(){r.isEqual(i)||(yield HS(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>{Dr("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then(()=>{O("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{Dr("Terminating Firestore due to IndexedDb database deletion failed",i)})}),t._offlineComponents=e})}function VC(t,e){return v(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield uU(t);O(Sr,"Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>kC(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>kC(e.remoteStore,i)),t._onlineComponents=e})}function uU(t){return v(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){O(Sr,"Using user provided OfflineComponentProvider");try{yield om(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!function(i){return i.name==="FirebaseError"?i.code===N.FAILED_PRECONDITION||i.code===N.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Dr("Error using user provided cache. Falling back to memory cache: "+n),yield om(t,new r0)}}else O(Sr,"Using default OfflineComponentProvider"),yield om(t,new ky(void 0));return t._offlineComponents})}function i0(t){return v(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(O(Sr,"Using user provided OnlineComponentProvider"),yield VC(t,t._uninitializedComponentsProvider._online)):(O(Sr,"Using default OnlineComponentProvider"),yield VC(t,new cU))),t._onlineComponents})}function lU(t){return i0(t).then(e=>e.syncEngine)}function jC(t){return v(this,null,function*(){let e=yield i0(t),n=e.eventManager;return n.onListen=Qj.bind(null,e.syncEngine),n.onUnlisten=Jj.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Yj.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Xj.bind(null,e.syncEngine),n})}function o0(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var UC=new Map;var s0="firestore.googleapis.com",BC=!0,Id=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new L(N.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=s0,this.ssl=BC}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:BC;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=$S;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Tj)throw new L(N.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}I2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=o0((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new L(N.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new L(N.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new L(N.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},ka=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Id({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new L(N.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new L(N.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Id(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new sm;switch(r.type){case"firstParty":return new lm(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new L(N.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return v(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=UC.get(n);r&&(O("ComponentProvider","Removing Datastore"),UC.delete(n),r.terminate())}(this),Promise.resolve()}};function a0(t,e,n,r={}){var i;t=Do(t,ka);let o=hr(e),s=t._getSettings(),c=Object.assign(Object.assign({},s),{emulatorOptions:t._getEmulatorOptions()}),u=`${e}:${n}`;o&&(dl(`https://${u}`),hl("Firestore",!0)),s.host!==s0&&s.host!==u&&Dr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let l=Object.assign(Object.assign({},s),{host:u,ssl:o,emulatorOptions:r});if(!xt(l,c)&&(t._setSettings(l),r.mockUserToken)){let f,p;if(typeof r.mockUserToken=="string")f=r.mockUserToken,p=$e.MOCK_USER;else{f=SD(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new L(N.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new $e(m)}t._authCredentials=new am(new Kl(f,p))}}var wd=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},dt=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new xa(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}toJSON(){return{type:t._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Fa(n,t._jsonSchema))return new t(e,r||null,new H(Ne.fromString(n.referencePath)))}};dt._jsonSchemaVersion="firestore/documentReference/1.0",dt._jsonSchema={type:ke("string",dt._jsonSchemaVersion),referencePath:ke("string")};var xa=class t extends wd{constructor(e,n,r){super(e,n,Zy(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new dt(this.firestore,null,new H(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function c0(t,e,...n){if(t=Qe(t),arguments.length===1&&(e=Da.newId()),_2("doc","path",e),t instanceof ka){let r=Ne.fromString(e,...n);return oC(r),new dt(t,null,new H(r))}{if(!(t instanceof dt||t instanceof xa))throw new L(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Ne.fromString(e,...n));return oC(r),new dt(t.firestore,t instanceof xa?t.converter:null,new H(r))}}var $C="AsyncQueue",Ed=class{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new fd(this,"async_queue_retry"),this.oc=()=>{let r=im();r&&O($C,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;let n=im();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;let n=im();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});let n=new Un;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}cc(){return v(this,null,function*(){if(this.Zu.length!==0){try{yield this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Ho(e))throw e;O($C,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}})}uc(e){let n=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,Bn("INTERNAL UNHANDLED ERROR: ",HC(r)),r}).then(r=>(this.nc=!1,r))));return this._c=n,n}enqueueAfterDelay(e,n,r){this.ac(),this.sc.indexOf(e)>-1&&(n=0);let i=Ty.createAndSchedule(this,e,n,r,o=>this.lc(o));return this.ec.push(i),i}ac(){this.tc&&$(47125,{hc:HC(this.tc)})}verifyOperationInProgress(){}Pc(){return v(this,null,function*(){let e;do e=this._c,yield e;while(e!==this._c)})}Tc(e){for(let n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){let n=this.ec.indexOf(e);this.ec.splice(n,1)}};function HC(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}function qC(t){return function(n,r){if(typeof n!="object"||n===null)return!1;let i=n;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(t,["next","error","complete"])}var Uo=class extends ka{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new Ed,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return v(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Ed(e),this._firestoreClient=void 0,yield e}})}};function u0(t,e){let n=typeof t=="object"?t:hn(),r=typeof t=="string"?t:e||Xl,i=Ft(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=CD("firestore");o&&a0(i,...o)}return i}function l0(t){if(t._terminated)throw new L(N.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||dU(t),t._firestoreClient}function dU(t){var e,n,r;let i=t._freezeSettings(),o=function(c,u,l,f){return new gm(c,u,l,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,o0(f.experimentalLongPollingOptions),f.useFetchStreams,f.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new Oy(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&function(c){let u=c?._online.build();return{_offline:c?._offline.build(u),_online:u}}(t._componentsProvider))}var wr=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(rt.fromBase64String(e))}catch(n){throw new L(N.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(rt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:t._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Fa(e,t._jsonSchema))return t.fromBase64String(e.bytes)}};wr._jsonSchemaVersion="firestore/bytes/1.0",wr._jsonSchema={type:ke("string",wr._jsonSchemaVersion),bytes:ke("string")};var Oa=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new L(N.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new bt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Td=class{constructor(e){this._methodName=e}};var Er=class t{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new L(N.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new L(N.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return te(this._lat,e._lat)||te(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:t._jsonSchemaVersion}}static fromJSON(e){if(Fa(e,t._jsonSchema))return new t(e.latitude,e.longitude)}};Er._jsonSchemaVersion="firestore/geoPoint/1.0",Er._jsonSchema={type:ke("string",Er._jsonSchemaVersion),latitude:ke("number"),longitude:ke("number")};var Tr=class t{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}toJSON(){return{type:t._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Fa(e,t._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new t(e.vectorValues);throw new L(N.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};Tr._jsonSchemaVersion="firestore/vectorValue/1.0",Tr._jsonSchema={type:ke("string",Tr._jsonSchemaVersion),vectorValues:ke("object")};var hU=/^__.*__$/,Fy=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Wn(e,this.data,this.fieldMask,n,this.fieldTransforms):new yi(e,this.data,n,this.fieldTransforms)}};function d0(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw $(40011,{Ec:t})}}var Ly=class t{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Ac(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Dd(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(d0(this.Ec)&&hU.test(e))throw this.wc('Document fields cannot begin and end with "__"')}},Vy=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Md(e)}Dc(e,n,r,i=!1){return new Ly({Ec:e,methodName:n,bc:r,path:bt.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function fU(t){let e=t._freezeSettings(),n=Md(t._databaseId);return new Vy(t._databaseId,!!e.ignoreUndefinedProperties,n)}function pU(t,e,n,r,i,o={}){let s=t.Dc(o.merge||o.mergeFields?2:0,e,n,i);g0("Data must be an object, but it was:",s,r);let c=f0(r,s),u,l;if(o.merge)u=new mn(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let f=[];for(let p of o.mergeFields){let m=gU(e,p,n);if(!s.contains(m))throw new L(N.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);yU(f,m)||f.push(m)}u=new mn(f),l=s.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=s.fieldTransforms;return new Fy(new Zt(c),u,l)}function h0(t,e){if(p0(t=Qe(t)))return g0("Unsupported field value:",e,t),f0(t,e);if(t instanceof Td)return function(r,i){if(!d0(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let c of r){let u=h0(c,i.yc(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}}(t,e)}return function(r,i){if((r=Qe(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return J2(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=xe.fromDate(r);return{timestampValue:ad(i.serializer,o)}}if(r instanceof xe){let o=new xe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ad(i.serializer,o)}}if(r instanceof Er)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof wr)return{bytesValue:OS(i.serializer,r._byteString)};if(r instanceof dt){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.wc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Xy(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Tr)return function(s,c){return{mapValue:{fields:{[Wy]:{stringValue:Gy},[Ro]:{arrayValue:{values:s.toArray().map(l=>{if(typeof l!="number")throw c.wc("VectorValues must only contain numeric values.");return Jy(c.serializer,l)})}}}}}}(r,i);throw i.wc(`Unsupported field value: ${$y(r)}`)}(t,e)}function f0(t,e){let n={};return cS(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):_i(t,(r,i)=>{let o=h0(i,e.Vc(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function p0(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof xe||t instanceof Er||t instanceof wr||t instanceof dt||t instanceof Td||t instanceof Tr)}function g0(t,e,n){if(!p0(n)||!GC(n)){let r=$y(n);throw r==="an object"?e.wc(t+" a custom object"):e.wc(t+" "+r)}}function gU(t,e,n){if((e=Qe(e))instanceof Oa)return e._internalPath;if(typeof e=="string")return m0(t,e);throw Dd("Field path arguments must be of type string or ",t,!1,void 0,n)}var mU=new RegExp("[~\\*/\\[\\]]");function m0(t,e,n){if(e.search(mU)>=0)throw Dd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Oa(...e.split("."))._internalPath}catch{throw Dd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Dd(t,e,n,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new L(N.INVALID_ARGUMENT,c+t+u)}function yU(t,e){return t.some(n=>n.isEqual(e))}var bd=class{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new dt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new jy(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(y0("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},jy=class extends bd{data(){return super.data()}};function y0(t,e){return typeof e=="string"?m0(t,e):e instanceof Oa?e._internalPath:e._delegate._internalPath}function vU(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new L(N.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Uy=class{convertValue(e,n="none"){switch(br(e)){case 0:return null;case 1:return e.booleanValue;case 2:return De(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Hn(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw $(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return _i(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertVectorValue(e){var n,r,i;let o=(i=(r=(n=e.fields)===null||n===void 0?void 0:n[Ro].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>De(s.doubleValue));return new Tr(o)}convertGeoPoint(e){return new Er(De(e.latitude),De(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=Ad(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Sa(e));default:return null}}convertTimestamp(e){let n=$n(e);return new xe(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=Ne.fromString(e);pe(BS(r),9688,{name:e});let i=new ed(r.get(1),r.get(3)),o=new H(r.popFirst(5));return i.isEqual(n)||Bn(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}};function _U(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var li=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},hi=class t extends bd{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new Co(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(y0("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new L(N.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,n={};return n.type=t._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}};hi._jsonSchemaVersion="firestore/documentSnapshot/1.0",hi._jsonSchema={type:ke("string",hi._jsonSchemaVersion),bundleSource:ke("string","DocumentSnapshot"),bundleName:ke("string"),bundle:ke("string")};var Co=class extends hi{data(e={}){return super.data(e)}},So=class t{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new li(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Co(this._firestore,this._userDataWriter,r.key,r,new li(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new L(N.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(c=>{let u=new Co(i._firestore,i._userDataWriter,c.doc.key,c.doc,new li(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>o||c.type!==3).map(c=>{let u=new Co(i._firestore,i._userDataWriter,c.doc.key,c.doc,new li(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,f=-1;return c.type!==0&&(l=s.indexOf(c.doc.key),s=s.delete(c.doc.key)),c.type!==1&&(s=s.add(c.doc),f=s.indexOf(c.doc.key)),{type:IU(c.type),doc:u,oldIndex:l,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new L(N.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=t._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Da.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let n=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(n.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function IU(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return $(61501,{type:t})}}So._jsonSchemaVersion="firestore/querySnapshot/1.0",So._jsonSchema={type:ke("string",So._jsonSchemaVersion),bundleSource:ke("string","QuerySnapshot"),bundleName:ke("string"),bundle:ke("string")};var Cd=class extends Uy{constructor(e){super(),this.firestore=e}convertBytes(e){return new wr(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new dt(this.firestore,null,n)}};function v0(t,e,n){t=Do(t,dt);let r=Do(t.firestore,Uo),i=_U(t.converter,e,n);return wU(r,[pU(fU(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,di.none())])}function uv(t,...e){var n,r,i;t=Qe(t);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||qC(e[s])||(o=e[s++]);let c={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(qC(e[s])){let p=e[s];e[s]=(n=p.next)===null||n===void 0?void 0:n.bind(p),e[s+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[s+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let u,l,f;if(t instanceof dt)l=Do(t.firestore,Uo),f=Zy(t._key.path),u={next:p=>{e[s]&&e[s](EU(l,t,p))},error:e[s+1],complete:e[s+2]};else{let p=Do(t,wd);l=Do(p.firestore,Uo),f=p._query;let m=new Cd(l);u={next:y=>{e[s]&&e[s](new So(l,m,p,y))},error:e[s+1],complete:e[s+2]},vU(t._query)}return function(m,y,A,R){let P=new xy(R),V=new Sy(y,P,A);return m.asyncQueue.enqueueAndForget(()=>v(null,null,function*(){return zj(yield jC(m),V)})),()=>{P.Ou(),m.asyncQueue.enqueueAndForget(()=>v(null,null,function*(){return Wj(yield jC(m),V)}))}}(l0(l),f,c,u)}function wU(t,e){return function(r,i){let o=new Un;return r.asyncQueue.enqueueAndForget(()=>v(null,null,function*(){return eU(yield lU(r),i,o)})),o.promise}(l0(t),e)}function EU(t,e,n){let r=n.docs.get(e._key),i=new Cd(t);return new hi(t,i,e._key,r,new li(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){Bo=i})(pr),Ye(new Re("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),c=new Uo(new cm(r.getProvider("auth-internal")),new dm(s,r.getProvider("app-check-internal")),function(l,f){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new L(N.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ed(l.options.projectId,f)}(s,i),s);return o=Object.assign({useFetchStreams:n},o),c._setSettings(o),c},"PUBLIC").setMultipleInstances(!0)),fe(tC,nC,e),fe(tC,nC,"esm2017")})();var xd=function(){return xd=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},xd.apply(this,arguments)};var bU={includeMetadataChanges:!1};function _0(t,e){return e===void 0&&(e=bU),new re(function(n){var r=uv(t,e,{next:n.next.bind(n),error:n.error.bind(n),complete:n.complete.bind(n)});return{unsubscribe:r}})}function I0(t){return _0(t,{includeMetadataChanges:!0})}function w0(t,e){return e===void 0&&(e={}),I0(t).pipe(oe(function(n){return E0(n,e)}))}function E0(t,e){var n;e===void 0&&(e={});var r=t.data(e);return!t.exists()||typeof r!="object"||r===null||!e.idField?r:xd(xd({},r),(n={},n[e.idField]=t.id,n))}var wi=class{constructor(e){return e}},T0="firestore",lv=class{constructor(){return gr(T0)}};var dv=new j("angularfire2.firestore-instances");function CU(t,e){let n=ri(T0,t,e);return n&&new wi(n)}function SU(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new wi(r)}}var AU={provide:lv,deps:[[new ct,dv]]},RU={provide:wi,useFactory:CU,deps:[[new ct,dv],Qt]};function D0(t,...e){return fe("angularfire",fn.full,"fst"),Wt([RU,AU,{provide:dv,useFactory:SU(t),multi:!0,deps:[he,je,pn,On,[new ct,ya],[new ct,mo],...e]}])}var b0=Vt(w0,!0);var hv=Vt(c0,!0,2);var C0=Vt(u0,!0);var S0=Vt(v0,!0,2);var Od=class t{constructor(){}firestore=k(wi);getPersonalData(){let e=hv(this.firestore,"DATOS_PERSONALES","Lqxyb4o38VjsdnZrOF5q");return b0(e)}updatePersonalData(e){let n=hv(this.firestore,"DATOS_PERSONALES","Lqxyb4o38VjsdnZrOF5q");return S0(n,e,{merge:!0})}static \u0275fac=function(n){return new(n||t)};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})};var Fd=class t{static \u0275fac=function(n){return new(n||t)};static \u0275cmp=an({type:t,selectors:[["app-radial-tabs"]],decls:13,vars:0,consts:[[1,"wrap"],["href","#"],[1,"avatar"]],template:function(n,r){n&1&&(Pt(0,"div")(1,"div",0)(2,"a",1),mt(3,"div"),Et(),Pt(4,"a",1),mt(5,"div"),Et(),Pt(6,"a",1),mt(7,"div"),Et(),Pt(8,"a",1),mt(9,"div"),Et(),Pt(10,"a",1),mt(11,"div"),Et(),mt(12,"span",2),Et()())},styles:[".grid[_ngcontent-%COMP%]{position:fixed;inset:0}.wrap[_ngcontent-%COMP%]{--size-with: 80vmin;--size-height: 80vmin;position:absolute;left:50%;top:50%;width:var(--size-with);height:var(--size-height);background:inherit;transform-origin:center center;transform:translate(-50%,-50%) scale(.2);opacity:1;transition:transform .5s,opacity .5s;z-index:1}a[_ngcontent-%COMP%]{position:absolute;left:0;top:0;width:47.5%;height:47.5%;overflow:hidden;transform:scale(.5) translateZ(0);background:#585247}a[_ngcontent-%COMP%]:nth-child(1){border-radius:40vmin 0 0;transform-origin:110% 110%;transition:transform .4s .15s}a[_ngcontent-%COMP%]:nth-child(2){border-radius:0 40vmin 0 0;left:52.5%;transform-origin:-10% 110%;transition:transform .4s .2s}a[_ngcontent-%COMP%]:nth-child(3){border-radius:0 0 0 40vmin;top:52.5%;transform-origin:110% -10%;transition:transform .4s .25s}a[_ngcontent-%COMP%]:nth-child(4){border-radius:0 0 40vmin;top:52.5%;left:52.5%;transform-origin:-10% -10%;transition:transform .4s .3s}a[_ngcontent-%COMP%]:nth-child(5){width:55%;height:55%;left:22.5%;top:22.5%;border-radius:50vmin;box-shadow:0 0 0 5vmin #e3dfd2;transform:scale(1)}.wrap[_ngcontent-%COMP%] > .avatar[_ngcontent-%COMP%]{position:absolute;left:50%;top:50%;width:30vmin;height:30vmin;border-radius:50%;background-image:url(/assets/FotoPerfil.png);background-size:cover;background-position:center;background-repeat:no-repeat;transform-origin:center center;transform:translate(-50%,-50%) scale(1);transition:transform .5s;z-index:2;pointer-events:none}.wrap[_ngcontent-%COMP%]:hover{transform:translate(-50%,-50%) scale(.8);opacity:1}.wrap[_ngcontent-%COMP%]:hover   a[_ngcontent-%COMP%]{transform:scale(.8) translateZ(0)}a[_ngcontent-%COMP%]:hover   div[_ngcontent-%COMP%]{opacity:1;transform:translateZ(0)}span[_ngcontent-%COMP%]{all:unset}"]})};var Ld=class t{fireBaseService=k(Od);personalData=this.fireBaseService.getPersonalData();static \u0275fac=function(n){return new(n||t)};static \u0275cmp=an({type:t,selectors:[["app-home"]],decls:2,vars:0,template:function(n,r){n&1&&(Pt(0,"div"),mt(1,"app-radial-tabs"),Et())},dependencies:[no,Fd],encapsulation:2})};var Vd=class t{static \u0275fac=function(n){return new(n||t)};static \u0275cmp=an({type:t,selectors:[["app-notfound"]],decls:2,vars:0,template:function(n,r){n&1&&(Pt(0,"p"),aT(1,"notfound works!"),Et())},encapsulation:2})};var A0=[{path:"",redirectTo:"home",pathMatch:"full"},{path:"home",component:Ld},{path:"**",component:Vd}];var M0="@firebase/installations",mv="0.6.18";var P0=1e4,k0=`w:${mv}`,x0="FIS_v2",NU="https://firebaseinstallations.googleapis.com/v1",MU=60*60*1e3,PU="installations",kU="Installations";var xU={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Ti=new lt(PU,kU,xU);function O0(t){return t instanceof Ke&&t.code.includes("request-failed")}function F0({projectId:t}){return`${NU}/projects/${t}/installations`}function L0(t){return{token:t.token,requestStatus:2,expiresIn:FU(t.expiresIn),creationTime:Date.now()}}function V0(t,e){return v(this,null,function*(){let r=(yield e.json()).error;return Ti.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})})}function j0({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function OU(t,{refreshToken:e}){let n=j0(t);return n.append("Authorization",LU(e)),n}function U0(t){return v(this,null,function*(){let e=yield t();return e.status>=500&&e.status<600?t():e})}function FU(t){return Number(t.replace("s","000"))}function LU(t){return`${x0} ${t}`}function VU(r,i){return v(this,arguments,function*({appConfig:t,heartbeatServiceProvider:e},{fid:n}){let o=F0(t),s=j0(t),c=e.getImmediate({optional:!0});if(c){let p=yield c.getHeartbeatsHeader();p&&s.append("x-firebase-client",p)}let u={fid:n,authVersion:x0,appId:t.appId,sdkVersion:k0},l={method:"POST",headers:s,body:JSON.stringify(u)},f=yield U0(()=>fetch(o,l));if(f.ok){let p=yield f.json();return{fid:p.fid||n,registrationStatus:2,refreshToken:p.refreshToken,authToken:L0(p.authToken)}}else throw yield V0("Create Installation",f)})}function B0(t){return new Promise(e=>{setTimeout(e,t)})}function jU(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}var UU=/^[cdef][\w-]{21}$/,gv="";function BU(){try{let t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;let n=$U(t);return UU.test(n)?n:gv}catch{return gv}}function $U(t){return jU(t).substr(0,22)}function Ud(t){return`${t.appName}!${t.appId}`}var $0=new Map;function H0(t,e){let n=Ud(t);q0(n,e),HU(n,e)}function q0(t,e){let n=$0.get(t);if(n)for(let r of n)r(e)}function HU(t,e){let n=qU();n&&n.postMessage({key:t,fid:e}),zU()}var Ei=null;function qU(){return!Ei&&"BroadcastChannel"in self&&(Ei=new BroadcastChannel("[Firebase] FID Change"),Ei.onmessage=t=>{q0(t.data.key,t.data.fid)}),Ei}function zU(){$0.size===0&&Ei&&(Ei.close(),Ei=null)}var WU="firebase-installations-database",GU=1,Di="firebase-installations-store",fv=null;function yv(){return fv||(fv=vl(WU,GU,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Di)}}})),fv}function jd(t,e){return v(this,null,function*(){let n=Ud(t),i=(yield yv()).transaction(Di,"readwrite"),o=i.objectStore(Di),s=yield o.get(n);return yield o.put(e,n),yield i.done,(!s||s.fid!==e.fid)&&H0(t,e.fid),e})}function z0(t){return v(this,null,function*(){let e=Ud(t),r=(yield yv()).transaction(Di,"readwrite");yield r.objectStore(Di).delete(e),yield r.done})}function Bd(t,e){return v(this,null,function*(){let n=Ud(t),i=(yield yv()).transaction(Di,"readwrite"),o=i.objectStore(Di),s=yield o.get(n),c=e(s);return c===void 0?yield o.delete(n):yield o.put(c,n),yield i.done,c&&(!s||s.fid!==c.fid)&&H0(t,c.fid),c})}function vv(t){return v(this,null,function*(){let e,n=yield Bd(t.appConfig,r=>{let i=KU(r),o=QU(t,i);return e=o.registrationPromise,o.installationEntry});return n.fid===gv?{installationEntry:yield e}:{installationEntry:n,registrationPromise:e}})}function KU(t){let e=t||{fid:BU(),registrationStatus:0};return W0(e)}function QU(t,e){if(e.registrationStatus===0){if(!navigator.onLine){let i=Promise.reject(Ti.create("app-offline"));return{installationEntry:e,registrationPromise:i}}let n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=YU(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:ZU(t)}:{installationEntry:e}}function YU(t,e){return v(this,null,function*(){try{let n=yield VU(t,e);return jd(t.appConfig,n)}catch(n){throw O0(n)&&n.customData.serverCode===409?yield z0(t.appConfig):yield jd(t.appConfig,{fid:e.fid,registrationStatus:0}),n}})}function ZU(t){return v(this,null,function*(){let e=yield R0(t.appConfig);for(;e.registrationStatus===1;)yield B0(100),e=yield R0(t.appConfig);if(e.registrationStatus===0){let{installationEntry:n,registrationPromise:r}=yield vv(t);return r||n}return e})}function R0(t){return Bd(t,e=>{if(!e)throw Ti.create("installation-not-found");return W0(e)})}function W0(t){return JU(t)?{fid:t.fid,registrationStatus:0}:t}function JU(t){return t.registrationStatus===1&&t.registrationTime+P0<Date.now()}function XU(r,i){return v(this,arguments,function*({appConfig:t,heartbeatServiceProvider:e},n){let o=eB(t,n),s=OU(t,n),c=e.getImmediate({optional:!0});if(c){let p=yield c.getHeartbeatsHeader();p&&s.append("x-firebase-client",p)}let u={installation:{sdkVersion:k0,appId:t.appId}},l={method:"POST",headers:s,body:JSON.stringify(u)},f=yield U0(()=>fetch(o,l));if(f.ok){let p=yield f.json();return L0(p)}else throw yield V0("Generate Auth Token",f)})}function eB(t,{fid:e}){return`${F0(t)}/${e}/authTokens:generate`}function _v(t,e=!1){return v(this,null,function*(){let n,r=yield Bd(t.appConfig,o=>{if(!G0(o))throw Ti.create("not-registered");let s=o.authToken;if(!e&&rB(s))return o;if(s.requestStatus===1)return n=tB(t,e),o;{if(!navigator.onLine)throw Ti.create("app-offline");let c=oB(o);return n=nB(t,c),c}});return n?yield n:r.authToken})}function tB(t,e){return v(this,null,function*(){let n=yield N0(t.appConfig);for(;n.authToken.requestStatus===1;)yield B0(100),n=yield N0(t.appConfig);let r=n.authToken;return r.requestStatus===0?_v(t,e):r})}function N0(t){return Bd(t,e=>{if(!G0(e))throw Ti.create("not-registered");let n=e.authToken;return sB(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}function nB(t,e){return v(this,null,function*(){try{let n=yield XU(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return yield jd(t.appConfig,r),n}catch(n){if(O0(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))yield z0(t.appConfig);else{let r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});yield jd(t.appConfig,r)}throw n}})}function G0(t){return t!==void 0&&t.registrationStatus===2}function rB(t){return t.requestStatus===2&&!iB(t)}function iB(t){let e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+MU}function oB(t){let e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function sB(t){return t.requestStatus===1&&t.requestTime+P0<Date.now()}function aB(t){return v(this,null,function*(){let e=t,{installationEntry:n,registrationPromise:r}=yield vv(e);return r?r.catch(console.error):_v(e).catch(console.error),n.fid})}function cB(t,e=!1){return v(this,null,function*(){let n=t;return yield uB(n),(yield _v(n,e)).token})}function uB(t){return v(this,null,function*(){let{registrationPromise:e}=yield vv(t);e&&(yield e)})}function lB(t){if(!t||!t.options)throw pv("App Configuration");if(!t.name)throw pv("App Name");let e=["projectId","apiKey","appId"];for(let n of e)if(!t.options[n])throw pv(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function pv(t){return Ti.create("missing-app-config-values",{valueName:t})}var K0="installations",dB="installations-internal",hB=t=>{let e=t.getProvider("app").getImmediate(),n=lB(e),r=Ft(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},fB=t=>{let e=t.getProvider("app").getImmediate(),n=Ft(e,K0).getImmediate();return{getId:()=>aB(n),getToken:i=>cB(n,i)}};function pB(){Ye(new Re(K0,hB,"PUBLIC")),Ye(new Re(dB,fB,"PRIVATE"))}pB();fe(M0,mv);fe(M0,mv,"esm2017");var $d="analytics",gB="firebase_id",mB="origin",yB=60*1e3,vB="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Cv="https://www.googletagmanager.com/gtag/js";var vt=new Ot("@firebase/analytics");var _B={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Ct=new lt("analytics","Analytics",_B);function IB(t){if(!t.startsWith(Cv)){let e=Ct.create("invalid-gtag-resource",{gtagURL:t});return vt.warn(e.message),""}return t}function tA(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function wB(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function EB(t,e){let n=wB("firebase-js-sdk-policy",{createScriptURL:IB}),r=document.createElement("script"),i=`${Cv}?l=${t}&id=${e}`;r.src=n?n?.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function TB(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}function DB(t,e,n,r,i,o){return v(this,null,function*(){let s=r[i];try{if(s)yield e[s];else{let u=(yield tA(n)).find(l=>l.measurementId===i);u&&(yield e[u.appId])}}catch(c){vt.error(c)}t("config",i,o)})}function bB(t,e,n,r,i){return v(this,null,function*(){try{let o=[];if(i&&i.send_to){let s=i.send_to;Array.isArray(s)||(s=[s]);let c=yield tA(n);for(let u of s){let l=c.find(p=>p.measurementId===u),f=l&&e[l.appId];if(f)o.push(f);else{o=[];break}}}o.length===0&&(o=Object.values(e)),yield Promise.all(o),t("event",r,i||{})}catch(o){vt.error(o)}})}function CB(t,e,n,r){function i(o,...s){return v(this,null,function*(){try{if(o==="event"){let[c,u]=s;yield bB(t,e,n,c,u)}else if(o==="config"){let[c,u]=s;yield DB(t,e,n,r,c,u)}else if(o==="consent"){let[c,u]=s;t("consent",c,u)}else if(o==="get"){let[c,u,l]=s;t("get",c,u,l)}else if(o==="set"){let[c]=s;t("set",c)}else t(o,...s)}catch(c){vt.error(c)}})}return i}function SB(t,e,n,r,i){let o=function(...s){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(o=window[i]),window[i]=CB(o,t,e,n),{gtagCore:o,wrappedGtag:window[i]}}function AB(t){let e=window.document.getElementsByTagName("script");for(let n of Object.values(e))if(n.src&&n.src.includes(Cv)&&n.src.includes(t))return n;return null}var RB=30,NB=1e3,wv=class{constructor(e={},n=NB){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}},nA=new wv;function MB(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}function PB(t){return v(this,null,function*(){var e;let{appId:n,apiKey:r}=t,i={method:"GET",headers:MB(r)},o=vB.replace("{app-id}",n),s=yield fetch(o,i);if(s.status!==200&&s.status!==304){let c="";try{let u=yield s.json();!((e=u.error)===null||e===void 0)&&e.message&&(c=u.error.message)}catch{}throw Ct.create("config-fetch-failed",{httpStatus:s.status,responseMessage:c})}return s.json()})}function kB(r){return v(this,arguments,function*(t,e=nA,n){let{appId:i,apiKey:o,measurementId:s}=t.options;if(!i)throw Ct.create("no-app-id");if(!o){if(s)return{measurementId:s,appId:i};throw Ct.create("no-api-key")}let c=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},u=new Ev;return setTimeout(()=>v(null,null,function*(){u.abort()}),n!==void 0?n:yB),rA({appId:i,apiKey:o,measurementId:s},c,u,e)})}function rA(o,s,c){return v(this,arguments,function*(t,{throttleEndTimeMillis:e,backoffCount:n},r,i=nA){var u;let{appId:l,measurementId:f}=t;try{yield xB(r,e)}catch(p){if(f)return vt.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${f} provided in the "measurementId" field in the local Firebase config. [${p?.message}]`),{appId:l,measurementId:f};throw p}try{let p=yield PB(t);return i.deleteThrottleMetadata(l),p}catch(p){let m=p;if(!OB(m)){if(i.deleteThrottleMetadata(l),f)return vt.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${f} provided in the "measurementId" field in the local Firebase config. [${m?.message}]`),{appId:l,measurementId:f};throw p}let y=Number((u=m?.customData)===null||u===void 0?void 0:u.httpStatus)===503?gl(n,i.intervalMillis,RB):gl(n,i.intervalMillis),A={throttleEndTimeMillis:Date.now()+y,backoffCount:n+1};return i.setThrottleMetadata(l,A),vt.debug(`Calling attemptFetch again in ${y} millis`),rA(t,A,r,i)}})}function xB(t,e){return new Promise((n,r)=>{let i=Math.max(e-Date.now(),0),o=setTimeout(n,i);t.addEventListener(()=>{clearTimeout(o),r(Ct.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function OB(t){if(!(t instanceof Ke)||!t.customData)return!1;let e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}var Ev=class{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}};var Tv;function FB(t,e,n,r,i){return v(this,null,function*(){if(i&&i.global){t("event",n,r);return}else{let o=yield e,s=Object.assign(Object.assign({},r),{send_to:o});t("event",n,s)}})}var Dv;function LB(t){Dv=t}function VB(t){Tv=t}function jB(){return v(this,null,function*(){if(ei())try{yield pl()}catch(t){return vt.warn(Ct.create("indexeddb-unavailable",{errorInfo:t?.toString()}).message),!1}else return vt.warn(Ct.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0})}function UB(t,e,n,r,i,o,s){return v(this,null,function*(){var c;let u=kB(t);u.then(y=>{n[y.measurementId]=y.appId,t.options.measurementId&&y.measurementId!==t.options.measurementId&&vt.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${y.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(y=>vt.error(y)),e.push(u);let l=jB().then(y=>{if(y)return r.getId()}),[f,p]=yield Promise.all([u,l]);AB(o)||EB(o,f.measurementId),Dv&&(i("consent","default",Dv),LB(void 0)),i("js",new Date);let m=(c=s?.config)!==null&&c!==void 0?c:{};return m[mB]="firebase",m.update=!0,p!=null&&(m[gB]=p),i("config",f.measurementId,m),Tv&&(i("set",Tv),VB(void 0)),f.measurementId})}var bv=class{constructor(e){this.app=e}_delete(){return delete ja[this.app.options.appId],Promise.resolve()}},ja={},Q0=[],Y0={},Iv="dataLayer",BB="gtag",Z0,iA,J0=!1;function $B(){let t=[];if(fl()&&t.push("This is a browser extension environment."),kD()||t.push("Cookies are not available."),t.length>0){let e=t.map((r,i)=>`(${i+1}) ${r}`).join(" "),n=Ct.create("invalid-analytics-context",{errorInfo:e});vt.warn(n.message)}}function HB(t,e,n){$B();let r=t.options.appId;if(!r)throw Ct.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)vt.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Ct.create("no-api-key");if(ja[r]!=null)throw Ct.create("already-exists",{id:r});if(!J0){TB(Iv);let{wrappedGtag:o,gtagCore:s}=SB(ja,Q0,Y0,Iv,BB);iA=o,Z0=s,J0=!0}return ja[r]=UB(t,Q0,Y0,e,Z0,Iv,n),new bv(t)}function oA(t=hn()){t=Qe(t);let e=Ft(t,$d);return e.isInitialized()?e.getImmediate():sA(t)}function sA(t,e={}){let n=Ft(t,$d);if(n.isInitialized()){let i=n.getImmediate();if(xt(e,n.getOptions()))return i;throw Ct.create("already-initialized")}return n.initialize({options:e})}function aA(t,e,n,r){t=Qe(t),FB(iA,ja[t.app.options.appId],e,n,r).catch(i=>vt.error(i))}var X0="@firebase/analytics",eA="0.10.17";function qB(){Ye(new Re($d,(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return HB(r,i,n)},"PUBLIC")),Ye(new Re("analytics-internal",t,"PRIVATE")),fe(X0,eA),fe(X0,eA,"esm2017");function t(e){try{let n=e.getProvider($d).getImmediate();return{logEvent:(r,i,o)=>aA(n,r,i,o)}}catch(n){throw Ct.create("interop-component-reg-failed",{reason:n})}}}qB();var Ua=class{constructor(e){return e}},cA="analytics",Sv=class{constructor(){return gr(cA)}};var uA=Vt(oA,!0);var GQ=Math.floor(Math.random()*(2**32-1))-2**31;var Av=new j("angularfire2.analytics-instances");function zB(t,e,n){if(!Su(n))return null;let r=ri(cA,t,e);return r&&new Ua(r)}function WB(t){return(e,n,r)=>{if(!Su(r))return null;let i=e.runOutsideAngular(()=>t(n));return new Ua(i)}}var GB={provide:Sv,deps:[[new ct,Av]]},KB={provide:Ua,useFactory:zB,deps:[[new ct,Av],Qt,sn]};function lA(t,...e){return fe("angularfire",fn.full,"analytics"),Wt([KB,GB,{provide:Av,useFactory:WB(t),multi:!0,deps:[he,je,sn,pn,On,...e]}])}var dA={production:!1,firebaseConfig:{apiKey:"AIzaSyBF38aXP_jKP6WBKJp78cZGjGmpwvLt_j8",authDomain:"cv-web-angular.firebaseapp.com",projectId:"cv-web-angular",storageBucket:"cv-web-angular.firebasestorage.app",messagingSenderId:"119785680877",appId:"1:119785680877:web:27a7c5644fddd90876c1e4",measurementId:"G-0QL3DQG5NC"}};fp(al,{providers:[Lp(A0),dT({eventCoalescing:!0}),ZD(()=>JD(dA.firebaseConfig)),D0(()=>C0()),Zb(()=>Jb()),lA(()=>uA())]}).catch(t=>console.error(t));
