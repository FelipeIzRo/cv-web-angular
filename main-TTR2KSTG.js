var uP=Object.defineProperty,lP=Object.defineProperties;var dP=Object.getOwnPropertyDescriptors;var vE=Object.getOwnPropertySymbols,hP=Object.getPrototypeOf,fP=Object.prototype.hasOwnProperty,pP=Object.prototype.propertyIsEnumerable,gP=Reflect.get;var _E=(t,e,n)=>e in t?uP(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,O=(t,e)=>{for(var n in e||={})fP.call(e,n)&&_E(t,n,e[n]);if(vE)for(var n of vE(e))pP.call(e,n)&&_E(t,n,e[n]);return t},re=(t,e)=>lP(t,dP(e));var wr=(t,e,n)=>gP(hP(t),n,e);var v=(t,e,n)=>new Promise((r,i)=>{var o=u=>{try{a(n.next(u))}catch(l){i(l)}},s=u=>{try{a(n.throw(u))}catch(l){i(l)}},a=u=>u.done?r(u.value):Promise.resolve(u.value).then(o,s);a((n=n.apply(t,e)).next())});function cp(t,e){return Object.is(t,e)}var Ke=null,gu=!1,up=1,qt=Symbol("SIGNAL");function le(t){let e=Ke;return Ke=t,e}function lp(){return Ke}var aa={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function ca(t){if(gu)throw new Error("");if(Ke===null)return;Ke.consumerOnSignalRead(t);let e=Ke.nextProducerIndex++;if(_u(Ke),e<Ke.producerNode.length&&Ke.producerNode[e]!==t&&sa(Ke)){let n=Ke.producerNode[e];vu(n,Ke.producerIndexOfThis[e])}Ke.producerNode[e]!==t&&(Ke.producerNode[e]=t,Ke.producerIndexOfThis[e]=sa(Ke)?wE(t,Ke,e):0),Ke.producerLastReadVersion[e]=t.version}function IE(){up++}function dp(t){if(!(sa(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===up)){if(!t.producerMustRecompute(t)&&!gp(t)){ap(t);return}t.producerRecomputeValue(t),ap(t)}}function hp(t){if(t.liveConsumerNode===void 0)return;let e=gu;gu=!0;try{for(let n of t.liveConsumerNode)n.dirty||mP(n)}finally{gu=e}}function fp(){return Ke?.consumerAllowSignalWrites!==!1}function mP(t){t.dirty=!0,hp(t),t.consumerMarkedDirty?.(t)}function ap(t){t.dirty=!1,t.lastCleanEpoch=up}function yu(t){return t&&(t.nextProducerIndex=0),le(t)}function pp(t,e){if(le(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(sa(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)vu(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function gp(t){_u(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(dp(n),r!==n.version))return!0}return!1}function mp(t){if(_u(t),sa(t))for(let e=0;e<t.producerNode.length;e++)vu(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function wE(t,e,n){if(EE(t),t.liveConsumerNode.length===0&&bE(t))for(let r=0;r<t.producerNode.length;r++)t.producerIndexOfThis[r]=wE(t.producerNode[r],t,r);return t.liveConsumerIndexOfThis.push(n),t.liveConsumerNode.push(e)-1}function vu(t,e){if(EE(t),t.liveConsumerNode.length===1&&bE(t))for(let r=0;r<t.producerNode.length;r++)vu(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];_u(i),i.producerIndexOfThis[r]=e}}function sa(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function _u(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function EE(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function bE(t){return t.producerNode!==void 0}function yp(t,e){let n=Object.create(yP);n.computation=t,e!==void 0&&(n.equal=e);let r=()=>{if(dp(n),ca(n),n.value===mu)throw n.error;return n.value};return r[qt]=n,r}var op=Symbol("UNSET"),sp=Symbol("COMPUTING"),mu=Symbol("ERRORED"),yP=re(O({},aa),{value:op,dirty:!0,error:null,equal:cp,kind:"computed",producerMustRecompute(t){return t.value===op||t.value===sp},producerRecomputeValue(t){if(t.value===sp)throw new Error("Detected cycle in computations.");let e=t.value;t.value=sp;let n=yu(t),r,i=!1;try{r=t.computation(),le(null),i=e!==op&&e!==mu&&r!==mu&&t.equal(e,r)}catch(o){r=mu,t.error=o}finally{pp(t,n)}if(i){t.value=e;return}t.value=r,t.version++}});function vP(){throw new Error}var DE=vP;function TE(t){DE(t)}function vp(t){DE=t}var _P=null;function _p(t,e){let n=Object.create(Iu);n.value=t,e!==void 0&&(n.equal=e);let r=()=>(ca(n),n.value);return r[qt]=n,r}function ua(t,e){fp()||TE(t),t.equal(t.value,e)||(t.value=e,IP(t))}function Ip(t,e){fp()||TE(t),ua(t,e(t.value))}var Iu=re(O({},aa),{equal:cp,value:void 0,kind:"signal"});function IP(t){t.version++,IE(),hp(t),_P?.()}function wp(t){let e=le(null);try{return t()}finally{le(e)}}var Ep;function la(){return Ep}function Wn(t){let e=Ep;return Ep=t,e}var wu=Symbol("NotFound");function Z(t){return typeof t=="function"}function uo(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Eu=uo(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function ai(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Oe=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(Z(r))try{r()}catch(o){e=o instanceof Eu?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{CE(o)}catch(s){e=e??[],s instanceof Eu?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Eu(e)}}add(e){var n;if(e&&e!==this)if(this.closed)CE(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&ai(n,e)}remove(e){let{_finalizers:n}=this;n&&ai(n,e),e instanceof t&&e._removeParent(this)}};Oe.EMPTY=(()=>{let t=new Oe;return t.closed=!0,t})();var bp=Oe.EMPTY;function bu(t){return t instanceof Oe||t&&"closed"in t&&Z(t.remove)&&Z(t.add)&&Z(t.unsubscribe)}function CE(t){Z(t)?t():t.unsubscribe()}var sn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var lo={setTimeout(t,e,...n){let{delegate:r}=lo;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=lo;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Du(t){lo.setTimeout(()=>{let{onUnhandledError:e}=sn;if(e)e(t);else throw t})}function da(){}var SE=Dp("C",void 0,void 0);function AE(t){return Dp("E",void 0,t)}function RE(t){return Dp("N",t,void 0)}function Dp(t,e,n){return{kind:t,value:e,error:n}}var ci=null;function ho(t){if(sn.useDeprecatedSynchronousErrorHandling){let e=!ci;if(e&&(ci={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=ci;if(ci=null,n)throw r}}else t()}function ME(t){sn.useDeprecatedSynchronousErrorHandling&&ci&&(ci.errorThrown=!0,ci.error=t)}var ui=class extends Oe{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,bu(e)&&e.add(this)):this.destination=CP}static create(e,n,r){return new fo(e,n,r)}next(e){this.isStopped?Cp(RE(e),this):this._next(e)}error(e){this.isStopped?Cp(AE(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Cp(SE,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},DP=Function.prototype.bind;function Tp(t,e){return DP.call(t,e)}var Sp=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Tu(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Tu(r)}else Tu(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Tu(n)}}},fo=class extends ui{constructor(e,n,r){super();let i;if(Z(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&sn.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Tp(e.next,o),error:e.error&&Tp(e.error,o),complete:e.complete&&Tp(e.complete,o)}):i=e}this.destination=new Sp(i)}};function Tu(t){sn.useDeprecatedSynchronousErrorHandling?ME(t):Du(t)}function TP(t){throw t}function Cp(t,e){let{onStoppedNotification:n}=sn;n&&lo.setTimeout(()=>n(t,e))}var CP={closed:!0,next:da,error:TP,complete:da};var po=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Vt(t){return t}function Cu(...t){return Ap(t)}function Ap(t){return t.length===0?Vt:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var se=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=AP(n)?n:new fo(n,r,i);return ho(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=NE(r),new r((i,o)=>{let s=new fo({next:a=>{try{n(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[po](){return this}pipe(...n){return Ap(n)(this)}toPromise(n){return n=NE(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function NE(t){var e;return(e=t??sn.Promise)!==null&&e!==void 0?e:Promise}function SP(t){return t&&Z(t.next)&&Z(t.error)&&Z(t.complete)}function AP(t){return t&&t instanceof ui||SP(t)&&bu(t)}function Rp(t){return Z(t?.lift)}function fe(t){return e=>{if(Rp(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function de(t,e,n,r,i){return new Mp(t,e,n,r,i)}var Mp=class extends ui{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function go(){return fe((t,e)=>{let n=null;t._refCount++;let r=de(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var mo=class extends se{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Rp(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Oe;let n=this.getSubject();e.add(this.source.subscribe(de(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Oe.EMPTY)}return e}refCount(){return go()(this)}};var PE=uo(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Qe=(()=>{class t extends se{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Su(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new PE}next(n){ho(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){ho(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){ho(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?bp:(this.currentObservers=null,o.push(n),new Oe(()=>{this.currentObservers=null,ai(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new se;return n.source=this,n}}return t.create=(e,n)=>new Su(e,n),t})(),Su=class extends Qe{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:bp}};var at=class extends Qe{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Np={now(){return(Np.delegate||Date).now()},delegate:void 0};var Au=class extends Oe{constructor(e,n){super()}schedule(e,n=0){return this}};var ha={setInterval(t,e,...n){let{delegate:r}=ha;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=ha;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var yo=class extends Au{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,n),this}requestAsyncId(e,n,r=0){return ha.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&ha.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,ai(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var vo=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};vo.now=Np.now;var _o=class extends vo{constructor(e,n=vo.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var Pp=new _o(yo);var Ru=class extends yo{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var Mu=class extends _o{};var xp=new Mu(Ru);var St=new se(t=>t.complete());function xE(t){return t&&Z(t.schedule)}function kE(t){return t[t.length-1]}function Nu(t){return Z(kE(t))?t.pop():void 0}function Er(t){return xE(kE(t))?t.pop():void 0}function kp(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function FE(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(h){try{l(r.next(h))}catch(p){s(p)}}function u(h){try{l(r.throw(h))}catch(p){s(p)}}function l(h){h.done?o(h.value):i(h.value).then(a,u)}l((r=r.apply(t,e||[])).next())})}function OE(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function li(t){return this instanceof li?(this.v=t,this):new li(t)}function VE(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(y){return function(T){return Promise.resolve(T).then(y,p)}}function a(y,T){r[y]&&(i[y]=function(M){return new Promise(function(R,V){o.push([y,M,R,V])>1||u(y,M)})},T&&(i[y]=T(i[y])))}function u(y,T){try{l(r[y](T))}catch(M){m(o[0][3],M)}}function l(y){y.value instanceof li?Promise.resolve(y.value.v).then(h,p):m(o[0][2],y)}function h(y){u("next",y)}function p(y){u("throw",y)}function m(y,T){y(T),o.shift(),o.length&&u(o[0][0],o[0][1])}}function LE(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof OE=="function"?OE(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(a,u){s=t[o](s),i(a,u,s.done,s.value)})}}function i(o,s,a,u){Promise.resolve(u).then(function(l){o({value:l,done:a})},s)}}var Pu=t=>t&&typeof t.length=="number"&&typeof t!="function";function xu(t){return Z(t?.then)}function ku(t){return Z(t[po])}function Ou(t){return Symbol.asyncIterator&&Z(t?.[Symbol.asyncIterator])}function Fu(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function RP(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Vu=RP();function Lu(t){return Z(t?.[Vu])}function ju(t){return VE(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield li(n.read());if(i)return yield li(void 0);yield yield li(r)}}finally{n.releaseLock()}})}function Uu(t){return Z(t?.getReader)}function Be(t){if(t instanceof se)return t;if(t!=null){if(ku(t))return MP(t);if(Pu(t))return NP(t);if(xu(t))return PP(t);if(Ou(t))return jE(t);if(Lu(t))return xP(t);if(Uu(t))return kP(t)}throw Fu(t)}function MP(t){return new se(e=>{let n=t[po]();if(Z(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function NP(t){return new se(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function PP(t){return new se(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Du)})}function xP(t){return new se(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function jE(t){return new se(e=>{OP(t,e).catch(n=>e.error(n))})}function kP(t){return jE(ju(t))}function OP(t,e){var n,r,i,o;return FE(this,void 0,void 0,function*(){try{for(n=LE(t);r=yield n.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})}function At(t,e,n,r=0,i=!1){let o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function br(t,e=0){return fe((n,r)=>{n.subscribe(de(r,i=>At(r,t,()=>r.next(i),e),()=>At(r,t,()=>r.complete(),e),i=>At(r,t,()=>r.error(i),e)))})}function Dr(t,e=0){return fe((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function UE(t,e){return Be(t).pipe(Dr(e),br(e))}function BE(t,e){return Be(t).pipe(Dr(e),br(e))}function $E(t,e){return new se(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function HE(t,e){return new se(n=>{let r;return At(n,e,()=>{r=t[Vu](),At(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>Z(r?.return)&&r.return()})}function Bu(t,e){if(!t)throw new Error("Iterable cannot be null");return new se(n=>{At(n,e,()=>{let r=t[Symbol.asyncIterator]();At(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function zE(t,e){return Bu(ju(t),e)}function qE(t,e){if(t!=null){if(ku(t))return UE(t,e);if(Pu(t))return $E(t,e);if(xu(t))return BE(t,e);if(Ou(t))return Bu(t,e);if(Lu(t))return HE(t,e);if(Uu(t))return zE(t,e)}throw Fu(t)}function xe(t,e){return e?qE(t,e):Be(t)}function Q(...t){let e=Er(t);return xe(t,e)}function Io(t,e){let n=Z(t)?t:()=>t,r=i=>i.error(n());return new se(e?i=>e.schedule(r,0,i):r)}function Op(t){return!!t&&(t instanceof se||Z(t.lift)&&Z(t.subscribe))}var Kn=uo(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function ce(t,e){return fe((n,r)=>{let i=0;n.subscribe(de(r,o=>{r.next(t.call(e,o,i++))}))})}var{isArray:FP}=Array;function VP(t,e){return FP(e)?t(...e):t(e)}function $u(t){return ce(e=>VP(t,e))}var{isArray:LP}=Array,{getPrototypeOf:jP,prototype:UP,keys:BP}=Object;function Hu(t){if(t.length===1){let e=t[0];if(LP(e))return{args:e,keys:null};if($P(e)){let n=BP(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function $P(t){return t&&typeof t=="object"&&jP(t)===UP}function zu(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function qu(...t){let e=Er(t),n=Nu(t),{args:r,keys:i}=Hu(t);if(r.length===0)return xe([],e);let o=new se(HP(r,e,i?s=>zu(i,s):Vt));return n?o.pipe($u(n)):o}function HP(t,e,n=Vt){return r=>{GE(e,()=>{let{length:i}=t,o=new Array(i),s=i,a=i;for(let u=0;u<i;u++)GE(e,()=>{let l=xe(t[u],e),h=!1;l.subscribe(de(r,p=>{o[u]=p,h||(h=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function GE(t,e,n){t?At(n,t,e):e()}function WE(t,e,n,r,i,o,s,a){let u=[],l=0,h=0,p=!1,m=()=>{p&&!u.length&&!l&&e.complete()},y=M=>l<r?T(M):u.push(M),T=M=>{o&&e.next(M),l++;let R=!1;Be(n(M,h++)).subscribe(de(e,V=>{i?.(V),o?y(V):e.next(V)},()=>{R=!0},void 0,()=>{if(R)try{for(l--;u.length&&l<r;){let V=u.shift();s?At(e,s,()=>T(V)):T(V)}m()}catch(V){e.error(V)}}))};return t.subscribe(de(e,y,()=>{p=!0,m()})),()=>{a?.()}}function Ye(t,e,n=1/0){return Z(e)?Ye((r,i)=>ce((o,s)=>e(r,o,i,s))(Be(t(r,i))),n):(typeof e=="number"&&(n=e),fe((r,i)=>WE(r,i,t,n)))}function KE(t=1/0){return Ye(Vt,t)}function QE(){return KE(1)}function wo(...t){return QE()(xe(t,Er(t)))}function Gu(t){return new se(e=>{Be(t()).subscribe(e)})}function Fp(...t){let e=Nu(t),{args:n,keys:r}=Hu(t),i=new se(o=>{let{length:s}=n;if(!s){o.complete();return}let a=new Array(s),u=s,l=s;for(let h=0;h<s;h++){let p=!1;Be(n[h]).subscribe(de(o,m=>{p||(p=!0,l--),a[h]=m},()=>u--,void 0,()=>{(!u||!p)&&(l||o.next(r?zu(r,a):a),o.complete())}))}});return e?i.pipe($u(e)):i}function Gt(t,e){return fe((n,r)=>{let i=0;n.subscribe(de(r,o=>t.call(e,o,i++)&&r.next(o)))})}function Tr(t){return fe((e,n)=>{let r=null,i=!1,o;r=e.subscribe(de(n,void 0,void 0,s=>{o=Be(t(s,Tr(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function YE(t,e,n,r,i){return(o,s)=>{let a=n,u=e,l=0;o.subscribe(de(s,h=>{let p=l++;u=a?t(u,h,p):(a=!0,h),r&&s.next(u)},i&&(()=>{a&&s.next(u),s.complete()})))}}function Eo(t,e){return Z(e)?Ye(t,e,1):Ye(t,1)}function Cr(t){return fe((e,n)=>{let r=!1;e.subscribe(de(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function Qn(t){return t<=0?()=>St:fe((e,n)=>{let r=0;e.subscribe(de(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function Wu(t=zP){return fe((e,n)=>{let r=!1;e.subscribe(de(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function zP(){return new Kn}function fa(t){return fe((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function Yn(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Gt((i,o)=>t(i,o,r)):Vt,Qn(1),n?Cr(e):Wu(()=>new Kn))}function bo(t){return t<=0?()=>St:fe((e,n)=>{let r=[];e.subscribe(de(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function Vp(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Gt((i,o)=>t(i,o,r)):Vt,bo(1),n?Cr(e):Wu(()=>new Kn))}function Ku(t,e){return fe(YE(t,e,arguments.length>=2,!0))}function Qu(...t){let e=Er(t);return fe((n,r)=>{(e?wo(t,n,e):wo(t,n)).subscribe(r)})}function an(t,e){return fe((n,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();n.subscribe(de(r,u=>{i?.unsubscribe();let l=0,h=o++;Be(t(u,h)).subscribe(i=de(r,p=>r.next(e?e(u,p,h,l++):p),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Lp(t){return fe((e,n)=>{Be(t).subscribe(de(n,()=>n.complete(),da)),!n.closed&&e.subscribe(n)})}function ct(t,e,n){let r=Z(t)||e||n?{next:t,error:e,complete:n}:t;return r?fe((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(de(o,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),o.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),o.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):Vt}var qP="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",U=class extends Error{code;constructor(e,n){super(WP(e,n)),this.code=e}};function GP(t){return`NG0${Math.abs(t)}`}function WP(t,e){return`${GP(t)}${e?": "+e:""}`}var jb=Symbol("InputSignalNode#UNSET"),KP=re(O({},Iu),{transformFn:void 0,applyValueToInputSignal(t,e){ua(t,e)}});function Ub(t,e){let n=Object.create(KP);n.value=t,n.transformFn=e?.transform;function r(){if(ca(n),n.value===jb){let i=null;throw new U(-950,i)}return n.value}return r[qt]=n,r}function Da(t){return{toString:t}.toString()}var Yu="__parameters__";function QP(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function Bb(t,e,n){return Da(()=>{let r=QP(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(u,l,h){let p=u.hasOwnProperty(Yu)?u[Yu]:Object.defineProperty(u,Yu,{value:[]})[Yu];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(s),u}}return i.prototype.ngMetadataName=t,i.annotationCls=i,i})}function Te(t){for(let e in t)if(t[e]===Te)return e;throw Error("Could not find renamed property on target object.")}function YP(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function Rt(t){if(typeof t=="string")return t;if(Array.isArray(t))return`[${t.map(Rt).join(", ")}]`;if(t==null)return""+t;let e=t.overriddenName||t.name;if(e)return`${e}`;let n=t.toString();if(n==null)return""+n;let r=n.indexOf(`
`);return r>=0?n.slice(0,r):n}function ZE(t,e){return t?e?`${t} ${e}`:t:e||""}var ZP=Te({__forward_ref__:Te});function Ta(t){return t.__forward_ref__=Ta,t.toString=function(){return Rt(this())},t}function bt(t){return $b(t)?t():t}function $b(t){return typeof t=="function"&&t.hasOwnProperty(ZP)&&t.__forward_ref__===Ta}function $(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Ii(t){return{providers:t.providers||[],imports:t.imports||[]}}function Rl(t){return JE(t,zb)||JE(t,qb)}function Hb(t){return Rl(t)!==null}function JE(t,e){return t.hasOwnProperty(e)?t[e]:null}function JP(t){let e=t&&(t[zb]||t[qb]);return e||null}function XE(t){return t&&(t.hasOwnProperty(eb)||t.hasOwnProperty(XP))?t[eb]:null}var zb=Te({\u0275prov:Te}),eb=Te({\u0275inj:Te}),qb=Te({ngInjectableDef:Te}),XP=Te({ngInjectorDef:Te}),L=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,n){this._desc=e,this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=$({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Gb(t){return t&&!!t.\u0275providers}var ex=Te({\u0275cmp:Te}),tx=Te({\u0275dir:Te}),nx=Te({\u0275pipe:Te}),rx=Te({\u0275mod:Te}),rl=Te({\u0275fac:Te}),ya=Te({__NG_ELEMENT_ID__:Te}),tb=Te({__NG_ENV_ID__:Te});function il(t){return typeof t=="string"?t:t==null?"":String(t)}function ix(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():il(t)}function Wb(t,e){throw new U(-200,t)}function zg(t,e){throw new U(-201,!1)}var te=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(te||{}),Xp;function Kb(){return Xp}function Wt(t){let e=Xp;return Xp=t,e}function Qb(t,e,n){let r=Rl(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&te.Optional)return null;if(e!==void 0)return e;zg(t,"Injector")}var ox={},di=ox,eg="__NG_DI_FLAG__",ol=class{injector;constructor(e){this.injector=e}retrieve(e,n){let r=n;return this.injector.get(e,r.optional?wu:di,r)}},sl="ngTempTokenPath",sx="ngTokenPath",ax=/\n/gm,cx="\u0275",nb="__source";function ux(t,e=te.Default){if(la()===void 0)throw new U(-203,!1);if(la()===null)return Qb(t,void 0,e);{let n=la(),r;return n instanceof ol?r=n.injector:r=n,r.get(t,e&te.Optional?null:void 0,e)}}function ie(t,e=te.Default){return(Kb()||ux)(bt(t),e)}function x(t,e=te.Default){return ie(t,Ml(e))}function Ml(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function tg(t){let e=[];for(let n=0;n<t.length;n++){let r=bt(t[n]);if(Array.isArray(r)){if(r.length===0)throw new U(900,!1);let i,o=te.Default;for(let s=0;s<r.length;s++){let a=r[s],u=lx(a);typeof u=="number"?u===-1?i=a.token:o|=u:i=a}e.push(ie(i,o))}else e.push(ie(r))}return e}function Yb(t,e){return t[eg]=e,t.prototype[eg]=e,t}function lx(t){return t[eg]}function dx(t,e,n,r){let i=t[sl];throw e[nb]&&i.unshift(e[nb]),t.message=hx(`
`+t.message,i,n,r),t[sx]=i,t[sl]=null,t}function hx(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==cx?t.slice(2):t;let i=Rt(e);if(Array.isArray(e))i=e.map(Rt).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):Rt(a)))}i=`{${o.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(ax,`
  `)}`}var ut=Yb(Bb("Optional"),8);var Zb=Yb(Bb("SkipSelf"),4);function Ao(t,e){let n=t.hasOwnProperty(rl);return n?t[rl]:null}function qg(t,e){t.forEach(n=>Array.isArray(n)?qg(n,e):e(n))}function Jb(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function al(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function fx(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let o=i-2;t[i]=t[o],i--}t[e]=n,t[e+1]=r}}function px(t,e,n){let r=Ca(t,e);return r>=0?t[r|1]=n:(r=~r,fx(t,r,e,n)),r}function jp(t,e){let n=Ca(t,e);if(n>=0)return t[n|1]}function Ca(t,e){return gx(t,e,1)}function gx(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let o=r+(i-r>>1),s=t[o<<n];if(e===s)return o<<n;s>e?i=o:r=o+1}return~(i<<n)}var fi={},Kt=[],va=new L(""),Xb=new L("",-1),eD=new L(""),cl=class{get(e,n=di){if(n===di){let r=new Error(`NullInjectorError: No provider for ${Rt(e)}!`);throw r.name="NullInjectorError",r}return n}};function tD(t,e){let n=t[rx]||null;if(!n&&e===!0)throw new Error(`Type ${Rt(t)} does not have '\u0275mod' property.`);return n}function Ro(t){return t[ex]||null}function mx(t){return t[tx]||null}function yx(t){return t[nx]||null}function ln(t){return{\u0275providers:t}}function vx(...t){return{\u0275providers:nD(!0,t),\u0275fromNgModule:!0}}function nD(t,...e){let n=[],r=new Set,i,o=s=>{n.push(s)};return qg(e,s=>{let a=s;ng(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&rD(i,o),n}function rD(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];Gg(i,o=>{e(o,r)})}}function ng(t,e,n,r){if(t=bt(t),!t)return!1;let i=null,o=XE(t),s=!o&&Ro(t);if(!o&&!s){let u=t.ngModule;if(o=XE(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=t}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of u)ng(l,e,n,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{qg(o.imports,h=>{ng(h,e,n,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&rD(l,e)}if(!a){let l=Ao(i)||(()=>new i);e({provide:i,useFactory:l,deps:Kt},i),e({provide:eD,useValue:i,multi:!0},i),e({provide:va,useValue:()=>ie(i),multi:!0},i)}let u=o.providers;if(u!=null&&!a){let l=t;Gg(u,h=>{e(h,l)})}}else return!1;return i!==t&&t.providers!==void 0}function Gg(t,e){for(let n of t)Gb(n)&&(n=n.\u0275providers),Array.isArray(n)?Gg(n,e):e(n)}var _x=Te({provide:String,useValue:Te});function iD(t){return t!==null&&typeof t=="object"&&_x in t}function Ix(t){return!!(t&&t.useExisting)}function wx(t){return!!(t&&t.useFactory)}function Mo(t){return typeof t=="function"}function Ex(t){return!!t.useClass}var Nl=new L(""),Ju={},rb={},Up;function Wg(){return Up===void 0&&(Up=new cl),Up}var Mt=class{},_a=class extends Mt{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,ig(e,s=>this.processProvider(s)),this.records.set(Xb,Do(void 0,this)),i.has("environment")&&this.records.set(Mt,Do(void 0,this));let o=this.records.get(Nl);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(eD,Kt,te.Self))}retrieve(e,n){let r=n;return this.get(e,r.optional?wu:di,r)}destroy(){ga(this),this._destroyed=!0;let e=le(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),le(e)}}onDestroy(e){return ga(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){ga(this);let n=Wn(this),r=Wt(void 0),i;try{return e()}finally{Wn(n),Wt(r)}}get(e,n=di,r=te.Default){if(ga(this),e.hasOwnProperty(tb))return e[tb](this);r=Ml(r);let i,o=Wn(this),s=Wt(void 0);try{if(!(r&te.SkipSelf)){let u=this.records.get(e);if(u===void 0){let l=Sx(e)&&Rl(e);l&&this.injectableDefInScope(l)?u=Do(rg(e),Ju):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u,r)}let a=r&te.Self?Wg():this.parent;return n=r&te.Optional&&n===di?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[sl]=a[sl]||[]).unshift(Rt(e)),o)throw a;return dx(a,e,"R3InjectorError",this.source)}else throw a}finally{Wt(s),Wn(o)}}resolveInjectorInitializers(){let e=le(null),n=Wn(this),r=Wt(void 0),i;try{let o=this.get(va,Kt,te.Self);for(let s of o)s()}finally{Wn(n),Wt(r),le(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(Rt(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=bt(e);let n=Mo(e)?e:bt(e&&e.provide),r=Dx(e);if(!Mo(e)&&e.multi===!0){let i=this.records.get(n);i||(i=Do(void 0,Ju,!0),i.factory=()=>tg(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n,r){let i=le(null);try{return n.value===rb?Wb(Rt(e)):n.value===Ju&&(n.value=rb,n.value=n.factory(void 0,r)),typeof n.value=="object"&&n.value&&Cx(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{le(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=bt(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function rg(t){let e=Rl(t),n=e!==null?e.factory:Ao(t);if(n!==null)return n;if(t instanceof L)throw new U(204,!1);if(t instanceof Function)return bx(t);throw new U(204,!1)}function bx(t){if(t.length>0)throw new U(204,!1);let n=JP(t);return n!==null?()=>n.factory(t):()=>new t}function Dx(t){if(iD(t))return Do(void 0,t.useValue);{let e=oD(t);return Do(e,Ju)}}function oD(t,e,n){let r;if(Mo(t)){let i=bt(t);return Ao(i)||rg(i)}else if(iD(t))r=()=>bt(t.useValue);else if(wx(t))r=()=>t.useFactory(...tg(t.deps||[]));else if(Ix(t))r=(i,o)=>ie(bt(t.useExisting),o!==void 0&&o&te.Optional?te.Optional:void 0);else{let i=bt(t&&(t.useClass||t.provide));if(Tx(t))r=()=>new i(...tg(t.deps));else return Ao(i)||rg(i)}return r}function ga(t){if(t.destroyed)throw new U(205,!1)}function Do(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function Tx(t){return!!t.deps}function Cx(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function Sx(t){return typeof t=="function"||typeof t=="object"&&t instanceof L}function ig(t,e){for(let n of t)Array.isArray(n)?ig(n,e):n&&Gb(n)?ig(n.\u0275providers,e):e(n)}function Tt(t,e){let n;t instanceof _a?(ga(t),n=t):n=new ol(t);let r,i=Wn(n),o=Wt(void 0);try{return e()}finally{Wn(i),Wt(o)}}function sD(){return Kb()!==void 0||la()!=null}function aD(t){if(!sD())throw new U(-203,!1)}function Ax(t){return typeof t=="function"}var Jn=0,pe=1,X=2,Dt=3,un=4,dn=5,ul=6,ll=7,Nt=8,No=9,Rr=10,Ze=11,Ia=12,ib=13,$o=14,_n=15,Po=16,To=17,xo=18,Pl=19,cD=20,Sr=21,Bp=22,dl=23,Qt=24,$p=25,In=26,uD=1;var pi=7,hl=8,fl=9,Yt=10;function Ar(t){return Array.isArray(t)&&typeof t[uD]=="object"}function Xn(t){return Array.isArray(t)&&t[uD]===!0}function Kg(t){return(t.flags&4)!==0}function Ho(t){return t.componentOffset>-1}function xl(t){return(t.flags&1)===1}function wn(t){return!!t.template}function pl(t){return(t[X]&512)!==0}function zo(t){return(t[X]&256)===256}var og=class{previousValue;currentValue;firstChange;constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function lD(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}var Sa=(()=>{let t=()=>dD;return t.ngInherit=!0,t})();function dD(t){return t.type.prototype.ngOnChanges&&(t.setInput=Mx),Rx}function Rx(){let t=fD(this),e=t?.current;if(e){let n=t.previous;if(n===fi)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function Mx(t,e,n,r,i){let o=this.declaredInputs[r],s=fD(t)||Nx(t,{previous:fi,current:null}),a=s.current||(s.current={}),u=s.previous,l=u[o];a[o]=new og(l&&l.currentValue,n,u===fi),lD(t,e,i,n)}var hD="__ngSimpleChanges__";function fD(t){return t[hD]||null}function Nx(t,e){return t[hD]=e}var ob=null;var Se=function(t,e=null,n){ob?.(t,e,n)},Px="svg",xx="math";function En(t){for(;Array.isArray(t);)t=t[Jn];return t}function pD(t,e){return En(e[t])}function er(t,e){return En(e[t.index])}function gD(t,e){return t.data[e]}function bn(t,e){let n=e[t];return Ar(n)?n:n[Jn]}function Qg(t){return(t[X]&128)===128}function kx(t){return Xn(t[Dt])}function ko(t,e){return e==null?null:t[e]}function mD(t){t[To]=0}function yD(t){t[X]&1024||(t[X]|=1024,Qg(t)&&Ol(t))}function Ox(t,e){for(;t>0;)e=e[$o],t--;return e}function kl(t){return!!(t[X]&9216||t[Qt]?.dirty)}function sg(t){t[Rr].changeDetectionScheduler?.notify(8),t[X]&64&&(t[X]|=1024),kl(t)&&Ol(t)}function Ol(t){t[Rr].changeDetectionScheduler?.notify(0);let e=gi(t);for(;e!==null&&!(e[X]&8192||(e[X]|=8192,!Qg(e)));)e=gi(e)}function vD(t,e){if(zo(t))throw new U(911,!1);t[Sr]===null&&(t[Sr]=[]),t[Sr].push(e)}function Fx(t,e){if(t[Sr]===null)return;let n=t[Sr].indexOf(e);n!==-1&&t[Sr].splice(n,1)}function gi(t){let e=t[Dt];return Xn(e)?e[Dt]:e}function _D(t){return t[ll]??=[]}function ID(t){return t.cleanup??=[]}var ae={lFrame:RD(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var ag=!1;function Vx(){return ae.lFrame.elementDepthCount}function Lx(){ae.lFrame.elementDepthCount++}function jx(){ae.lFrame.elementDepthCount--}function Yg(){return ae.bindingsEnabled}function Ux(){return ae.skipHydrationRootTNode!==null}function Bx(t){return ae.skipHydrationRootTNode===t}function $x(){ae.skipHydrationRootTNode=null}function Ae(){return ae.lFrame.lView}function Pt(){return ae.lFrame.tView}function wi(t){return ae.lFrame.contextLView=t,t[Nt]}function Ei(t){return ae.lFrame.contextLView=null,t}function Lt(){let t=wD();for(;t!==null&&t.type===64;)t=t.parent;return t}function wD(){return ae.lFrame.currentTNode}function Hx(){let t=ae.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function bi(t,e){let n=ae.lFrame;n.currentTNode=t,n.isParent=e}function Zg(){return ae.lFrame.isParent}function ED(){ae.lFrame.isParent=!1}function bD(){return ag}function sb(t){let e=ag;return ag=t,e}function DD(){let t=ae.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function zx(){return ae.lFrame.bindingIndex}function qx(t){return ae.lFrame.bindingIndex=t}function Jg(){return ae.lFrame.bindingIndex++}function TD(t){let e=ae.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function Gx(){return ae.lFrame.inI18n}function Wx(t,e){let n=ae.lFrame;n.bindingIndex=n.bindingRootIndex=t,cg(e)}function Kx(){return ae.lFrame.currentDirectiveIndex}function cg(t){ae.lFrame.currentDirectiveIndex=t}function Qx(t){let e=ae.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function CD(t){ae.lFrame.currentQueryIndex=t}function Yx(t){let e=t[pe];return e.type===2?e.declTNode:e.type===1?t[dn]:null}function SD(t,e,n){if(n&te.SkipSelf){let i=e,o=t;for(;i=i.parent,i===null&&!(n&te.Host);)if(i=Yx(o),i===null||(o=o[$o],i.type&10))break;if(i===null)return!1;e=i,t=o}let r=ae.lFrame=AD();return r.currentTNode=e,r.lView=t,!0}function Xg(t){let e=AD(),n=t[pe];ae.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function AD(){let t=ae.lFrame,e=t===null?null:t.child;return e===null?RD(t):e}function RD(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function MD(){let t=ae.lFrame;return ae.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var ND=MD;function em(){let t=MD();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Zx(t){return(ae.lFrame.contextLView=Ox(t,ae.lFrame.contextLView))[Nt]}function Di(){return ae.lFrame.selectedIndex}function mi(t){ae.lFrame.selectedIndex=t}function PD(){let t=ae.lFrame;return gD(t.tView,t.selectedIndex)}function Jx(){return ae.lFrame.currentNamespace}var xD=!0;function Fl(){return xD}function Vl(t){xD=t}function Xx(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=dD(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function tm(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=o;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),u&&(t.viewHooks??=[]).push(-n,u),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),h!=null&&(t.destroyHooks??=[]).push(n,h)}}function Xu(t,e,n){kD(t,e,3,n)}function el(t,e,n,r){(t[X]&3)===n&&kD(t,e,n,r)}function Hp(t,e){let n=t[X];(n&3)===e&&(n&=16383,n+=1,t[X]=n)}function kD(t,e,n,r){let i=r!==void 0?t[To]&65535:0,o=r??-1,s=e.length-1,a=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(t[To]+=65536),(a<o||o==-1)&&(ek(t,n,e,u),t[To]=(t[To]&4294901760)+u+2),u++}function ab(t,e){Se(4,t,e);let n=le(null);try{e.call(t)}finally{le(n),Se(5,t,e)}}function ek(t,e,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],a=t[s];i?t[X]>>14<t[To]>>16&&(t[X]&3)===e&&(t[X]+=16384,ab(a,o)):ab(a,o)}var So=-1,yi=class{factory;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,n,r){this.factory=e,this.canSeeViewProviders=n,this.injectImpl=r}};function tk(t){return(t.flags&8)!==0}function nk(t){return(t.flags&16)!==0}function rk(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],a=n[r++];t.setAttribute(e,s,a,o)}else{let o=i,s=n[++r];ok(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}return r}function ik(t){return t===3||t===4||t===6}function ok(t){return t.charCodeAt(0)===64}function Oo(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?cb(t,n,i,null,e[++r]):cb(t,n,i,null,null))}}return t}function cb(t,e,n,r,i){let o=0,s=t.length;if(e===-1)s=-1;else for(;o<t.length;){let a=t[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<t.length;){let a=t[o];if(typeof a=="number")break;if(a===n){i!==null&&(t[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),i!==null&&t.splice(o++,0,i)}function OD(t){return t!==So}function gl(t){return t&32767}function sk(t){return t>>16}function ml(t,e){let n=sk(t),r=e;for(;n>0;)r=r[$o],n--;return r}var ug=!0;function ub(t){let e=ug;return ug=t,e}var ak=256,FD=ak-1,VD=5,ck=0,vn={};function uk(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(ya)&&(r=n[ya]),r==null&&(r=n[ya]=ck++);let i=r&FD,o=1<<i;e.data[t+(i>>VD)]|=o}function yl(t,e){let n=LD(t,e);if(n!==-1)return n;let r=e[pe];r.firstCreatePass&&(t.injectorIndex=e.length,zp(r.data,t),zp(e,null),zp(r.blueprint,null));let i=nm(t,e),o=t.injectorIndex;if(OD(i)){let s=gl(i),a=ml(i,e),u=a[pe].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|u[s+l]}return e[o+8]=i,o}function zp(t,e){t.push(0,0,0,0,0,0,0,0,e)}function LD(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function nm(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=HD(i),r===null)return So;if(n++,i=i[$o],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return So}function lg(t,e,n){uk(t,e,n)}function jD(t,e,n){if(n&te.Optional||t!==void 0)return t;zg(e,"NodeInjector")}function UD(t,e,n,r){if(n&te.Optional&&r===void 0&&(r=null),(n&(te.Self|te.Host))===0){let i=t[No],o=Wt(void 0);try{return i?i.get(e,r,n&te.Optional):Qb(e,r,n&te.Optional)}finally{Wt(o)}}return jD(r,e,n)}function BD(t,e,n,r=te.Default,i){if(t!==null){if(e[X]&2048&&!(r&te.Self)){let s=pk(t,e,n,r,vn);if(s!==vn)return s}let o=$D(t,e,n,r,vn);if(o!==vn)return o}return UD(e,n,r,i)}function $D(t,e,n,r,i){let o=hk(n);if(typeof o=="function"){if(!SD(e,t,r))return r&te.Host?jD(i,n,r):UD(e,n,r,i);try{let s;if(s=o(r),s==null&&!(r&te.Optional))zg(n);else return s}finally{ND()}}else if(typeof o=="number"){let s=null,a=LD(t,e),u=So,l=r&te.Host?e[_n][dn]:null;for((a===-1||r&te.SkipSelf)&&(u=a===-1?nm(t,e):e[a+8],u===So||!db(r,!1)?a=-1:(s=e[pe],a=gl(u),e=ml(u,e)));a!==-1;){let h=e[pe];if(lb(o,a,h.data)){let p=lk(a,e,n,s,r,l);if(p!==vn)return p}u=e[a+8],u!==So&&db(r,e[pe].data[a+8]===l)&&lb(o,a,e)?(s=h,a=gl(u),e=ml(u,e)):a=-1}}return i}function lk(t,e,n,r,i,o){let s=e[pe],a=s.data[t+8],u=r==null?Ho(a)&&ug:r!=s&&(a.type&3)!==0,l=i&te.Host&&o===a,h=dk(a,s,n,u,l);return h!==null?vl(e,s,h,a,i):vn}function dk(t,e,n,r,i){let o=t.providerIndexes,s=e.data,a=o&1048575,u=t.directiveStart,l=t.directiveEnd,h=o>>20,p=r?a:a+h,m=i?a+h:l;for(let y=p;y<m;y++){let T=s[y];if(y<u&&n===T||y>=u&&T.type===n)return y}if(i){let y=s[u];if(y&&wn(y)&&y.type===n)return u}return null}function vl(t,e,n,r,i){let o=t[n],s=e.data;if(o instanceof yi){let a=o;a.resolving&&Wb(ix(s[n]));let u=ub(a.canSeeViewProviders);a.resolving=!0;let l,h=a.injectImpl?Wt(a.injectImpl):null,p=SD(t,r,te.Default);try{o=t[n]=a.factory(void 0,i,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&Xx(n,s[n],e)}finally{h!==null&&Wt(h),ub(u),a.resolving=!1,ND()}}return o}function hk(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(ya)?t[ya]:void 0;return typeof e=="number"?e>=0?e&FD:fk:e}function lb(t,e,n){let r=1<<t;return!!(n[e+(t>>VD)]&r)}function db(t,e){return!(t&te.Self)&&!(t&te.Host&&e)}var hi=class{_tNode;_lView;constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return BD(this._tNode,this._lView,e,Ml(r),n)}};function fk(){return new hi(Lt(),Ae())}function Aa(t){return Da(()=>{let e=t.prototype.constructor,n=e[rl]||dg(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let o=i[rl]||dg(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function dg(t){return $b(t)?()=>{let e=dg(bt(t));return e&&e()}:Ao(t)}function pk(t,e,n,r,i){let o=t,s=e;for(;o!==null&&s!==null&&s[X]&2048&&!pl(s);){let a=$D(o,s,n,r|te.Self,vn);if(a!==vn)return a;let u=o.parent;if(!u){let l=s[cD];if(l){let h=l.get(n,vn,r);if(h!==vn)return h}u=HD(s),s=s[$o]}o=u}return i}function HD(t){let e=t[pe],n=e.type;return n===2?e.declTNode:n===1?t[dn]:null}function hb(t,e=null,n=null,r){let i=zD(t,e,n,r);return i.resolveInjectorInitializers(),i}function zD(t,e=null,n=null,r,i=new Set){let o=[n||Kt,vx(t)];return r=r||(typeof t=="object"?void 0:Rt(t)),new _a(o,e||Wg(),r||null,i)}var Je=class t{static THROW_IF_NOT_FOUND=di;static NULL=new cl;static create(e,n){if(Array.isArray(e))return hb({name:""},n,e,"");{let r=e.name??"";return hb({name:r},e.parent,e.providers,r)}}static \u0275prov=$({token:t,providedIn:"any",factory:()=>ie(Xb)});static __NG_ELEMENT_ID__=-1};var gk=new L("");gk.__NG_ELEMENT_ID__=t=>{let e=Lt();if(e===null)throw new U(204,!1);if(e.type&2)return e.value;if(t&te.Optional)return null;throw new U(204,!1)};var qD=!1,Ra=(()=>{class t{static __NG_ELEMENT_ID__=mk;static __NG_ENV_ID__=n=>n}return t})(),hg=class extends Ra{_lView;constructor(e){super(),this._lView=e}onDestroy(e){let n=this._lView;return zo(n)?(e(),()=>{}):(vD(n,e),()=>Fx(n,e))}};function mk(){return new hg(Ae())}var Fo=class{},rm=new L("",{providedIn:"root",factory:()=>!1});var GD=new L(""),WD=new L(""),Ti=(()=>{class t{taskId=0;pendingTasks=new Set;get _hasPendingTasks(){return this.hasPendingTasks.value}hasPendingTasks=new at(!1);add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}has(n){return this.pendingTasks.has(n)}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static \u0275prov=$({token:t,providedIn:"root",factory:()=>new t})}return t})(),Ll=(()=>{class t{internalPendingTasks=x(Ti);scheduler=x(Fo);add(){let n=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(n)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(n))}}run(n){return v(this,null,function*(){let r=this.add();try{return yield n()}finally{r()}})}static \u0275prov=$({token:t,providedIn:"root",factory:()=>new t})}return t})(),fg=class extends Qe{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,sD()&&(this.destroyRef=x(Ra,{optional:!0})??void 0,this.pendingTasks=x(Ti,{optional:!0})??void 0)}emit(e){let n=le(null);try{super.next(e)}finally{le(n)}}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof Oe&&e.add(a),a}wrapInTimeout(e){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(n)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},Fe=fg;function _l(...t){}function KD(t){let e,n;function r(){t=_l;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{t(),r()})),()=>r()}function fb(t){return queueMicrotask(()=>t()),()=>{t=_l}}var im="isAngularZone",Il=im+"_ID",yk=0,_e=class t{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Fe(!1);onMicrotaskEmpty=new Fe(!1);onStable=new Fe(!1);onError=new Fe(!1);constructor(e){let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=qD}=e;if(typeof Zone>"u")throw new U(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,Ik(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(im)===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new U(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new U(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,vk,_l,_l);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},vk={};function om(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function _k(t){if(t.isCheckStableRunning||t.callbackScheduled)return;t.callbackScheduled=!0;function e(){KD(()=>{t.callbackScheduled=!1,pg(t),t.isCheckStableRunning=!0,om(t),t.isCheckStableRunning=!1})}t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),pg(t)}function Ik(t){let e=()=>{_k(t)},n=yk++;t._inner=t._inner.fork({name:"angular",properties:{[im]:!0,[Il]:n,[Il+n]:!0},onInvokeTask:(r,i,o,s,a,u)=>{if(wk(u))return r.invokeTask(o,s,a,u);try{return pb(t),r.invokeTask(o,s,a,u)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),gb(t)}},onInvoke:(r,i,o,s,a,u,l)=>{try{return pb(t),r.invoke(o,s,a,u,l)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!Ek(u)&&e(),gb(t)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,pg(t),om(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function pg(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function pb(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function gb(t){t._nesting--,om(t)}var gg=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Fe;onMicrotaskEmpty=new Fe;onStable=new Fe;onError=new Fe;run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function wk(t){return QD(t,"__ignore_ng_zone__")}function Ek(t){return QD(t,"__scheduler_tick__")}function QD(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var Zn=class{_console=console;handleError(e){this._console.error("ERROR",e)}},bk=new L("",{providedIn:"root",factory:()=>{let t=x(_e),e=x(Zn);return n=>t.runOutsideAngular(()=>e.handleError(n))}});function mb(t,e){return Ub(t,e)}function Dk(t){return Ub(jb,t)}var YD=(mb.required=Dk,mb);function Tk(){return jl(Lt(),Ae())}function jl(t,e){return new Ci(er(t,e))}var Ci=(()=>{class t{nativeElement;constructor(n){this.nativeElement=n}static __NG_ELEMENT_ID__=Tk}return t})();function Ck(t){return typeof t=="function"&&t[qt]!==void 0}function Mr(t,e){let n=_p(t,e?.equal),r=n[qt];return n.set=i=>ua(r,i),n.update=i=>Ip(r,i),n.asReadonly=Sk.bind(n),n}function Sk(){let t=this[qt];if(t.readonlyFn===void 0){let e=()=>this();e[qt]=t,t.readonlyFn=e}return t.readonlyFn}function ZD(t){return Ck(t)&&typeof t.set=="function"}function JD(t){return(t.flags&128)===128}var XD=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(XD||{}),eT=new Map,Ak=0;function Rk(){return Ak++}function Mk(t){eT.set(t[Pl],t)}function mg(t){eT.delete(t[Pl])}var yb="__ngContext__";function qo(t,e){Ar(e)?(t[yb]=e[Pl],Mk(e)):t[yb]=e}function tT(t){return rT(t[Ia])}function nT(t){return rT(t[un])}function rT(t){for(;t!==null&&!Xn(t);)t=t[un];return t}var yg;function iT(t){yg=t}function Nk(){if(yg!==void 0)return yg;if(typeof document<"u")return document;throw new U(210,!1)}var sm=new L("",{providedIn:"root",factory:()=>Pk}),Pk="ng",am=new L(""),Cn=new L("",{providedIn:"platform",factory:()=>"unknown"});var cm=new L("",{providedIn:"root",factory:()=>Nk().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var xk="h",kk="b";var oT=!1,Ok=new L("",{providedIn:"root",factory:()=>oT});var sT=function(t){return t[t.CHANGE_DETECTION=0]="CHANGE_DETECTION",t[t.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",t}(sT||{}),Ul=new L(""),vb=new Set;function um(t){vb.has(t)||(vb.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}var Fk=(()=>{class t{impl=null;execute(){this.impl?.execute()}static \u0275prov=$({token:t,providedIn:"root",factory:()=>new t})}return t})();var Vk=(t,e,n,r)=>{};function Lk(t,e,n,r){Vk(t,e,n,r)}var jk=()=>null;function aT(t,e,n=!1){return jk(t,e,n)}function cT(t,e){let n=t.contentQueries;if(n!==null){let r=le(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let a=t.data[s];CD(o),a.contentQueries(2,e[s],s)}}}finally{le(r)}}}function vg(t,e,n){CD(0);let r=le(null);try{e(t,n)}finally{le(r)}}function lm(t,e,n){if(Kg(e)){let r=le(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=t.data[s];if(a.contentQueries){let u=n[s];a.contentQueries(1,u,s)}}}finally{le(r)}}}var Dn=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Dn||{});var _g=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${qP})`}};function Uk(t){return t instanceof _g?t.changingThisBreaksApplicationSecurity:t}var Bk=/^>|^->|<!--|-->|--!>|<!-$/g,$k=/(<|>)/g,Hk="\u200B$1\u200B";function zk(t){return t.replace(Bk,e=>e.replace($k,Hk))}function dm(t){return t.ownerDocument.defaultView}function uT(t){return t instanceof Function?t():t}function qk(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}var lT="ng-template";function Gk(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&qk(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(hm(t))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===n)return!0}return!1}function hm(t){return t.type===4&&t.value!==lT}function Wk(t,e,n){let r=t.type===4&&!n?lT:t.value;return e===r}function Kk(t,e,n){let r=4,i=t.attrs,o=i!==null?Zk(i):0,s=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!s&&!cn(r)&&!cn(u))return!1;if(s&&cn(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!Wk(t,u,n)||u===""&&e.length===1){if(cn(r))return!1;s=!0}}else if(r&8){if(i===null||!Gk(t,i,u,n)){if(cn(r))return!1;s=!0}}else{let l=e[++a],h=Qk(u,i,hm(t),n);if(h===-1){if(cn(r))return!1;s=!0;continue}if(l!==""){let p;if(h>o?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(cn(r))return!1;s=!0}}}}return cn(r)||s}function cn(t){return(t&1)===0}function Qk(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){let s=e[i];if(s===t)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return Jk(e,t)}function Yk(t,e,n=!1){for(let r=0;r<e.length;r++)if(Kk(t,e[r],n))return!0;return!1}function Zk(t){for(let e=0;e<t.length;e++){let n=t[e];if(ik(n))return e}return t.length}function Jk(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function _b(t,e){return t?":not("+e.trim()+")":e}function Xk(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(r&2){let a=t[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!cn(s)&&(e+=_b(o,i),i=""),r=s,o=o||!cn(r);n++}return i!==""&&(e+=_b(o,i)),e}function eO(t){return t.map(Xk).join(",")}function tO(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let o=t[r];if(typeof o=="string")i===2?o!==""&&e.push(o,t[++r]):i===8&&n.push(o);else{if(!cn(i))break;i=o}r++}return n.length&&e.push(1,...n),e}var tr={};function nO(t,e){return t.createText(e)}function rO(t,e,n){t.setValue(e,n)}function iO(t,e){return t.createComment(zk(e))}function dT(t,e,n){return t.createElement(e,n)}function wl(t,e,n,r,i){t.insertBefore(e,n,r,i)}function hT(t,e,n){t.appendChild(e,n)}function Ib(t,e,n,r,i){r!==null?wl(t,e,n,r,i):hT(t,e,n)}function oO(t,e,n){t.removeChild(null,e,n)}function sO(t,e,n){t.setAttribute(e,"style",n)}function aO(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function fT(t,e,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&rk(t,e,r),i!==null&&aO(t,e,i),o!==null&&sO(t,e,o)}function fm(t,e,n,r,i,o,s,a,u,l,h){let p=In+r,m=p+i,y=cO(p,m),T=typeof l=="function"?l():l;return y[pe]={type:t,blueprint:y,template:n,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:T,incompleteFirstPass:!1,ssrId:h}}function cO(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:tr);return n}function uO(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=fm(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function pm(t,e,n,r,i,o,s,a,u,l,h){let p=e.blueprint.slice();return p[Jn]=i,p[X]=r|4|128|8|64|1024,(l!==null||t&&t[X]&2048)&&(p[X]|=2048),mD(p),p[Dt]=p[$o]=t,p[Nt]=n,p[Rr]=s||t&&t[Rr],p[Ze]=a||t&&t[Ze],p[No]=u||t&&t[No]||null,p[dn]=o,p[Pl]=Rk(),p[ul]=h,p[cD]=l,p[_n]=e.type==2?t[_n]:p,p}function lO(t,e,n){let r=er(e,t),i=uO(n),o=t[Rr].rendererFactory,s=gm(t,pm(t,i,null,pT(n),r,e,null,o.createRenderer(r,n),null,null,null));return t[e.index]=s}function pT(t){let e=16;return t.signals?e=4096:t.onPush&&(e=64),e}function gT(t,e,n,r){if(n===0)return-1;let i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function gm(t,e){return t[Ia]?t[ib][un]=e:t[Ia]=e,t[ib]=e,e}function ye(t=1){mT(Pt(),Ae(),Di()+t,!1)}function mT(t,e,n,r){if(!r)if((e[X]&3)===3){let o=t.preOrderCheckHooks;o!==null&&Xu(e,o,n)}else{let o=t.preOrderHooks;o!==null&&el(e,o,0,n)}mi(n)}var Bl=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(Bl||{});function Ig(t,e,n,r){let i=le(null);try{let[o,s,a]=t.inputs[n],u=null;(s&Bl.SignalBased)!==0&&(u=e[o][qt]),u!==null&&u.transformFn!==void 0?r=u.transformFn(r):a!==null&&(r=a.call(e,r)),t.setInput!==null?t.setInput(e,u,r,n,o):lD(e,u,o,r)}finally{le(i)}}function yT(t,e,n,r,i){let o=Di(),s=r&2;try{mi(-1),s&&e.length>In&&mT(t,e,In,!1),Se(s?2:0,i),n(r,i)}finally{mi(o),Se(s?3:1,i)}}function $l(t,e,n){mO(t,e,n),(n.flags&64)===64&&yO(t,e,n)}function mm(t,e,n=er){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?n(e,t):t[s];t[i++]=a}}}function dO(t,e,n,r){let o=r.get(Ok,oT)||n===Dn.ShadowDom,s=t.selectRootElement(e,o);return hO(s),s}function hO(t){fO(t)}var fO=()=>null;function pO(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function vT(t,e,n,r,i,o,s,a){if(!a&&vm(e,t,n,r,i)){Ho(e)&&gO(n,e.index);return}if(e.type&3){let u=er(e,n);r=pO(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(u,r,i)}else e.type&12}function gO(t,e){let n=bn(e,t);n[X]&16||(n[X]|=64)}function mO(t,e,n){let r=n.directiveStart,i=n.directiveEnd;Ho(n)&&lO(e,n,t.data[r+n.componentOffset]),t.firstCreatePass||yl(n,e);let o=n.initialInputs;for(let s=r;s<i;s++){let a=t.data[s],u=vl(e,t,s,n);if(qo(u,e),o!==null&&_O(e,s-r,u,a,n,o),wn(a)){let l=bn(n.index,e);l[Nt]=vl(e,t,s,n)}}}function yO(t,e,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=Kx();try{mi(o);for(let a=r;a<i;a++){let u=t.data[a],l=e[a];cg(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&vO(u,l)}}finally{mi(-1),cg(s)}}function vO(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function ym(t,e){let n=t.directiveRegistry,r=null;if(n)for(let i=0;i<n.length;i++){let o=n[i];Yk(e,o.selectors,!1)&&(r??=[],wn(o)?r.unshift(o):r.push(o))}return r}function _O(t,e,n,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let u=s[a],l=s[a+1];Ig(r,n,u,l)}}function IO(t,e){let n=t[No],r=n?n.get(Zn,null):null;r&&r.handleError(e)}function vm(t,e,n,r,i){let o=t.inputs?.[r],s=t.hostDirectiveInputs?.[r],a=!1;if(s)for(let u=0;u<s.length;u+=2){let l=s[u],h=s[u+1],p=e.data[l];Ig(p,n[l],h,i),a=!0}if(o)for(let u of o){let l=n[u],h=e.data[u];Ig(h,l,r,i),a=!0}return a}function wO(t,e){let n=bn(e,t),r=n[pe];EO(r,n);let i=n[Jn];i!==null&&n[ul]===null&&(n[ul]=aT(i,n[No])),Se(18),_m(r,n,n[Nt]),Se(19,n[Nt])}function EO(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function _m(t,e,n){Xg(e);try{let r=t.viewQuery;r!==null&&vg(1,r,n);let i=t.template;i!==null&&yT(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[xo]?.finishViewCreation(t),t.staticContentQueries&&cT(t,e),t.staticViewQueries&&vg(2,t.viewQuery,n);let o=t.components;o!==null&&bO(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[X]&=-5,em()}}function bO(t,e){for(let n=0;n<e.length;n++)wO(t,e[n])}function DO(t,e,n,r){let i=le(null);try{let o=e.tView,a=t[X]&4096?4096:16,u=pm(t,o,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];u[Po]=l;let h=t[xo];return h!==null&&(u[xo]=h.createEmbeddedView(o)),_m(o,u,n),u}finally{le(i)}}function wb(t,e){return!e||e.firstChild===null||JD(t)}var TO;function Im(t,e){return TO(t,e)}var Tn=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Tn||{});function _T(t){return(t.flags&32)===32}function Co(t,e,n,r,i){if(r!=null){let o,s=!1;Xn(r)?o=r:Ar(r)&&(s=!0,r=r[Jn]);let a=En(r);t===0&&n!==null?i==null?hT(e,n,a):wl(e,n,a,i||null,!0):t===1&&n!==null?wl(e,n,a,i||null,!0):t===2?oO(e,a,s):t===3&&e.destroyNode(a),o!=null&&VO(e,t,o,n,i)}}function CO(t,e){IT(t,e),e[Jn]=null,e[dn]=null}function SO(t,e,n,r,i,o){r[Jn]=i,r[dn]=e,zl(t,r,n,1,i,o)}function IT(t,e){e[Rr].changeDetectionScheduler?.notify(9),zl(t,e,e[Ze],2,null,null)}function AO(t){let e=t[Ia];if(!e)return qp(t[pe],t);for(;e;){let n=null;if(Ar(e))n=e[Ia];else{let r=e[Yt];r&&(n=r)}if(!n){for(;e&&!e[un]&&e!==t;)Ar(e)&&qp(e[pe],e),e=e[Dt];e===null&&(e=t),Ar(e)&&qp(e[pe],e),n=e&&e[un]}e=n}}function wm(t,e){let n=t[fl],r=n.indexOf(e);n.splice(r,1)}function wT(t,e){if(zo(e))return;let n=e[Ze];n.destroyNode&&zl(t,e,n,3,null,null),AO(e)}function qp(t,e){if(zo(e))return;let n=le(null);try{e[X]&=-129,e[X]|=256,e[Qt]&&mp(e[Qt]),MO(t,e),RO(t,e),e[pe].type===1&&e[Ze].destroy();let r=e[Po];if(r!==null&&Xn(e[Dt])){r!==e[Dt]&&wm(r,e);let i=e[xo];i!==null&&i.detachView(t)}mg(e)}finally{le(n)}}function RO(t,e){let n=t.cleanup,r=e[ll];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let a=n[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[n[s+1]];n[s].call(a)}r!==null&&(e[ll]=null);let i=e[Sr];if(i!==null){e[Sr]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[dl];if(o!==null){e[dl]=null;for(let s of o)s.destroy()}}function MO(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof yi)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],u=o[s+1];Se(4,a,u);try{u.call(a)}finally{Se(5,a,u)}}else{Se(4,i,o);try{o.call(i)}finally{Se(5,i,o)}}}}}function NO(t,e,n){return PO(t,e.parent,n)}function PO(t,e,n){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return n[Jn];if(Ho(r)){let{encapsulation:i}=t.data[r.directiveStart+r.componentOffset];if(i===Dn.None||i===Dn.Emulated)return null}return er(r,n)}function xO(t,e,n){return OO(t,e,n)}function kO(t,e,n){return t.type&40?er(t,n):null}var OO=kO,Eb;function Hl(t,e,n,r){let i=NO(t,r,e),o=e[Ze],s=r.parent||e[dn],a=xO(s,r,e);if(i!=null)if(Array.isArray(n))for(let u=0;u<n.length;u++)Ib(o,i,n[u],a,!1);else Ib(o,i,n,a,!1);Eb!==void 0&&Eb(o,r,e,n,i)}function ma(t,e){if(e!==null){let n=e.type;if(n&3)return er(e,t);if(n&4)return wg(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return ma(t,r);{let i=t[e.index];return Xn(i)?wg(-1,i):En(i)}}else{if(n&128)return ma(t,e.next);if(n&32)return Im(e,t)()||En(t[e.index]);{let r=ET(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=gi(t[_n]);return ma(i,r)}else return ma(t,e.next)}}}return null}function ET(t,e){if(e!==null){let r=t[_n][dn],i=e.projection;return r.projection[i]}return null}function wg(t,e){let n=Yt+t+1;if(n<e.length){let r=e[n],i=r[pe].firstChild;if(i!==null)return ma(r,i)}return e[pi]}function Em(t,e,n,r,i,o,s){for(;n!=null;){if(n.type===128){n=n.next;continue}let a=r[n.index],u=n.type;if(s&&e===0&&(a&&qo(En(a),r),n.flags|=2),!_T(n))if(u&8)Em(t,e,n.child,r,i,o,!1),Co(e,t,i,a,o);else if(u&32){let l=Im(n,r),h;for(;h=l();)Co(e,t,i,h,o);Co(e,t,i,a,o)}else u&16?FO(t,e,r,n,i,o):Co(e,t,i,a,o);n=s?n.projectionNext:n.next}}function zl(t,e,n,r,i,o){Em(n,r,t.firstChild,e,i,o,!1)}function FO(t,e,n,r,i,o){let s=n[_n],u=s[dn].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let h=u[l];Co(e,t,i,h,o)}else{let l=u,h=s[Dt];JD(r)&&(l.flags|=128),Em(t,e,l,h,i,o,!0)}}function VO(t,e,n,r,i){let o=n[pi],s=En(n);o!==s&&Co(e,t,r,o,i);for(let a=Yt;a<n.length;a++){let u=n[a];zl(u[pe],u,t,e,r,o)}}function LO(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let o=r.indexOf("-")===-1?void 0:Tn.DashCase;i==null?t.removeStyle(n,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Tn.Important),t.setStyle(n,r,i,o))}}function El(t,e,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let o=e[n.index];o!==null&&r.push(En(o)),Xn(o)&&jO(o,r);let s=n.type;if(s&8)El(t,e,n.child,r);else if(s&32){let a=Im(n,e),u;for(;u=a();)r.push(u)}else if(s&16){let a=ET(e,n);if(Array.isArray(a))r.push(...a);else{let u=gi(e[_n]);El(u[pe],u,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function jO(t,e){for(let n=Yt;n<t.length;n++){let r=t[n],i=r[pe].firstChild;i!==null&&El(r[pe],r,i,e)}t[pi]!==t[Jn]&&e.push(t[pi])}function bT(t){if(t[$p]!==null){for(let e of t[$p])e.impl.addSequence(e);t[$p].length=0}}var DT=[];function UO(t){return t[Qt]??BO(t)}function BO(t){let e=DT.pop()??Object.create(HO);return e.lView=t,e}function $O(t){t.lView[Qt]!==t&&(t.lView=null,DT.push(t))}var HO=re(O({},aa),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{Ol(t.lView)},consumerOnSignalRead(){this.lView[Qt]=this}});function zO(t){let e=t[Qt]??Object.create(qO);return e.lView=t,e}var qO=re(O({},aa),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{let e=gi(t.lView);for(;e&&!TT(e[pe]);)e=gi(e);e&&yD(e)},consumerOnSignalRead(){this.lView[Qt]=this}});function TT(t){return t.type!==2}function CT(t){if(t[dl]===null)return;let e=!0;for(;e;){let n=!1;for(let r of t[dl])r.dirty&&(n=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=n&&!!(t[X]&8192)}}var GO=100;function ST(t,e=!0,n=0){let i=t[Rr].rendererFactory,o=!1;o||i.begin?.();try{WO(t,n)}catch(s){throw e&&IO(t,s),s}finally{o||i.end?.()}}function WO(t,e){let n=bD();try{sb(!0),Eg(t,e);let r=0;for(;kl(t);){if(r===GO)throw new U(103,!1);r++,Eg(t,1)}}finally{sb(n)}}function KO(t,e,n,r){if(zo(e))return;let i=e[X],o=!1,s=!1;Xg(e);let a=!0,u=null,l=null;o||(TT(t)?(l=UO(e),u=yu(l)):lp()===null?(a=!1,l=zO(e),u=yu(l)):e[Qt]&&(mp(e[Qt]),e[Qt]=null));try{mD(e),qx(t.bindingStartIndex),n!==null&&yT(t,e,n,2,r);let h=(i&3)===3;if(!o)if(h){let y=t.preOrderCheckHooks;y!==null&&Xu(e,y,null)}else{let y=t.preOrderHooks;y!==null&&el(e,y,0,null),Hp(e,0)}if(s||QO(e),CT(e),AT(e,0),t.contentQueries!==null&&cT(t,e),!o)if(h){let y=t.contentCheckHooks;y!==null&&Xu(e,y)}else{let y=t.contentHooks;y!==null&&el(e,y,1),Hp(e,1)}ZO(t,e);let p=t.components;p!==null&&MT(e,p,0);let m=t.viewQuery;if(m!==null&&vg(2,m,r),!o)if(h){let y=t.viewCheckHooks;y!==null&&Xu(e,y)}else{let y=t.viewHooks;y!==null&&el(e,y,2),Hp(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[Bp]){for(let y of e[Bp])y();e[Bp]=null}o||(bT(e),e[X]&=-73)}catch(h){throw o||Ol(e),h}finally{l!==null&&(pp(l,u),a&&$O(l)),em()}}function AT(t,e){for(let n=tT(t);n!==null;n=nT(n))for(let r=Yt;r<n.length;r++){let i=n[r];RT(i,e)}}function QO(t){for(let e=tT(t);e!==null;e=nT(e)){if(!(e[X]&2))continue;let n=e[fl];for(let r=0;r<n.length;r++){let i=n[r];yD(i)}}}function YO(t,e,n){Se(18);let r=bn(e,t);RT(r,n),Se(19,r[Nt])}function RT(t,e){Qg(t)&&Eg(t,e)}function Eg(t,e){let r=t[pe],i=t[X],o=t[Qt],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&gp(o)),s||=!1,o&&(o.dirty=!1),t[X]&=-9217,s)KO(r,t,r.template,t[Nt]);else if(i&8192){CT(t),AT(t,1);let a=r.components;a!==null&&MT(t,a,1),bT(t)}}function MT(t,e,n){for(let r=0;r<e.length;r++)YO(t,e[r],n)}function ZO(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)mi(~i);else{let o=i,s=n[++r],a=n[++r];Wx(s,o);let u=e[o];Se(24,u),a(2,u),Se(25,u)}}}finally{mi(-1)}}function bm(t,e){let n=bD()?64:1088;for(t[Rr].changeDetectionScheduler?.notify(e);t;){t[X]|=n;let r=gi(t);if(pl(t)&&!r)return t;t=r}return null}function NT(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function JO(t,e,n,r=!0){let i=e[pe];if(XO(i,e,t,n),r){let s=wg(n,t),a=e[Ze],u=a.parentNode(t[pi]);u!==null&&SO(i,t[dn],a,e,u,s)}let o=e[ul];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function bg(t,e){if(t.length<=Yt)return;let n=Yt+e,r=t[n];if(r){let i=r[Po];i!==null&&i!==t&&wm(i,r),e>0&&(t[n-1][un]=r[un]);let o=al(t,Yt+e);CO(r[pe],r);let s=o[xo];s!==null&&s.detachView(o[pe]),r[Dt]=null,r[un]=null,r[X]&=-129}return r}function XO(t,e,n,r){let i=Yt+r,o=n.length;r>0&&(n[i-1][un]=e),r<o-Yt?(e[un]=n[i],Jb(n,Yt+r,e)):(n.push(e),e[un]=null),e[Dt]=n;let s=e[Po];s!==null&&n!==s&&PT(s,e);let a=e[xo];a!==null&&a.insertView(t),sg(e),e[X]|=128}function PT(t,e){let n=t[fl],r=e[Dt];if(Ar(r))t[X]|=2;else{let i=r[Dt][_n];e[_n]!==i&&(t[X]|=2)}n===null?t[fl]=[e]:n.push(e)}var wa=class{_lView;_cdRefInjectingView;notifyErrorHandler;_appRef=null;_attachedToViewContainer=!1;get rootNodes(){let e=this._lView,n=e[pe];return El(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r}get context(){return this._lView[Nt]}set context(e){this._lView[Nt]=e}get destroyed(){return zo(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Dt];if(Xn(e)){let n=e[hl],r=n?n.indexOf(this):-1;r>-1&&(bg(e,r),al(n,r))}this._attachedToViewContainer=!1}wT(this._lView[pe],this._lView)}onDestroy(e){vD(this._lView,e)}markForCheck(){bm(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[X]&=-129}reattach(){sg(this._lView),this._lView[X]|=128}detectChanges(){this._lView[X]|=1024,ST(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new U(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=pl(this._lView),n=this._lView[Po];n!==null&&!e&&wm(n,this._lView),IT(this._lView[pe],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new U(902,!1);this._appRef=e;let n=pl(this._lView),r=this._lView[Po];r!==null&&!n&&PT(r,this._lView),sg(this._lView)}};var ql=(()=>{class t{static __NG_ELEMENT_ID__=n1}return t})(),e1=ql,t1=class extends e1{_declarationLView;_declarationTContainer;elementRef;constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){let i=DO(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:n,dehydratedView:r});return new wa(i)}};function n1(){return r1(Lt(),Ae())}function r1(t,e){return t.type&4?new t1(e,t,jl(t,e)):null}function Gl(t,e,n,r,i){let o=t.data[e];if(o===null)o=i1(t,e,n,r,i),Gx()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=Hx();o.injectorIndex=s===null?-1:s.injectorIndex}return bi(o,!0),o}function i1(t,e,n,r,i){let o=wD(),s=Zg(),a=s?o:o&&o.parent,u=t.data[e]=s1(t,a,n,e,r,i);return o1(t,u,o,s),u}function o1(t,e,n,r){t.firstChild===null&&(t.firstChild=e),n!==null&&(r?n.child==null&&e.parent!==null&&(n.child=e):n.next===null&&(n.next=e,e.prev=n))}function s1(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,a=0;return Ux()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var vW=new RegExp(`^(\\d+)*(${kk}|${xk})*(.*)`);var a1=()=>null;function bb(t,e){return a1(t,e)}var c1=class{},xT=class{},Dg=class{resolveComponentFactory(e){throw Error(`No component factory found for ${Rt(e)}.`)}},Wl=class{static NULL=new Dg},Vo=class{},Go=(()=>{class t{destroyNode=null;static __NG_ELEMENT_ID__=()=>u1()}return t})();function u1(){let t=Ae(),e=Lt(),n=bn(e.index,t);return(Ar(n)?n:t)[Ze]}var l1=(()=>{class t{static \u0275prov=$({token:t,providedIn:"root",factory:()=>null})}return t})();var Gp={},Tg=class{injector;parentInjector;constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=Ml(r);let i=this.injector.get(e,Gp,r);return i!==Gp||n===Gp?i:this.parentInjector.get(e,n,r)}};function Cg(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=ZE(i,a);else if(o==2){let u=a,l=e[++s];r=ZE(r,u+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}function Ce(t,e=te.Default){let n=Ae();if(n===null)return ie(t,e);let r=Lt();return BD(r,n,bt(t),e)}function Dm(t,e,n,r,i){let o=r===null?null:{"":-1},s=i(t,n);if(s!==null){let a,u=null,l=null,h=h1(s);h===null?a=s:[a,u,l]=h,g1(t,e,n,a,o,u,l)}o!==null&&r!==null&&d1(n,r,o)}function d1(t,e,n){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let o=n[e[i+1]];if(o==null)throw new U(-301,!1);r.push(e[i],o)}}function h1(t){let e=null,n=!1;for(let s=0;s<t.length;s++){let a=t[s];if(s===0&&wn(a)&&(e=a),a.findHostDirectiveDefs!==null){n=!0;break}}if(!n)return null;let r=null,i=null,o=null;for(let s of t)s.findHostDirectiveDefs!==null&&(r??=[],i??=new Map,o??=new Map,f1(s,r,o,i)),s===e&&(r??=[],r.push(s));return r!==null?(r.push(...e===null?t:t.slice(1)),[r,i,o]):null}function f1(t,e,n,r){let i=e.length;t.findHostDirectiveDefs(t,e,r),n.set(t,[i,e.length-1])}function p1(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function g1(t,e,n,r,i,o,s){let a=r.length,u=!1;for(let m=0;m<a;m++){let y=r[m];!u&&wn(y)&&(u=!0,p1(t,n,m)),lg(yl(n,e),t,y.type)}w1(n,t.data.length,a);for(let m=0;m<a;m++){let y=r[m];y.providersResolver&&y.providersResolver(y)}let l=!1,h=!1,p=gT(t,e,a,null);a>0&&(n.directiveToIndex=new Map);for(let m=0;m<a;m++){let y=r[m];if(n.mergedAttrs=Oo(n.mergedAttrs,y.hostAttrs),y1(t,n,e,p,y),I1(p,y,i),s!==null&&s.has(y)){let[M,R]=s.get(y);n.directiveToIndex.set(y.type,[p,M+n.directiveStart,R+n.directiveStart])}else(o===null||!o.has(y))&&n.directiveToIndex.set(y.type,p);y.contentQueries!==null&&(n.flags|=4),(y.hostBindings!==null||y.hostAttrs!==null||y.hostVars!==0)&&(n.flags|=64);let T=y.type.prototype;!l&&(T.ngOnChanges||T.ngOnInit||T.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),l=!0),!h&&(T.ngOnChanges||T.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),h=!0),p++}m1(t,n,o)}function m1(t,e,n){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=t.data[r];if(n===null||!n.has(i))Db(0,e,i,r),Db(1,e,i,r),Cb(e,r,!1);else{let o=n.get(i);Tb(0,e,o,r),Tb(1,e,o,r),Cb(e,r,!0)}}}function Db(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;t===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),kT(e,o)}}function Tb(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;t===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),kT(e,s)}}function kT(t,e){e==="class"?t.flags|=8:e==="style"&&(t.flags|=16)}function Cb(t,e,n){let{attrs:r,inputs:i,hostDirectiveInputs:o}=t;if(r===null||!n&&i===null||n&&o===null||hm(t)){t.initialInputs??=[],t.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let u=r[a];if(u===0){a+=4;continue}else if(u===5){a+=2;continue}else if(typeof u=="number")break;if(!n&&i.hasOwnProperty(u)){let l=i[u];for(let h of l)if(h===e){s??=[],s.push(u,r[a+1]);break}}else if(n&&o.hasOwnProperty(u)){let l=o[u];for(let h=0;h<l.length;h+=2)if(l[h]===e){s??=[],s.push(l[h+1],r[a+1]);break}}a+=2}t.initialInputs??=[],t.initialInputs.push(s)}function y1(t,e,n,r,i){t.data[r]=i;let o=i.factory||(i.factory=Ao(i.type,!0)),s=new yi(o,wn(i),Ce);t.blueprint[r]=s,n[r]=s,v1(t,e,r,gT(t,n,i.hostVars,tr),i)}function v1(t,e,n,r,i){let o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let a=~e.index;_1(s)!=a&&s.push(a),s.push(n,r,o)}}function _1(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function I1(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;wn(e)&&(n[""]=t)}}function w1(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function OT(t,e,n,r,i,o,s,a){let u=e.consts,l=ko(u,s),h=Gl(e,t,2,r,l);return o&&Dm(e,n,h,ko(u,a),i),h.mergedAttrs=Oo(h.mergedAttrs,h.attrs),h.attrs!==null&&Cg(h,h.attrs,!1),h.mergedAttrs!==null&&Cg(h,h.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,h),h}function FT(t,e){tm(t,e),Kg(e)&&t.queries.elementEnd(e)}var bl=class extends Wl{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=Ro(e);return new Ea(n,this.ngModule)}};function E1(t){return Object.keys(t).map(e=>{let[n,r,i]=t[e],o={propName:n,templateName:e,isSignal:(r&Bl.SignalBased)!==0};return i&&(o.transform=i),o})}function b1(t){return Object.keys(t).map(e=>({propName:t[e],templateName:e}))}function D1(t,e,n){let r=e instanceof Mt?e:e?.injector;return r&&t.getStandaloneInjector!==null&&(r=t.getStandaloneInjector(r)||r),r?new Tg(n,r):n}function T1(t){let e=t.get(Vo,null);if(e===null)throw new U(407,!1);let n=t.get(l1,null),r=t.get(Fo,null);return{rendererFactory:e,sanitizer:n,changeDetectionScheduler:r}}function C1(t,e){let n=(t.selectors[0][0]||"div").toLowerCase();return dT(e,n,n==="svg"?Px:n==="math"?xx:null)}var Ea=class extends xT{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=E1(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=b1(this.componentDef.outputs),this.cachedOutputs}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=eO(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!n}create(e,n,r,i){Se(22);let o=le(null);try{let s=this.componentDef,a=r?["ng-version","19.2.15"]:tO(this.componentDef.selectors[0]),u=fm(0,null,null,1,0,null,null,null,null,[a],null),l=D1(s,i||this.ngModule,e),h=T1(l),p=h.rendererFactory.createRenderer(null,s),m=r?dO(p,r,s.encapsulation,l):C1(s,p),y=pm(null,u,null,512|pT(s),null,null,h,p,l,null,aT(m,l,!0));y[In]=m,Xg(y);let T=null;try{let M=OT(In,u,y,"#host",()=>[this.componentDef],!0,0);m&&(fT(p,m,M),qo(m,y)),$l(u,y,M),lm(u,M,y),FT(u,M),n!==void 0&&S1(M,this.ngContentSelectors,n),T=bn(M.index,y),y[Nt]=T[Nt],_m(u,y,null)}catch(M){throw T!==null&&mg(T),mg(y),M}finally{Se(23),em()}return new Sg(this.componentType,y)}finally{le(o)}}},Sg=class extends c1{_rootLView;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,n){super(),this._rootLView=n,this._tNode=gD(n[pe],In),this.location=jl(this._tNode,n),this.instance=bn(this._tNode.index,n)[Nt],this.hostView=this.changeDetectorRef=new wa(n,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let i=this._rootLView,o=vm(r,i[pe],i,e,n);this.previousInputValues.set(e,n);let s=bn(r.index,i);bm(s,1)}get injector(){return new hi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function S1(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let o=n[i];r.push(o!=null&&o.length?Array.from(o):null)}}var Wo=(()=>{class t{static __NG_ELEMENT_ID__=A1}return t})();function A1(){let t=Lt();return M1(t,Ae())}var R1=Wo,VT=class extends R1{_lContainer;_hostTNode;_hostLView;constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return jl(this._hostTNode,this._hostLView)}get injector(){return new hi(this._hostTNode,this._hostLView)}get parentInjector(){let e=nm(this._hostTNode,this._hostLView);if(OD(e)){let n=ml(e,this._hostLView),r=gl(e),i=n[pe].data[r+8];return new hi(i,n)}else return new hi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=Sb(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-Yt}createEmbeddedView(e,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=bb(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,i,wb(this._hostTNode,s)),a}createComponent(e,n,r,i,o){let s=e&&!Ax(e),a;if(s)a=n;else{let T=n||{};a=T.index,r=T.injector,i=T.projectableNodes,o=T.environmentInjector||T.ngModuleRef}let u=s?e:new Ea(Ro(e)),l=r||this.parentInjector;if(!o&&u.ngModule==null){let M=(s?l:this.parentInjector).get(Mt,null);M&&(o=M)}let h=Ro(u.componentType??{}),p=bb(this._lContainer,h?.id??null),m=p?.firstChild??null,y=u.create(l,i,m,o);return this.insertImpl(y.hostView,a,wb(this._hostTNode,p)),y}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(kx(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[Dt],l=new VT(u,u[dn],u[Dt]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(n),s=this._lContainer;return JO(s,i,o,r),e.attachToViewContainerRef(),Jb(Wp(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=Sb(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=bg(this._lContainer,n);r&&(al(Wp(this._lContainer),n),wT(r[pe],r))}detach(e){let n=this._adjustIndex(e,-1),r=bg(this._lContainer,n);return r&&al(Wp(this._lContainer),n)!=null?new wa(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function Sb(t){return t[hl]}function Wp(t){return t[hl]||(t[hl]=[])}function M1(t,e){let n,r=e[t.index];return Xn(r)?n=r:(n=NT(r,e,null,t),e[t.index]=n,gm(e,n)),P1(n,e,t,r),new VT(n,t,e)}function N1(t,e){let n=t[Ze],r=n.createComment(""),i=er(e,t),o=n.parentNode(i);return wl(n,o,r,n.nextSibling(i),!1),r}var P1=O1,x1=()=>!1;function k1(t,e,n){return x1(t,e,n)}function O1(t,e,n,r){if(t[pi])return;let i;n.type&8?i=En(r):i=N1(e,n),t[pi]=i}var Lo=class{},Tm=class{};var Ag=class extends Lo{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new bl(this);constructor(e,n,r,i=!0){super(),this.ngModuleType=e,this._parent=n;let o=tD(e);this._bootstrapComponents=uT(o.bootstrap),this._r3Injector=zD(e,n,[{provide:Lo,useValue:this},{provide:Wl,useValue:this.componentFactoryResolver},...r],Rt(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Rg=class extends Tm{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new Ag(this.moduleType,e,[])}};var Dl=class extends Lo{injector;componentFactoryResolver=new bl(this);instance=null;constructor(e){super();let n=new _a([...e.providers,{provide:Lo,useValue:this},{provide:Wl,useValue:this.componentFactoryResolver}],e.parent||Wg(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Kl(t,e,n=null){return new Dl({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var F1=(()=>{class t{_injector;cachedInjectors=new Map;constructor(n){this._injector=n}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=nD(!1,n.type),i=r.length>0?Kl([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=$({token:t,providedIn:"environment",factory:()=>new t(ie(Mt))})}return t})();function $e(t){return Da(()=>{let e=LT(t),n=re(O({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===XD.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(F1).getOrCreateStandaloneInjector(n):null,getExternalStyles:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Dn.Emulated,styles:t.styles||Kt,_:null,schemas:t.schemas||null,tView:null,id:""});e.standalone&&um("NgStandalone"),jT(n);let r=t.dependencies;return n.directiveDefs=Ab(r,!1),n.pipeDefs=Ab(r,!0),n.id=B1(n),n})}function V1(t){return Ro(t)||mx(t)}function L1(t){return t!==null}function Si(t){return Da(()=>({type:t.type,bootstrap:t.bootstrap||Kt,declarations:t.declarations||Kt,imports:t.imports||Kt,exports:t.exports||Kt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function j1(t,e){if(t==null)return fi;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],o,s,a,u;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,u=i[3]||null):(o=i,s=i,a=Bl.None,u=null),n[o]=[r,a,u],e[o]=s}return n}function U1(t){if(t==null)return fi;let e={};for(let n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}function jt(t){return Da(()=>{let e=LT(t);return jT(e),e})}function LT(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputConfig:t.inputs||fi,exportAs:t.exportAs||null,standalone:t.standalone??!0,signals:t.signals===!0,selectors:t.selectors||Kt,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:j1(t.inputs,e),outputs:U1(t.outputs),debugInfo:null}}function jT(t){t.features?.forEach(e=>e(t))}function Ab(t,e){if(!t)return null;let n=e?yx:V1;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(L1)}function B1(t){let e=0,n=typeof t.consts=="function"?"":t.consts,r=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,n,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function $1(t){return Object.getPrototypeOf(t.prototype).constructor}function Ko(t){let e=$1(t.type),n=!0,r=[t];for(;e;){let i;if(wn(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new U(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let s=t;s.inputs=Kp(t.inputs),s.declaredInputs=Kp(t.declaredInputs),s.outputs=Kp(t.outputs);let a=i.hostBindings;a&&W1(t,a);let u=i.viewQuery,l=i.contentQueries;if(u&&q1(t,u),l&&G1(t,l),H1(t,i),YP(t.outputs,i.outputs),wn(i)&&i.data.animation){let h=t.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(t),a===Ko&&(n=!1)}}e=Object.getPrototypeOf(e)}z1(r)}function H1(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n])}}function z1(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Oo(i.hostAttrs,n=Oo(n,i.hostAttrs))}}function Kp(t){return t===fi?{}:t===Kt?[]:t}function q1(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function G1(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,o)=>{e(r,i,o),n(r,i,o)}:t.contentQueries=e}function W1(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}function UT(t){return Cm(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function K1(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{let n=t[Symbol.iterator](),r;for(;!(r=n.next()).done;)e(r.value)}}function Cm(t){return t!==null&&(typeof t=="function"||typeof t=="object")}function BT(t,e,n){return t[e]=n}function jo(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function Tl(t,e,n,r){let i=jo(t,e,n);return jo(t,e+1,r)||i}function Q1(t,e,n,r,i,o){let s=Tl(t,e,n,r);return Tl(t,e+2,i,o)||s}function Y1(t,e,n,r,i,o,s,a,u){let l=e.consts,h=Gl(e,t,4,s||null,a||null);Yg()&&Dm(e,n,h,ko(l,u),ym),h.mergedAttrs=Oo(h.mergedAttrs,h.attrs),tm(e,h);let p=h.tView=fm(2,h,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,h),p.queries=e.queries.embeddedTView(h)),h}function Z1(t,e,n,r,i,o,s,a,u,l){let h=n+In,p=e.firstCreatePass?Y1(h,e,t,r,i,o,s,a,u):e.data[h];bi(p,!1);let m=J1(e,t,p,n);Fl()&&Hl(e,t,m,p),qo(m,t);let y=NT(m,t,m,p);return t[h]=y,gm(t,y),k1(y,p,t),xl(p)&&$l(e,t,p),u!=null&&mm(t,p,l),p}function hn(t,e,n,r,i,o,s,a){let u=Ae(),l=Pt(),h=ko(l.consts,o);return Z1(u,l,t,e,n,r,i,h,s,a),hn}var J1=X1;function X1(t,e,n,r){return Vl(!0),e[Ze].createComment("")}var $T=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();var HT=new L("");var eF=(()=>{class t{static \u0275prov=$({token:t,providedIn:"root",factory:()=>new Mg})}return t})(),Mg=class{queuedEffectCount=0;queues=new Map;schedule(e){this.enqueue(e)}remove(e){let n=e.zone,r=this.queues.get(n);r.has(e)&&(r.delete(e),this.queuedEffectCount--)}enqueue(e){let n=e.zone;this.queues.has(n)||this.queues.set(n,new Set);let r=this.queues.get(n);r.has(e)||(this.queuedEffectCount++,r.add(e))}flush(){for(;this.queuedEffectCount>0;)for(let[e,n]of this.queues)e===null?this.flushQueue(n):e.run(()=>this.flushQueue(n))}flushQueue(e){for(let n of e)e.delete(n),this.queuedEffectCount--,n.run()}};function Ai(t){return!!t&&typeof t.then=="function"}function zT(t){return!!t&&typeof t.subscribe=="function"}var tF=new L("");var qT=(()=>{class t{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r});appInits=x(tF,{optional:!0})??[];injector=x(Je);constructor(){}runInitializers(){if(this.initialized)return;let n=[];for(let i of this.appInits){let o=Tt(this.injector,i);if(Ai(o))n.push(o);else if(zT(o)){let s=new Promise((a,u)=>{o.subscribe({complete:a,error:u})});n.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),n.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Sm=new L("");function nF(){vp(()=>{throw new U(600,!1)})}function rF(t){return t.isBoundToModule}var iF=10;var vi=(()=>{class t{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=x(bk);afterRenderManager=x(Fk);zonelessEnabled=x(rm);rootEffectScheduler=x(eF);dirtyFlags=0;tracingSnapshot=null;externalTestViews=new Set;afterTick=new Qe;get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];isStable=x(Ti).hasPendingTasks.pipe(ce(n=>!n));constructor(){x(Ul,{optional:!0})}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{n.unsubscribe()})}_injector=x(Mt);_rendererFactory=null;get injector(){return this._injector}bootstrap(n,r){return this.bootstrapImpl(n,r)}bootstrapImpl(n,r,i=Je.NULL){Se(10);let o=n instanceof xT;if(!this._injector.get(qT).done){let y="";throw new U(405,y)}let a;o?a=n:a=this._injector.get(Wl).resolveComponentFactory(n),this.componentTypes.push(a.componentType);let u=rF(a)?void 0:this._injector.get(Lo),l=r||a.selector,h=a.create(i,[],l,u),p=h.location.nativeElement,m=h.injector.get(HT,null);return m?.registerApplication(p),h.onDestroy(()=>{this.detachView(h.hostView),tl(this.components,h),m?.unregisterApplication(p)}),this._loadComponent(h),Se(11,h),h}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){Se(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(sT.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new U(101,!1);let n=le(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,le(n),this.afterTick.next(),Se(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Vo,null,{optional:!0}));let n=0;for(;this.dirtyFlags!==0&&n++<iF;)Se(14),this.synchronizeOnce(),Se(15)}synchronizeOnce(){if(this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush()),this.dirtyFlags&7){let n=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:r,notifyErrorHandler:i}of this.allViews)oF(r,i,n,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}else this._rendererFactory?.begin?.(),this._rendererFactory?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>kl(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;tl(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n),this._injector.get(Sm,[]).forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>tl(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new U(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function tl(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function oF(t,e,n,r){if(!n&&!kl(t))return;ST(t,e,n&&!r?0:1)}function sF(t,e,n,r){return jo(t,Jg(),n)?e+il(n)+r:tr}function aF(t,e,n,r,i,o){let s=zx(),a=Tl(t,s,n,i);return TD(2),a?e+il(n)+r+il(i)+o:tr}function Zu(t,e){return t<<17|e<<2}function _i(t){return t>>17&32767}function cF(t){return(t&2)==2}function uF(t,e){return t&131071|e<<17}function Ng(t){return t|2}function Uo(t){return(t&131068)>>2}function Qp(t,e){return t&-131069|e<<2}function lF(t){return(t&1)===1}function Pg(t){return t|1}function dF(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=_i(s),u=Uo(s);t[r]=n;let l=!1,h;if(Array.isArray(n)){let p=n;h=p[1],(h===null||Ca(p,h)>0)&&(l=!0)}else h=n;if(i)if(u!==0){let m=_i(t[a+1]);t[r+1]=Zu(m,a),m!==0&&(t[m+1]=Qp(t[m+1],r)),t[a+1]=uF(t[a+1],r)}else t[r+1]=Zu(a,0),a!==0&&(t[a+1]=Qp(t[a+1],r)),a=r;else t[r+1]=Zu(u,0),a===0?a=r:t[u+1]=Qp(t[u+1],r),u=r;l&&(t[r+1]=Ng(t[r+1])),Rb(t,h,r,!0),Rb(t,h,r,!1),hF(e,h,t,r,o),s=Zu(a,u),o?e.classBindings=s:e.styleBindings=s}function hF(t,e,n,r,i){let o=i?t.residualClasses:t.residualStyles;o!=null&&typeof e=="string"&&Ca(o,e)>=0&&(n[r+1]=Pg(n[r+1]))}function Rb(t,e,n,r){let i=t[n+1],o=e===null,s=r?_i(i):Uo(i),a=!1;for(;s!==0&&(a===!1||o);){let u=t[s],l=t[s+1];fF(u,e)&&(a=!0,t[s+1]=r?Pg(l):Ng(l)),s=r?_i(l):Uo(l)}a&&(t[n+1]=r?Ng(i):Pg(i))}function fF(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?Ca(t,e)>=0:!1}function Le(t,e,n){let r=Ae(),i=Jg();if(jo(r,i,e)){let o=Pt(),s=PD();vT(o,s,r,t,e,r[Ze],n,!1)}return Le}function Mb(t,e,n,r,i){vm(e,t,n,i?"class":"style",r)}function Sn(t,e,n){return GT(t,e,n,!1),Sn}function fn(t,e){return GT(t,e,null,!0),fn}function GT(t,e,n,r){let i=Ae(),o=Pt(),s=TD(2);if(o.firstUpdatePass&&gF(o,t,s,r),e!==tr&&jo(i,s,e)){let a=o.data[Di()];IF(o,a,i,i[Ze],t,i[s+1]=wF(e,n),r,s)}}function pF(t,e){return e>=t.expandoStartIndex}function gF(t,e,n,r){let i=t.data;if(i[n+1]===null){let o=i[Di()],s=pF(t,n);EF(o,r)&&e===null&&!s&&(e=!1),e=mF(i,o,e,r),dF(i,o,e,n,s,r)}}function mF(t,e,n,r){let i=Qx(t),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=Yp(null,t,e,n,r),n=ba(n,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||t[s]!==i)if(n=Yp(i,t,e,n,r),o===null){let u=yF(t,e,r);u!==void 0&&Array.isArray(u)&&(u=Yp(null,t,e,u[1],r),u=ba(u,e.attrs,r),vF(t,e,r,u))}else o=_F(t,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),n}function yF(t,e,n){let r=n?e.classBindings:e.styleBindings;if(Uo(r)!==0)return t[_i(r)]}function vF(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[_i(i)]=r}function _F(t,e,n){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=t[o].hostAttrs;r=ba(r,s,n)}return ba(r,e.attrs,n)}function Yp(t,e,n,r,i){let o=null,s=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<s&&(o=e[a],r=ba(r,o.hostAttrs,i),o!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function ba(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),px(t,s,n?!0:e[++o]))}return t===void 0?null:t}function IF(t,e,n,r,i,o,s,a){if(!(e.type&3))return;let u=t.data,l=u[a+1],h=lF(l)?Nb(u,e,n,i,Uo(l),s):void 0;if(!Cl(h)){Cl(o)||cF(l)&&(o=Nb(u,null,n,i,a,s));let p=pD(Di(),n);LO(r,s,p,i,o)}}function Nb(t,e,n,r,i,o){let s=e===null,a;for(;i>0;){let u=t[i],l=Array.isArray(u),h=l?u[1]:u,p=h===null,m=n[i+1];m===tr&&(m=p?Kt:void 0);let y=p?jp(m,r):h===r?m:void 0;if(l&&!Cl(y)&&(y=jp(u,r)),Cl(y)&&(a=y,s))return a;let T=t[i+1];i=s?_i(T):Uo(T)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(a=jp(u,r))}return a}function Cl(t){return t!==void 0}function wF(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=Rt(Uk(t)))),t}function EF(t,e){return(t.flags&(e?8:16))!==0}function B(t,e,n,r){let i=Ae(),o=Pt(),s=In+t,a=i[Ze],u=o.firstCreatePass?OT(s,o,i,e,ym,Yg(),n,r):o.data[s],l=bF(o,i,u,a,e,t);i[s]=l;let h=xl(u);return bi(u,!0),fT(a,l,u),!_T(u)&&Fl()&&Hl(o,i,l,u),(Vx()===0||h)&&qo(l,i),Lx(),h&&($l(o,i,u),lm(o,u,i)),r!==null&&mm(i,u),B}function H(){let t=Lt();Zg()?ED():(t=t.parent,bi(t,!1));let e=t;Bx(e)&&$x(),jx();let n=Pt();return n.firstCreatePass&&FT(n,e),e.classesWithoutHost!=null&&tk(e)&&Mb(n,e,Ae(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&nk(e)&&Mb(n,e,Ae(),e.stylesWithoutHost,!1),H}function Me(t,e,n,r){return B(t,e,n,r),H(),Me}var bF=(t,e,n,r,i,o)=>(Vl(!0),dT(r,i,Jx()));function DF(t,e,n,r,i){let o=e.consts,s=ko(o,r),a=Gl(e,t,8,"ng-container",s);s!==null&&Cg(a,s,!0);let u=ko(o,i);return Yg()&&Dm(e,n,a,u,ym),a.mergedAttrs=Oo(a.mergedAttrs,a.attrs),e.queries!==null&&e.queries.elementStart(e,a),a}function Ma(t,e,n){let r=Ae(),i=Pt(),o=t+In,s=i.firstCreatePass?DF(o,i,r,e,n):i.data[o];bi(s,!0);let a=TF(i,r,s,t);return r[o]=a,Fl()&&Hl(i,r,a,s),qo(a,r),xl(s)&&($l(i,r,s),lm(i,s,r)),n!=null&&mm(r,s),Ma}function Na(){let t=Lt(),e=Pt();return Zg()?ED():(t=t.parent,bi(t,!1)),e.firstCreatePass&&(tm(e,t),Kg(t)&&e.queries.elementEnd(t)),Na}var TF=(t,e,n,r)=>(Vl(!0),iO(e[Ze],""));function Qo(){return Ae()}var Sl="en-US";var CF=Sl;function SF(t){typeof t=="string"&&(CF=t.toLowerCase().replace(/_/g,"-"))}function Pb(t,e,n){return function r(i){if(i===Function)return n;let o=Ho(t)?bn(t.index,e):e;bm(o,5);let s=e[Nt],a=xb(e,s,n,i),u=r.__ngNextListenerFn__;for(;u;)a=xb(e,s,u,i)&&a,u=u.__ngNextListenerFn__;return a}}function xb(t,e,n,r){let i=le(null);try{return Se(6,e,n),n(r)!==!1}catch(o){return AF(t,o),!1}finally{Se(7,e,n),le(i)}}function AF(t,e){let n=t[No],r=n?n.get(Zn,null):null;r&&r.handleError(e)}function kb(t,e,n,r,i,o){let s=e[n],a=e[pe],l=a.data[n].outputs[r],h=s[l],p=a.firstCreatePass?ID(a):null,m=_D(e),y=h.subscribe(o),T=m.length;m.push(o,y),p&&p.push(i,t.index,T,-(T+1))}function Ne(t,e,n,r){let i=Ae(),o=Pt(),s=Lt();return WT(o,i,i[Ze],s,t,e,r),Ne}function RF(t,e,n,r){let i=t.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===n&&i[o+1]===r){let a=e[ll],u=i[o+2];return a.length>u?a[u]:null}typeof s=="string"&&(o+=2)}return null}function WT(t,e,n,r,i,o,s){let a=xl(r),l=t.firstCreatePass?ID(t):null,h=_D(e),p=!0;if(r.type&3||s){let m=er(r,e),y=s?s(m):m,T=h.length,M=s?V=>s(En(V[r.index])):r.index,R=null;if(!s&&a&&(R=RF(t,e,i,r.index)),R!==null){let V=R.__ngLastListenerFn__||R;V.__ngNextListenerFn__=o,R.__ngLastListenerFn__=o,p=!1}else{o=Pb(r,e,o),Lk(e,y,i,o);let V=n.listen(y,i,o);h.push(o,V),l&&l.push(i,M,T,T+1)}}else o=Pb(r,e,o);if(p){let m=r.outputs?.[i],y=r.hostDirectiveOutputs?.[i];if(y&&y.length)for(let T=0;T<y.length;T+=2){let M=y[T],R=y[T+1];kb(r,e,M,R,i,o)}if(m&&m.length)for(let T of m)kb(r,e,T,i,i,o)}}function Nr(t=1){return Zx(t)}function ne(t,e=""){let n=Ae(),r=Pt(),i=t+In,o=r.firstCreatePass?Gl(r,i,1,e,null):r.data[i],s=MF(r,n,o,e,t);n[i]=s,Fl()&&Hl(r,n,s,o),bi(o,!1)}var MF=(t,e,n,r,i)=>(Vl(!0),nO(e[Ze],r));function Pa(t){return KT("",t,""),Pa}function KT(t,e,n){let r=Ae(),i=sF(r,t,e,n);return i!==tr&&QT(r,Di(),i),KT}function Am(t,e,n,r,i){let o=Ae(),s=aF(o,t,e,n,r,i);return s!==tr&&QT(o,Di(),s),Am}function QT(t,e,n){let r=pD(e,t);rO(t[Ze],r,n)}function xa(t,e,n){ZD(e)&&(e=e());let r=Ae(),i=Jg();if(jo(r,i,e)){let o=Pt(),s=PD();vT(o,s,r,t,e,r[Ze],n,!1)}return xa}function Ql(t,e){let n=ZD(t);return n&&t.set(e),n}function ka(t,e){let n=Ae(),r=Pt(),i=Lt();return WT(r,n,n[Ze],i,t,e),ka}function NF(t,e,n){let r=Pt();if(r.firstCreatePass){let i=wn(t);xg(n,r.data,r.blueprint,i,!0),xg(e,r.data,r.blueprint,i,!1)}}function xg(t,e,n,r,i){if(t=bt(t),Array.isArray(t))for(let o=0;o<t.length;o++)xg(t[o],e,n,r,i);else{let o=Pt(),s=Ae(),a=Lt(),u=Mo(t)?t:bt(t.provide),l=oD(t),h=a.providerIndexes&1048575,p=a.directiveStart,m=a.providerIndexes>>20;if(Mo(t)||!t.multi){let y=new yi(l,i,Ce),T=Jp(u,e,i?h:h+m,p);T===-1?(lg(yl(a,s),o,u),Zp(o,t,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(y),s.push(y)):(n[T]=y,s[T]=y)}else{let y=Jp(u,e,h+m,p),T=Jp(u,e,h,h+m),M=y>=0&&n[y],R=T>=0&&n[T];if(i&&!R||!i&&!M){lg(yl(a,s),o,u);let V=kF(i?xF:PF,n.length,i,r,l);!i&&R&&(n[T].providerFactory=V),Zp(o,t,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(V),s.push(V)}else{let V=YT(n[i?T:y],l,!i&&r);Zp(o,t,y>-1?y:T,V)}!i&&r&&R&&n[T].componentProviders++}}}function Zp(t,e,n,r){let i=Mo(e),o=Ex(e);if(i||o){let u=(o?bt(e.useClass):e).prototype.ngOnDestroy;if(u){let l=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let h=l.indexOf(n);h===-1?l.push(n,[r,u]):l[h+1].push(r,u)}else l.push(n,u)}}}function YT(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Jp(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function PF(t,e,n,r,i){return kg(this.multi,[])}function xF(t,e,n,r,i){let o=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,u=vl(r,r[pe],this.providerFactory.index,i);s=u.slice(0,a),kg(o,s);for(let l=a;l<u.length;l++)s.push(u[l])}else s=[],kg(o,s);return s}function kg(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function kF(t,e,n,r,i){let o=new yi(t,n,Ce);return o.multi=[],o.index=e,o.componentProviders=0,YT(o,i,r&&!n),o}function Rm(t,e=[]){return n=>{n.providersResolver=(r,i)=>NF(r,i?i(t):t,e)}}function ZT(t,e,n,r,i){return OF(Ae(),DD(),t,e,n,r,i)}function JT(t,e,n,r,i,o,s){return FF(Ae(),DD(),t,e,n,r,i,o,s)}function XT(t,e){let n=t[e];return n===tr?void 0:n}function OF(t,e,n,r,i,o,s){let a=e+n;return Tl(t,a,i,o)?BT(t,a+2,s?r.call(s,i,o):r(i,o)):XT(t,a+2)}function FF(t,e,n,r,i,o,s,a,u){let l=e+n;return Q1(t,l,i,o,s,a)?BT(t,l+4,u?r.call(u,i,o,s,a):r(i,o,s,a)):XT(t,l+4)}var Bo=class{full;major;minor;patch;constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},eC=new Bo("19.2.15"),Og=class{ngModuleFactory;componentFactories;constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},tC=(()=>{class t{compileModuleSync(n){return new Rg(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),i=tD(n),o=uT(i.declarations).reduce((s,a)=>{let u=Ro(a);return u&&s.push(new Ea(u)),s},[]);return new Og(r,o)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var VF=(()=>{class t{zone=x(_e);changeDetectionScheduler=x(Fo);applicationRef=x(vi);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),LF=new L("",{factory:()=>!1});function nC({ngZoneFactory:t,ignoreChangesOutsideZone:e,scheduleInRootZone:n}){return t??=()=>new _e(re(O({},iC()),{scheduleInRootZone:n})),[{provide:_e,useFactory:t},{provide:va,multi:!0,useFactory:()=>{let r=x(VF,{optional:!0});return()=>r.initialize()}},{provide:va,multi:!0,useFactory:()=>{let r=x(jF);return()=>{r.initialize()}}},e===!0?{provide:GD,useValue:!0}:[],{provide:WD,useValue:n??qD}]}function rC(t){let e=t?.ignoreChangesOutsideZone,n=t?.scheduleInRootZone,r=nC({ngZoneFactory:()=>{let i=iC(t);return i.scheduleInRootZone=n,i.shouldCoalesceEventChangeDetection&&um("NgZone_CoalesceEvent"),new _e(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:n});return ln([{provide:LF,useValue:!0},{provide:rm,useValue:!1},r])}function iC(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var jF=(()=>{class t{subscription=new Oe;initialized=!1;zone=x(_e);pendingTasks=x(Ti);initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{_e.assertNotInAngularZone(),queueMicrotask(()=>{n!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{_e.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var UF=(()=>{class t{appRef=x(vi);taskService=x(Ti);ngZone=x(_e);zonelessEnabled=x(rm);tracing=x(Ul,{optional:!0});disableScheduling=x(GD,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Oe;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Il):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(x(WD,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof gg||!this.zoneIsDefined)}notify(n){if(!this.zonelessEnabled&&n===5)return;let r=!1;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?fb:KD;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(n){return!(this.disableScheduling&&!n||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Il+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(n),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,fb(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function BF(){return typeof $localize<"u"&&$localize.locale||Sl}var Mm=new L("",{providedIn:"root",factory:()=>x(Mm,te.Optional|te.SkipSelf)||BF()});var Fg=new L(""),$F=new L("");function pa(t){return!t.moduleRef}function HF(t){let e=pa(t)?t.r3Injector:t.moduleRef.injector,n=e.get(_e);return n.run(()=>{pa(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();let r=e.get(Zn,null),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:o=>{r.handleError(o)}})}),pa(t)){let o=()=>e.destroy(),s=t.platformInjector.get(Fg);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>t.moduleRef.destroy(),s=t.platformInjector.get(Fg);s.add(o),t.moduleRef.onDestroy(()=>{tl(t.allPlatformModules,t.moduleRef),i.unsubscribe(),s.delete(o)})}return qF(r,n,()=>{let o=e.get(qT);return o.runInitializers(),o.donePromise.then(()=>{let s=e.get(Mm,Sl);if(SF(s||Sl),!e.get($F,!0))return pa(t)?e.get(vi):(t.allPlatformModules.push(t.moduleRef),t.moduleRef);if(pa(t)){let u=e.get(vi);return t.rootComponent!==void 0&&u.bootstrap(t.rootComponent),u}else return zF(t.moduleRef,t.allPlatformModules),t.moduleRef})})})}function zF(t,e){let n=t.injector.get(vi);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(r=>n.bootstrap(r));else if(t.instance.ngDoBootstrap)t.instance.ngDoBootstrap(n);else throw new U(-403,!1);e.push(t)}function qF(t,e,n){try{let r=n();return Ai(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}var nl=null;function GF(t=[],e){return Je.create({name:e,providers:[{provide:Nl,useValue:"platform"},{provide:Fg,useValue:new Set([()=>nl=null])},...t]})}function WF(t=[]){if(nl)return nl;let e=GF(t);return nl=e,nF(),KF(e),e}function KF(t){let e=t.get(am,null);Tt(t,()=>{e?.forEach(n=>n())})}function Nm(){return!1}var Oa=(()=>{class t{static __NG_ELEMENT_ID__=QF}return t})();function QF(t){return YF(Lt(),Ae(),(t&16)===16)}function YF(t,e,n){if(Ho(t)&&!n){let r=bn(t.index,e);return new wa(r,r)}else if(t.type&175){let r=e[_n];return new wa(r,e)}return null}var Vg=class{constructor(){}supports(e){return UT(e)}create(e){return new Lg(e)}},ZF=(t,e)=>e,Lg=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||ZF}forEachItem(e){let n;for(n=this._itHead;n!==null;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,o=null;for(;n||r;){let s=!r||n&&n.currentIndex<Ob(r,i,o)?n:r,a=Ob(s,i,o),u=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(n=n._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,h=u-i;if(l!=h){for(let m=0;m<l;m++){let y=m<o.length?o[m]:o[m]=0,T=y+m;h<=T&&T<l&&(o[m]=y+1)}let p=s.previousIndex;o[p]=h-l}}a!==u&&e(s,a,u)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)e(n)}diff(e){if(e==null&&(e=[]),!UT(e))throw new U(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,o,s,a),r=!0):(r&&(n=this._verifyReinsertion(n,o,s,a)),Object.is(n.item,o)||this._addIdentityChange(n,o)),n=n._next}else i=0,K1(e,a=>{s=this._trackByFn(i,a),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,a,s,i),r=!0):(r&&(n=this._verifyReinsertion(n,a,s,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,o,i)):e=this._addAfter(new jg(n,r),o,i)),e}_verifyReinsertion(e,n,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let n=e._next;this._addToRemovals(this._unlink(e)),e=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){let i=n===null?this._itHead:n._next;return e._next=i,e._prev=n,i===null?this._itTail=e:i._prev=e,n===null?this._itHead=e:n._next=e,this._linkedRecords===null&&(this._linkedRecords=new Al),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let n=e._prev,r=e._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Al),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},jg=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,n){this.item=e,this.trackById=n}},Ug=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let n=e._prevDup,r=e._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},Al=class{map=new Map;put(e){let n=e.trackById,r=this.map.get(n);r||(r=new Ug,this.map.set(n,r)),r.add(e)}get(e,n){let r=e,i=this.map.get(r);return i?i.get(e,n):null}remove(e){let n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function Ob(t,e,n){let r=t.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}var Bg=class{constructor(){}supports(e){return e instanceof Map||Cm(e)}create(){return new $g}},$g=class{_records=new Map;_mapHead=null;_appendAfter=null;_previousMapHead=null;_changesHead=null;_changesTail=null;_additionsHead=null;_additionsTail=null;_removalsHead=null;_removalsTail=null;get isDirty(){return this._additionsHead!==null||this._changesHead!==null||this._removalsHead!==null}forEachItem(e){let n;for(n=this._mapHead;n!==null;n=n._next)e(n)}forEachPreviousItem(e){let n;for(n=this._previousMapHead;n!==null;n=n._nextPrevious)e(n)}forEachChangedItem(e){let n;for(n=this._changesHead;n!==null;n=n._nextChanged)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}diff(e){if(!e)e=new Map;else if(!(e instanceof Map||Cm(e)))throw new U(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,i)=>{if(n&&n.key===i)this._maybeAddToChanges(n,r),this._appendAfter=n,n=n._next;else{let o=this._getOrCreateRecordForKey(i,r);n=this._insertBeforeOrAppend(n,o)}}),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(let r=n;r!==null;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,n){if(e){let r=e._prev;return n._next=e,n._prev=r,e._prev=n,r&&(r._next=n),e===this._mapHead&&(this._mapHead=n),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=n,n._prev=this._appendAfter):this._mapHead=n,this._appendAfter=n,null}_getOrCreateRecordForKey(e,n){if(this._records.has(e)){let i=this._records.get(e);this._maybeAddToChanges(i,n);let o=i._prev,s=i._next;return o&&(o._next=s),s&&(s._prev=o),i._next=null,i._prev=null,i}let r=new Hg(e);return this._records.set(e,r),r.currentValue=n,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;e!==null;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;e!=null;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,n){Object.is(n,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=n,this._addToChanges(e))}_addToAdditions(e){this._additionsHead===null?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){this._changesHead===null?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,n){e instanceof Map?e.forEach(n):Object.keys(e).forEach(r=>n(e[r],r))}},Hg=class{key;previousValue=null;currentValue=null;_nextPrevious=null;_next=null;_prev=null;_nextAdded=null;_nextRemoved=null;_nextChanged=null;constructor(e){this.key=e}};function Fb(){return new Pm([new Vg])}var Pm=(()=>{class t{factories;static \u0275prov=$({token:t,providedIn:"root",factory:Fb});constructor(n){this.factories=n}static create(n,r){if(r!=null){let i=r.factories.slice();n=n.concat(i)}return new t(n)}static extend(n){return{provide:t,useFactory:r=>t.create(n,r||Fb()),deps:[[t,new Zb,new ut]]}}find(n){let r=this.factories.find(i=>i.supports(n));if(r!=null)return r;throw new U(901,!1)}}return t})();function Vb(){return new xm([new Bg])}var xm=(()=>{class t{static \u0275prov=$({token:t,providedIn:"root",factory:Vb});factories;constructor(n){this.factories=n}static create(n,r){if(r){let i=r.factories.slice();n=n.concat(i)}return new t(n)}static extend(n){return{provide:t,useFactory:r=>t.create(n,r||Vb()),deps:[[t,new Zb,new ut]]}}find(n){let r=this.factories.find(i=>i.supports(n));if(r)return r;throw new U(901,!1)}}return t})();function oC(t){let{rootComponent:e,appProviders:n,platformProviders:r,platformRef:i}=t;Se(8);try{let o=i?.injector??WF(r),s=[nC({}),{provide:Fo,useExisting:UF},...n||[]],a=new Dl({providers:s,parent:o,debugName:"",runEnvironmentInitializers:!1});return HF({r3Injector:a.injector,platformInjector:o,rootComponent:e})}catch(o){return Promise.reject(o)}finally{Se(9)}}function km(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}function nr(t){return wp(t)}function Fa(t,e){return yp(t,e?.equal)}var Lb=class{[qt];constructor(e){this[qt]=e}destroy(){this[qt].destroy()}};var yt=new L("");var cC=null;function Zt(){return cC}function Om(t){cC??=t}var Va=class{},Fm=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:()=>x(uC),providedIn:"platform"})}return t})();var uC=(()=>{class t extends Fm{_location;_history;_doc=x(yt);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Zt().getBaseHref(this._doc)}onPopState(n){let r=Zt().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=Zt().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:()=>new t,providedIn:"platform"})}return t})();function lC(t,e){return t?e?t.endsWith("/")?e.startsWith("/")?t+e.slice(1):t+e:e.startsWith("/")?t+e:`${t}/${e}`:t:e}function sC(t){let e=t.search(/#|\?|$/);return t[e-1]==="/"?t.slice(0,e-1)+t.slice(e):t}function Pr(t){return t&&t[0]!=="?"?`?${t}`:t}var Yl=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:()=>x(hC),providedIn:"root"})}return t})(),dC=new L(""),hC=(()=>{class t extends Yl{_platformLocation;_baseHref;_removeListenerFns=[];constructor(n,r){super(),this._platformLocation=n,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??x(yt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return lC(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+Pr(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,o){let s=this.prepareExternalUrl(i+Pr(o));this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){let s=this.prepareExternalUrl(i+Pr(o));this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static \u0275fac=function(r){return new(r||t)(ie(Fm),ie(dC,8))};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Yo=(()=>{class t{_subject=new Qe;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(n){this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=eV(sC(aC(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+Pr(r))}normalize(n){return t.stripTrailingSlash(XF(this._basePath,aC(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Pr(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Pr(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=Pr;static joinWithSlash=lC;static stripTrailingSlash=sC;static \u0275fac=function(r){return new(r||t)(ie(Yl))};static \u0275prov=$({token:t,factory:()=>JF(),providedIn:"root"})}return t})();function JF(){return new Yo(ie(Yl))}function XF(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function aC(t){return t.replace(/\/index.html$/,"")}function eV(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}var Vm=/\s+/,fC=[],Lm=(()=>{class t{_ngEl;_renderer;initialClasses=fC;rawClass;stateMap=new Map;constructor(n,r){this._ngEl=n,this._renderer=r}set klass(n){this.initialClasses=n!=null?n.trim().split(Vm):fC}set ngClass(n){this.rawClass=typeof n=="string"?n.trim().split(Vm):n}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let n=this.rawClass;if(Array.isArray(n)||n instanceof Set)for(let r of n)this._updateState(r,!0);else if(n!=null)for(let r of Object.keys(n))this._updateState(r,!!n[r]);this._applyStateDiff()}_updateState(n,r){let i=this.stateMap.get(n);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(n,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let n of this.stateMap){let r=n[0],i=n[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(n,r){n=n.trim(),n.length>0&&n.split(Vm).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static \u0275fac=function(r){return new(r||t)(Ce(Ci),Ce(Go))};static \u0275dir=jt({type:t,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return t})();var Zl=class{$implicit;ngForOf;index;count;constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Xl=(()=>{class t{_viewContainer;_template;_differs;set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(n,r,i){this._viewContainer=n,this._template=r,this._differs=i}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let n=this._ngForOf;!this._differ&&n&&(this._differ=this._differs.find(n).create(this.ngForTrackBy))}if(this._differ){let n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){let r=this._viewContainer;n.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new Zl(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),pC(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}n.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);pC(o,i)})}static ngTemplateContextGuard(n,r){return!0}static \u0275fac=function(r){return new(r||t)(Ce(Wo),Ce(ql),Ce(Pm))};static \u0275dir=jt({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return t})();function pC(t,e){t.context.$implicit=e.item}var rr=(()=>{class t{_viewContainer;_context=new Jl;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(n,r){this._viewContainer=n,this._thenTemplateRef=r}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){gC(n,!1),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){gC(n,!1),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(n,r){return!0}static \u0275fac=function(r){return new(r||t)(Ce(Wo),Ce(ql))};static \u0275dir=jt({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return t})(),Jl=class{$implicit=null;ngIf=null};function gC(t,e){if(t&&!t.createEmbeddedView)throw new U(2020,!1)}var jm=(()=>{class t{_ngEl;_differs;_renderer;_ngStyle=null;_differ=null;constructor(n,r,i){this._ngEl=n,this._differs=r,this._renderer=i}set ngStyle(n){this._ngStyle=n,!this._differ&&n&&(this._differ=this._differs.find(n).create())}ngDoCheck(){if(this._differ){let n=this._differ.diff(this._ngStyle);n&&this._applyChanges(n)}}_setStyle(n,r){let[i,o]=n.split("."),s=i.indexOf("-")===-1?void 0:Tn.DashCase;r!=null?this._renderer.setStyle(this._ngEl.nativeElement,i,o?`${r}${o}`:r,s):this._renderer.removeStyle(this._ngEl.nativeElement,i,s)}_applyChanges(n){n.forEachRemovedItem(r=>this._setStyle(r.key,null)),n.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),n.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}static \u0275fac=function(r){return new(r||t)(Ce(Ci),Ce(xm),Ce(Go))};static \u0275dir=jt({type:t,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}})}return t})();var tt=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=Si({type:t});static \u0275inj=Ii({})}return t})();function Um(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var ed="browser",mC="server";function td(t){return t===ed}function nd(t){return t===mC}var La=class{};var od=new L(""),zm=(()=>{class t{_zone;_plugins;_eventNameToPlugin=new Map;constructor(n,r){this._zone=r,n.forEach(i=>{i.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,i,o){return this._findPluginFor(r).addEventListener(n,r,i,o)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(o=>o.supports(n)),!r)throw new U(5101,!1);return this._eventNameToPlugin.set(n,r),r}static \u0275fac=function(r){return new(r||t)(ie(od),ie(_e))};static \u0275prov=$({token:t,factory:t.\u0275fac})}return t})(),ja=class{_doc;constructor(e){this._doc=e}manager},rd="ng-app-id";function yC(t){for(let e of t)e.remove()}function vC(t,e){let n=e.createElement("style");return n.textContent=t,n}function tV(t,e,n,r){let i=t.head?.querySelectorAll(`style[${rd}="${e}"],link[${rd}="${e}"]`);if(i)for(let o of i)o.removeAttribute(rd),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&n.set(o.textContent,{usage:0,elements:[o]})}function $m(t,e){let n=e.createElement("link");return n.setAttribute("rel","stylesheet"),n.setAttribute("href",t),n}var qm=(()=>{class t{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(n,r,i,o={}){this.doc=n,this.appId=r,this.nonce=i,this.isServer=nd(o),tV(n,r,this.inline,this.external),this.hosts.add(n.head)}addStyles(n,r){for(let i of n)this.addUsage(i,this.inline,vC);r?.forEach(i=>this.addUsage(i,this.external,$m))}removeStyles(n,r){for(let i of n)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(n,r,i){let o=r.get(n);o?o.usage++:r.set(n,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(n,this.doc)))})}removeUsage(n,r){let i=r.get(n);i&&(i.usage--,i.usage<=0&&(yC(i.elements),r.delete(n)))}ngOnDestroy(){for(let[,{elements:n}]of[...this.inline,...this.external])yC(n);this.hosts.clear()}addHost(n){this.hosts.add(n);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(n,vC(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(n,$m(r,this.doc)))}removeHost(n){this.hosts.delete(n)}addElement(n,r){return this.nonce&&r.setAttribute("nonce",this.nonce),this.isServer&&r.setAttribute(rd,this.appId),n.appendChild(r)}static \u0275fac=function(r){return new(r||t)(ie(yt),ie(sm),ie(cm,8),ie(Cn))};static \u0275prov=$({token:t,factory:t.\u0275fac})}return t})(),Bm={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Gm=/%COMP%/g;var IC="%COMP%",nV=`_nghost-${IC}`,rV=`_ngcontent-${IC}`,iV=!0,oV=new L("",{providedIn:"root",factory:()=>iV});function sV(t){return rV.replace(Gm,t)}function aV(t){return nV.replace(Gm,t)}function wC(t,e){return e.map(n=>n.replace(Gm,t))}var Wm=(()=>{class t{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(n,r,i,o,s,a,u,l=null,h=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=u,this.nonce=l,this.tracingService=h,this.platformIsServer=nd(a),this.defaultRenderer=new Ua(n,s,u,this.platformIsServer,this.tracingService)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Dn.ShadowDom&&(r=re(O({},r),{encapsulation:Dn.Emulated}));let i=this.getOrCreateRenderer(n,r);return i instanceof id?i.applyToHost(n):i instanceof Ba&&i.applyStyles(),i}getOrCreateRenderer(n,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer,m=this.tracingService;switch(r.encapsulation){case Dn.Emulated:o=new id(u,l,r,this.appId,h,s,a,p,m);break;case Dn.ShadowDom:return new Hm(u,l,n,r,s,a,this.nonce,p,m);default:o=new Ba(u,l,r,h,s,a,p,m);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(n){this.rendererByCompId.delete(n)}static \u0275fac=function(r){return new(r||t)(ie(zm),ie(qm),ie(sm),ie(oV),ie(yt),ie(Cn),ie(_e),ie(cm),ie(Ul,8))};static \u0275prov=$({token:t,factory:t.\u0275fac})}return t})(),Ua=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,n,r,i,o){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,n){return n?this.doc.createElementNS(Bm[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(_C(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(_C(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){n.remove()}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new U(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let o=Bm[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=Bm[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(Tn.DashCase|Tn.Important)?e.style.setProperty(n,r,i&Tn.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Tn.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r,i){if(typeof e=="string"&&(e=Zt().getGlobalEventTarget(this.doc,e),!e))throw new U(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,n,o)),this.eventManager.addEventListener(e,n,o,i)}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function _C(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var Hm=class extends Ua{sharedStylesHost;hostEl;shadowRoot;constructor(e,n,r,i,o,s,a,u,l){super(e,o,s,u,l),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let h=i.styles;h=wC(i.id,h);for(let m of h){let y=document.createElement("style");a&&y.setAttribute("nonce",a),y.textContent=m,this.shadowRoot.appendChild(y)}let p=i.getExternalStyles?.();if(p)for(let m of p){let y=$m(m,o);a&&y.setAttribute("nonce",a),this.shadowRoot.appendChild(y)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(null,n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Ba=class extends Ua{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,n,r,i,o,s,a,u,l){super(e,o,s,a,u),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i;let h=r.styles;this.styles=l?wC(l,h):h,this.styleUrls=r.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},id=class extends Ba{contentAttr;hostAttr;constructor(e,n,r,i,o,s,a,u,l){let h=i+"-"+r.id;super(e,n,r,o,s,a,u,l,h),this.contentAttr=sV(h),this.hostAttr=aV(h)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}};var sd=class t extends Va{supportsDOMEvents=!0;static makeCurrent(){Om(new t)}onAndCancel(e,n,r,i){return e.addEventListener(n,r,i),()=>{e.removeEventListener(n,r,i)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.remove()}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=cV();return n==null?null:uV(n)}resetBaseElement(){$a=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Um(document.cookie,e)}},$a=null;function cV(){return $a=$a||document.head.querySelector("base"),$a?$a.getAttribute("href"):null}function uV(t){return new URL(t,document.baseURI).pathname}var lV=(()=>{class t{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:t.\u0275fac})}return t})(),bC=(()=>{class t extends ja{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i,o){return n.addEventListener(r,i,o),()=>this.removeEventListener(n,r,i,o)}removeEventListener(n,r,i,o){return n.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||t)(ie(yt))};static \u0275prov=$({token:t,factory:t.\u0275fac})}return t})(),EC=["alt","control","meta","shift"],dV={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},hV={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},DC=(()=>{class t extends ja{constructor(n){super(n)}supports(n){return t.parseEventName(n)!=null}addEventListener(n,r,i,o){let s=t.parseEventName(r),a=t.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Zt().onAndCancel(n,s.domEventName,a,o))}static parseEventName(n){let r=n.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=t._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),EC.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(n,r){let i=dV[n.key]||n.key,o="";return r.indexOf("code.")>-1&&(i=n.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),EC.forEach(s=>{if(s!==i){let a=hV[s];a(n)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(n,r,i){return o=>{t.matchEventFullKeyCode(o,n)&&i.runGuarded(()=>r(o))}}static _normalizeKey(n){return n==="esc"?"escape":n}static \u0275fac=function(r){return new(r||t)(ie(yt))};static \u0275prov=$({token:t,factory:t.\u0275fac})}return t})();function Km(t,e,n){return oC(O({rootComponent:t,platformRef:n?.platformRef},fV(e)))}function fV(t){return{appProviders:[...vV,...t?.providers??[]],platformProviders:yV}}function pV(){sd.makeCurrent()}function gV(){return new Zn}function mV(){return iT(document),document}var yV=[{provide:Cn,useValue:ed},{provide:am,useValue:pV,multi:!0},{provide:yt,useFactory:mV}];var vV=[{provide:Nl,useValue:"root"},{provide:Zn,useFactory:gV},{provide:od,useClass:bC,multi:!0,deps:[yt]},{provide:od,useClass:DC,multi:!0,deps:[yt]},Wm,qm,zm,{provide:Vo,useExisting:Wm},{provide:La,useClass:lV},[]];var TC=(()=>{class t{_doc;constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static \u0275fac=function(r){return new(r||t)(ie(yt))};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var ee="primary",nc=Symbol("RouteTitle"),Xm=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function Pi(t){return new Xm(t)}function xC(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=t[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function IV(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!An(t[n],e[n]))return!1;return!0}function An(t,e){let n=t?ey(t):void 0,r=e?ey(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!kC(t[i],e[i]))return!1;return!0}function ey(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function kC(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,o)=>r[o]===i)}else return t===e}function OC(t){return t.length>0?t[t.length-1]:null}function Or(t){return Op(t)?t:Ai(t)?xe(Promise.resolve(t)):Q(t)}var wV={exact:VC,subset:LC},FC={exact:EV,subset:bV,ignored:()=>!0};function CC(t,e,n){return wV[n.paths](t.root,e.root,n.matrixParams)&&FC[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function EV(t,e){return An(t,e)}function VC(t,e,n){if(!Mi(t.segments,e.segments)||!ud(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!VC(t.children[r],e.children[r],n))return!1;return!0}function bV(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>kC(t[n],e[n]))}function LC(t,e,n){return jC(t,e,e.segments,n)}function jC(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!Mi(i,n)||e.hasChildren()||!ud(i,n,r))}else if(t.segments.length===n.length){if(!Mi(t.segments,n)||!ud(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!LC(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!Mi(t.segments,i)||!ud(t.segments,i,r)||!t.children[ee]?!1:jC(t.children[ee],e,o,r)}}function ud(t,e,n){return e.every((r,i)=>FC[n](t[i].parameters,r.parameters))}var Mn=class{root;queryParams;fragment;_queryParamMap;constructor(e=new ve([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Pi(this.queryParams),this._queryParamMap}toString(){return CV.serialize(this)}},ve=class{segments;children;parent=null;constructor(e,n){this.segments=e,this.children=n,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ld(this)}},xr=class{path;parameters;_parameterMap;constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=Pi(this.parameters),this._parameterMap}toString(){return BC(this)}};function DV(t,e){return Mi(t,e)&&t.every((n,r)=>An(n.parameters,e[r].parameters))}function Mi(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function TV(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===ee&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==ee&&(n=n.concat(e(i,r)))}),n}var rc=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:()=>new xi,providedIn:"root"})}return t})(),xi=class{parse(e){let n=new ny(e);return new Mn(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${Ha(e.root,!0)}`,r=RV(e.queryParams),i=typeof e.fragment=="string"?`#${SV(e.fragment)}`:"";return`${n}${r}${i}`}},CV=new xi;function ld(t){return t.segments.map(e=>BC(e)).join("/")}function Ha(t,e){if(!t.hasChildren())return ld(t);if(e){let n=t.children[ee]?Ha(t.children[ee],!1):"",r=[];return Object.entries(t.children).forEach(([i,o])=>{i!==ee&&r.push(`${i}:${Ha(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=TV(t,(r,i)=>i===ee?[Ha(t.children[ee],!1)]:[`${i}:${Ha(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[ee]!=null?`${ld(t)}/${n[0]}`:`${ld(t)}/(${n.join("//")})`}}function UC(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ad(t){return UC(t).replace(/%3B/gi,";")}function SV(t){return encodeURI(t)}function ty(t){return UC(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function dd(t){return decodeURIComponent(t)}function SC(t){return dd(t.replace(/\+/g,"%20"))}function BC(t){return`${ty(t.path)}${AV(t.parameters)}`}function AV(t){return Object.entries(t).map(([e,n])=>`;${ty(e)}=${ty(n)}`).join("")}function RV(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${ad(n)}=${ad(i)}`).join("&"):`${ad(n)}=${ad(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var MV=/^[^\/()?;#]+/;function Qm(t){let e=t.match(MV);return e?e[0]:""}var NV=/^[^\/()?;=#]+/;function PV(t){let e=t.match(NV);return e?e[0]:""}var xV=/^[^=?&#]+/;function kV(t){let e=t.match(xV);return e?e[0]:""}var OV=/^[^&#]+/;function FV(t){let e=t.match(OV);return e?e[0]:""}var ny=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new ve([],{}):new ve([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[ee]=new ve(e,n)),r}parseSegment(){let e=Qm(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new U(4009,!1);return this.capture(e),new xr(dd(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=PV(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=Qm(this.remaining);i&&(r=i,this.capture(r))}e[dd(n)]=dd(r)}parseQueryParam(e){let n=kV(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=FV(this.remaining);s&&(r=s,this.capture(r))}let i=SC(n),o=SC(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Qm(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new U(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=ee);let s=this.parseChildren();n[o]=Object.keys(s).length===1?s[ee]:new ve([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new U(4011,!1)}};function $C(t){return t.segments.length>0?new ve([],{[ee]:t}):t}function HC(t){let e={};for(let[r,i]of Object.entries(t.children)){let o=HC(i);if(r===ee&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let n=new ve(t.segments,e);return VV(n)}function VV(t){if(t.numberOfChildren===1&&t.children[ee]){let e=t.children[ee];return new ve(t.segments.concat(e.segments),e.children)}return t}function ts(t){return t instanceof Mn}function zC(t,e,n=null,r=null){let i=qC(t);return GC(i,e,n,r)}function qC(t){let e;function n(o){let s={};for(let u of o.children){let l=n(u);s[u.outlet]=l}let a=new ve(o.url,s);return o===t&&(e=a),a}let r=n(t.root),i=$C(r);return e??i}function GC(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return Ym(i,i,i,n,r);let o=LV(e);if(o.toRoot())return Ym(i,i,new ve([],{}),n,r);let s=jV(o,i,t),a=s.processChildren?qa(s.segmentGroup,s.index,o.commands):KC(s.segmentGroup,s.index,o.commands);return Ym(i,s.segmentGroup,a,n,r)}function fd(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function Wa(t){return typeof t=="object"&&t!=null&&t.outlets}function Ym(t,e,n,r,i){let o={};r&&Object.entries(r).forEach(([u,l])=>{o[u]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let s;t===e?s=n:s=WC(t,e,n);let a=$C(HC(s));return new Mn(a,o,i)}function WC(t,e,n){let r={};return Object.entries(t.children).forEach(([i,o])=>{o===e?r[i]=n:r[i]=WC(o,e,n)}),new ve(t.segments,r)}var pd=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&fd(r[0]))throw new U(4003,!1);let i=r.find(Wa);if(i&&i!==OC(r))throw new U(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function LV(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new pd(!0,0,t);let e=0,n=!1,r=t.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([u,l])=>{a[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new pd(n,e,r)}var Xo=class{segmentGroup;processChildren;index;constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function jV(t,e,n){if(t.isAbsolute)return new Xo(e,!0,0);if(!n)return new Xo(e,!1,NaN);if(n.parent===null)return new Xo(n,!0,0);let r=fd(t.commands[0])?0:1,i=n.segments.length-1+r;return UV(n,i,t.numberOfDoubleDots)}function UV(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new U(4005,!1);i=r.segments.length}return new Xo(r,!1,i-o)}function BV(t){return Wa(t[0])?t[0].outlets:{[ee]:t}}function KC(t,e,n){if(t??=new ve([],{}),t.segments.length===0&&t.hasChildren())return qa(t,e,n);let r=$V(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let o=new ve(t.segments.slice(0,r.pathIndex),{});return o.children[ee]=new ve(t.segments.slice(r.pathIndex),t.children),qa(o,0,i)}else return r.match&&i.length===0?new ve(t.segments,{}):r.match&&!t.hasChildren()?ry(t,e,n):r.match?qa(t,0,i):ry(t,e,n)}function qa(t,e,n){if(n.length===0)return new ve(t.segments,{});{let r=BV(n),i={};if(Object.keys(r).some(o=>o!==ee)&&t.children[ee]&&t.numberOfChildren===1&&t.children[ee].segments.length===0){let o=qa(t.children[ee],e,n);return new ve(t.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=KC(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new ve(t.segments,i)}}function $V(t,e,n){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;let s=t.segments[i],a=n[r];if(Wa(a))break;let u=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!RC(u,l,s))return o;r+=2}else{if(!RC(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function ry(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let o=n[i];if(Wa(o)){let u=HV(o.outlets);return new ve(r,u)}if(i===0&&fd(n[0])){let u=t.segments[e];r.push(new xr(u.path,AC(n[0]))),i++;continue}let s=Wa(o)?o.outlets[ee]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&fd(a)?(r.push(new xr(s,AC(a))),i+=2):(r.push(new xr(s,{})),i++)}return new ve(r,{})}function HV(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=ry(new ve([],{}),0,r))}),e}function AC(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function RC(t,e,n){return t==n.path&&An(e,n.parameters)}var hd="imperative",nt=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(nt||{}),Bt=class{id;url;constructor(e,n){this.id=e,this.url=n}},ki=class extends Bt{type=nt.NavigationStart;navigationTrigger;restoredState;constructor(e,n,r="imperative",i=null){super(e,n),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},ir=class extends Bt{urlAfterRedirects;type=nt.NavigationEnd;constructor(e,n,r){super(e,n),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},xt=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(xt||{}),Ka=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(Ka||{}),Rn=class extends Bt{reason;code;type=nt.NavigationCancel;constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},or=class extends Bt{reason;code;type=nt.NavigationSkipped;constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i}},ns=class extends Bt{error;target;type=nt.NavigationError;constructor(e,n,r,i){super(e,n),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Qa=class extends Bt{urlAfterRedirects;state;type=nt.RoutesRecognized;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},gd=class extends Bt{urlAfterRedirects;state;type=nt.GuardsCheckStart;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},md=class extends Bt{urlAfterRedirects;state;shouldActivate;type=nt.GuardsCheckEnd;constructor(e,n,r,i,o){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},yd=class extends Bt{urlAfterRedirects;state;type=nt.ResolveStart;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},vd=class extends Bt{urlAfterRedirects;state;type=nt.ResolveEnd;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},_d=class{route;type=nt.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Id=class{route;type=nt.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},wd=class{snapshot;type=nt.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ed=class{snapshot;type=nt.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},bd=class{snapshot;type=nt.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Dd=class{snapshot;type=nt.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Ya=class{},rs=class{url;navigationBehaviorOptions;constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}};function zV(t,e){return t.providers&&!t._injector&&(t._injector=Kl(t.providers,e,`Route: ${t.path}`)),t._injector??e}function pn(t){return t.outlet||ee}function qV(t,e){let n=t.filter(r=>pn(r)===e);return n.push(...t.filter(r=>pn(r)!==e)),n}function ic(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var Td=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return ic(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new ss(this.rootInjector)}},ss=(()=>{class t{rootInjector;contexts=new Map;constructor(n){this.rootInjector=n}onChildOutletCreated(n,r){let i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){let r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new Td(this.rootInjector),this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static \u0275fac=function(r){return new(r||t)(ie(Mt))};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Cd=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=iy(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=iy(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=oy(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return oy(e,this._root).map(n=>n.value)}};function iy(t,e){if(t===e.value)return e;for(let n of e.children){let r=iy(t,n);if(r)return r}return null}function oy(t,e){if(t===e.value)return[e];for(let n of e.children){let r=oy(t,n);if(r.length)return r.unshift(e),r}return[]}var Ut=class{value;children;constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function Jo(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var Za=class extends Cd{snapshot;constructor(e,n){super(e),this.snapshot=n,fy(this,e)}toString(){return this.snapshot.toString()}};function QC(t){let e=GV(t),n=new at([new xr("",{})]),r=new at({}),i=new at({}),o=new at({}),s=new at(""),a=new kr(n,r,o,s,i,ee,t,e.root);return a.snapshot=e.root,new Za(new Ut(a,[]),e)}function GV(t){let e={},n={},r={},i="",o=new Ni([],e,r,i,n,ee,t,null,{});return new Ja("",new Ut(o,[]))}var kr=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,n,r,i,o,s,a,u){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(ce(l=>l[nc]))??Q(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ce(e=>Pi(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ce(e=>Pi(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Sd(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:O(O({},e.params),t.params),data:O(O({},e.data),t.data),resolve:O(O(O(O({},t.data),e.data),i?.data),t._resolvedData)}:r={params:O({},t.params),data:O({},t.data),resolve:O(O({},t.data),t._resolvedData??{})},i&&ZC(i)&&(r.resolve[nc]=i.title),r}var Ni=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[nc]}constructor(e,n,r,i,o,s,a,u,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Pi(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Pi(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},Ja=class extends Cd{url;constructor(e,n){super(n),this.url=e,fy(this,n)}toString(){return YC(this._root)}};function fy(t,e){e.value._routerState=t,e.children.forEach(n=>fy(t,n))}function YC(t){let e=t.children.length>0?` { ${t.children.map(YC).join(", ")} } `:"";return`${t.value}${e}`}function Zm(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,An(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),An(e.params,n.params)||t.paramsSubject.next(n.params),IV(e.url,n.url)||t.urlSubject.next(n.url),An(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function sy(t,e){let n=An(t.params,e.params)&&DV(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||sy(t.parent,e.parent))}function ZC(t){return typeof t.title=="string"||t.title===null}var JC=new L(""),oc=(()=>{class t{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=ee;activateEvents=new Fe;deactivateEvents=new Fe;attachEvents=new Fe;detachEvents=new Fe;routerOutletData=YD(void 0);parentContexts=x(ss);location=x(Wo);changeDetector=x(Oa);inputBinder=x(Nd,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(n){if(n.name){let{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new U(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new U(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new U(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new U(4013,!1);this._activatedRoute=n;let i=this.location,s=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new ay(n,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||t)};static \u0275dir=jt({type:t,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Sa]})}return t})(),ay=class{route;childContexts;parent;outletData;constructor(e,n,r,i){this.route=e,this.childContexts=n,this.parent=r,this.outletData=i}get(e,n){return e===kr?this.route:e===ss?this.childContexts:e===JC?this.outletData:this.parent.get(e,n)}},Nd=new L("");var py=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275cmp=$e({type:t,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&Me(0,"router-outlet")},dependencies:[oc],encapsulation:2})}return t})();function gy(t){let e=t.children&&t.children.map(gy),n=e?re(O({},t),{children:e}):O({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==ee&&(n.component=py),n}function WV(t,e,n){let r=Xa(t,e._root,n?n._root:void 0);return new Za(r,e)}function Xa(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=KV(t,e,n);return new Ut(r,i)}else{if(t.shouldAttach(e.value)){let o=t.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Xa(t,a)),s}}let r=QV(e.value),i=e.children.map(o=>Xa(t,o));return new Ut(r,i)}}function KV(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return Xa(t,r,i);return Xa(t,r)})}function QV(t){return new kr(new at(t.url),new at(t.params),new at(t.queryParams),new at(t.fragment),new at(t.data),t.outlet,t.component,t)}var is=class{redirectTo;navigationBehaviorOptions;constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}},XC="ngNavigationCancelingError";function Ad(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=ts(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=e0(!1,xt.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function e0(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[XC]=!0,n.cancellationCode=e,n}function YV(t){return t0(t)&&ts(t.url)}function t0(t){return!!t&&t[XC]}var ZV=(t,e,n,r)=>ce(i=>(new cy(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),cy=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,n,r,i,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),Zm(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=Jo(n);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=Jo(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=Jo(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=Jo(n);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Dd(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Ed(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(Zm(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Zm(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},Rd=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},es=class{component;route;constructor(e,n){this.component=e,this.route=n}};function JV(t,e,n){let r=t._root,i=e?e._root:null;return za(r,i,n,[r.value])}function XV(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function as(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!Hb(t)?t:e.get(t):r}function za(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Jo(e);return t.children.forEach(s=>{eL(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Ga(a,n.getContext(s),i)),i}function eL(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let u=tL(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new Rd(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?za(t,e,a?a.children:null,r,i):za(t,e,n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new es(a.outlet.component,s))}else s&&Ga(e,a,i),i.canActivateChecks.push(new Rd(r)),o.component?za(t,null,a?a.children:null,r,i):za(t,null,n,r,i);return i}function tL(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!Mi(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Mi(t.url,e.url)||!An(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!sy(t,e)||!An(t.queryParams,e.queryParams);case"paramsChange":default:return!sy(t,e)}}function Ga(t,e,n){let r=Jo(t),i=t.value;Object.entries(r).forEach(([o,s])=>{i.component?e?Ga(s,e.children.getContext(o),n):Ga(s,null,n):Ga(s,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new es(e.outlet.component,i)):n.canDeactivateChecks.push(new es(null,i)):n.canDeactivateChecks.push(new es(null,i))}function sc(t){return typeof t=="function"}function nL(t){return typeof t=="boolean"}function rL(t){return t&&sc(t.canLoad)}function iL(t){return t&&sc(t.canActivate)}function oL(t){return t&&sc(t.canActivateChild)}function sL(t){return t&&sc(t.canDeactivate)}function aL(t){return t&&sc(t.canMatch)}function n0(t){return t instanceof Kn||t?.name==="EmptyError"}var cd=Symbol("INITIAL_VALUE");function os(){return an(t=>qu(t.map(e=>e.pipe(Qn(1),Qu(cd)))).pipe(ce(e=>{for(let n of e)if(n!==!0){if(n===cd)return cd;if(n===!1||cL(n))return n}return!0}),Gt(e=>e!==cd),Qn(1)))}function cL(t){return ts(t)||t instanceof is}function uL(t,e){return Ye(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?Q(re(O({},n),{guardsResult:!0})):lL(s,r,i,t).pipe(Ye(a=>a&&nL(a)?dL(r,o,t,e):Q(a)),ce(a=>re(O({},n),{guardsResult:a})))})}function lL(t,e,n,r){return xe(t).pipe(Ye(i=>mL(i.component,i.route,n,e,r)),Yn(i=>i!==!0,!0))}function dL(t,e,n,r){return xe(e).pipe(Eo(i=>wo(fL(i.route.parent,r),hL(i.route,r),gL(t,i.path,n),pL(t,i.route,n))),Yn(i=>i!==!0,!0))}function hL(t,e){return t!==null&&e&&e(new bd(t)),Q(!0)}function fL(t,e){return t!==null&&e&&e(new wd(t)),Q(!0)}function pL(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return Q(!0);let i=r.map(o=>Gu(()=>{let s=ic(e)??n,a=as(o,s),u=iL(a)?a.canActivate(e,t):Tt(s,()=>a(e,t));return Or(u).pipe(Yn())}));return Q(i).pipe(os())}function gL(t,e,n){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>XV(s)).filter(s=>s!==null).map(s=>Gu(()=>{let a=s.guards.map(u=>{let l=ic(s.node)??n,h=as(u,l),p=oL(h)?h.canActivateChild(r,t):Tt(l,()=>h(r,t));return Or(p).pipe(Yn())});return Q(a).pipe(os())}));return Q(o).pipe(os())}function mL(t,e,n,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return Q(!0);let s=o.map(a=>{let u=ic(e)??i,l=as(a,u),h=sL(l)?l.canDeactivate(t,e,n,r):Tt(u,()=>l(t,e,n,r));return Or(h).pipe(Yn())});return Q(s).pipe(os())}function yL(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return Q(!0);let o=i.map(s=>{let a=as(s,t),u=rL(a)?a.canLoad(e,n):Tt(t,()=>a(e,n));return Or(u)});return Q(o).pipe(os(),r0(r))}function r0(t){return Cu(ct(e=>{if(typeof e!="boolean")throw Ad(t,e)}),ce(e=>e===!0))}function vL(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return Q(!0);let o=i.map(s=>{let a=as(s,t),u=aL(a)?a.canMatch(e,n):Tt(t,()=>a(e,n));return Or(u)});return Q(o).pipe(os(),r0(r))}var ec=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},tc=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function Zo(t){return Io(new ec(t))}function _L(t){return Io(new U(4e3,!1))}function IL(t){return Io(e0(!1,xt.GuardRejected))}var uy=class{urlSerializer;urlTree;constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return Q(r);if(i.numberOfChildren>1||!i.children[ee])return _L(`${e.redirectTo}`);i=i.children[ee]}}applyRedirectCommands(e,n,r,i,o){if(typeof n!="string"){let a=n,{queryParams:u,fragment:l,routeConfig:h,url:p,outlet:m,params:y,data:T,title:M}=i,R=Tt(o,()=>a({params:y,data:T,queryParams:u,fragment:l,routeConfig:h,url:p,outlet:m,title:M}));if(R instanceof Mn)throw new tc(R);n=R}let s=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n[0]==="/")throw new tc(s);return s}applyRedirectCreateUrlTree(e,n,r,i){let o=this.createSegmentGroup(e,n.root,r,i);return new Mn(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(e,n,r,i){let o=this.createSegments(e,n.segments,r,i),s={};return Object.entries(n.children).forEach(([a,u])=>{s[a]=this.createSegmentGroup(e,u,r,i)}),new ve(o,s)}createSegments(e,n,r,i){return n.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new U(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},ly={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function wL(t,e,n,r,i){let o=i0(t,e,n);return o.matched?(r=zV(e,r),vL(r,e,n,i).pipe(ce(s=>s===!0?o:O({},ly)))):Q(o)}function i0(t,e,n){if(e.path==="**")return EL(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?O({},ly):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||xC)(n,t,e);if(!i)return O({},ly);let o={};Object.entries(i.posParams??{}).forEach(([a,u])=>{o[a]=u.path});let s=i.consumed.length>0?O(O({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function EL(t){return{matched:!0,parameters:t.length>0?OC(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function MC(t,e,n,r){return n.length>0&&TL(t,n,r)?{segmentGroup:new ve(e,DL(r,new ve(n,t.children))),slicedSegments:[]}:n.length===0&&CL(t,n,r)?{segmentGroup:new ve(t.segments,bL(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new ve(t.segments,t.children),slicedSegments:n}}function bL(t,e,n,r){let i={};for(let o of n)if(Pd(t,e,o)&&!r[pn(o)]){let s=new ve([],{});i[pn(o)]=s}return O(O({},r),i)}function DL(t,e){let n={};n[ee]=e;for(let r of t)if(r.path===""&&pn(r)!==ee){let i=new ve([],{});n[pn(r)]=i}return n}function TL(t,e,n){return n.some(r=>Pd(t,e,r)&&pn(r)!==ee)}function CL(t,e,n){return n.some(r=>Pd(t,e,r))}function Pd(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function SL(t,e,n){return e.length===0&&!t.children[n]}var dy=class{};function AL(t,e,n,r,i,o,s="emptyOnly"){return new hy(t,e,n,r,i,s,o).recognize()}var RL=31,hy=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,n,r,i,o,s,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new uy(this.urlSerializer,this.urlTree)}noMatchError(e){return new U(4002,`'${e.segmentGroup}'`)}recognize(){let e=MC(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(ce(({children:n,rootSnapshot:r})=>{let i=new Ut(r,n),o=new Ja("",i),s=zC(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let n=new Ni([],Object.freeze({}),Object.freeze(O({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),ee,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,ee,n).pipe(ce(r=>({children:r,rootSnapshot:n})),Tr(r=>{if(r instanceof tc)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof ec?this.noMatchError(r):r}))}processSegmentGroup(e,n,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r,o):this.processSegment(e,n,r,r.segments,i,!0,o).pipe(ce(s=>s instanceof Ut?[s]:[]))}processChildren(e,n,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return xe(o).pipe(Eo(s=>{let a=r.children[s],u=qV(n,s);return this.processSegmentGroup(e,u,a,s,i)}),Ku((s,a)=>(s.push(...a),s)),Cr(null),Vp(),Ye(s=>{if(s===null)return Zo(r);let a=o0(s);return ML(a),Q(a)}))}processSegment(e,n,r,i,o,s,a){return xe(n).pipe(Eo(u=>this.processSegmentAgainstRoute(u._injector??e,n,u,r,i,o,s,a).pipe(Tr(l=>{if(l instanceof ec)return Q(null);throw l}))),Yn(u=>!!u),Tr(u=>{if(n0(u))return SL(r,i,o)?Q(new dy):Zo(r);throw u}))}processSegmentAgainstRoute(e,n,r,i,o,s,a,u){return pn(r)!==s&&(s===ee||!Pd(i,o,r))?Zo(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,u):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,o,s,u):Zo(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s,a){let{matched:u,parameters:l,consumedSegments:h,positionalParamSegments:p,remainingSegments:m}=i0(n,i,o);if(!u)return Zo(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>RL&&(this.allowRedirects=!1));let y=new Ni(o,l,Object.freeze(O({},this.urlTree.queryParams)),this.urlTree.fragment,NC(i),pn(i),i.component??i._loadedComponent??null,i,PC(i)),T=Sd(y,a,this.paramsInheritanceStrategy);y.params=Object.freeze(T.params),y.data=Object.freeze(T.data);let M=this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,y,e);return this.applyRedirects.lineralizeSegments(i,M).pipe(Ye(R=>this.processSegment(e,r,n,R.concat(m),s,!1,a)))}matchSegmentAgainstRoute(e,n,r,i,o,s){let a=wL(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),a.pipe(an(u=>u.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(an(({routes:l})=>{let h=r._loadedInjector??e,{parameters:p,consumedSegments:m,remainingSegments:y}=u,T=new Ni(m,p,Object.freeze(O({},this.urlTree.queryParams)),this.urlTree.fragment,NC(r),pn(r),r.component??r._loadedComponent??null,r,PC(r)),M=Sd(T,s,this.paramsInheritanceStrategy);T.params=Object.freeze(M.params),T.data=Object.freeze(M.data);let{segmentGroup:R,slicedSegments:V}=MC(n,m,y,l);if(V.length===0&&R.hasChildren())return this.processChildren(h,l,R,T).pipe(ce(K=>new Ut(T,K)));if(l.length===0&&V.length===0)return Q(new Ut(T,[]));let G=pn(r)===o;return this.processSegment(h,l,R,V,G?ee:o,!0,T).pipe(ce(K=>new Ut(T,K instanceof Ut?[K]:[])))}))):Zo(n)))}getChildConfig(e,n,r){return n.children?Q({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?Q({routes:n._loadedRoutes,injector:n._loadedInjector}):yL(e,n,r,this.urlSerializer).pipe(Ye(i=>i?this.configLoader.loadChildren(e,n).pipe(ct(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):IL(n))):Q({routes:[],injector:e})}};function ML(t){t.sort((e,n)=>e.value.outlet===ee?-1:n.value.outlet===ee?1:e.value.outlet.localeCompare(n.value.outlet))}function NL(t){let e=t.value.routeConfig;return e&&e.path===""}function o0(t){let e=[],n=new Set;for(let r of t){if(!NL(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=o0(r.children);e.push(new Ut(r.value,i))}return e.filter(r=>!n.has(r))}function NC(t){return t.data||{}}function PC(t){return t.resolve||{}}function PL(t,e,n,r,i,o){return Ye(s=>AL(t,e,n,r,s.extractedUrl,i,o).pipe(ce(({state:a,tree:u})=>re(O({},s),{targetSnapshot:a,urlAfterRedirects:u}))))}function xL(t,e){return Ye(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return Q(n);let o=new Set(i.map(u=>u.route)),s=new Set;for(let u of o)if(!s.has(u))for(let l of s0(u))s.add(l);let a=0;return xe(s).pipe(Eo(u=>o.has(u)?kL(u,r,t,e):(u.data=Sd(u,u.parent,t).resolve,Q(void 0))),ct(()=>a++),bo(1),Ye(u=>a===s.size?Q(n):St))})}function s0(t){let e=t.children.map(n=>s0(n)).flat();return[t,...e]}function kL(t,e,n,r){let i=t.routeConfig,o=t._resolve;return i?.title!==void 0&&!ZC(i)&&(o[nc]=i.title),OL(o,t,e,r).pipe(ce(s=>(t._resolvedData=s,t.data=Sd(t,t.parent,n).resolve,null)))}function OL(t,e,n,r){let i=ey(t);if(i.length===0)return Q({});let o={};return xe(i).pipe(Ye(s=>FL(t[s],e,n,r).pipe(Yn(),ct(a=>{if(a instanceof is)throw Ad(new xi,a);o[s]=a}))),bo(1),ce(()=>o),Tr(s=>n0(s)?St:Io(s)))}function FL(t,e,n,r){let i=ic(e)??r,o=as(t,i),s=o.resolve?o.resolve(e,n):Tt(i,()=>o(e,n));return Or(s)}function Jm(t){return an(e=>{let n=t(e);return n?xe(n).pipe(ce(()=>e)):Q(e)})}var my=(()=>{class t{buildTitle(n){let r,i=n.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===ee);return r}getResolvedTitleForRoute(n){return n.data[nc]}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:()=>x(a0),providedIn:"root"})}return t})(),a0=(()=>{class t extends my{title;constructor(n){super(),this.title=n}updateTitle(n){let r=this.buildTitle(n);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||t)(ie(TC))};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),ac=new L("",{providedIn:"root",factory:()=>({})}),cc=new L(""),c0=(()=>{class t{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=x(tC);loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return Q(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);let r=Or(n.loadComponent()).pipe(ce(l0),ct(o=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=o}),fa(()=>{this.componentLoaders.delete(n)})),i=new mo(r,()=>new Qe).pipe(go());return this.componentLoaders.set(n,i),i}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Q({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=u0(r,this.compiler,n,this.onLoadEndListener).pipe(fa(()=>{this.childrenLoaders.delete(r)})),s=new mo(o,()=>new Qe).pipe(go());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function u0(t,e,n,r){return Or(t.loadChildren()).pipe(ce(l0),Ye(i=>i instanceof Tm||Array.isArray(i)?Q(i):xe(e.compileModuleAsync(i))),ce(i=>{r&&r(t);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(n).injector,s=o.get(cc,[],{optional:!0,self:!0}).flat()),{routes:s.map(gy),injector:o}}))}function VL(t){return t&&typeof t=="object"&&"default"in t}function l0(t){return VL(t)?t.default:t}var xd=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:()=>x(LL),providedIn:"root"})}return t})(),LL=(()=>{class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),d0=new L("");var h0=new L(""),f0=(()=>{class t{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new Qe;transitionAbortSubject=new Qe;configLoader=x(c0);environmentInjector=x(Mt);destroyRef=x(Ra);urlSerializer=x(rc);rootContexts=x(ss);location=x(Yo);inputBindingEnabled=x(Nd,{optional:!0})!==null;titleStrategy=x(my);options=x(ac,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=x(xd);createViewTransition=x(d0,{optional:!0});navigationErrorHandler=x(h0,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>Q(void 0);rootComponentType=null;destroyed=!1;constructor(){let n=i=>this.events.next(new _d(i)),r=i=>this.events.next(new Id(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=n,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(n){let r=++this.navigationId;this.transitions?.next(re(O({},n),{extractedUrl:this.urlHandlingStrategy.extract(n.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:r}))}setupNavigations(n){return this.transitions=new at(null),this.transitions.pipe(Gt(r=>r!==null),an(r=>{let i=!1,o=!1;return Q(r).pipe(an(s=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",xt.SupersededByNewNavigation),St;this.currentTransition=r,this.currentNavigation={id:s.id,initialUrl:s.rawUrl,extractedUrl:s.extractedUrl,targetBrowserUrl:typeof s.extras.browserUrl=="string"?this.urlSerializer.parse(s.extras.browserUrl):s.extras.browserUrl,trigger:s.source,extras:s.extras,previousNavigation:this.lastSuccessfulNavigation?re(O({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let a=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),u=s.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!a&&u!=="reload"){let l="";return this.events.next(new or(s.id,this.urlSerializer.serialize(s.rawUrl),l,Ka.IgnoredSameUrlNavigation)),s.resolve(!1),St}if(this.urlHandlingStrategy.shouldProcessUrl(s.rawUrl))return Q(s).pipe(an(l=>(this.events.next(new ki(l.id,this.urlSerializer.serialize(l.extractedUrl),l.source,l.restoredState)),l.id!==this.navigationId?St:Promise.resolve(l))),PL(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy),ct(l=>{r.targetSnapshot=l.targetSnapshot,r.urlAfterRedirects=l.urlAfterRedirects,this.currentNavigation=re(O({},this.currentNavigation),{finalUrl:l.urlAfterRedirects});let h=new Qa(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}));if(a&&this.urlHandlingStrategy.shouldProcessUrl(s.currentRawUrl)){let{id:l,extractedUrl:h,source:p,restoredState:m,extras:y}=s,T=new ki(l,this.urlSerializer.serialize(h),p,m);this.events.next(T);let M=QC(this.rootComponentType).snapshot;return this.currentTransition=r=re(O({},s),{targetSnapshot:M,urlAfterRedirects:h,extras:re(O({},y),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=h,Q(r)}else{let l="";return this.events.next(new or(s.id,this.urlSerializer.serialize(s.extractedUrl),l,Ka.IgnoredByUrlHandlingStrategy)),s.resolve(!1),St}}),ct(s=>{let a=new gd(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),ce(s=>(this.currentTransition=r=re(O({},s),{guards:JV(s.targetSnapshot,s.currentSnapshot,this.rootContexts)}),r)),uL(this.environmentInjector,s=>this.events.next(s)),ct(s=>{if(r.guardsResult=s.guardsResult,s.guardsResult&&typeof s.guardsResult!="boolean")throw Ad(this.urlSerializer,s.guardsResult);let a=new md(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot,!!s.guardsResult);this.events.next(a)}),Gt(s=>s.guardsResult?!0:(this.cancelNavigationTransition(s,"",xt.GuardRejected),!1)),Jm(s=>{if(s.guards.canActivateChecks.length!==0)return Q(s).pipe(ct(a=>{let u=new yd(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(u)}),an(a=>{let u=!1;return Q(a).pipe(xL(this.paramsInheritanceStrategy,this.environmentInjector),ct({next:()=>u=!0,complete:()=>{u||this.cancelNavigationTransition(a,"",xt.NoDataFromResolver)}}))}),ct(a=>{let u=new vd(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(u)}))}),Jm(s=>{let a=u=>{let l=[];u.routeConfig?.loadComponent&&!u.routeConfig._loadedComponent&&l.push(this.configLoader.loadComponent(u.routeConfig).pipe(ct(h=>{u.component=h}),ce(()=>{})));for(let h of u.children)l.push(...a(h));return l};return qu(a(s.targetSnapshot.root)).pipe(Cr(null),Qn(1))}),Jm(()=>this.afterPreactivation()),an(()=>{let{currentSnapshot:s,targetSnapshot:a}=r,u=this.createViewTransition?.(this.environmentInjector,s.root,a.root);return u?xe(u).pipe(ce(()=>r)):Q(r)}),ce(s=>{let a=WV(n.routeReuseStrategy,s.targetSnapshot,s.currentRouterState);return this.currentTransition=r=re(O({},s),{targetRouterState:a}),this.currentNavigation.targetRouterState=a,r}),ct(()=>{this.events.next(new Ya)}),ZV(this.rootContexts,n.routeReuseStrategy,s=>this.events.next(s),this.inputBindingEnabled),Qn(1),ct({next:s=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new ir(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects))),this.titleStrategy?.updateTitle(s.targetRouterState.snapshot),s.resolve(!0)},complete:()=>{i=!0}}),Lp(this.transitionAbortSubject.pipe(ct(s=>{throw s}))),fa(()=>{!i&&!o&&this.cancelNavigationTransition(r,"",xt.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation=null,this.currentTransition=null)}),Tr(s=>{if(this.destroyed)return r.resolve(!1),St;if(o=!0,t0(s))this.events.next(new Rn(r.id,this.urlSerializer.serialize(r.extractedUrl),s.message,s.cancellationCode)),YV(s)?this.events.next(new rs(s.url,s.navigationBehaviorOptions)):r.resolve(!1);else{let a=new ns(r.id,this.urlSerializer.serialize(r.extractedUrl),s,r.targetSnapshot??void 0);try{let u=Tt(this.environmentInjector,()=>this.navigationErrorHandler?.(a));if(u instanceof is){let{message:l,cancellationCode:h}=Ad(this.urlSerializer,u);this.events.next(new Rn(r.id,this.urlSerializer.serialize(r.extractedUrl),l,h)),this.events.next(new rs(u.redirectTo,u.navigationBehaviorOptions))}else throw this.events.next(a),s}catch(u){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(u)}}return St}))}))}cancelNavigationTransition(n,r,i){let o=new Rn(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(o),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return n.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function jL(t){return t!==hd}var p0=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:()=>x(UL),providedIn:"root"})}return t})(),Md=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},UL=(()=>{class t extends Md{static \u0275fac=(()=>{let n;return function(i){return(n||(n=Aa(t)))(i||t)}})();static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),g0=(()=>{class t{urlSerializer=x(rc);options=x(ac,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=x(Yo);urlHandlingStrategy=x(xd);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Mn;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:n,initialUrl:r,targetBrowserUrl:i}){let o=n!==void 0?this.urlHandlingStrategy.merge(n,r):r,s=i??o;return s instanceof Mn?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:n,finalUrl:r,initialUrl:i}){r&&n?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=n):this.rawUrlTree=i}routerState=QC(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:n}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n??this.rawUrlTree)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:()=>x(BL),providedIn:"root"})}return t})(),BL=(()=>{class t extends g0{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{n(r.url,r.state,"popstate")})})}handleRouterEvent(n,r){n instanceof ki?this.updateStateMemento():n instanceof or?this.commitTransition(r):n instanceof Qa?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof Ya?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof Rn&&(n.code===xt.GuardRejected||n.code===xt.NoDataFromResolver)?this.restoreHistory(r):n instanceof ns?this.restoreHistory(r,!0):n instanceof ir&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(n)||o){let a=this.browserPageId,u=O(O({},s),this.generateNgRouterState(i,a));this.location.replaceState(n,"",u)}else{let a=O(O({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(n,"",a)}}restoreHistory(n,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===n.finalUrl&&o===0&&(this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static \u0275fac=(()=>{let n;return function(i){return(n||(n=Aa(t)))(i||t)}})();static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function yy(t,e){t.events.pipe(Gt(n=>n instanceof ir||n instanceof Rn||n instanceof ns||n instanceof or),ce(n=>n instanceof ir||n instanceof or?0:(n instanceof Rn?n.code===xt.Redirect||n.code===xt.SupersededByNewNavigation:!1)?2:1),Gt(n=>n!==2),Qn(1)).subscribe(()=>{e()})}var $L={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},HL={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},kd=(()=>{class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=x($T);stateManager=x(g0);options=x(ac,{optional:!0})||{};pendingTasks=x(Ti);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=x(f0);urlSerializer=x(rc);location=x(Yo);urlHandlingStrategy=x(xd);_events=new Qe;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=x(p0);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=x(cc,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!x(Nd,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Oe;subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Rn&&r.code!==xt.Redirect&&r.code!==xt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof ir)this.navigated=!0;else if(r instanceof rs){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u=O({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||jL(i.source)},s);this.scheduleNavigation(a,hd,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}qL(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),hd,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r,i)=>{this.navigateToSyncWithBrowser(n,i,r)})}navigateToSyncWithBrowser(n,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let u=O({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let a=this.parseUrl(n);this.scheduleNavigation(a,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(gy),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:s,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=O(O({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let m=i?i.snapshot:this.routerState.snapshot.root;p=qC(m)}catch{(typeof n[0]!="string"||n[0][0]!=="/")&&(n=[]),p=this.currentUrlTree.root}return GC(p,n,h,l??null)}navigateByUrl(n,r={skipLocationChange:!1}){let i=ts(n)?n:this.parseUrl(n),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,hd,null,r)}navigate(n,r={skipLocationChange:!1}){return zL(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.urlSerializer.parse("/")}}isActive(n,r){let i;if(r===!0?i=O({},$L):r===!1?i=O({},HL):i=r,ts(n))return CC(this.currentUrlTree,n,i);let o=this.parseUrl(n);return CC(this.currentUrlTree,o,i)}removeEmptyProps(n){return Object.entries(n).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(n,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,u,l;s?(a=s.resolve,u=s.reject,l=s.promise):l=new Promise((p,m)=>{a=p,u=m});let h=this.pendingTasks.add();return yy(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:o,resolve:a,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function zL(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new U(4008,!1)}function qL(t){return!(t instanceof Ya)&&!(t instanceof rs)}var WL=new L("");function vy(t,...e){return ln([{provide:cc,multi:!0,useValue:t},[],{provide:kr,useFactory:KL,deps:[kd]},{provide:Sm,multi:!0,useFactory:QL},e.map(n=>n.\u0275providers)])}function KL(t){return t.routerState.root}function QL(){let t=x(Je);return e=>{let n=t.get(vi);if(e!==n.components[0])return;let r=t.get(kd),i=t.get(YL);t.get(ZL)===1&&r.initialNavigation(),t.get(JL,null,te.Optional)?.setUpPreloading(),t.get(WL,null,te.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var YL=new L("",{factory:()=>new Qe}),ZL=new L("",{providedIn:"root",factory:()=>1});var JL=new L("");var Od=class t{static \u0275fac=function(n){return new(n||t)};static \u0275cmp=$e({type:t,selectors:[["app-root"]],decls:1,vars:0,template:function(n,r){n&1&&Me(0,"router-outlet")},dependencies:[tt,oc],encapsulation:2})};var m0=()=>{};var _0=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},e2=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=t[n++],s=t[n++],a=t[n++],u=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let o=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},Fd={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,l=u?t[i+2]:0,h=o>>2,p=(o&3)<<4|a>>4,m=(a&15)<<2|l>>6,y=l&63;u||(y=64,s||(m=64)),r.push(n[h],n[p],n[m],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(_0(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):e2(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let l=i<t.length?n[t.charAt(i)]:64;++i;let p=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||a==null||l==null||p==null)throw new Iy;let m=o<<2|a>>4;if(r.push(m),l!==64){let y=a<<4&240|l>>2;if(r.push(y),p!==64){let T=l<<6&192|p;r.push(T)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},Iy=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},t2=function(t){let e=_0(t);return Fd.encodeByteArray(e,!0)},lc=function(t){return t2(t).replace(/\./g,"")},Vd=function(t){try{return Fd.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Ey(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var n2=()=>Ey().__FIREBASE_DEFAULTS__,r2=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},i2=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&Vd(t[1]);return e&&JSON.parse(e)},Ld=()=>{try{return m0()||n2()||r2()||i2()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},by=t=>{var e,n;return(n=(e=Ld())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},I0=t=>{let e=by(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Dy=()=>{var t;return(t=Ld())===null||t===void 0?void 0:t.config},Ty=t=>{var e;return(e=Ld())===null||e===void 0?void 0:e[`_${t}`]};var Oi=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function Vr(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}function jd(t){return v(this,null,function*(){return(yield fetch(t,{credentials:"include"})).ok})}function w0(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[lc(JSON.stringify(n)),lc(JSON.stringify(s)),""].join(".")}var uc={};function o2(){let t={prod:[],emulator:[]};for(let e of Object.keys(uc))uc[e]?t.emulator.push(e):t.prod.push(e);return t}function s2(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}var y0=!1;function Ud(t,e){if(typeof window>"u"||typeof document>"u"||!Vr(window.location.host)||uc[t]===e||uc[t]||y0)return;uc[t]=e;function n(m){return`__firebase__banner__${m}`}let r="__firebase__banner",o=o2().prod.length>0;function s(){let m=document.getElementById(r);m&&m.remove()}function a(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function u(m,y){m.setAttribute("width","24"),m.setAttribute("id",y),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function l(){let m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{y0=!0,s()},m}function h(m,y){m.setAttribute("id",y),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function p(){let m=s2(r),y=n("text"),T=document.getElementById(y)||document.createElement("span"),M=n("learnmore"),R=document.getElementById(M)||document.createElement("a"),V=n("preprendIcon"),G=document.getElementById(V)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){let K=m.element;a(K),h(R,M);let be=l();u(G,V),K.append(G,T,R,be),document.body.appendChild(K)}o?(T.innerText="Preview backend disconnected.",G.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(G.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,T.innerText="Preview backend running in this workspace."),T.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function rt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function E0(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(rt())}function a2(){var t;let e=(t=Ld())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function b0(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Bd(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function D0(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function T0(){let t=rt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function C0(){return!a2()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Fi(){try{return typeof indexedDB=="object"}catch{return!1}}function $d(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}function S0(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}var c2="FirebaseError",lt=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=c2,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ct.prototype.create)}},Ct=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?u2(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new lt(i,a,r)}};function u2(t,e){return t.replace(l2,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var l2=/\{\$([^}]+)}/g;function A0(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Jt(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let o=t[i],s=e[i];if(v0(o)&&v0(s)){if(!Jt(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function v0(t){return t!==null&&typeof t=="object"}function dc(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function R0(t,e){let n=new wy(t,e);return n.subscribe.bind(n)}var wy=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");d2(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=_y),i.error===void 0&&(i.error=_y),i.complete===void 0&&(i.complete=_y);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function d2(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function _y(){}var h2=1e3,f2=2,p2=4*60*60*1e3,g2=.5;function Hd(t,e=h2,n=f2){let r=e*Math.pow(n,t),i=Math.round(g2*r*(Math.random()-.5)*2);return Math.min(p2,r+i)}function He(t){return t&&t._delegate?t._delegate:t}var je=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Vi="[DEFAULT]";var Cy=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new Oi;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(y2(e))try{this.getOrInitializeService({instanceIdentifier:Vi})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Vi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return v(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Vi){return this.instances.has(e)}getOptions(e=Vi){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:m2(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Vi){return this.component?this.component.multipleInstances?e:Vi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function m2(t){return t===Vi?void 0:t}function y2(t){return t.instantiationMode==="EAGER"}var zd=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new Cy(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var v2=[],ue=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(ue||{}),_2={debug:ue.DEBUG,verbose:ue.VERBOSE,info:ue.INFO,warn:ue.WARN,error:ue.ERROR,silent:ue.SILENT},I2=ue.INFO,w2={[ue.DEBUG]:"log",[ue.VERBOSE]:"log",[ue.INFO]:"info",[ue.WARN]:"warn",[ue.ERROR]:"error"},E2=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=w2[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Xt=class{constructor(e){this.name=e,this._logLevel=I2,this._logHandler=E2,this._userLogHandler=null,v2.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ue))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?_2[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ue.DEBUG,...e),this._logHandler(this,ue.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ue.VERBOSE,...e),this._logHandler(this,ue.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ue.INFO,...e),this._logHandler(this,ue.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ue.WARN,...e),this._logHandler(this,ue.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ue.ERROR,...e),this._logHandler(this,ue.ERROR,...e)}};var b2=(t,e)=>e.some(n=>t instanceof n),M0,N0;function D2(){return M0||(M0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function T2(){return N0||(N0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var P0=new WeakMap,Ay=new WeakMap,x0=new WeakMap,Sy=new WeakMap,My=new WeakMap;function C2(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(Nn(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&P0.set(n,t)}).catch(()=>{}),My.set(e,t),e}function S2(t){if(Ay.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});Ay.set(t,e)}var Ry={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Ay.get(t);if(e==="objectStoreNames")return t.objectStoreNames||x0.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Nn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function k0(t){Ry=t(Ry)}function A2(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(qd(this),e,...n);return x0.set(r,e.sort?e.sort():[e]),Nn(r)}:T2().includes(t)?function(...e){return t.apply(qd(this),e),Nn(P0.get(this))}:function(...e){return Nn(t.apply(qd(this),e))}}function R2(t){return typeof t=="function"?A2(t):(t instanceof IDBTransaction&&S2(t),b2(t,D2())?new Proxy(t,Ry):t)}function Nn(t){if(t instanceof IDBRequest)return C2(t);if(Sy.has(t))return Sy.get(t);let e=R2(t);return e!==t&&(Sy.set(t,e),My.set(e,t)),e}var qd=t=>My.get(t);function Gd(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(t,e),a=Nn(s);return r&&s.addEventListener("upgradeneeded",u=>{r(Nn(s.result),u.oldVersion,u.newVersion,Nn(s.transaction),u)}),n&&s.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var M2=["get","getKey","getAll","getAllKeys","count"],N2=["put","add","delete","clear"],Ny=new Map;function O0(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Ny.get(e))return Ny.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=N2.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||M2.includes(n)))return;let o=function(s,...a){return v(this,null,function*(){let u=this.transaction(s,i?"readwrite":"readonly"),l=u.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[n](...a),i&&u.done]))[0]})};return Ny.set(e,o),o}k0(t=>re(O({},t),{get:(e,n,r)=>O0(e,n)||t.get(e,n,r),has:(e,n)=>!!O0(e,n)||t.has(e,n)}));var xy=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(P2(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function P2(t){let e=t.getComponent();return e?.type==="VERSION"}var ky="@firebase/app",F0="0.13.2";var sr=new Xt("@firebase/app"),x2="@firebase/app-compat",k2="@firebase/analytics-compat",O2="@firebase/analytics",F2="@firebase/app-check-compat",V2="@firebase/app-check",L2="@firebase/auth",j2="@firebase/auth-compat",U2="@firebase/database",B2="@firebase/data-connect",$2="@firebase/database-compat",H2="@firebase/functions",z2="@firebase/functions-compat",q2="@firebase/installations",G2="@firebase/installations-compat",W2="@firebase/messaging",K2="@firebase/messaging-compat",Q2="@firebase/performance",Y2="@firebase/performance-compat",Z2="@firebase/remote-config",J2="@firebase/remote-config-compat",X2="@firebase/storage",ej="@firebase/storage-compat",tj="@firebase/firestore",nj="@firebase/ai",rj="@firebase/firestore-compat",ij="firebase",oj="11.10.0";var Oy="[DEFAULT]",sj={[ky]:"fire-core",[x2]:"fire-core-compat",[O2]:"fire-analytics",[k2]:"fire-analytics-compat",[V2]:"fire-app-check",[F2]:"fire-app-check-compat",[L2]:"fire-auth",[j2]:"fire-auth-compat",[U2]:"fire-rtdb",[B2]:"fire-data-connect",[$2]:"fire-rtdb-compat",[H2]:"fire-fn",[z2]:"fire-fn-compat",[q2]:"fire-iid",[G2]:"fire-iid-compat",[W2]:"fire-fcm",[K2]:"fire-fcm-compat",[Q2]:"fire-perf",[Y2]:"fire-perf-compat",[Z2]:"fire-rc",[J2]:"fire-rc-compat",[X2]:"fire-gcs",[ej]:"fire-gcs-compat",[tj]:"fire-fst",[rj]:"fire-fst-compat",[nj]:"fire-vertex","fire-js":"fire-js",[ij]:"fire-js-all"};var hc=new Map,aj=new Map,Fy=new Map;function V0(t,e){try{t.container.addComponent(e)}catch(n){sr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function dt(t){let e=t.name;if(Fy.has(e))return sr.debug(`There were multiple attempts to register component ${e}.`),!1;Fy.set(e,t);for(let n of hc.values())V0(n,t);for(let n of aj.values())V0(n,t);return!0}function en(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function tn(t){return t==null?!1:t.settings!==void 0}var cj={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Lr=new Ct("app","Firebase",cj);var Vy=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new je("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Lr.create("app-deleted",{appName:this._name})}};var jr=oj;function Uy(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:Oy,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw Lr.create("bad-app-name",{appName:String(i)});if(n||(n=Dy()),!n)throw Lr.create("no-options");let o=hc.get(i);if(o){if(Jt(n,o.options)&&Jt(r,o.config))return o;throw Lr.create("duplicate-app",{appName:i})}let s=new zd(i);for(let u of Fy.values())s.addComponent(u);let a=new Vy(n,r,s);return hc.set(i,a),a}function Pn(t=Oy){let e=hc.get(t);if(!e&&t===Oy&&Dy())return Uy();if(!e)throw Lr.create("no-app",{appName:t});return e}function Wd(){return Array.from(hc.values())}function Ie(t,e,n){var r;let i=(r=sj[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),sr.warn(a.join(" "));return}dt(new je(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var uj="firebase-heartbeat-database",lj=1,fc="firebase-heartbeat-store",Py=null;function B0(){return Py||(Py=Gd(uj,lj,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(fc)}catch(n){console.warn(n)}}}}).catch(t=>{throw Lr.create("idb-open",{originalErrorMessage:t.message})})),Py}function dj(t){return v(this,null,function*(){try{let n=(yield B0()).transaction(fc),r=yield n.objectStore(fc).get($0(t));return yield n.done,r}catch(e){if(e instanceof lt)sr.warn(e.message);else{let n=Lr.create("idb-get",{originalErrorMessage:e?.message});sr.warn(n.message)}}})}function L0(t,e){return v(this,null,function*(){try{let r=(yield B0()).transaction(fc,"readwrite");yield r.objectStore(fc).put(e,$0(t)),yield r.done}catch(n){if(n instanceof lt)sr.warn(n.message);else{let r=Lr.create("idb-set",{originalErrorMessage:n?.message});sr.warn(r.message)}}})}function $0(t){return`${t.name}!${t.options.appId}`}var hj=1024,fj=30,Ly=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new jy(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return v(this,null,function*(){var e,n;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=j0();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>fj){let s=gj(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){sr.warn(r)}})}getHeartbeatsHeader(){return v(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=j0(),{heartbeatsToSend:r,unsentEntries:i}=pj(this._heartbeatsCache.heartbeats),o=lc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return sr.warn(n),""}})}};function j0(){return new Date().toISOString().substring(0,10)}function pj(t,e=hj){let n=[],r=t.slice();for(let i of t){let o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),U0(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),U0(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var jy=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return v(this,null,function*(){return Fi()?$d().then(()=>!0).catch(()=>!1):!1})}read(){return v(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield dj(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return v(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return L0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return v(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return L0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function U0(t){return lc(JSON.stringify({version:2,heartbeats:t})).length}function gj(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}function mj(t){dt(new je("platform-logger",e=>new xy(e),"PRIVATE")),dt(new je("heartbeat",e=>new Ly(e),"PRIVATE")),Ie(ky,F0,t),Ie(ky,F0,"esm2017"),Ie("fire-js","")}mj("");var yj="firebase",vj="11.10.0";Ie(yj,vj,"app");function By(t){t===void 0&&(aD(By),t=x(Je));let e=t.get(Ll);return n=>new se(r=>{let i=e.add(),o=!1;function s(){o||(i(),o=!0)}let a=n.subscribe({next:u=>{r.next(u),s()},complete:()=>{r.complete(),s()},error:u=>{r.error(u),s()}});return a.add(()=>{r.unsubscribe(),s()}),a})}var xn=new Bo("ANGULARFIRE2_VERSION");function ji(t,e,n){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===n);if(o.length===1)return o[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var Ur=(t,e)=>{let n=e?[e]:Wd(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},cs=function(t){return t[t.SILENT=0]="SILENT",t[t.WARN=1]="WARN",t[t.VERBOSE=2]="VERBOSE",t}(cs||{}),H0=Nm()&&typeof Zone<"u"?cs.WARN:cs.SILENT;var Kd=class{zone;delegate;constructor(e,n=xp){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,o=function(s){i?i.runGuarded(()=>{e.apply(this,[s])}):e.apply(this,[s])};return this.delegate.schedule(o,n,r)}},kn=(()=>{class t{outsideAngular;insideAngular;constructor(){let n=x(_e);this.outsideAngular=n.runOutsideAngular(()=>new Kd(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=n.run(()=>new Kd(typeof Zone>"u"?void 0:Zone.current,Pp))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),z0=!1;function _j(t,e){!z0&&(H0>cs.SILENT||Nm())&&(z0=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),H0>=e&&console.warn(`Firebase API called outside injection context: ${t.name}`)}function Ij(t){let e=x(_e,{optional:!0});return e?e.runOutsideAngular(()=>t()):t()}function Li(t){let e=x(_e,{optional:!0});return e?e.run(()=>t()):t()}var wj=(t,e,n)=>(...r)=>(e&&setTimeout(e,0),Tt(n,()=>Li(()=>t.apply(void 0,r)))),kt=(t,e,n)=>(n||=e?cs.WARN:cs.VERBOSE,function(){let r,i=arguments,o,s,a;try{o=x(kn),s=x(Ll),a=x(Mt)}catch{return _j(t,n),t.apply(this,i)}for(let l=0;l<arguments.length;l++)typeof i[l]=="function"&&(e&&(r||=Li(()=>s.add())),i[l]=wj(i[l],r,a));let u=Ij(()=>t.apply(this,i));return e?u instanceof se?u.pipe(Dr(o.outsideAngular),br(o.insideAngular),By(a)):u instanceof Promise?Li(()=>new Promise((l,h)=>{s.run(()=>u).then(p=>Tt(a,()=>Li(()=>l(p))),p=>Tt(a,()=>Li(()=>h(p))))})):typeof u=="function"&&r?function(){return setTimeout(r,0),u.apply(this,arguments)}:Li(()=>u):u instanceof se?u.pipe(Dr(o.outsideAngular),br(o.insideAngular)):Li(()=>u)});var gn=class{constructor(e){return e}},ar=class{constructor(){return Wd()}};function Ej(t){return t&&t.length===1?t[0]:new gn(Pn())}var $y=new L("angularfire2._apps"),bj={provide:gn,useFactory:Ej,deps:[[new ut,$y]]},Dj={provide:ar,deps:[[new ut,$y]]};function Tj(t){return(e,n)=>{let r=n.get(Cn);Ie("angularfire",xn.full,"core"),Ie("angularfire",xn.full,"app"),Ie("angular",eC.full,r.toString());let i=e.runOutsideAngular(()=>t(n));return new gn(i)}}function q0(t,...e){return ln([bj,Dj,{provide:$y,useFactory:Tj(t),multi:!0,deps:[_e,Je,kn,...e]}])}var G0=kt(Uy,!0);var Cj=new Map,Sj={activated:!1,tokenObservers:[]},Aj={initialized:!1,enabled:!1};function mn(t){return Cj.get(t)||Object.assign({},Sj)}function Y0(){return Aj}var Rj="https://content-firebaseappcheck.googleapis.com/v1";var Mj="exchangeDebugToken",W0={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},nZ=24*60*60*1e3;var qy=class{constructor(e,n,r,i,o){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return v(this,null,function*(){this.stop();try{this.pending=new Oi,this.pending.promise.catch(n=>{}),yield Nj(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new Oi,this.pending.promise.catch(n=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}};function Nj(t){return new Promise(e=>{setTimeout(e,t)})}var Pj={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},Br=new Ct("appCheck","AppCheck",Pj);function Z0(t){if(!mn(t).activated)throw Br.create("use-before-activation",{appName:t.name})}function J0(r,i){return v(this,arguments,function*({url:t,body:e},n){let o={"Content-Type":"application/json"},s=n.getImmediate({optional:!0});if(s){let y=yield s.getHeartbeatsHeader();y&&(o["X-Firebase-Client"]=y)}let a={method:"POST",body:JSON.stringify(e),headers:o},u;try{u=yield fetch(t,a)}catch(y){throw Br.create("fetch-network-error",{originalErrorMessage:y?.message})}if(u.status!==200)throw Br.create("fetch-status-error",{httpStatus:u.status});let l;try{l=yield u.json()}catch(y){throw Br.create("fetch-parse-error",{originalErrorMessage:y?.message})}let h=l.ttl.match(/^([\d.]+)(s)$/);if(!h||!h[2]||isNaN(Number(h[1])))throw Br.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let p=Number(h[1])*1e3,m=Date.now();return{token:l.token,expireTimeMillis:m+p,issuedAtTimeMillis:m}})}function X0(t,e){let{projectId:n,appId:r,apiKey:i}=t.options;return{url:`${Rj}/projects/${n}/apps/${r}:${Mj}?key=${i}`,body:{debug_token:e}}}var xj="firebase-app-check-database",kj=1,Gy="firebase-app-check-store";var Qd=null;function Oj(){return Qd||(Qd=new Promise((t,e)=>{try{let n=indexedDB.open(xj,kj);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var i;e(Br.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(Gy,{keyPath:"compositeKey"})}}}catch(n){e(Br.create("storage-open",{originalErrorMessage:n?.message}))}}),Qd)}function Fj(t,e){return Vj(Lj(t),e)}function Vj(t,e){return v(this,null,function*(){let r=(yield Oj()).transaction(Gy,"readwrite"),o=r.objectStore(Gy).put({compositeKey:t,value:e});return new Promise((s,a)=>{o.onsuccess=u=>{s()},r.onerror=u=>{var l;a(Br.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})})}function Lj(t){return`${t.options.appId}-${t.name}`}var pc=new Xt("@firebase/app-check");function Hy(t,e){return Fi()?Fj(t,e).catch(n=>{pc.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function eS(){return Y0().enabled}function tS(){return v(this,null,function*(){let t=Y0();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var jj={error:"UNKNOWN_ERROR"};function Uj(t){return Fd.encodeString(JSON.stringify(t),!1)}function Wy(t,e=!1,n=!1){return v(this,null,function*(){let r=t.app;Z0(r);let i=mn(r),o=i.token,s;if(o&&!gc(o)&&(i.token=void 0,o=void 0),!o){let l=yield i.cachedTokenPromise;l&&(gc(l)?o=l:yield Hy(r,void 0))}if(!e&&o&&gc(o))return{token:o.token};let a=!1;if(eS())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=J0(X0(r,yield tS()),t.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);let l=yield i.exchangeTokenPromise;return yield Hy(r,l),i.token=l,{token:l.token}}catch(l){return l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?pc.warn(l.message):n&&pc.error(l),zy(l)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),o=yield mn(r).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?pc.warn(l.message):n&&pc.error(l),s=l}let u;return o?s?gc(o)?u={token:o.token,internalError:s}:u=zy(s):(u={token:o.token},i.token=o,yield Hy(r,o)):u=zy(s),a&&zj(r,u),u})}function Bj(t){return v(this,null,function*(){let e=t.app;Z0(e);let{provider:n}=mn(e);if(eS()){let r=yield tS(),{token:i}=yield J0(X0(e,r),t.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield n.getToken();return{token:r}}})}function $j(t,e,n,r){let{app:i}=t,o=mn(i),s={next:n,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&gc(o.token)){let a=o.token;Promise.resolve().then(()=>{n({token:a.token}),K0(t)}).catch(()=>{})}o.cachedTokenPromise.then(()=>K0(t))}function nS(t,e){let n=mn(t),r=n.tokenObservers.filter(i=>i.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function K0(t){let{app:e}=t,n=mn(e),r=n.tokenRefresher;r||(r=Hj(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function Hj(t){let{app:e}=t;return new qy(()=>v(null,null,function*(){let n=mn(e),r;if(n.token?r=yield Wy(t,!0):r=yield Wy(t),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let n=mn(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5,i=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},W0.RETRIAL_MIN_WAIT,W0.RETRIAL_MAX_WAIT)}function zj(t,e){let n=mn(t).tokenObservers;for(let r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function gc(t){return t.expireTimeMillis-Date.now()>0}function zy(t){return{token:Uj(jj),error:t}}var Ky=class{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){let{tokenObservers:e}=mn(this.app);for(let n of e)nS(this.app,n.next);return Promise.resolve()}};function qj(t,e){return new Ky(t,e)}function Gj(t){return{getToken:e=>Wy(t,e),getLimitedUseToken:()=>Bj(t),addTokenListener:e=>$j(t,"INTERNAL",e),removeTokenListener:e=>nS(t.app,e)}}var Wj="@firebase/app-check",Kj="0.10.1";var Qj="app-check",Q0="app-check-internal";function Yj(){dt(new je(Qj,t=>{let e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return qj(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(Q0).initialize()})),dt(new je(Q0,t=>{let e=t.getProvider("app-check").getImmediate();return Gj(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Ie(Wj,Kj)}Yj();var Zj="app-check";var us=class{constructor(){return Ur(Zj)}};var Jj=["localhost","0.0.0.0","127.0.0.1"],gZ=typeof window<"u"&&Jj.includes(window.location.hostname);function yS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var vS=yS,_S=new Ct("auth","Firebase",yS());var th=new Xt("@firebase/auth");function Xj(t,...e){th.logLevel<=ue.WARN&&th.warn(`Auth (${jr}): ${t}`,...e)}function Zd(t,...e){th.logLevel<=ue.ERROR&&th.error(`Auth (${jr}): ${t}`,...e)}function zr(t,...e){throw pv(t,...e)}function Bi(t,...e){return pv(t,...e)}function IS(t,e,n){let r=Object.assign(Object.assign({},vS()),{[e]:n});return new Ct("auth","Firebase",r).create(e,{appName:t.name})}function Ui(t){return IS(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function pv(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return _S.create(t,...e)}function W(t,e,...n){if(!t)throw pv(e,...n)}function cr(t){let e="INTERNAL ASSERTION FAILED: "+t;throw Zd(e),new Error(e)}function qr(t,e){t||cr(e)}function Jy(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function eU(){return rS()==="http:"||rS()==="https:"}function rS(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function tU(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(eU()||Bd()||"connection"in navigator)?navigator.onLine:!0}function nU(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var $i=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,qr(n>e,"Short delay should be less than long delay!"),this.isMobile=E0()||D0()}get(){return tU()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function gv(t,e){qr(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var nh=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;cr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;cr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;cr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var rU={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var iU=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],oU=new $i(3e4,6e4);function mv(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function ls(o,s,a,u){return v(this,arguments,function*(t,e,n,r,i={}){return wS(t,i,()=>v(null,null,function*(){let l={},h={};r&&(e==="GET"?h=r:l={body:JSON.stringify(r)});let p=dc(Object.assign({key:t.config.apiKey},h)).slice(1),m=yield t._getAdditionalHeaders();m["Content-Type"]="application/json",t.languageCode&&(m["X-Firebase-Locale"]=t.languageCode);let y=Object.assign({method:e,headers:m},l);return b0()||(y.referrerPolicy="no-referrer"),t.emulatorConfig&&Vr(t.emulatorConfig.host)&&(y.credentials="include"),nh.fetch()(yield ES(t,t.config.apiHost,n,p),y)}))})}function wS(t,e,n){return v(this,null,function*(){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},rU),e);try{let i=new Xy(t),o=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw Yd(t,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Yd(t,"credential-already-in-use",s);if(u==="EMAIL_EXISTS")throw Yd(t,"email-already-in-use",s);if(u==="USER_DISABLED")throw Yd(t,"user-disabled",s);let h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw IS(t,h,l);zr(t,h)}}catch(i){if(i instanceof lt)throw i;zr(t,"network-request-failed",{message:String(i)})}})}function sU(o,s,a,u){return v(this,arguments,function*(t,e,n,r,i={}){let l=yield ls(t,e,n,r,i);return"mfaPendingCredential"in l&&zr(t,"multi-factor-auth-required",{_serverResponse:l}),l})}function ES(t,e,n,r){return v(this,null,function*(){let i=`${e}${n}?${r}`,o=t,s=o.config.emulator?gv(t.config,i):`${t.config.apiScheme}://${i}`;return iU.includes(n)&&(yield o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s})}var Xy=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Bi(this.auth,"network-request-failed")),oU.get())})}};function Yd(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=Bi(t,e,r);return i.customData._tokenResponse=n,i}function aU(t,e){return v(this,null,function*(){return ls(t,"POST","/v1/accounts:delete",e)})}function rh(t,e){return v(this,null,function*(){return ls(t,"POST","/v1/accounts:lookup",e)})}function mc(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function yv(t,e=!1){return v(this,null,function*(){let n=He(t),r=yield n.getIdToken(e),i=vv(r);W(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:mc(Qy(i.auth_time)),issuedAtTime:mc(Qy(i.iat)),expirationTime:mc(Qy(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function Qy(t){return Number(t)*1e3}function vv(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Zd("JWT malformed, contained fewer than 3 sections"),null;try{let i=Vd(n);return i?JSON.parse(i):(Zd("Failed to decode base64 JWT payload"),null)}catch(i){return Zd("Caught error parsing JWT payload as JSON",i?.toString()),null}}function iS(t){let e=vv(t);return W(e,"internal-error"),W(typeof e.exp<"u","internal-error"),W(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function vc(t,e,n=!1){return v(this,null,function*(){if(n)return e;try{return yield e}catch(r){throw r instanceof lt&&cU(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})}function cU({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var ev=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>v(this,null,function*(){yield this.iteration()}),n)}iteration(){return v(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var _c=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=mc(this.lastLoginAt),this.creationTime=mc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function ih(t){return v(this,null,function*(){var e;let n=t.auth,r=yield t.getIdToken(),i=yield vc(t,rh(n,{idToken:r}));W(i?.users.length,n,"internal-error");let o=i.users[0];t._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?bS(o.providerUserInfo):[],a=uU(t.providerData,s),u=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!a?.length,h=u?l:!1,p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new _c(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(t,p)})}function _v(t){return v(this,null,function*(){let e=He(t);yield ih(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function uU(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function bS(t){return t.map(e=>{var{providerId:n}=e,r=kp(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function lU(t,e){return v(this,null,function*(){let n=yield wS(t,{},()=>v(null,null,function*(){let r=dc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,s=yield ES(t,i,"/v1/token",`key=${o}`),a=yield t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let u={method:"POST",headers:a,body:r};return t.emulatorConfig&&Vr(t.emulatorConfig.host)&&(u.credentials="include"),nh.fetch()(s,u)}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function dU(t,e){return v(this,null,function*(){return ls(t,"POST","/v2/accounts:revokeToken",mv(t,e))})}var yc=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){W(e.idToken,"internal-error"),W(typeof e.idToken<"u","internal-error"),W(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):iS(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){W(e.length!==0,"internal-error");let n=iS(e);this.updateTokensAndExpiration(e,null,n)}getToken(e,n=!1){return v(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(W(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return v(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield lU(e,n);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:o}=n,s=new t;return r&&(W(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(W(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(W(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return cr("not implemented")}};function $r(t,e){W(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var Hr=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,o=kp(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ev(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new _c(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return v(this,null,function*(){let n=yield vc(this,this.stsTokenManager.getToken(this.auth,e));return W(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return yv(this,e)}reload(){return _v(this)}_assign(e){this!==e&&(W(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){W(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return v(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&(yield ih(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return v(this,null,function*(){if(tn(this.auth.app))return Promise.reject(Ui(this.auth));let e=yield this.getIdToken();return yield vc(this,aU(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,o,s,a,u,l,h;let p=(r=n.displayName)!==null&&r!==void 0?r:void 0,m=(i=n.email)!==null&&i!==void 0?i:void 0,y=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,T=(s=n.photoURL)!==null&&s!==void 0?s:void 0,M=(a=n.tenantId)!==null&&a!==void 0?a:void 0,R=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,V=(l=n.createdAt)!==null&&l!==void 0?l:void 0,G=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:K,emailVerified:be,isAnonymous:It,providerData:Ee,stsTokenManager:b}=n;W(K&&b,e,"internal-error");let _=yc.fromJSON(this.name,b);W(typeof K=="string",e,"internal-error"),$r(p,e.name),$r(m,e.name),W(typeof be=="boolean",e,"internal-error"),W(typeof It=="boolean",e,"internal-error"),$r(y,e.name),$r(T,e.name),$r(M,e.name),$r(R,e.name),$r(V,e.name),$r(G,e.name);let w=new t({uid:K,auth:e,email:m,emailVerified:be,displayName:p,isAnonymous:It,photoURL:T,phoneNumber:y,tenantId:M,stsTokenManager:_,createdAt:V,lastLoginAt:G});return Ee&&Array.isArray(Ee)&&(w.providerData=Ee.map(E=>Object.assign({},E))),R&&(w._redirectEventId=R),w}static _fromIdTokenResponse(e,n,r=!1){return v(this,null,function*(){let i=new yc;i.updateFromServerResponse(n);let o=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield ih(o),o})}static _fromGetAccountInfoResponse(e,n,r){return v(this,null,function*(){let i=n.users[0];W(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?bS(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new yc;a.updateFromIdToken(r);let u=new t({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new _c(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(u,l),u})}};var oS=new Map;function ur(t){qr(t instanceof Function,"Expected a class definition");let e=oS.get(t);return e?(qr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,oS.set(t,e),e)}var hU=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return v(this,null,function*(){return!0})}_set(n,r){return v(this,null,function*(){this.storage[n]=r})}_get(n){return v(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return v(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),tv=hU;function Jd(t,e,n){return`firebase:${t}:${e}:${n}`}var oh=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=Jd(this.userKey,i.apiKey,o),this.fullPersistenceKey=Jd("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return v(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let n=yield rh(this.auth,{idToken:e}).catch(()=>{});return n?Hr._fromGetAccountInfoResponse(this.auth,n,e):null}return Hr._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return v(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return v(this,null,function*(){if(!n.length)return new t(ur(tv),e,r);let i=(yield Promise.all(n.map(l=>v(null,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),o=i[0]||ur(tv),s=Jd(r,e.config.apiKey,e.name),a=null;for(let l of n)try{let h=yield l._get(s);if(h){let p;if(typeof h=="string"){let m=yield rh(e,{idToken:h}).catch(()=>{});if(!m)break;p=yield Hr._fromGetAccountInfoResponse(e,m,h)}else p=Hr._fromJSON(e,h);l!==o&&(a=p),o=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new t(o,e,r):(o=u[0],a&&(yield o._set(s,a.toJSON())),yield Promise.all(n.map(l=>v(null,null,function*(){if(l!==o)try{yield l._remove(s)}catch{}}))),new t(o,e,r))})}};function sS(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(SS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(DS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(RS(e))return"Blackberry";if(MS(e))return"Webos";if(TS(e))return"Safari";if((e.includes("chrome/")||CS(e))&&!e.includes("edge/"))return"Chrome";if(AS(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function DS(t=rt()){return/firefox\//i.test(t)}function TS(t=rt()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function CS(t=rt()){return/crios\//i.test(t)}function SS(t=rt()){return/iemobile/i.test(t)}function AS(t=rt()){return/android/i.test(t)}function RS(t=rt()){return/blackberry/i.test(t)}function MS(t=rt()){return/webos/i.test(t)}function Iv(t=rt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function fU(t=rt()){var e;return Iv(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function pU(){return T0()&&document.documentMode===10}function NS(t=rt()){return Iv(t)||AS(t)||MS(t)||RS(t)||/windows phone/i.test(t)||SS(t)}function PS(t,e=[]){let n;switch(t){case"Browser":n=sS(rt());break;case"Worker":n=`${sS(rt())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${jr}/${r}`}var nv=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=o=>new Promise((s,a)=>{try{let u=e(o);s(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return v(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function gU(n){return v(this,arguments,function*(t,e={}){return ls(t,"GET","/v2/passwordPolicy",mv(t,e))})}var mU=6,rv=class{constructor(e){var n,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=s.minPasswordLength)!==null&&n!==void 0?n:mU,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,o,s,a;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsUppercaseLetter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(s=u.containsNumericCharacter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var iv=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new sh(this),this.idTokenSubscription=new sh(this),this.beforeStateQueue=new nv(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=_S,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ur(n)),this._initializationPromise=this.queue(()=>v(this,null,function*(){var r,i,o;if(!this._deleted&&(this.persistenceManager=yield oh.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return v(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return v(this,null,function*(){try{let n=yield rh(this,{idToken:e}),r=yield Hr._fromGetAccountInfoResponse(this,n,e);yield this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return v(this,null,function*(){var n;if(tn(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let s=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i?._redirectEventId,u=yield this.tryRedirectSignIn(e);(!s||s===a)&&u?.user&&(i=u.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return W(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return v(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return v(this,null,function*(){try{yield ih(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=nU()}_delete(){return v(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return v(this,null,function*(){if(tn(this.app))return Promise.reject(Ui(this));let n=e?He(e):null;return n&&W(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return v(this,null,function*(){if(!this._deleted)return e&&W(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>v(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return v(this,null,function*(){return tn(this.app)?Promise.reject(Ui(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return tn(this.app)?Promise.reject(Ui(this)):this.queue(()=>v(this,null,function*(){yield this.assertedPersistence.setPersistence(ur(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return v(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return v(this,null,function*(){let e=yield gU(this),n=new rv(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ct("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){return v(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield dU(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return v(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return v(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&ur(e)||this._popupRedirectResolver;W(n,this,"argument-error"),this.redirectPersistenceManager=yield oh.create(this,[ur(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return v(this,null,function*(){var n,r;return this._isInitialized&&(yield this.queue(()=>v(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return v(this,null,function*(){if(e===this.currentUser)return this.queue(()=>v(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let o=typeof n=="function"?n:n.next.bind(n),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(W(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof n=="function"){let u=e.addObserver(n,r,i);return()=>{s=!0,u()}}else{let u=e.addObserver(n);return()=>{s=!0,u()}}}directlySetCurrentUser(e){return v(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return W(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=PS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return v(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n})}_getAppCheckToken(){return v(this,null,function*(){var e;if(tn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&Xj(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function wv(t){return He(t)}var sh=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=R0(n=>this.observer=n)}get next(){return W(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Ev={loadJS(){return v(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function yU(t){Ev=t}function vU(t){return Ev.loadJS(t)}function _U(){return Ev.gapiScript}function xS(t){return`__${t}${Math.floor(Math.random()*1e6)}`}function bv(t,e){let n=en(t,"auth");if(n.isInitialized()){let i=n.getImmediate(),o=n.getOptions();if(Jt(o,e??{}))return i;zr(i,"already-initialized")}return n.initialize({options:e})}function IU(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(ur);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function Dv(t,e,n){let r=wv(t);W(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!n?.disableWarnings,o=kS(e),{host:s,port:a}=wU(e),u=a===null?"":`:${a}`,l={url:`${o}//${s}${u}/`},h=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){W(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),W(Jt(l,r.config.emulator)&&Jt(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=l,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,Vr(s)?(jd(`${o}//${s}${u}`),Ud("Auth",!0)):i||EU()}function kS(t){let e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function wU(t){let e=kS(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};let r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:aS(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:aS(s)}}}function aS(t){if(!t)return null;let e=Number(t);return isNaN(e)?null:e}function EU(){function t(){let e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}var ah=class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return cr("not implemented")}_getIdTokenResponse(e){return cr("not implemented")}_linkToIdToken(e,n){return cr("not implemented")}_getReauthenticationResolver(e){return cr("not implemented")}};function Yy(t,e){return v(this,null,function*(){return sU(t,"POST","/v1/accounts:signInWithIdp",mv(t,e))})}var ch=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var ov=class extends ch{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var Ic=class t{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,n,r,i=!1){return v(this,null,function*(){let o=yield Hr._fromIdTokenResponse(e,r,i),s=cS(r);return new t({user:o,providerId:s,_tokenResponse:r,operationType:n})})}static _forOperation(e,n,r){return v(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=cS(r);return new t({user:e,providerId:i,_tokenResponse:r,operationType:n})})}};function cS(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}var sv=class t extends lt{constructor(e,n,r,i){var o;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,t.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new t(e,n,r,i)}};function OS(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?sv._fromErrorAndOperation(t,o,e,r):o})}function bU(t,e,n=!1){return v(this,null,function*(){let r=yield vc(t,e._linkToIdToken(t.auth,yield t.getIdToken()),n);return Ic._forOperation(t,"link",r)})}function DU(t,e,n=!1){return v(this,null,function*(){let{auth:r}=t;if(tn(r.app))return Promise.reject(Ui(r));let i="reauthenticate";try{let o=yield vc(t,OS(r,i,e,t),n);W(o.idToken,r,"internal-error");let s=vv(o.idToken);W(s,r,"internal-error");let{sub:a}=s;return W(t.uid===a,r,"user-mismatch"),Ic._forOperation(t,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&zr(r,"user-mismatch"),o}})}function TU(t,e,n=!1){return v(this,null,function*(){if(tn(t.app))return Promise.reject(Ui(t));let r="signIn",i=yield OS(t,r,e),o=yield Ic._fromIdTokenResponse(t,r,i);return n||(yield t._updateCurrentUser(o.user)),o})}function Tv(t,e,n,r){return He(t).onIdTokenChanged(e,n,r)}function Cv(t,e,n){return He(t).beforeAuthStateChanged(e,n)}var uh="__sak";var lh=class{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(uh,"1"),this.storage.removeItem(uh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){let n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var CU=1e3,SU=10,AU=(()=>{class t extends lh{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=NS(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&n(r,o,i)}}onStorageEvent(n,r=!1){if(!n.key){this.forAllChangedKeys((a,u,l)=>{this.notifyListeners(a,l)});return}let i=n.key;r?this.detachListener():this.stopPolling();let o=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);pU()&&s!==n.newValue&&n.newValue!==n.oldValue?setTimeout(o,SU):o()}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},CU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(n,r){return v(this,null,function*(){yield wr(t.prototype,this,"_set").call(this,n,r),this.localCache[n]=JSON.stringify(r)})}_get(n){return v(this,null,function*(){let r=yield wr(t.prototype,this,"_get").call(this,n);return this.localCache[n]=JSON.stringify(r),r})}_remove(n){return v(this,null,function*(){yield wr(t.prototype,this,"_remove").call(this,n),delete this.localCache[n]})}}return t.type="LOCAL",t})(),FS=AU;var RU=(()=>{class t extends lh{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return t.type="SESSION",t})(),Sv=RU;function MU(t){return Promise.all(t.map(e=>v(null,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(n){return{fulfilled:!1,reason:n}}})))}var NU=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){let r=this.receivers.find(o=>o.isListeningto(n));if(r)return r;let i=new t(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}handleEvent(n){return v(this,null,function*(){let r=n,{eventId:i,eventType:o,data:s}=r.data,a=this.handlersMap[o];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let u=Array.from(a).map(h=>v(this,null,function*(){return h(r.origin,s)})),l=yield MU(u);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:l})})}_subscribe(n,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}t.receivers=[];return t})();function VS(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}var av=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,n,r=50){return v(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,u)=>{let l=VS("",20);i.port1.start();let h=setTimeout(()=>{u(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(p){let m=p;if(m.data.eventId===l)switch(m.data.status){case"ack":clearTimeout(h),o=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(m.data.response);break;default:clearTimeout(h),clearTimeout(o),u(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:n},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})})}};function On(){return window}function PU(t){On().location.href=t}function LS(){return typeof On().WorkerGlobalScope<"u"&&typeof On().importScripts=="function"}function xU(){return v(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function kU(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function OU(){return LS()?self:null}var jS="firebaseLocalStorageDb",FU=1,dh="firebaseLocalStorage",US="fbase_key",Hi=class{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function fh(t,e){return t.transaction([dh],e?"readwrite":"readonly").objectStore(dh)}function VU(){let t=indexedDB.deleteDatabase(jS);return new Hi(t).toPromise()}function cv(){let t=indexedDB.open(jS,FU);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{let r=t.result;try{r.createObjectStore(dh,{keyPath:US})}catch(i){n(i)}}),t.addEventListener("success",()=>v(null,null,function*(){let r=t.result;r.objectStoreNames.contains(dh)?e(r):(r.close(),yield VU(),e(yield cv()))}))})}function uS(t,e,n){return v(this,null,function*(){let r=fh(t,!0).put({[US]:e,value:n});return new Hi(r).toPromise()})}function LU(t,e){return v(this,null,function*(){let n=fh(t,!1).get(e),r=yield new Hi(n).toPromise();return r===void 0?null:r.value})}function lS(t,e){let n=fh(t,!0).delete(e);return new Hi(n).toPromise()}var jU=800,UU=3,BU=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return v(this,null,function*(){return this.db?this.db:(this.db=yield cv(),this.db)})}_withRetries(n){return v(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield n(i)}catch(i){if(r++>UU)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return v(this,null,function*(){return LS()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return v(this,null,function*(){this.receiver=NU._getInstance(OU()),this.receiver._subscribe("keyChanged",(n,r)=>v(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(n,r)=>v(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return v(this,null,function*(){var n,r;if(this.activeServiceWorker=yield xU(),!this.activeServiceWorker)return;this.sender=new av(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((n=i[0])===null||n===void 0)&&n.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(n){return v(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||kU()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return v(this,null,function*(){try{if(!indexedDB)return!1;let n=yield cv();return yield uS(n,uh,"1"),yield lS(n,uh),!0}catch{}return!1})}_withPendingWrite(n){return v(this,null,function*(){this.pendingWrites++;try{yield n()}finally{this.pendingWrites--}})}_set(n,r){return v(this,null,function*(){return this._withPendingWrite(()=>v(this,null,function*(){return yield this._withRetries(i=>uS(i,n,r)),this.localCache[n]=r,this.notifyServiceWorker(n)}))})}_get(n){return v(this,null,function*(){let r=yield this._withRetries(i=>LU(i,n));return this.localCache[n]=r,r})}_remove(n){return v(this,null,function*(){return this._withPendingWrite(()=>v(this,null,function*(){return yield this._withRetries(r=>lS(r,n)),delete this.localCache[n],this.notifyServiceWorker(n)}))})}_poll(){return v(this,null,function*(){let n=yield this._withRetries(o=>{let s=fh(o,!1).getAll();return new Hi(s).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(n.length!==0)for(let{fbase_key:o,value:s}of n)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r})}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>v(this,null,function*(){return this._poll()}),jU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return t.type="LOCAL",t})(),BS=BU;var TZ=xS("rcb"),CZ=new $i(3e4,6e4);function $U(t,e){return e?ur(e):(W(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}var wc=class extends ah{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Yy(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Yy(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Yy(e,this._buildIdpRequest())}_buildIdpRequest(e){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}};function HU(t){return TU(t.auth,new wc(t),t.bypassAuthState)}function zU(t){let{auth:e,user:n}=t;return W(n,e,"internal-error"),DU(n,new wc(t),t.bypassAuthState)}function qU(t){return v(this,null,function*(){let{auth:e,user:n}=t;return W(n,e,"internal-error"),bU(n,new wc(t),t.bypassAuthState)})}var uv=class{constructor(e,n,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise((e,n)=>v(this,null,function*(){this.pendingPromise={resolve:e,reject:n};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return v(this,null,function*(){let{urlResponse:n,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}let u={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(u))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return HU;case"linkViaPopup":case"linkViaRedirect":return qU;case"reauthViaPopup":case"reauthViaRedirect":return zU;default:zr(this.auth,"internal-error")}}resolve(e){qr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){qr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var SZ=new $i(2e3,1e4);var GU="pendingRedirect",Xd=new Map,lv=class t extends uv{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}execute(){return v(this,null,function*(){let e=Xd.get(this.auth._key());if(!e){try{let r=(yield WU(this.resolver,this.auth))?yield wr(t.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Xd.set(this.auth._key(),e)}return this.bypassAuthState||Xd.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return v(this,null,function*(){if(e.type==="signInViaRedirect")return wr(t.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let n=yield this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,wr(t.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return v(this,null,function*(){})}cleanUp(){}};function WU(t,e){return v(this,null,function*(){let n=YU(e),r=QU(t);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(n))==="true";return yield r._remove(n),i})}function KU(t,e){Xd.set(t._key(),e)}function QU(t){return ur(t._redirectPersistence)}function YU(t){return Jd(GU,t.config.apiKey,t.name)}function ZU(t,e,n=!1){return v(this,null,function*(){if(tn(t.app))return Promise.reject(Ui(t));let r=wv(t),i=$U(r,e),s=yield new lv(r,i,n).execute();return s&&!n&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,e)),s})}var JU=10*60*1e3,dv=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!XU(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!$S(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Bi(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){let r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=JU&&this.cachedEventUids.clear(),this.cachedEventUids.has(dS(e))}saveEventToCache(e){this.cachedEventUids.add(dS(e)),this.lastProcessedEventTime=Date.now()}};function dS(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function $S({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function XU(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return $S(t);default:return!1}}function eB(n){return v(this,arguments,function*(t,e={}){return ls(t,"GET","/v1/projects",e)})}var tB=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,nB=/^https?/;function rB(t){return v(this,null,function*(){if(t.config.emulator)return;let{authorizedDomains:e}=yield eB(t);for(let n of e)try{if(iB(n))return}catch{}zr(t,"unauthorized-domain")})}function iB(t){let e=Jy(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){let s=new URL(t);return s.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&s.hostname===r}if(!nB.test(n))return!1;if(tB.test(t))return r===t;let i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var oB=new $i(3e4,6e4);function hS(){let t=On().___jsl;if(t?.H){for(let e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function sB(t){return new Promise((e,n)=>{var r,i,o;function s(){hS(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{hS(),n(Bi(t,"network-request-failed"))},timeout:oB.get()})}if(!((i=(r=On().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=On().gapi)===null||o===void 0)&&o.load)s();else{let a=xS("iframefcb");return On()[a]=()=>{gapi.load?s():n(Bi(t,"network-request-failed"))},vU(`${_U()}?onload=${a}`).catch(u=>n(u))}}).catch(e=>{throw eh=null,e})}var eh=null;function aB(t){return eh=eh||sB(t),eh}var cB=new $i(5e3,15e3),uB="__/auth/iframe",lB="emulator/auth/iframe",dB={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},hB=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function fB(t){let e=t.config;W(e.authDomain,t,"auth-domain-config-required");let n=e.emulator?gv(e,lB):`https://${t.config.authDomain}/${uB}`,r={apiKey:e.apiKey,appName:t.name,v:jr},i=hB.get(t.config.apiHost);i&&(r.eid=i);let o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${dc(r).slice(1)}`}function pB(t){return v(this,null,function*(){let e=yield aB(t),n=On().gapi;return W(n,t,"internal-error"),e.open({where:document.body,url:fB(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:dB,dontclear:!0},r=>new Promise((i,o)=>v(null,null,function*(){yield r.restyle({setHideOnLeave:!1});let s=Bi(t,"network-request-failed"),a=On().setTimeout(()=>{o(s)},cB.get());function u(){On().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{o(s)})})))})}var gB={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},mB=500,yB=600,vB="_blank",_B="http://localhost",hh=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function IB(t,e,n,r=mB,i=yB){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",u=Object.assign(Object.assign({},gB),{width:r.toString(),height:i.toString(),top:o,left:s}),l=rt().toLowerCase();n&&(a=CS(l)?vB:n),DS(l)&&(e=e||_B,u.scrollbars="yes");let h=Object.entries(u).reduce((m,[y,T])=>`${m}${y}=${T},`,"");if(fU(l)&&a!=="_self")return wB(e||"",a),new hh(null);let p=window.open(e||"",a,h);W(p,t,"popup-blocked");try{p.focus()}catch{}return new hh(p)}function wB(t,e){let n=document.createElement("a");n.href=t,n.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var EB="__/auth/handler",bB="emulator/auth/handler",DB=encodeURIComponent("fac");function fS(t,e,n,r,i,o){return v(this,null,function*(){W(t.config.authDomain,t,"auth-domain-config-required"),W(t.config.apiKey,t,"invalid-api-key");let s={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:jr,eventId:i};if(e instanceof ch){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",A0(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,p]of Object.entries(o||{}))s[h]=p}if(e instanceof ov){let h=e.getScopes().filter(p=>p!=="");h.length>0&&(s.scopes=h.join(","))}t.tenantId&&(s.tid=t.tenantId);let a=s;for(let h of Object.keys(a))a[h]===void 0&&delete a[h];let u=yield t._getAppCheckToken(),l=u?`#${DB}=${encodeURIComponent(u)}`:"";return`${TB(t)}?${dc(a).slice(1)}${l}`})}function TB({config:t}){return t.emulator?gv(t,bB):`https://${t.authDomain}/${EB}`}var Zy="webStorageSupport",hv=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Sv,this._completeRedirectFn=ZU,this._overrideRedirectResult=KU}_openPopup(e,n,r,i){return v(this,null,function*(){var o;qr((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let s=yield fS(e,n,r,Jy(),i);return IB(e,s,VS())})}_openRedirect(e,n,r,i){return v(this,null,function*(){yield this._originValidation(e);let o=yield fS(e,n,r,Jy(),i);return PU(o),new Promise(()=>{})})}_initialize(e){let n=e._key();if(this.eventManagers[n]){let{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(qr(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}initAndGetManager(e){return v(this,null,function*(){let n=yield pB(e),r=new dv(e);return n.register("authEvent",i=>(W(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r})}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Zy,{type:Zy},i=>{var o;let s=(o=i?.[0])===null||o===void 0?void 0:o[Zy];s!==void 0&&n(!!s),zr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=rB(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return NS()||TS()||Iv()}},HS=hv;var pS="@firebase/auth",gS="1.10.8";var fv=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return v(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){W(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function CB(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function SB(t){dt(new je("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;W(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:s,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:PS(t)},l=new iv(r,i,o,u);return IU(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),dt(new je("auth-internal",e=>{let n=wv(e.getProvider("auth").getImmediate());return(r=>new fv(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ie(pS,gS,CB(t)),Ie(pS,gS,"esm2017")}var AB=5*60,RB=Ty("authIdTokenMaxAge")||AB,mS=null,MB=t=>e=>v(null,null,function*(){let n=e&&(yield e.getIdTokenResult()),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>RB)return;let i=n?.token;mS!==i&&(mS=i,yield fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function Av(t=Pn()){let e=en(t,"auth");if(e.isInitialized())return e.getImmediate();let n=bv(t,{popupRedirectResolver:HS,persistence:[BS,FS,Sv]}),r=Ty("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=MB(o.toString());Cv(n,s,()=>s(n.currentUser)),Tv(n,a=>s(a))}}let i=by("auth");return i&&Dv(n,`http://${i}`),n}function NB(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}yU({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let o=Bi("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",NB().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});SB("Browser");var zS="auth",Ec=class{constructor(e){return e}},bc=class{constructor(){return Ur(zS)}};var Rv=new L("angularfire2.auth-instances");function D$(t,e){let n=ji(zS,t,e);return n&&new Ec(n)}function T$(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Ec(r)}}var C$={provide:bc,deps:[[new ut,Rv]]},S$={provide:Ec,useFactory:D$,deps:[[new ut,Rv],gn]};function qS(t,...e){return Ie("angularfire",xn.full,"auth"),ln([S$,C$,{provide:Rv,useFactory:T$(t),multi:!0,deps:[_e,Je,kn,ar,[new ut,us],...e]}])}var GS=kt(Av,!0);var WS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},KS={};var lr,Mv;(function(){var t;function e(b,_){function w(){}w.prototype=_.prototype,b.D=_.prototype,b.prototype=new w,b.prototype.constructor=b,b.C=function(E,D,S){for(var I=Array(arguments.length-2),zn=2;zn<arguments.length;zn++)I[zn-2]=arguments[zn];return _.prototype[D].apply(E,I)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(b,_,w){w||(w=0);var E=Array(16);if(typeof _=="string")for(var D=0;16>D;++D)E[D]=_.charCodeAt(w++)|_.charCodeAt(w++)<<8|_.charCodeAt(w++)<<16|_.charCodeAt(w++)<<24;else for(D=0;16>D;++D)E[D]=_[w++]|_[w++]<<8|_[w++]<<16|_[w++]<<24;_=b.g[0],w=b.g[1],D=b.g[2];var S=b.g[3],I=_+(S^w&(D^S))+E[0]+3614090360&4294967295;_=w+(I<<7&4294967295|I>>>25),I=S+(D^_&(w^D))+E[1]+3905402710&4294967295,S=_+(I<<12&4294967295|I>>>20),I=D+(w^S&(_^w))+E[2]+606105819&4294967295,D=S+(I<<17&4294967295|I>>>15),I=w+(_^D&(S^_))+E[3]+3250441966&4294967295,w=D+(I<<22&4294967295|I>>>10),I=_+(S^w&(D^S))+E[4]+4118548399&4294967295,_=w+(I<<7&4294967295|I>>>25),I=S+(D^_&(w^D))+E[5]+1200080426&4294967295,S=_+(I<<12&4294967295|I>>>20),I=D+(w^S&(_^w))+E[6]+2821735955&4294967295,D=S+(I<<17&4294967295|I>>>15),I=w+(_^D&(S^_))+E[7]+4249261313&4294967295,w=D+(I<<22&4294967295|I>>>10),I=_+(S^w&(D^S))+E[8]+1770035416&4294967295,_=w+(I<<7&4294967295|I>>>25),I=S+(D^_&(w^D))+E[9]+2336552879&4294967295,S=_+(I<<12&4294967295|I>>>20),I=D+(w^S&(_^w))+E[10]+4294925233&4294967295,D=S+(I<<17&4294967295|I>>>15),I=w+(_^D&(S^_))+E[11]+2304563134&4294967295,w=D+(I<<22&4294967295|I>>>10),I=_+(S^w&(D^S))+E[12]+1804603682&4294967295,_=w+(I<<7&4294967295|I>>>25),I=S+(D^_&(w^D))+E[13]+4254626195&4294967295,S=_+(I<<12&4294967295|I>>>20),I=D+(w^S&(_^w))+E[14]+2792965006&4294967295,D=S+(I<<17&4294967295|I>>>15),I=w+(_^D&(S^_))+E[15]+1236535329&4294967295,w=D+(I<<22&4294967295|I>>>10),I=_+(D^S&(w^D))+E[1]+4129170786&4294967295,_=w+(I<<5&4294967295|I>>>27),I=S+(w^D&(_^w))+E[6]+3225465664&4294967295,S=_+(I<<9&4294967295|I>>>23),I=D+(_^w&(S^_))+E[11]+643717713&4294967295,D=S+(I<<14&4294967295|I>>>18),I=w+(S^_&(D^S))+E[0]+3921069994&4294967295,w=D+(I<<20&4294967295|I>>>12),I=_+(D^S&(w^D))+E[5]+3593408605&4294967295,_=w+(I<<5&4294967295|I>>>27),I=S+(w^D&(_^w))+E[10]+38016083&4294967295,S=_+(I<<9&4294967295|I>>>23),I=D+(_^w&(S^_))+E[15]+3634488961&4294967295,D=S+(I<<14&4294967295|I>>>18),I=w+(S^_&(D^S))+E[4]+3889429448&4294967295,w=D+(I<<20&4294967295|I>>>12),I=_+(D^S&(w^D))+E[9]+568446438&4294967295,_=w+(I<<5&4294967295|I>>>27),I=S+(w^D&(_^w))+E[14]+3275163606&4294967295,S=_+(I<<9&4294967295|I>>>23),I=D+(_^w&(S^_))+E[3]+4107603335&4294967295,D=S+(I<<14&4294967295|I>>>18),I=w+(S^_&(D^S))+E[8]+1163531501&4294967295,w=D+(I<<20&4294967295|I>>>12),I=_+(D^S&(w^D))+E[13]+2850285829&4294967295,_=w+(I<<5&4294967295|I>>>27),I=S+(w^D&(_^w))+E[2]+4243563512&4294967295,S=_+(I<<9&4294967295|I>>>23),I=D+(_^w&(S^_))+E[7]+1735328473&4294967295,D=S+(I<<14&4294967295|I>>>18),I=w+(S^_&(D^S))+E[12]+2368359562&4294967295,w=D+(I<<20&4294967295|I>>>12),I=_+(w^D^S)+E[5]+4294588738&4294967295,_=w+(I<<4&4294967295|I>>>28),I=S+(_^w^D)+E[8]+2272392833&4294967295,S=_+(I<<11&4294967295|I>>>21),I=D+(S^_^w)+E[11]+1839030562&4294967295,D=S+(I<<16&4294967295|I>>>16),I=w+(D^S^_)+E[14]+4259657740&4294967295,w=D+(I<<23&4294967295|I>>>9),I=_+(w^D^S)+E[1]+2763975236&4294967295,_=w+(I<<4&4294967295|I>>>28),I=S+(_^w^D)+E[4]+1272893353&4294967295,S=_+(I<<11&4294967295|I>>>21),I=D+(S^_^w)+E[7]+4139469664&4294967295,D=S+(I<<16&4294967295|I>>>16),I=w+(D^S^_)+E[10]+3200236656&4294967295,w=D+(I<<23&4294967295|I>>>9),I=_+(w^D^S)+E[13]+681279174&4294967295,_=w+(I<<4&4294967295|I>>>28),I=S+(_^w^D)+E[0]+3936430074&4294967295,S=_+(I<<11&4294967295|I>>>21),I=D+(S^_^w)+E[3]+3572445317&4294967295,D=S+(I<<16&4294967295|I>>>16),I=w+(D^S^_)+E[6]+76029189&4294967295,w=D+(I<<23&4294967295|I>>>9),I=_+(w^D^S)+E[9]+3654602809&4294967295,_=w+(I<<4&4294967295|I>>>28),I=S+(_^w^D)+E[12]+3873151461&4294967295,S=_+(I<<11&4294967295|I>>>21),I=D+(S^_^w)+E[15]+530742520&4294967295,D=S+(I<<16&4294967295|I>>>16),I=w+(D^S^_)+E[2]+3299628645&4294967295,w=D+(I<<23&4294967295|I>>>9),I=_+(D^(w|~S))+E[0]+4096336452&4294967295,_=w+(I<<6&4294967295|I>>>26),I=S+(w^(_|~D))+E[7]+1126891415&4294967295,S=_+(I<<10&4294967295|I>>>22),I=D+(_^(S|~w))+E[14]+2878612391&4294967295,D=S+(I<<15&4294967295|I>>>17),I=w+(S^(D|~_))+E[5]+4237533241&4294967295,w=D+(I<<21&4294967295|I>>>11),I=_+(D^(w|~S))+E[12]+1700485571&4294967295,_=w+(I<<6&4294967295|I>>>26),I=S+(w^(_|~D))+E[3]+2399980690&4294967295,S=_+(I<<10&4294967295|I>>>22),I=D+(_^(S|~w))+E[10]+4293915773&4294967295,D=S+(I<<15&4294967295|I>>>17),I=w+(S^(D|~_))+E[1]+2240044497&4294967295,w=D+(I<<21&4294967295|I>>>11),I=_+(D^(w|~S))+E[8]+1873313359&4294967295,_=w+(I<<6&4294967295|I>>>26),I=S+(w^(_|~D))+E[15]+4264355552&4294967295,S=_+(I<<10&4294967295|I>>>22),I=D+(_^(S|~w))+E[6]+2734768916&4294967295,D=S+(I<<15&4294967295|I>>>17),I=w+(S^(D|~_))+E[13]+1309151649&4294967295,w=D+(I<<21&4294967295|I>>>11),I=_+(D^(w|~S))+E[4]+4149444226&4294967295,_=w+(I<<6&4294967295|I>>>26),I=S+(w^(_|~D))+E[11]+3174756917&4294967295,S=_+(I<<10&4294967295|I>>>22),I=D+(_^(S|~w))+E[2]+718787259&4294967295,D=S+(I<<15&4294967295|I>>>17),I=w+(S^(D|~_))+E[9]+3951481745&4294967295,b.g[0]=b.g[0]+_&4294967295,b.g[1]=b.g[1]+(D+(I<<21&4294967295|I>>>11))&4294967295,b.g[2]=b.g[2]+D&4294967295,b.g[3]=b.g[3]+S&4294967295}r.prototype.u=function(b,_){_===void 0&&(_=b.length);for(var w=_-this.blockSize,E=this.B,D=this.h,S=0;S<_;){if(D==0)for(;S<=w;)i(this,b,S),S+=this.blockSize;if(typeof b=="string"){for(;S<_;)if(E[D++]=b.charCodeAt(S++),D==this.blockSize){i(this,E),D=0;break}}else for(;S<_;)if(E[D++]=b[S++],D==this.blockSize){i(this,E),D=0;break}}this.h=D,this.o+=_},r.prototype.v=function(){var b=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);b[0]=128;for(var _=1;_<b.length-8;++_)b[_]=0;var w=8*this.o;for(_=b.length-8;_<b.length;++_)b[_]=w&255,w/=256;for(this.u(b),b=Array(16),_=w=0;4>_;++_)for(var E=0;32>E;E+=8)b[w++]=this.g[_]>>>E&255;return b};function o(b,_){var w=a;return Object.prototype.hasOwnProperty.call(w,b)?w[b]:w[b]=_(b)}function s(b,_){this.h=_;for(var w=[],E=!0,D=b.length-1;0<=D;D--){var S=b[D]|0;E&&S==_||(w[D]=S,E=!1)}this.g=w}var a={};function u(b){return-128<=b&&128>b?o(b,function(_){return new s([_|0],0>_?-1:0)}):new s([b|0],0>b?-1:0)}function l(b){if(isNaN(b)||!isFinite(b))return p;if(0>b)return R(l(-b));for(var _=[],w=1,E=0;b>=w;E++)_[E]=b/w|0,w*=4294967296;return new s(_,0)}function h(b,_){if(b.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(b.charAt(0)=="-")return R(h(b.substring(1),_));if(0<=b.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=l(Math.pow(_,8)),E=p,D=0;D<b.length;D+=8){var S=Math.min(8,b.length-D),I=parseInt(b.substring(D,D+S),_);8>S?(S=l(Math.pow(_,S)),E=E.j(S).add(l(I))):(E=E.j(w),E=E.add(l(I)))}return E}var p=u(0),m=u(1),y=u(16777216);t=s.prototype,t.m=function(){if(M(this))return-R(this).m();for(var b=0,_=1,w=0;w<this.g.length;w++){var E=this.i(w);b+=(0<=E?E:4294967296+E)*_,_*=4294967296}return b},t.toString=function(b){if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(T(this))return"0";if(M(this))return"-"+R(this).toString(b);for(var _=l(Math.pow(b,6)),w=this,E="";;){var D=be(w,_).g;w=V(w,D.j(_));var S=((0<w.g.length?w.g[0]:w.h)>>>0).toString(b);if(w=D,T(w))return S+E;for(;6>S.length;)S="0"+S;E=S+E}},t.i=function(b){return 0>b?0:b<this.g.length?this.g[b]:this.h};function T(b){if(b.h!=0)return!1;for(var _=0;_<b.g.length;_++)if(b.g[_]!=0)return!1;return!0}function M(b){return b.h==-1}t.l=function(b){return b=V(this,b),M(b)?-1:T(b)?0:1};function R(b){for(var _=b.g.length,w=[],E=0;E<_;E++)w[E]=~b.g[E];return new s(w,~b.h).add(m)}t.abs=function(){return M(this)?R(this):this},t.add=function(b){for(var _=Math.max(this.g.length,b.g.length),w=[],E=0,D=0;D<=_;D++){var S=E+(this.i(D)&65535)+(b.i(D)&65535),I=(S>>>16)+(this.i(D)>>>16)+(b.i(D)>>>16);E=I>>>16,S&=65535,I&=65535,w[D]=I<<16|S}return new s(w,w[w.length-1]&-2147483648?-1:0)};function V(b,_){return b.add(R(_))}t.j=function(b){if(T(this)||T(b))return p;if(M(this))return M(b)?R(this).j(R(b)):R(R(this).j(b));if(M(b))return R(this.j(R(b)));if(0>this.l(y)&&0>b.l(y))return l(this.m()*b.m());for(var _=this.g.length+b.g.length,w=[],E=0;E<2*_;E++)w[E]=0;for(E=0;E<this.g.length;E++)for(var D=0;D<b.g.length;D++){var S=this.i(E)>>>16,I=this.i(E)&65535,zn=b.i(D)>>>16,Bs=b.i(D)&65535;w[2*E+2*D]+=I*Bs,G(w,2*E+2*D),w[2*E+2*D+1]+=S*Bs,G(w,2*E+2*D+1),w[2*E+2*D+1]+=I*zn,G(w,2*E+2*D+1),w[2*E+2*D+2]+=S*zn,G(w,2*E+2*D+2)}for(E=0;E<_;E++)w[E]=w[2*E+1]<<16|w[2*E];for(E=_;E<2*_;E++)w[E]=0;return new s(w,0)};function G(b,_){for(;(b[_]&65535)!=b[_];)b[_+1]+=b[_]>>>16,b[_]&=65535,_++}function K(b,_){this.g=b,this.h=_}function be(b,_){if(T(_))throw Error("division by zero");if(T(b))return new K(p,p);if(M(b))return _=be(R(b),_),new K(R(_.g),R(_.h));if(M(_))return _=be(b,R(_)),new K(R(_.g),_.h);if(30<b.g.length){if(M(b)||M(_))throw Error("slowDivide_ only works with positive integers.");for(var w=m,E=_;0>=E.l(b);)w=It(w),E=It(E);var D=Ee(w,1),S=Ee(E,1);for(E=Ee(E,2),w=Ee(w,2);!T(E);){var I=S.add(E);0>=I.l(b)&&(D=D.add(w),S=I),E=Ee(E,1),w=Ee(w,1)}return _=V(b,D.j(_)),new K(D,_)}for(D=p;0<=b.l(_);){for(w=Math.max(1,Math.floor(b.m()/_.m())),E=Math.ceil(Math.log(w)/Math.LN2),E=48>=E?1:Math.pow(2,E-48),S=l(w),I=S.j(_);M(I)||0<I.l(b);)w-=E,S=l(w),I=S.j(_);T(S)&&(S=m),D=D.add(S),b=V(b,I)}return new K(D,b)}t.A=function(b){return be(this,b).h},t.and=function(b){for(var _=Math.max(this.g.length,b.g.length),w=[],E=0;E<_;E++)w[E]=this.i(E)&b.i(E);return new s(w,this.h&b.h)},t.or=function(b){for(var _=Math.max(this.g.length,b.g.length),w=[],E=0;E<_;E++)w[E]=this.i(E)|b.i(E);return new s(w,this.h|b.h)},t.xor=function(b){for(var _=Math.max(this.g.length,b.g.length),w=[],E=0;E<_;E++)w[E]=this.i(E)^b.i(E);return new s(w,this.h^b.h)};function It(b){for(var _=b.g.length+1,w=[],E=0;E<_;E++)w[E]=b.i(E)<<1|b.i(E-1)>>>31;return new s(w,b.h)}function Ee(b,_){var w=_>>5;_%=32;for(var E=b.g.length-w,D=[],S=0;S<E;S++)D[S]=0<_?b.i(S+w)>>>_|b.i(S+w+1)<<32-_:b.i(S+w);return new s(D,b.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Mv=KS.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=h,lr=KS.Integer=s}).apply(typeof WS<"u"?WS:typeof self<"u"?self:typeof window<"u"?window:{});var ph=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},dr={};var Nv,A$,ds,Pv,Dc,gh,xv,kv,Ov;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,d,f){return c==Array.prototype||c==Object.prototype||(c[d]=f.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof ph=="object"&&ph];for(var d=0;d<c.length;++d){var f=c[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function i(c,d){if(d)e:{var f=r;c=c.split(".");for(var g=0;g<c.length-1;g++){var C=c[g];if(!(C in f))break e;f=f[C]}c=c[c.length-1],g=f[c],d=d(g),d!=g&&d!=null&&e(f,c,{configurable:!0,writable:!0,value:d})}}function o(c,d){c instanceof String&&(c+="");var f=0,g=!1,C={next:function(){if(!g&&f<c.length){var A=f++;return{value:d(A,c[A]),done:!1}}return g=!0,{done:!0,value:void 0}}};return C[Symbol.iterator]=function(){return C},C}i("Array.prototype.values",function(c){return c||function(){return o(this,function(d,f){return f})}});var s=s||{},a=this||self;function u(c){var d=typeof c;return d=d!="object"?d:c?Array.isArray(c)?"array":d:"null",d=="array"||d=="object"&&typeof c.length=="number"}function l(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function h(c,d,f){return c.call.apply(c.bind,arguments)}function p(c,d,f){if(!c)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var C=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(C,g),c.apply(d,C)}}return function(){return c.apply(d,arguments)}}function m(c,d,f){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,m.apply(null,arguments)}function y(c,d){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),c.apply(this,g)}}function T(c,d){function f(){}f.prototype=d.prototype,c.aa=d.prototype,c.prototype=new f,c.prototype.constructor=c,c.Qb=function(g,C,A){for(var k=Array(arguments.length-2),De=2;De<arguments.length;De++)k[De-2]=arguments[De];return d.prototype[C].apply(g,k)}}function M(c){let d=c.length;if(0<d){let f=Array(d);for(let g=0;g<d;g++)f[g]=c[g];return f}return[]}function R(c,d){for(let f=1;f<arguments.length;f++){let g=arguments[f];if(u(g)){let C=c.length||0,A=g.length||0;c.length=C+A;for(let k=0;k<A;k++)c[C+k]=g[k]}else c.push(g)}}class V{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function G(c){return/^[\s\xa0]*$/.test(c)}function K(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function be(c){return be[" "](c),c}be[" "]=function(){};var It=K().indexOf("Gecko")!=-1&&!(K().toLowerCase().indexOf("webkit")!=-1&&K().indexOf("Edge")==-1)&&!(K().indexOf("Trident")!=-1||K().indexOf("MSIE")!=-1)&&K().indexOf("Edge")==-1;function Ee(c,d,f){for(let g in c)d.call(f,c[g],g,c)}function b(c,d){for(let f in c)d.call(void 0,c[f],f,c)}function _(c){let d={};for(let f in c)d[f]=c[f];return d}let w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function E(c,d){let f,g;for(let C=1;C<arguments.length;C++){g=arguments[C];for(f in g)c[f]=g[f];for(let A=0;A<w.length;A++)f=w[A],Object.prototype.hasOwnProperty.call(g,f)&&(c[f]=g[f])}}function D(c){var d=1;c=c.split(":");let f=[];for(;0<d&&c.length;)f.push(c.shift()),d--;return c.length&&f.push(c.join(":")),f}function S(c){a.setTimeout(()=>{throw c},0)}function I(){var c=kf;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class zn{constructor(){this.h=this.g=null}add(d,f){let g=Bs.get();g.set(d,f),this.h?this.h.next=g:this.g=g,this.h=g}}var Bs=new V(()=>new RN,c=>c.reset());class RN{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let $s,Hs=!1,kf=new zn,yw=()=>{let c=a.Promise.resolve(void 0);$s=()=>{c.then(MN)}};var MN=()=>{for(var c;c=I();){try{c.h.call(c.g)}catch(f){S(f)}var d=Bs;d.j(c),100>d.h&&(d.h++,c.next=d.g,d.g=c)}Hs=!1};function yr(){this.s=this.s,this.C=this.C}yr.prototype.s=!1,yr.prototype.ma=function(){this.s||(this.s=!0,this.N())},yr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ft(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}ft.prototype.h=function(){this.defaultPrevented=!0};var NN=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return c}();function zs(c,d){if(ft.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var f=this.type=c.type,g=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget){if(It){e:{try{be(d.nodeName);var C=!0;break e}catch{}C=!1}C||(d=null)}}else f=="mouseover"?d=c.fromElement:f=="mouseout"&&(d=c.toElement);this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:PN[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&zs.aa.h.call(this)}}T(zs,ft);var PN={2:"touch",3:"pen",4:"mouse"};zs.prototype.h=function(){zs.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var qs="closure_listenable_"+(1e6*Math.random()|0),xN=0;function kN(c,d,f,g,C){this.listener=c,this.proxy=null,this.src=d,this.type=f,this.capture=!!g,this.ha=C,this.key=++xN,this.da=this.fa=!1}function Jc(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Xc(c){this.src=c,this.g={},this.h=0}Xc.prototype.add=function(c,d,f,g,C){var A=c.toString();c=this.g[A],c||(c=this.g[A]=[],this.h++);var k=Ff(c,d,g,C);return-1<k?(d=c[k],f||(d.fa=!1)):(d=new kN(d,this.src,A,!!g,C),d.fa=f,c.push(d)),d};function Of(c,d){var f=d.type;if(f in c.g){var g=c.g[f],C=Array.prototype.indexOf.call(g,d,void 0),A;(A=0<=C)&&Array.prototype.splice.call(g,C,1),A&&(Jc(d),c.g[f].length==0&&(delete c.g[f],c.h--))}}function Ff(c,d,f,g){for(var C=0;C<c.length;++C){var A=c[C];if(!A.da&&A.listener==d&&A.capture==!!f&&A.ha==g)return C}return-1}var Vf="closure_lm_"+(1e6*Math.random()|0),Lf={};function vw(c,d,f,g,C){if(g&&g.once)return Iw(c,d,f,g,C);if(Array.isArray(d)){for(var A=0;A<d.length;A++)vw(c,d[A],f,g,C);return null}return f=$f(f),c&&c[qs]?c.K(d,f,l(g)?!!g.capture:!!g,C):_w(c,d,f,!1,g,C)}function _w(c,d,f,g,C,A){if(!d)throw Error("Invalid event type");var k=l(C)?!!C.capture:!!C,De=Uf(c);if(De||(c[Vf]=De=new Xc(c)),f=De.add(d,f,g,k,A),f.proxy)return f;if(g=ON(),f.proxy=g,g.src=c,g.listener=f,c.addEventListener)NN||(C=k),C===void 0&&(C=!1),c.addEventListener(d.toString(),g,C);else if(c.attachEvent)c.attachEvent(Ew(d.toString()),g);else if(c.addListener&&c.removeListener)c.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function ON(){function c(f){return d.call(c.src,c.listener,f)}let d=FN;return c}function Iw(c,d,f,g,C){if(Array.isArray(d)){for(var A=0;A<d.length;A++)Iw(c,d[A],f,g,C);return null}return f=$f(f),c&&c[qs]?c.L(d,f,l(g)?!!g.capture:!!g,C):_w(c,d,f,!0,g,C)}function ww(c,d,f,g,C){if(Array.isArray(d))for(var A=0;A<d.length;A++)ww(c,d[A],f,g,C);else g=l(g)?!!g.capture:!!g,f=$f(f),c&&c[qs]?(c=c.i,d=String(d).toString(),d in c.g&&(A=c.g[d],f=Ff(A,f,g,C),-1<f&&(Jc(A[f]),Array.prototype.splice.call(A,f,1),A.length==0&&(delete c.g[d],c.h--)))):c&&(c=Uf(c))&&(d=c.g[d.toString()],c=-1,d&&(c=Ff(d,f,g,C)),(f=-1<c?d[c]:null)&&jf(f))}function jf(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[qs])Of(d.i,c);else{var f=c.type,g=c.proxy;d.removeEventListener?d.removeEventListener(f,g,c.capture):d.detachEvent?d.detachEvent(Ew(f),g):d.addListener&&d.removeListener&&d.removeListener(g),(f=Uf(d))?(Of(f,c),f.h==0&&(f.src=null,d[Vf]=null)):Jc(c)}}}function Ew(c){return c in Lf?Lf[c]:Lf[c]="on"+c}function FN(c,d){if(c.da)c=!0;else{d=new zs(d,this);var f=c.listener,g=c.ha||c.src;c.fa&&jf(c),c=f.call(g,d)}return c}function Uf(c){return c=c[Vf],c instanceof Xc?c:null}var Bf="__closure_events_fn_"+(1e9*Math.random()>>>0);function $f(c){return typeof c=="function"?c:(c[Bf]||(c[Bf]=function(d){return c.handleEvent(d)}),c[Bf])}function pt(){yr.call(this),this.i=new Xc(this),this.M=this,this.F=null}T(pt,yr),pt.prototype[qs]=!0,pt.prototype.removeEventListener=function(c,d,f,g){ww(this,c,d,f,g)};function wt(c,d){var f,g=c.F;if(g)for(f=[];g;g=g.F)f.push(g);if(c=c.M,g=d.type||d,typeof d=="string")d=new ft(d,c);else if(d instanceof ft)d.target=d.target||c;else{var C=d;d=new ft(g,c),E(d,C)}if(C=!0,f)for(var A=f.length-1;0<=A;A--){var k=d.g=f[A];C=eu(k,g,!0,d)&&C}if(k=d.g=c,C=eu(k,g,!0,d)&&C,C=eu(k,g,!1,d)&&C,f)for(A=0;A<f.length;A++)k=d.g=f[A],C=eu(k,g,!1,d)&&C}pt.prototype.N=function(){if(pt.aa.N.call(this),this.i){var c=this.i,d;for(d in c.g){for(var f=c.g[d],g=0;g<f.length;g++)Jc(f[g]);delete c.g[d],c.h--}}this.F=null},pt.prototype.K=function(c,d,f,g){return this.i.add(String(c),d,!1,f,g)},pt.prototype.L=function(c,d,f,g){return this.i.add(String(c),d,!0,f,g)};function eu(c,d,f,g){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();for(var C=!0,A=0;A<d.length;++A){var k=d[A];if(k&&!k.da&&k.capture==f){var De=k.listener,st=k.ha||k.src;k.fa&&Of(c.i,k),C=De.call(st,g)!==!1&&C}}return C&&!g.defaultPrevented}function bw(c,d,f){if(typeof c=="function")f&&(c=m(c,f));else if(c&&typeof c.handleEvent=="function")c=m(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(c,d||0)}function Dw(c){c.g=bw(()=>{c.g=null,c.i&&(c.i=!1,Dw(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class VN extends yr{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:Dw(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Gs(c){yr.call(this),this.h=c,this.g={}}T(Gs,yr);var Tw=[];function Cw(c){Ee(c.g,function(d,f){this.g.hasOwnProperty(f)&&jf(d)},c),c.g={}}Gs.prototype.N=function(){Gs.aa.N.call(this),Cw(this)},Gs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Hf=a.JSON.stringify,LN=a.JSON.parse,jN=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function zf(){}zf.prototype.h=null;function Sw(c){return c.h||(c.h=c.i())}function Aw(){}var Ws={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function qf(){ft.call(this,"d")}T(qf,ft);function Gf(){ft.call(this,"c")}T(Gf,ft);var ri={},Rw=null;function tu(){return Rw=Rw||new pt}ri.La="serverreachability";function Mw(c){ft.call(this,ri.La,c)}T(Mw,ft);function Ks(c){let d=tu();wt(d,new Mw(d))}ri.STAT_EVENT="statevent";function Nw(c,d){ft.call(this,ri.STAT_EVENT,c),this.stat=d}T(Nw,ft);function Et(c){let d=tu();wt(d,new Nw(d,c))}ri.Ma="timingevent";function Pw(c,d){ft.call(this,ri.Ma,c),this.size=d}T(Pw,ft);function Qs(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},d)}function Ys(){this.g=!0}Ys.prototype.xa=function(){this.g=!1};function UN(c,d,f,g,C,A){c.info(function(){if(c.g)if(A)for(var k="",De=A.split("&"),st=0;st<De.length;st++){var me=De[st].split("=");if(1<me.length){var gt=me[0];me=me[1];var mt=gt.split("_");k=2<=mt.length&&mt[1]=="type"?k+(gt+"="+me+"&"):k+(gt+"=redacted&")}}else k=null;else k=A;return"XMLHTTP REQ ("+g+") [attempt "+C+"]: "+d+`
`+f+`
`+k})}function BN(c,d,f,g,C,A,k){c.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+C+"]: "+d+`
`+f+`
`+A+" "+k})}function oo(c,d,f,g){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+HN(c,f)+(g?" "+g:"")})}function $N(c,d){c.info(function(){return"TIMEOUT: "+d})}Ys.prototype.info=function(){};function HN(c,d){if(!c.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(c=0;c<f.length;c++)if(Array.isArray(f[c])){var g=f[c];if(!(2>g.length)){var C=g[1];if(Array.isArray(C)&&!(1>C.length)){var A=C[0];if(A!="noop"&&A!="stop"&&A!="close")for(var k=1;k<C.length;k++)C[k]=""}}}}return Hf(f)}catch{return d}}var nu={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},xw={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Wf;function ru(){}T(ru,zf),ru.prototype.g=function(){return new XMLHttpRequest},ru.prototype.i=function(){return{}},Wf=new ru;function vr(c,d,f,g){this.j=c,this.i=d,this.l=f,this.R=g||1,this.U=new Gs(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new kw}function kw(){this.i=null,this.g="",this.h=!1}var Ow={},Kf={};function Qf(c,d,f){c.L=1,c.v=au(qn(d)),c.m=f,c.P=!0,Fw(c,null)}function Fw(c,d){c.F=Date.now(),iu(c),c.A=qn(c.v);var f=c.A,g=c.R;Array.isArray(g)||(g=[String(g)]),Yw(f.i,"t",g),c.C=0,f=c.j.J,c.h=new kw,c.g=pE(c.j,f?d:null,!c.m),0<c.O&&(c.M=new VN(m(c.Y,c,c.g),c.O)),d=c.U,f=c.g,g=c.ca;var C="readystatechange";Array.isArray(C)||(C&&(Tw[0]=C.toString()),C=Tw);for(var A=0;A<C.length;A++){var k=vw(f,C[A],g||d.handleEvent,!1,d.h||d);if(!k)break;d.g[k.key]=k}d=c.H?_(c.H):{},c.m?(c.u||(c.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,d)):(c.u="GET",c.g.ea(c.A,c.u,null,d)),Ks(),UN(c.i,c.u,c.A,c.l,c.R,c.m)}vr.prototype.ca=function(c){c=c.target;let d=this.M;d&&Gn(c)==3?d.j():this.Y(c)},vr.prototype.Y=function(c){try{if(c==this.g)e:{let mt=Gn(this.g);var d=this.g.Ba();let co=this.g.Z();if(!(3>mt)&&(mt!=3||this.g&&(this.h.h||this.g.oa()||rE(this.g)))){this.J||mt!=4||d==7||(d==8||0>=co?Ks(3):Ks(2)),Yf(this);var f=this.g.Z();this.X=f;t:if(Vw(this)){var g=rE(this.g);c="";var C=g.length,A=Gn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ii(this),Zs(this);var k="";break t}this.h.i=new a.TextDecoder}for(d=0;d<C;d++)this.h.h=!0,c+=this.h.i.decode(g[d],{stream:!(A&&d==C-1)});g.length=0,this.h.g+=c,this.C=0,k=this.h.g}else k=this.g.oa();if(this.o=f==200,BN(this.i,this.u,this.A,this.l,this.R,mt,f),this.o){if(this.T&&!this.K){t:{if(this.g){var De,st=this.g;if((De=st.g?st.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!G(De)){var me=De;break t}}me=null}if(f=me)oo(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Zf(this,f);else{this.o=!1,this.s=3,Et(12),ii(this),Zs(this);break e}}if(this.P){f=!0;let on;for(;!this.J&&this.C<k.length;)if(on=zN(this,k),on==Kf){mt==4&&(this.s=4,Et(14),f=!1),oo(this.i,this.l,null,"[Incomplete Response]");break}else if(on==Ow){this.s=4,Et(15),oo(this.i,this.l,k,"[Invalid Chunk]"),f=!1;break}else oo(this.i,this.l,on,null),Zf(this,on);if(Vw(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),mt!=4||k.length!=0||this.h.h||(this.s=1,Et(16),f=!1),this.o=this.o&&f,!f)oo(this.i,this.l,k,"[Invalid Chunked Response]"),ii(this),Zs(this);else if(0<k.length&&!this.W){this.W=!0;var gt=this.j;gt.g==this&&gt.ba&&!gt.M&&(gt.j.info("Great, no buffering proxy detected. Bytes received: "+k.length),rp(gt),gt.M=!0,Et(11))}}else oo(this.i,this.l,k,null),Zf(this,k);mt==4&&ii(this),this.o&&!this.J&&(mt==4?lE(this.j,this):(this.o=!1,iu(this)))}else aP(this.g),f==400&&0<k.indexOf("Unknown SID")?(this.s=3,Et(12)):(this.s=0,Et(13)),ii(this),Zs(this)}}}catch{}finally{}};function Vw(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function zN(c,d){var f=c.C,g=d.indexOf(`
`,f);return g==-1?Kf:(f=Number(d.substring(f,g)),isNaN(f)?Ow:(g+=1,g+f>d.length?Kf:(d=d.slice(g,g+f),c.C=g+f,d)))}vr.prototype.cancel=function(){this.J=!0,ii(this)};function iu(c){c.S=Date.now()+c.I,Lw(c,c.I)}function Lw(c,d){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Qs(m(c.ba,c),d)}function Yf(c){c.B&&(a.clearTimeout(c.B),c.B=null)}vr.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?($N(this.i,this.A),this.L!=2&&(Ks(),Et(17)),ii(this),this.s=2,Zs(this)):Lw(this,this.S-c)};function Zs(c){c.j.G==0||c.J||lE(c.j,c)}function ii(c){Yf(c);var d=c.M;d&&typeof d.ma=="function"&&d.ma(),c.M=null,Cw(c.U),c.g&&(d=c.g,c.g=null,d.abort(),d.ma())}function Zf(c,d){try{var f=c.j;if(f.G!=0&&(f.g==c||Jf(f.h,c))){if(!c.K&&Jf(f.h,c)&&f.G==3){try{var g=f.Da.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var C=g;if(C[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<c.F)hu(f),lu(f);else break e;np(f),Et(18)}}else f.za=C[1],0<f.za-f.T&&37500>C[2]&&f.F&&f.v==0&&!f.C&&(f.C=Qs(m(f.Za,f),6e3));if(1>=Bw(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else si(f,11)}else if((c.K||f.g==c)&&hu(f),!G(d))for(C=f.Da.g.parse(d),d=0;d<C.length;d++){let me=C[d];if(f.T=me[0],me=me[1],f.G==2)if(me[0]=="c"){f.K=me[1],f.ia=me[2];let gt=me[3];gt!=null&&(f.la=gt,f.j.info("VER="+f.la));let mt=me[4];mt!=null&&(f.Aa=mt,f.j.info("SVER="+f.Aa));let co=me[5];co!=null&&typeof co=="number"&&0<co&&(g=1.5*co,f.L=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;let on=c.g;if(on){let pu=on.g?on.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(pu){var A=g.h;A.g||pu.indexOf("spdy")==-1&&pu.indexOf("quic")==-1&&pu.indexOf("h2")==-1||(A.j=A.l,A.g=new Set,A.h&&(Xf(A,A.h),A.h=null))}if(g.D){let ip=on.g?on.g.getResponseHeader("X-HTTP-Session-Id"):null;ip&&(g.ya=ip,Re(g.I,g.D,ip))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-c.F,f.j.info("Handshake RTT: "+f.R+"ms")),g=f;var k=c;if(g.qa=fE(g,g.J?g.ia:null,g.W),k.K){$w(g.h,k);var De=k,st=g.L;st&&(De.I=st),De.B&&(Yf(De),iu(De)),g.g=k}else cE(g);0<f.i.length&&du(f)}else me[0]!="stop"&&me[0]!="close"||si(f,7);else f.G==3&&(me[0]=="stop"||me[0]=="close"?me[0]=="stop"?si(f,7):tp(f):me[0]!="noop"&&f.l&&f.l.ta(me),f.v=0)}}Ks(4)}catch{}}var qN=class{constructor(c,d){this.g=c,this.map=d}};function jw(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Uw(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Bw(c){return c.h?1:c.g?c.g.size:0}function Jf(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function Xf(c,d){c.g?c.g.add(d):c.h=d}function $w(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}jw.prototype.cancel=function(){if(this.i=Hw(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function Hw(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let f of c.g.values())d=d.concat(f.D);return d}return M(c.i)}function GN(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var d=[],f=c.length,g=0;g<f;g++)d.push(c[g]);return d}d=[],f=0;for(g in c)d[f++]=c[g];return d}function WN(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var d=[];c=c.length;for(var f=0;f<c;f++)d.push(f);return d}d=[],f=0;for(let g in c)d[f++]=g;return d}}}function zw(c,d){if(c.forEach&&typeof c.forEach=="function")c.forEach(d,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,d,void 0);else for(var f=WN(c),g=GN(c),C=g.length,A=0;A<C;A++)d.call(void 0,g[A],f&&f[A],c)}var qw=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function KN(c,d){if(c){c=c.split("&");for(var f=0;f<c.length;f++){var g=c[f].indexOf("="),C=null;if(0<=g){var A=c[f].substring(0,g);C=c[f].substring(g+1)}else A=c[f];d(A,C?decodeURIComponent(C.replace(/\+/g," ")):"")}}}function oi(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof oi){this.h=c.h,ou(this,c.j),this.o=c.o,this.g=c.g,su(this,c.s),this.l=c.l;var d=c.i,f=new ea;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),Gw(this,f),this.m=c.m}else c&&(d=String(c).match(qw))?(this.h=!1,ou(this,d[1]||"",!0),this.o=Js(d[2]||""),this.g=Js(d[3]||"",!0),su(this,d[4]),this.l=Js(d[5]||"",!0),Gw(this,d[6]||"",!0),this.m=Js(d[7]||"")):(this.h=!1,this.i=new ea(null,this.h))}oi.prototype.toString=function(){var c=[],d=this.j;d&&c.push(Xs(d,Ww,!0),":");var f=this.g;return(f||d=="file")&&(c.push("//"),(d=this.o)&&c.push(Xs(d,Ww,!0),"@"),c.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&c.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&c.push("/"),c.push(Xs(f,f.charAt(0)=="/"?ZN:YN,!0))),(f=this.i.toString())&&c.push("?",f),(f=this.m)&&c.push("#",Xs(f,XN)),c.join("")};function qn(c){return new oi(c)}function ou(c,d,f){c.j=f?Js(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function su(c,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);c.s=d}else c.s=null}function Gw(c,d,f){d instanceof ea?(c.i=d,eP(c.i,c.h)):(f||(d=Xs(d,JN)),c.i=new ea(d,c.h))}function Re(c,d,f){c.i.set(d,f)}function au(c){return Re(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Js(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Xs(c,d,f){return typeof c=="string"?(c=encodeURI(c).replace(d,QN),f&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function QN(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Ww=/[#\/\?@]/g,YN=/[#\?:]/g,ZN=/[#\?]/g,JN=/[#\?@]/g,XN=/#/g;function ea(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function _r(c){c.g||(c.g=new Map,c.h=0,c.i&&KN(c.i,function(d,f){c.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}t=ea.prototype,t.add=function(c,d){_r(this),this.i=null,c=so(this,c);var f=this.g.get(c);return f||this.g.set(c,f=[]),f.push(d),this.h+=1,this};function Kw(c,d){_r(c),d=so(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function Qw(c,d){return _r(c),d=so(c,d),c.g.has(d)}t.forEach=function(c,d){_r(this),this.g.forEach(function(f,g){f.forEach(function(C){c.call(d,C,g,this)},this)},this)},t.na=function(){_r(this);let c=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let g=0;g<d.length;g++){let C=c[g];for(let A=0;A<C.length;A++)f.push(d[g])}return f},t.V=function(c){_r(this);let d=[];if(typeof c=="string")Qw(this,c)&&(d=d.concat(this.g.get(so(this,c))));else{c=Array.from(this.g.values());for(let f=0;f<c.length;f++)d=d.concat(c[f])}return d},t.set=function(c,d){return _r(this),this.i=null,c=so(this,c),Qw(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},t.get=function(c,d){return c?(c=this.V(c),0<c.length?String(c[0]):d):d};function Yw(c,d,f){Kw(c,d),0<f.length&&(c.i=null,c.g.set(so(c,d),M(f)),c.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var g=d[f];let A=encodeURIComponent(String(g)),k=this.V(g);for(g=0;g<k.length;g++){var C=A;k[g]!==""&&(C+="="+encodeURIComponent(String(k[g]))),c.push(C)}}return this.i=c.join("&")};function so(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function eP(c,d){d&&!c.j&&(_r(c),c.i=null,c.g.forEach(function(f,g){var C=g.toLowerCase();g!=C&&(Kw(this,g),Yw(this,C,f))},c)),c.j=d}function tP(c,d){let f=new Ys;if(a.Image){let g=new Image;g.onload=y(Ir,f,"TestLoadImage: loaded",!0,d,g),g.onerror=y(Ir,f,"TestLoadImage: error",!1,d,g),g.onabort=y(Ir,f,"TestLoadImage: abort",!1,d,g),g.ontimeout=y(Ir,f,"TestLoadImage: timeout",!1,d,g),a.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=c}else d(!1)}function nP(c,d){let f=new Ys,g=new AbortController,C=setTimeout(()=>{g.abort(),Ir(f,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:g.signal}).then(A=>{clearTimeout(C),A.ok?Ir(f,"TestPingServer: ok",!0,d):Ir(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(C),Ir(f,"TestPingServer: error",!1,d)})}function Ir(c,d,f,g,C){try{C&&(C.onload=null,C.onerror=null,C.onabort=null,C.ontimeout=null),g(f)}catch{}}function rP(){this.g=new jN}function iP(c,d,f){let g=f||"";try{zw(c,function(C,A){let k=C;l(C)&&(k=Hf(C)),d.push(g+A+"="+encodeURIComponent(k))})}catch(C){throw d.push(g+"type="+encodeURIComponent("_badmap")),C}}function ta(c){this.l=c.Ub||null,this.j=c.eb||!1}T(ta,zf),ta.prototype.g=function(){return new cu(this.l,this.j)},ta.prototype.i=function(c){return function(){return c}}({});function cu(c,d){pt.call(this),this.D=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}T(cu,pt),t=cu.prototype,t.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=d,this.readyState=1,ra(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(d.body=c),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,na(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,ra(this)),this.g&&(this.readyState=3,ra(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Zw(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Zw(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?na(this):ra(this),this.readyState==3&&Zw(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,na(this))},t.Qa=function(c){this.g&&(this.response=c,na(this))},t.ga=function(){this.g&&na(this)};function na(c){c.readyState=4,c.l=null,c.j=null,c.v=null,ra(c)}t.setRequestHeader=function(c,d){this.u.append(c,d)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,c.push(f[0]+": "+f[1]),f=d.next();return c.join(`\r
`)};function ra(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(cu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Jw(c){let d="";return Ee(c,function(f,g){d+=g,d+=":",d+=f,d+=`\r
`}),d}function ep(c,d,f){e:{for(g in f){var g=!1;break e}g=!0}g||(f=Jw(f),typeof c=="string"?f!=null&&encodeURIComponent(String(f)):Re(c,d,f))}function ke(c){pt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}T(ke,pt);var oP=/^https?$/i,sP=["POST","PUT"];t=ke.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,d,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Wf.g(),this.v=this.o?Sw(this.o):Sw(Wf),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(A){Xw(this,A);return}if(c=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var C in g)f.set(C,g[C]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let A of g.keys())f.set(A,g.get(A));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(A=>A.toLowerCase()=="content-type"),C=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(sP,d,void 0))||g||C||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[A,k]of f)this.g.setRequestHeader(A,k);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{nE(this),this.u=!0,this.g.send(c),this.u=!1}catch(A){Xw(this,A)}};function Xw(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.m=5,eE(c),uu(c)}function eE(c){c.A||(c.A=!0,wt(c,"complete"),wt(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,wt(this,"complete"),wt(this,"abort"),uu(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),uu(this,!0)),ke.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?tE(this):this.bb())},t.bb=function(){tE(this)};function tE(c){if(c.h&&typeof s<"u"&&(!c.v[1]||Gn(c)!=4||c.Z()!=2)){if(c.u&&Gn(c)==4)bw(c.Ea,0,c);else if(wt(c,"readystatechange"),Gn(c)==4){c.h=!1;try{let k=c.Z();e:switch(k){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var g;if(g=k===0){var C=String(c.D).match(qw)[1]||null;!C&&a.self&&a.self.location&&(C=a.self.location.protocol.slice(0,-1)),g=!oP.test(C?C.toLowerCase():"")}f=g}if(f)wt(c,"complete"),wt(c,"success");else{c.m=6;try{var A=2<Gn(c)?c.g.statusText:""}catch{A=""}c.l=A+" ["+c.Z()+"]",eE(c)}}finally{uu(c)}}}}function uu(c,d){if(c.g){nE(c);let f=c.g,g=c.v[0]?()=>{}:null;c.g=null,c.v=null,d||wt(c,"ready");try{f.onreadystatechange=g}catch{}}}function nE(c){c.I&&(a.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function Gn(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<Gn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),LN(d)}};function rE(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function aP(c){let d={};c=(c.g&&2<=Gn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<c.length;g++){if(G(c[g]))continue;var f=D(c[g]);let C=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let A=d[C]||[];d[C]=A,A.push(f)}b(d,function(g){return g.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ia(c,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[c]||d}function iE(c){this.Aa=0,this.i=[],this.j=new Ys,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ia("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ia("baseRetryDelayMs",5e3,c),this.cb=ia("retryDelaySeedMs",1e4,c),this.Wa=ia("forwardChannelMaxRetries",2,c),this.wa=ia("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new jw(c&&c.concurrentRequestLimit),this.Da=new rP,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=iE.prototype,t.la=8,t.G=1,t.connect=function(c,d,f,g){Et(0),this.W=c,this.H=d||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.I=fE(this,null,this.W),du(this)};function tp(c){if(oE(c),c.G==3){var d=c.U++,f=qn(c.I);if(Re(f,"SID",c.K),Re(f,"RID",d),Re(f,"TYPE","terminate"),oa(c,f),d=new vr(c,c.j,d),d.L=2,d.v=au(qn(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=pE(d.j,null),d.g.ea(d.v)),d.F=Date.now(),iu(d)}hE(c)}function lu(c){c.g&&(rp(c),c.g.cancel(),c.g=null)}function oE(c){lu(c),c.u&&(a.clearTimeout(c.u),c.u=null),hu(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function du(c){if(!Uw(c.h)&&!c.s){c.s=!0;var d=c.Ga;$s||yw(),Hs||($s(),Hs=!0),kf.add(d,c),c.B=0}}function cP(c,d){return Bw(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=d.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Qs(m(c.Ga,c,d),dE(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let C=new vr(this,this.j,c),A=this.o;if(this.S&&(A?(A=_(A),E(A,this.S)):A=this.S),this.m!==null||this.O||(C.H=A,A=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=aE(this,C,d),f=qn(this.I),Re(f,"RID",c),Re(f,"CVER",22),this.D&&Re(f,"X-HTTP-Session-Id",this.D),oa(this,f),A&&(this.O?d="headers="+encodeURIComponent(String(Jw(A)))+"&"+d:this.m&&ep(f,this.m,A)),Xf(this.h,C),this.Ua&&Re(f,"TYPE","init"),this.P?(Re(f,"$req",d),Re(f,"SID","null"),C.T=!0,Qf(C,f,null)):Qf(C,f,d),this.G=2}}else this.G==3&&(c?sE(this,c):this.i.length==0||Uw(this.h)||sE(this))};function sE(c,d){var f;d?f=d.l:f=c.U++;let g=qn(c.I);Re(g,"SID",c.K),Re(g,"RID",f),Re(g,"AID",c.T),oa(c,g),c.m&&c.o&&ep(g,c.m,c.o),f=new vr(c,c.j,f,c.B+1),c.m===null&&(f.H=c.o),d&&(c.i=d.D.concat(c.i)),d=aE(c,f,1e3),f.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Xf(c.h,f),Qf(f,g,d)}function oa(c,d){c.H&&Ee(c.H,function(f,g){Re(d,g,f)}),c.l&&zw({},function(f,g){Re(d,g,f)})}function aE(c,d,f){f=Math.min(c.i.length,f);var g=c.l?m(c.l.Na,c.l,c):null;e:{var C=c.i;let A=-1;for(;;){let k=["count="+f];A==-1?0<f?(A=C[0].g,k.push("ofs="+A)):A=0:k.push("ofs="+A);let De=!0;for(let st=0;st<f;st++){let me=C[st].g,gt=C[st].map;if(me-=A,0>me)A=Math.max(0,C[st].g-100),De=!1;else try{iP(gt,k,"req"+me+"_")}catch{g&&g(gt)}}if(De){g=k.join("&");break e}}}return c=c.i.splice(0,f),d.D=c,g}function cE(c){if(!c.g&&!c.u){c.Y=1;var d=c.Fa;$s||yw(),Hs||($s(),Hs=!0),kf.add(d,c),c.v=0}}function np(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Qs(m(c.Fa,c),dE(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,uE(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Qs(m(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Et(10),lu(this),uE(this))};function rp(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function uE(c){c.g=new vr(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var d=qn(c.qa);Re(d,"RID","rpc"),Re(d,"SID",c.K),Re(d,"AID",c.T),Re(d,"CI",c.F?"0":"1"),!c.F&&c.ja&&Re(d,"TO",c.ja),Re(d,"TYPE","xmlhttp"),oa(c,d),c.m&&c.o&&ep(d,c.m,c.o),c.L&&(c.g.I=c.L);var f=c.g;c=c.ia,f.L=1,f.v=au(qn(d)),f.m=null,f.P=!0,Fw(f,c)}t.Za=function(){this.C!=null&&(this.C=null,lu(this),np(this),Et(19))};function hu(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function lE(c,d){var f=null;if(c.g==d){hu(c),rp(c),c.g=null;var g=2}else if(Jf(c.h,d))f=d.D,$w(c.h,d),g=1;else return;if(c.G!=0){if(d.o)if(g==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var C=c.B;g=tu(),wt(g,new Pw(g,f)),du(c)}else cE(c);else if(C=d.s,C==3||C==0&&0<d.X||!(g==1&&cP(c,d)||g==2&&np(c)))switch(f&&0<f.length&&(d=c.h,d.i=d.i.concat(f)),C){case 1:si(c,5);break;case 4:si(c,10);break;case 3:si(c,6);break;default:si(c,2)}}}function dE(c,d){let f=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(f*=2),f*d}function si(c,d){if(c.j.info("Error code "+d),d==2){var f=m(c.fb,c),g=c.Xa;let C=!g;g=new oi(g||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||ou(g,"https"),au(g),C?tP(g.toString(),f):nP(g.toString(),f)}else Et(2);c.G=0,c.l&&c.l.sa(d),hE(c),oE(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),Et(2)):(this.j.info("Failed to ping google.com"),Et(1))};function hE(c){if(c.G=0,c.ka=[],c.l){let d=Hw(c.h);(d.length!=0||c.i.length!=0)&&(R(c.ka,d),R(c.ka,c.i),c.h.i.length=0,M(c.i),c.i.length=0),c.l.ra()}}function fE(c,d,f){var g=f instanceof oi?qn(f):new oi(f);if(g.g!="")d&&(g.g=d+"."+g.g),su(g,g.s);else{var C=a.location;g=C.protocol,d=d?d+"."+C.hostname:C.hostname,C=+C.port;var A=new oi(null);g&&ou(A,g),d&&(A.g=d),C&&su(A,C),f&&(A.l=f),g=A}return f=c.D,d=c.ya,f&&d&&Re(g,f,d),Re(g,"VER",c.la),oa(c,g),g}function pE(c,d,f){if(d&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Ca&&!c.pa?new ke(new ta({eb:f})):new ke(c.pa),d.Ha(c.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function gE(){}t=gE.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function fu(){}fu.prototype.g=function(c,d){return new Ft(c,d)};function Ft(c,d){pt.call(this),this.g=new iE(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(c?c["X-WebChannel-Client-Profile"]=d.va:c={"X-WebChannel-Client-Profile":d.va}),this.g.S=c,(c=d&&d.Sb)&&!G(c)&&(this.g.m=c),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!G(d)&&(this.g.D=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new ao(this)}T(Ft,pt),Ft.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ft.prototype.close=function(){tp(this.g)},Ft.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var f={};f.__data__=c,c=f}else this.u&&(f={},f.__data__=Hf(c),c=f);d.i.push(new qN(d.Ya++,c)),d.G==3&&du(d)},Ft.prototype.N=function(){this.g.l=null,delete this.j,tp(this.g),delete this.g,Ft.aa.N.call(this)};function mE(c){qf.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let f in d){c=f;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}T(mE,qf);function yE(){Gf.call(this),this.status=1}T(yE,Gf);function ao(c){this.g=c}T(ao,gE),ao.prototype.ua=function(){wt(this.g,"a")},ao.prototype.ta=function(c){wt(this.g,new mE(c))},ao.prototype.sa=function(c){wt(this.g,new yE)},ao.prototype.ra=function(){wt(this.g,"b")},fu.prototype.createWebChannel=fu.prototype.g,Ft.prototype.send=Ft.prototype.o,Ft.prototype.open=Ft.prototype.m,Ft.prototype.close=Ft.prototype.close,Ov=dr.createWebChannelTransport=function(){return new fu},kv=dr.getStatEventTarget=function(){return tu()},xv=dr.Event=ri,gh=dr.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},nu.NO_ERROR=0,nu.TIMEOUT=8,nu.HTTP_ERROR=6,Dc=dr.ErrorCode=nu,xw.COMPLETE="complete",Pv=dr.EventType=xw,Aw.EventType=Ws,Ws.OPEN="a",Ws.CLOSE="b",Ws.ERROR="c",Ws.MESSAGE="d",pt.prototype.listen=pt.prototype.K,ds=dr.WebChannel=Aw,A$=dr.FetchXmlHttpFactory=ta,ke.prototype.listenOnce=ke.prototype.L,ke.prototype.getLastError=ke.prototype.Ka,ke.prototype.getLastErrorCode=ke.prototype.Ba,ke.prototype.getStatus=ke.prototype.Z,ke.prototype.getResponseJson=ke.prototype.Oa,ke.prototype.getResponseText=ke.prototype.oa,ke.prototype.send=ke.prototype.ea,ke.prototype.setWithCredentials=ke.prototype.Ha,Nv=dr.XhrIo=ke}).apply(typeof ph<"u"?ph:typeof self<"u"?self:typeof window<"u"?window:{});var QS="@firebase/firestore",YS="4.8.0";var it=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};it.UNAUTHENTICATED=new it(null),it.GOOGLE_CREDENTIALS=new it("google-credentials-uid"),it.FIRST_PARTY=new it("first-party-uid"),it.MOCK_USER=new it("mock-user");var xs="11.10.0";var Ki=new Xt("@firebase/firestore");function hs(){return Ki.logLevel}function F(t,...e){if(Ki.logLevel<=ue.DEBUG){let n=e.map(wI);Ki.debug(`Firestore (${xs}): ${t}`,...n)}}function hr(t,...e){if(Ki.logLevel<=ue.ERROR){let n=e.map(wI);Ki.error(`Firestore (${xs}): ${t}`,...n)}}function Yr(t,...e){if(Ki.logLevel<=ue.WARN){let n=e.map(wI);Ki.warn(`Firestore (${xs}): ${t}`,...n)}}function wI(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function z(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,LA(t,r,n)}function LA(t,e,n){let r=`FIRESTORE (${xs}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw hr(r),new Error(r)}function we(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||LA(e,i,r)}function Y(t,e){return t}var N={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},j=class extends lt{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Fn=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var Eh=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Uv=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(it.UNAUTHENTICATED))}shutdown(){}},Bv=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},$v=class{constructor(e){this.t=e,this.currentUser=it.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){we(this.o===void 0,42304);let r=this.i,i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve(),o=new Fn;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Fn,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(()=>v(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},a=u=>{F("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(F("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Fn)}},0),s()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(F("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(we(typeof r.accessToken=="string",31837,{l:r}),new Eh(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return we(e===null||typeof e=="string",2055,{h:e}),new it(e)}},Hv=class{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=it.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},zv=class{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new Hv(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(it.FIRST_PARTY))}shutdown(){}invalidateToken(){}},bh=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},qv=class{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,tn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){we(this.o===void 0,3512);let r=o=>{o.error!=null&&F("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,F("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{F("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):F("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new bh(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(we(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new bh(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function R$(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}function jA(){return new TextEncoder}var Mc=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=R$(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%62))}return r}};function oe(t,e){return t<e?-1:t>e?1:0}function Gv(t,e){let n=0;for(;n<t.length&&n<e.length;){let r=t.codePointAt(n),i=e.codePointAt(n);if(r!==i){if(r<128&&i<128)return oe(r,i);{let o=jA(),s=M$(o.encode(ZS(t,n)),o.encode(ZS(e,n)));return s!==0?s:oe(r,i)}}n+=r>65535?2:1}return oe(t.length,e.length)}function ZS(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function M$(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return oe(t[n],e[n]);return oe(t.length,e.length)}function Is(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}var JS="__name__",Dh=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&z(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&z(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let o=t.compareSegments(e.get(i),n.get(i));if(o!==0)return o}return oe(e.length,n.length)}static compareSegments(e,n){let r=t.isNumericId(e),i=t.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?t.extractNumericId(e).compare(t.extractNumericId(n)):Gv(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return lr.fromString(e.substring(4,e.length-2))}},Ue=class t extends Dh{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new j(N.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},N$=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Ht=class t extends Dh{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return N$.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===JS}static keyField(){return new t([JS])}static fromServerFormat(e){let n=[],r="",i=0,o=()=>{if(r.length===0)throw new j(N.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new j(N.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new j(N.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new j(N.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var q=class t{constructor(e){this.path=e}static fromPath(e){return new t(Ue.fromString(e))}static fromName(e){return new t(Ue.fromString(e).popFirst(5))}static empty(){return new t(Ue.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ue.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ue.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new Ue(e.slice()))}};function P$(t,e,n){if(!n)throw new j(N.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function x$(t,e,n,r){if(e===!0&&r===!0)throw new j(N.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function XS(t){if(!q.isDocumentKey(t))throw new j(N.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function UA(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function EI(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":z(12329,{type:typeof t})}function Vn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new j(N.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=EI(t);throw new j(N.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function Ge(t,e){let n={typeString:t};return e&&(n.value=e),n}function $c(t,e){if(!UA(t))throw new j(N.INVALID_ARGUMENT,"JSON must be an object");let n;for(let r in e)if(e[r]){let i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}let s=t[r];if(i&&typeof s!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){n=`Expected '${r}' field to equal '${o.value}'`;break}}if(n)throw new j(N.INVALID_ARGUMENT,n);return!0}var eA=-62135596800,tA=1e6,We=class t{static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*tA);return new t(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new j(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new j(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<eA)throw new j(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new j(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/tA}_compareTo(e){return this.seconds===e.seconds?oe(this.nanoseconds,e.nanoseconds):oe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:t._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if($c(e,t._jsonSchema))return new t(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-eA;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};We._jsonSchemaVersion="firestore/timestamp/1.0",We._jsonSchema={type:Ge("string",We._jsonSchemaVersion),seconds:Ge("number"),nanoseconds:Ge("number")};var J=class t{static fromTimestamp(e){return new t(e)}static min(){return new t(new We(0,0))}static max(){return new t(new We(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Nc=-1,Wv=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};Wv.UNKNOWN_ID=-1;function k$(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=J.fromTimestamp(r===1e9?new We(n+1,0):new We(n,r));return new Qi(i,q.empty(),e)}function O$(t){return new Qi(t.readTime,t.key,Nc)}var Qi=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(J.min(),q.empty(),Nc)}static max(){return new t(J.max(),q.empty(),Nc)}};function F$(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=q.comparator(t.documentKey,e.documentKey),n!==0?n:oe(t.largestBatchId,e.largestBatchId))}var V$="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Kv=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function ks(t){return v(this,null,function*(){if(t.code!==N.FAILED_PRECONDITION||t.message!==V$)throw t;F("LocalStore","Unexpectedly lost primary lease")})}var P=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&z(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&n()},u=>r(u))}),s=!0,o===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let u=0;u<o;u++){let l=u;n(e[l]).next(h=>{s[l]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,n){return new t((r,i)=>{let o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}};function L$(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Os(t){return t.name==="IndexedDbTransactionError"}var bI=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this._e(i),this.ae=i=>r.writeSequenceNumber(i))}_e(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.ae&&this.ae(n),n}}t.ue=-1;return t})(),DI=-1;function of(t){return t==null}function Pc(t){return t===0&&1/t==-1/0}function j$(t){return typeof t=="number"&&Number.isInteger(t)&&!Pc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var BA="";function U$(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=nA(e)),e=B$(t.get(n),e);return nA(e)}function B$(t,e){let n=e,r=t.length;for(let i=0;i<r;i++){let o=t.charAt(i);switch(o){case"\0":n+="";break;case BA:n+="";break;default:n+=o}}return n}function nA(t){return t+BA+""}var $$="remoteDocuments",$A="owner";var HA="mutationQueues";var zA="mutations";var qA="documentMutations",H$="remoteDocumentsV14";var GA="remoteDocumentGlobal";var WA="targets";var KA="targetDocuments";var QA="targetGlobal",YA="collectionParents";var ZA="clientMetadata";var JA="bundles";var XA="namedQueries";var z$="indexConfiguration";var q$="indexState";var G$="indexEntries";var eR="documentOverlays";var W$="globals";var K$=[HA,zA,qA,$$,WA,$A,QA,KA,ZA,GA,YA,JA,XA],MJ=[...K$,eR],Q$=[HA,zA,qA,H$,WA,$A,QA,KA,ZA,GA,YA,JA,XA,eR],Y$=Q$,Z$=[...Y$,z$,q$,G$];var NJ=[...Z$,W$];function rA(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ti(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function tR(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Ve=class t{constructor(e,n){this.comparator=e,this.root=n||Ln.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ln.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ln.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ms(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ms(this.root,e,this.comparator,!1)}getReverseIterator(){return new ms(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ms(this.root,e,this.comparator,!0)}},ms=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Ln=class t{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=o??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new t(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw z(43730,{key:this.key,value:this.value});if(this.right.isRed())throw z(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw z(27949);return e+(this.isRed()?0:1)}};Ln.EMPTY=null,Ln.RED=!0,Ln.BLACK=!1;Ln.EMPTY=new class{constructor(){this.size=0}get key(){throw z(57766)}get value(){throw z(16141)}get color(){throw z(16727)}get left(){throw z(29726)}get right(){throw z(36894)}copy(e,n,r,i,o){return this}insert(e,n,r){return new Ln(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var ot=class t{constructor(e){this.comparator=e,this.data=new Ve(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Th(this.data.getIterator())}getIteratorFrom(e){return new Th(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},Th=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var rn=class t{constructor(e){this.fields=e,e.sort(Ht.comparator)}static empty(){return new t([])}unionWith(e){let n=new ot(Ht.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Is(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var Ch=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var _t=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Ch("Invalid base64 string: "+o):o}}(e);return new t(n)}static fromUint8Array(e){let n=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return oe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};_t.EMPTY_BYTE_STRING=new _t("");var J$=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function fr(t){if(we(!!t,39018),typeof t=="string"){let e=0,n=J$.exec(t);if(we(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Pe(t.seconds),nanos:Pe(t.nanos)}}function Pe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function pr(t){return typeof t=="string"?_t.fromBase64String(t):_t.fromUint8Array(t)}var nR="server_timestamp",rR="__type__",iR="__previous_value__",oR="__local_write_time__";function TI(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[rR])===null||n===void 0?void 0:n.stringValue)===nR}function sf(t){let e=t.mapValue.fields[iR];return TI(e)?sf(e):e}function xc(t){let e=fr(t.mapValue.fields[oR].timestampValue);return new We(e.seconds,e.nanos)}var Qv=class{constructor(e,n,r,i,o,s,a,u,l,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l,this.isUsingEmulator=h}},Sh="(default)",Ah=class t{constructor(e,n){this.projectId=e,this.database=n||Sh}static empty(){return new t("","")}get isDefaultDatabase(){return this.database===Sh}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var CI="__type__",sR="__max__",mh={mapValue:{fields:{__type__:{stringValue:sR}}}},SI="__vector__",ws="value";function Zr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?TI(t)?4:cR(t)?9007199254740991:aR(t)?10:11:z(28295,{value:t})}function Bn(t,e){if(t===e)return!0;let n=Zr(t);if(n!==Zr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return xc(t).isEqual(xc(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=fr(i.timestampValue),a=fr(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,o){return pr(i.bytesValue).isEqual(pr(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return Pe(i.geoPointValue.latitude)===Pe(o.geoPointValue.latitude)&&Pe(i.geoPointValue.longitude)===Pe(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Pe(i.integerValue)===Pe(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=Pe(i.doubleValue),a=Pe(o.doubleValue);return s===a?Pc(s)===Pc(a):isNaN(s)&&isNaN(a)}return!1}(t,e);case 9:return Is(t.arrayValue.values||[],e.arrayValue.values||[],Bn);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(rA(s)!==rA(a))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(a[u]===void 0||!Bn(s[u],a[u])))return!1;return!0}(t,e);default:return z(52216,{left:t})}}function kc(t,e){return(t.values||[]).find(n=>Bn(n,e))!==void 0}function Es(t,e){if(t===e)return 0;let n=Zr(t),r=Zr(e);if(n!==r)return oe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return oe(t.booleanValue,e.booleanValue);case 2:return function(o,s){let a=Pe(o.integerValue||o.doubleValue),u=Pe(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(t,e);case 3:return iA(t.timestampValue,e.timestampValue);case 4:return iA(xc(t),xc(e));case 5:return Gv(t.stringValue,e.stringValue);case 6:return function(o,s){let a=pr(o),u=pr(s);return a.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),u=s.split("/");for(let l=0;l<a.length&&l<u.length;l++){let h=oe(a[l],u[l]);if(h!==0)return h}return oe(a.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,s){let a=oe(Pe(o.latitude),Pe(s.latitude));return a!==0?a:oe(Pe(o.longitude),Pe(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return oA(t.arrayValue,e.arrayValue);case 10:return function(o,s){var a,u,l,h;let p=o.fields||{},m=s.fields||{},y=(a=p[ws])===null||a===void 0?void 0:a.arrayValue,T=(u=m[ws])===null||u===void 0?void 0:u.arrayValue,M=oe(((l=y?.values)===null||l===void 0?void 0:l.length)||0,((h=T?.values)===null||h===void 0?void 0:h.length)||0);return M!==0?M:oA(y,T)}(t.mapValue,e.mapValue);case 11:return function(o,s){if(o===mh.mapValue&&s===mh.mapValue)return 0;if(o===mh.mapValue)return 1;if(s===mh.mapValue)return-1;let a=o.fields||{},u=Object.keys(a),l=s.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){let m=Gv(u[p],h[p]);if(m!==0)return m;let y=Es(a[u[p]],l[h[p]]);if(y!==0)return y}return oe(u.length,h.length)}(t.mapValue,e.mapValue);default:throw z(23264,{le:n})}}function iA(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return oe(t,e);let n=fr(t),r=fr(e),i=oe(n.seconds,r.seconds);return i!==0?i:oe(n.nanos,r.nanos)}function oA(t,e){let n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){let o=Es(n[i],r[i]);if(o)return o}return oe(n.length,r.length)}function bs(t){return Yv(t)}function Yv(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let r=fr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return pr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return q.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(let o of n.values||[])i?i=!1:r+=",",r+=Yv(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){let r=Object.keys(n.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${Yv(n.fields[s])}`;return i+"}"}(t.mapValue):z(61005,{value:t})}function _h(t){switch(Zr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=sf(t);return e?16+_h(e):16;case 5:return 2*t.stringValue.length;case 6:return pr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,o)=>i+_h(o),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return ti(r.fields,(o,s)=>{i+=o.length+_h(s)}),i}(t.mapValue);default:throw z(13486,{value:t})}}function Zv(t){return!!t&&"integerValue"in t}function AI(t){return!!t&&"arrayValue"in t}function sA(t){return!!t&&"nullValue"in t}function aA(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ih(t){return!!t&&"mapValue"in t}function aR(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[CI])===null||n===void 0?void 0:n.stringValue)===SI}function Cc(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return ti(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Cc(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Cc(t.arrayValue.values[n]);return e}return Object.assign({},t)}function cR(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===sR}var xJ={mapValue:{fields:{[CI]:{stringValue:SI},[ws]:{arrayValue:{}}}}};var $t=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Ih(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Cc(n)}setAll(e){let n=Ht.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!n.isImmediateParentOf(a)){let u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}s?r[a.lastSegment()]=Cc(s):i.push(a.lastSegment())});let o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){let n=this.field(e.popLast());Ih(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Bn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Ih(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){ti(n,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new t(Cc(this.value))}};function uR(t){let e=[];return ti(t.fields,(n,r)=>{let i=new Ht([n]);if(Ih(r)){let o=uR(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new rn(e)}var yn=class t{constructor(e,n,r,i,o,s,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new t(e,0,J.min(),J.min(),J.min(),$t.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,J.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,J.min(),J.min(),$t.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,J.min(),J.min(),$t.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(J.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=$t.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=$t.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=J.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Ds=class{constructor(e,n){this.position=e,this.inclusive=n}};function cA(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let o=e[i],s=t.position[i];if(o.field.isKeyField()?r=q.comparator(q.fromName(s.referenceValue),n.key):r=Es(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function uA(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Bn(t.position[n],e.position[n]))return!1;return!0}var Ts=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function X$(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var Rh=class{},Xe=class t extends Rh{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Xv(e,n,r):n==="array-contains"?new n_(e,r):n==="in"?new r_(e,r):n==="not-in"?new i_(e,r):n==="array-contains-any"?new o_(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new e_(e,r):new t_(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Es(n,this.value)):n!==null&&Zr(this.value)===Zr(n)&&this.matchesComparison(Es(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return z(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},$n=class t extends Rh{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new t(e,n)}matches(e){return lR(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}};function lR(t){return t.op==="and"}function dR(t){return eH(t)&&lR(t)}function eH(t){for(let e of t.filters)if(e instanceof $n)return!1;return!0}function Jv(t){if(t instanceof Xe)return t.field.canonicalString()+t.op.toString()+bs(t.value);if(dR(t))return t.filters.map(e=>Jv(e)).join(",");{let e=t.filters.map(n=>Jv(n)).join(",");return`${t.op}(${e})`}}function hR(t,e){return t instanceof Xe?function(r,i){return i instanceof Xe&&r.op===i.op&&r.field.isEqual(i.field)&&Bn(r.value,i.value)}(t,e):t instanceof $n?function(r,i){return i instanceof $n&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&hR(s,i.filters[a]),!0):!1}(t,e):void z(19439)}function fR(t){return t instanceof Xe?function(n){return`${n.field.canonicalString()} ${n.op} ${bs(n.value)}`}(t):t instanceof $n?function(n){return n.op.toString()+" {"+n.getFilters().map(fR).join(" ,")+"}"}(t):"Filter"}var Xv=class extends Xe{constructor(e,n,r){super(e,n,r),this.key=q.fromName(r.referenceValue)}matches(e){let n=q.comparator(e.key,this.key);return this.matchesComparison(n)}},e_=class extends Xe{constructor(e,n){super(e,"in",n),this.keys=pR("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},t_=class extends Xe{constructor(e,n){super(e,"not-in",n),this.keys=pR("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function pR(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>q.fromName(r.referenceValue))}var n_=class extends Xe{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return AI(n)&&kc(n.arrayValue,this.value)}},r_=class extends Xe{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&kc(this.value.arrayValue,n)}},i_=class extends Xe{constructor(e,n){super(e,"not-in",n)}matches(e){if(kc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!kc(this.value.arrayValue,n)}},o_=class extends Xe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!AI(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>kc(this.value.arrayValue,r))}};var s_=class{constructor(e,n=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.Pe=null}};function lA(t,e=null,n=[],r=[],i=null,o=null,s=null){return new s_(t,e,n,r,i,o,s)}function RI(t){let e=Y(t);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Jv(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),of(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>bs(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>bs(r)).join(",")),e.Pe=n}return e.Pe}function MI(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!X$(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!hR(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!uA(t.startAt,e.startAt)&&uA(t.endAt,e.endAt)}function a_(t){return q.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var Cs=class{constructor(e,n=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}};function tH(t,e,n,r,i,o,s,a){return new Cs(t,e,n,r,i,o,s,a)}function af(t){return new Cs(t)}function dA(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function nH(t){return t.collectionGroup!==null}function Sc(t){let e=Y(t);if(e.Te===null){e.Te=[];let n=new Set;for(let o of e.explicitOrderBy)e.Te.push(o),n.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new ot(Ht.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.Te.push(new Ts(o,r))}),n.has(Ht.keyField().canonicalString())||e.Te.push(new Ts(Ht.keyField(),r))}return e.Te}function jn(t){let e=Y(t);return e.Ie||(e.Ie=rH(e,Sc(t))),e.Ie}function rH(t,e){if(t.limitType==="F")return lA(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new Ts(i.field,o)});let n=t.endAt?new Ds(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Ds(t.startAt.position,t.startAt.inclusive):null;return lA(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function c_(t,e,n){return new Cs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function cf(t,e){return MI(jn(t),jn(e))&&t.limitType===e.limitType}function gR(t){return`${RI(jn(t))}|lt:${t.limitType}`}function fs(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>fR(i)).join(", ")}]`),of(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>bs(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>bs(i)).join(",")),`Target(${r})`}(jn(t))}; limitType=${t.limitType})`}function uf(t,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):q.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,i){for(let o of Sc(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(s,a,u){let l=cA(s,a,u);return s.inclusive?l<=0:l<0}(r.startAt,Sc(r),i)||r.endAt&&!function(s,a,u){let l=cA(s,a,u);return s.inclusive?l>=0:l>0}(r.endAt,Sc(r),i))}(t,e)}function iH(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function mR(t){return(e,n)=>{let r=!1;for(let i of Sc(t)){let o=oH(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function oH(t,e,n){let r=t.field.isKeyField()?q.comparator(e.key,n.key):function(o,s,a){let u=s.data.field(o),l=a.data.field(o);return u!==null&&l!==null?Es(u,l):z(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return z(19790,{direction:t.dir})}}var gr=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ti(this.inner,(n,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return tR(this.inner)}size(){return this.innerSize}};var sH=new Ve(q.comparator);function mr(){return sH}var yR=new Ve(q.comparator);function Tc(...t){let e=yR;for(let n of t)e=e.insert(n.key,n);return e}function vR(t){let e=yR;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function zi(){return Ac()}function _R(){return Ac()}function Ac(){return new gr(t=>t.toString(),(t,e)=>t.isEqual(e))}var aH=new Ve(q.comparator),cH=new ot(q.comparator);function he(...t){let e=cH;for(let n of t)e=e.add(n);return e}var uH=new ot(oe);function lH(){return uH}function NI(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Pc(e)?"-0":e}}function IR(t){return{integerValue:""+t}}function dH(t,e){return j$(e)?IR(e):NI(t,e)}var Ss=class{constructor(){this._=void 0}};function hH(t,e,n){return t instanceof As?function(i,o){let s={fields:{[rR]:{stringValue:nR},[oR]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&TI(o)&&(o=sf(o)),o&&(s.fields[iR]=o),{mapValue:s}}(n,e):t instanceof Yi?ER(t,e):t instanceof Zi?bR(t,e):function(i,o){let s=wR(i,o),a=hA(s)+hA(i.Ee);return Zv(s)&&Zv(i.Ee)?IR(a):NI(i.serializer,a)}(t,e)}function fH(t,e,n){return t instanceof Yi?ER(t,e):t instanceof Zi?bR(t,e):n}function wR(t,e){return t instanceof Rs?function(r){return Zv(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var As=class extends Ss{},Yi=class extends Ss{constructor(e){super(),this.elements=e}};function ER(t,e){let n=DR(e);for(let r of t.elements)n.some(i=>Bn(i,r))||n.push(r);return{arrayValue:{values:n}}}var Zi=class extends Ss{constructor(e){super(),this.elements=e}};function bR(t,e){let n=DR(e);for(let r of t.elements)n=n.filter(i=>!Bn(i,r));return{arrayValue:{values:n}}}var Rs=class extends Ss{constructor(e,n){super(),this.serializer=e,this.Ee=n}};function hA(t){return Pe(t.integerValue||t.doubleValue)}function DR(t){return AI(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function pH(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Yi&&i instanceof Yi||r instanceof Zi&&i instanceof Zi?Is(r.elements,i.elements,Bn):r instanceof Rs&&i instanceof Rs?Bn(r.Ee,i.Ee):r instanceof As&&i instanceof As}(t.transform,e.transform)}var u_=class{constructor(e,n){this.version=e,this.transformResults=n}},Gr=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function wh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var Ms=class{};function TR(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Mh(t.key,Gr.none()):new Ji(t.key,t.data,Gr.none());{let n=t.data,r=$t.empty(),i=new ot(Ht.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Hn(t.key,r,new rn(i.toArray()),Gr.none())}}function gH(t,e,n){t instanceof Ji?function(i,o,s){let a=i.value.clone(),u=pA(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Hn?function(i,o,s){if(!wh(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=pA(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(CR(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(t,e,n):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function Rc(t,e,n,r){return t instanceof Ji?function(o,s,a,u){if(!wh(o.precondition,s))return a;let l=o.value.clone(),h=gA(o.fieldTransforms,u,s);return l.setAll(h),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(t,e,n,r):t instanceof Hn?function(o,s,a,u){if(!wh(o.precondition,s))return a;let l=gA(o.fieldTransforms,u,s),h=s.data;return h.setAll(CR(o)),h.setAll(l),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(o,s,a){return wh(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(t,e,n)}function mH(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),o=wR(r.transform,i||null);o!=null&&(n===null&&(n=$t.empty()),n.set(r.field,o))}return n||null}function fA(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Is(r,i,(o,s)=>pH(o,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var Ji=class extends Ms{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Hn=class extends Ms{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function CR(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function pA(t,e,n){let r=new Map;we(t.length===n.length,32656,{Ae:n.length,Re:t.length});for(let i=0;i<n.length;i++){let o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,fH(s,a,n[i]))}return r}function gA(t,e,n){let r=new Map;for(let i of t){let o=i.transform,s=n.data.field(i.field);r.set(i.field,hH(o,s,e))}return r}var Mh=class extends Ms{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},l_=class extends Ms{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var d_=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&gH(o,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=Rc(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=Rc(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=_R();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=n.has(i.key)?null:a;let u=TR(s,a);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(J.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),he())}isEqual(e){return this.batchId===e.batchId&&Is(this.mutations,e.mutations,(n,r)=>fA(n,r))&&Is(this.baseMutations,e.baseMutations,(n,r)=>fA(n,r))}},h_=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){we(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=function(){return aH}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)}};var f_=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var p_=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var ze,ge;function yH(t){switch(t){case N.OK:return z(64938);case N.CANCELLED:case N.UNKNOWN:case N.DEADLINE_EXCEEDED:case N.RESOURCE_EXHAUSTED:case N.INTERNAL:case N.UNAVAILABLE:case N.UNAUTHENTICATED:return!1;case N.INVALID_ARGUMENT:case N.NOT_FOUND:case N.ALREADY_EXISTS:case N.PERMISSION_DENIED:case N.FAILED_PRECONDITION:case N.ABORTED:case N.OUT_OF_RANGE:case N.UNIMPLEMENTED:case N.DATA_LOSS:return!0;default:return z(15467,{code:t})}}function SR(t){if(t===void 0)return hr("GRPC error has no .code"),N.UNKNOWN;switch(t){case ze.OK:return N.OK;case ze.CANCELLED:return N.CANCELLED;case ze.UNKNOWN:return N.UNKNOWN;case ze.DEADLINE_EXCEEDED:return N.DEADLINE_EXCEEDED;case ze.RESOURCE_EXHAUSTED:return N.RESOURCE_EXHAUSTED;case ze.INTERNAL:return N.INTERNAL;case ze.UNAVAILABLE:return N.UNAVAILABLE;case ze.UNAUTHENTICATED:return N.UNAUTHENTICATED;case ze.INVALID_ARGUMENT:return N.INVALID_ARGUMENT;case ze.NOT_FOUND:return N.NOT_FOUND;case ze.ALREADY_EXISTS:return N.ALREADY_EXISTS;case ze.PERMISSION_DENIED:return N.PERMISSION_DENIED;case ze.FAILED_PRECONDITION:return N.FAILED_PRECONDITION;case ze.ABORTED:return N.ABORTED;case ze.OUT_OF_RANGE:return N.OUT_OF_RANGE;case ze.UNIMPLEMENTED:return N.UNIMPLEMENTED;case ze.DATA_LOSS:return N.DATA_LOSS;default:return z(39323,{code:t})}}(ge=ze||(ze={}))[ge.OK=0]="OK",ge[ge.CANCELLED=1]="CANCELLED",ge[ge.UNKNOWN=2]="UNKNOWN",ge[ge.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ge[ge.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ge[ge.NOT_FOUND=5]="NOT_FOUND",ge[ge.ALREADY_EXISTS=6]="ALREADY_EXISTS",ge[ge.PERMISSION_DENIED=7]="PERMISSION_DENIED",ge[ge.UNAUTHENTICATED=16]="UNAUTHENTICATED",ge[ge.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ge[ge.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ge[ge.ABORTED=10]="ABORTED",ge[ge.OUT_OF_RANGE=11]="OUT_OF_RANGE",ge[ge.UNIMPLEMENTED=12]="UNIMPLEMENTED",ge[ge.INTERNAL=13]="INTERNAL",ge[ge.UNAVAILABLE=14]="UNAVAILABLE",ge[ge.DATA_LOSS=15]="DATA_LOSS";var mA=null;var vH=new lr([4294967295,4294967295],0);function yA(t){let e=jA().encode(t),n=new Mv;return n.update(e),new Uint8Array(n.digest())}function vA(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new lr([n,r],0),new lr([i,o],0)]}var g_=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new qi(`Invalid padding: ${n}`);if(r<0)throw new qi(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new qi(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new qi(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=lr.fromNumber(this.fe)}pe(e,n,r){let i=e.add(n.multiply(lr.fromNumber(r)));return i.compare(vH)===1&&(i=new lr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;let n=yA(e),[r,i]=vA(n);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);if(!this.ye(s))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new t(o,i,n);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.fe===0)return;let n=yA(e),[r,i]=vA(n);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);this.we(s)}}we(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},qi=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Nh=class t{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,Oc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(J.min(),i,new Ve(oe),mr(),he())}},Oc=class t{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,he(),he(),he())}};var ys=class{constructor(e,n,r,i){this.Se=e,this.removedTargetIds=n,this.key=r,this.be=i}},Ph=class{constructor(e,n){this.targetId=e,this.De=n}},xh=class{constructor(e,n,r=_t.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},kh=class{constructor(){this.ve=0,this.Ce=_A(),this.Fe=_t.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=he(),n=he(),r=he();return this.Ce.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:z(38017,{changeType:o})}}),new Oc(this.Fe,this.Me,e,n,r)}ke(){this.xe=!1,this.Ce=_A()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,we(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}},m_=class{constructor(e){this.We=e,this.Ge=new Map,this.ze=mr(),this.je=yh(),this.Je=yh(),this.He=new Ve(oe)}Ye(e){for(let n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(let n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,n=>{let r=this.tt(n);switch(e.state){case 0:this.nt(n)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),r.Be(e.resumeToken));break;default:z(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach((r,i)=>{this.nt(i)&&n(i)})}it(e){let n=e.targetId,r=e.De.count,i=this.st(n);if(i){let o=i.target;if(a_(o))if(r===0){let s=new q(o.path);this.Xe(n,s,yn.newNoDocument(s,J.min()))}else we(r===1,20013,{expectedCount:r});else{let s=this.ot(n);if(s!==r){let a=this._t(e),u=a?this.ut(a,e,s):1;if(u!==0){this.rt(n);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,l)}mA?.ct(function(h,p,m,y,T){var M,R,V,G,K,be;let It={localCacheCount:h,existenceFilterCount:p.count,databaseId:m.database,projectId:m.projectId},Ee=p.unchangedNames;return Ee&&(It.bloomFilter={applied:T===0,hashCount:(M=Ee?.hashCount)!==null&&M!==void 0?M:0,bitmapLength:(G=(V=(R=Ee?.bits)===null||R===void 0?void 0:R.bitmap)===null||V===void 0?void 0:V.length)!==null&&G!==void 0?G:0,padding:(be=(K=Ee?.bits)===null||K===void 0?void 0:K.padding)!==null&&be!==void 0?be:0,mightContain:b=>{var _;return(_=y?.mightContain(b))!==null&&_!==void 0&&_}}),It}(s,e.De,this.We.lt(),a,u))}}}}_t(e){let n=e.De.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n,s,a;try{s=pr(r).toUint8Array()}catch(u){if(u instanceof Ch)return Yr("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new g_(s,i,o)}catch(u){return Yr(u instanceof qi?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.fe===0?null:a}ut(e,n,r){return n.De.count===r-this.ht(e,n.targetId)?0:2}ht(e,n){let r=this.We.getRemoteKeysForTarget(n),i=0;return r.forEach(o=>{let s=this.We.lt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Xe(n,o,null),i++)}),i}Pt(e){let n=new Map;this.Ge.forEach((o,s)=>{let a=this.st(s);if(a){if(o.current&&a_(a.target)){let u=new q(a.target.path);this.Tt(u).has(s)||this.It(s,u)||this.Xe(s,u,yn.newNoDocument(u,e))}o.Ne&&(n.set(s,o.Le()),o.ke())}});let r=he();this.Je.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{let l=this.st(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ze.forEach((o,s)=>s.setReadTime(e));let i=new Nh(e,n,this.He,this.ze,r);return this.ze=mr(),this.je=yh(),this.Je=yh(),this.He=new Ve(oe),i}Ze(e,n){if(!this.nt(e))return;let r=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,r),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,r){if(!this.nt(e))return;let i=this.tt(e);this.It(e,n)?i.qe(n,1):i.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),r&&(this.ze=this.ze.insert(n,r))}removeTarget(e){this.Ge.delete(e)}ot(e){let n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new kh,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new ot(oe),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new ot(oe),this.je=this.je.insert(e,n)),n}nt(e){let n=this.st(e)!==null;return n||F("WatchChangeAggregator","Detected inactive target",e),n}st(e){let n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new kh),this.We.getRemoteKeysForTarget(e).forEach(n=>{this.Xe(e,n,null)})}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}};function yh(){return new Ve(q.comparator)}function _A(){return new Ve(q.comparator)}var _H={asc:"ASCENDING",desc:"DESCENDING"},IH={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},wH={and:"AND",or:"OR"},y_=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function v_(t,e){return t.useProto3Json||of(e)?e:{value:e}}function Oh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function AR(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function EH(t,e){return Oh(t,e.toTimestamp())}function Un(t){return we(!!t,49232),J.fromTimestamp(function(n){let r=fr(n);return new We(r.seconds,r.nanos)}(t))}function PI(t,e){return __(t,e).canonicalString()}function __(t,e){let n=function(i){return new Ue(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function RR(t){let e=Ue.fromString(t);return we(kR(e),10190,{key:e.toString()}),e}function I_(t,e){return PI(t.databaseId,e.path)}function Fv(t,e){let n=RR(e);if(n.get(1)!==t.databaseId.projectId)throw new j(N.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new j(N.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new q(NR(n))}function MR(t,e){return PI(t.databaseId,e)}function bH(t){let e=RR(t);return e.length===4?Ue.emptyPath():NR(e)}function w_(t){return new Ue(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function NR(t){return we(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function IA(t,e,n){return{name:I_(t,e),fields:n.value.mapValue.fields}}function DH(t,e){let n;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:z(39313,{state:l})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(l,h){return l.useProto3Json?(we(h===void 0||typeof h=="string",58123),_t.fromBase64String(h||"")):(we(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),_t.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(l){let h=l.code===void 0?N.UNKNOWN:SR(l.code);return new j(h,l.message||"")}(s);n=new xh(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Fv(t,r.document.name),o=Un(r.document.updateTime),s=r.document.createTime?Un(r.document.createTime):J.min(),a=new $t({mapValue:{fields:r.document.fields}}),u=yn.newFoundDocument(i,o,s,a),l=r.targetIds||[],h=r.removedTargetIds||[];n=new ys(l,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Fv(t,r.document),o=r.readTime?Un(r.readTime):J.min(),s=yn.newNoDocument(i,o),a=r.removedTargetIds||[];n=new ys([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Fv(t,r.document),o=r.removedTargetIds||[];n=new ys([],o,i,null)}else{if(!("filter"in e))return z(11601,{At:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new p_(i,o),a=r.targetId;n=new Ph(a,s)}}return n}function TH(t,e){let n;if(e instanceof Ji)n={update:IA(t,e.key,e.value)};else if(e instanceof Mh)n={delete:I_(t,e.key)};else if(e instanceof Hn)n={update:IA(t,e.key,e.data),updateMask:kH(e.fieldMask)};else{if(!(e instanceof l_))return z(16599,{Rt:e.type});n={verify:I_(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof As)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Yi)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Zi)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Rs)return{fieldPath:s.field.canonicalString(),increment:a.Ee};throw z(20930,{transform:s.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:EH(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:z(27497)}(t,e.precondition)),n}function CH(t,e){return t&&t.length>0?(we(e!==void 0,14353),t.map(n=>function(i,o){let s=i.updateTime?Un(i.updateTime):Un(o);return s.isEqual(J.min())&&(s=Un(o)),new u_(s,i.transformResults||[])}(n,e))):[]}function SH(t,e){return{documents:[MR(t,e.path)]}}function AH(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=MR(t,i);let o=function(l){if(l.length!==0)return xR($n.create(l,"and"))}(e.filters);o&&(n.structuredQuery.where=o);let s=function(l){if(l.length!==0)return l.map(h=>function(m){return{field:ps(m.field),direction:NH(m.dir)}}(h))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);let a=v_(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{Vt:n,parent:i}}function RH(t){let e=bH(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){we(r===1,65062);let h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];n.where&&(o=function(p){let m=PR(p);return m instanceof $n&&dR(m)?m.getFilters():[m]}(n.where));let s=[];n.orderBy&&(s=function(p){return p.map(m=>function(T){return new Ts(gs(T.field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(T.direction))}(m))}(n.orderBy));let a=null;n.limit&&(a=function(p){let m;return m=typeof p=="object"?p.value:p,of(m)?null:m}(n.limit));let u=null;n.startAt&&(u=function(p){let m=!!p.before,y=p.values||[];return new Ds(y,m)}(n.startAt));let l=null;return n.endAt&&(l=function(p){let m=!p.before,y=p.values||[];return new Ds(y,m)}(n.endAt)),tH(e,i,s,o,a,"F",u,l)}function MH(t,e){let n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return z(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function PR(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=gs(n.unaryFilter.field);return Xe.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=gs(n.unaryFilter.field);return Xe.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=gs(n.unaryFilter.field);return Xe.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=gs(n.unaryFilter.field);return Xe.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return z(61313);default:return z(60726)}}(t):t.fieldFilter!==void 0?function(n){return Xe.create(gs(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return z(58110);default:return z(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return $n.create(n.compositeFilter.filters.map(r=>PR(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return z(1026)}}(n.compositeFilter.op))}(t):z(30097,{filter:t})}function NH(t){return _H[t]}function PH(t){return IH[t]}function xH(t){return wH[t]}function ps(t){return{fieldPath:t.canonicalString()}}function gs(t){return Ht.fromServerFormat(t.fieldPath)}function xR(t){return t instanceof Xe?function(n){if(n.op==="=="){if(aA(n.value))return{unaryFilter:{field:ps(n.field),op:"IS_NAN"}};if(sA(n.value))return{unaryFilter:{field:ps(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(aA(n.value))return{unaryFilter:{field:ps(n.field),op:"IS_NOT_NAN"}};if(sA(n.value))return{unaryFilter:{field:ps(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ps(n.field),op:PH(n.op),value:n.value}}}(t):t instanceof $n?function(n){let r=n.getFilters().map(i=>xR(i));return r.length===1?r[0]:{compositeFilter:{op:xH(n.op),filters:r}}}(t):z(54877,{filter:t})}function kH(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function kR(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var Fc=class t{constructor(e,n,r,i,o=J.min(),s=J.min(),a=_t.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var E_=class{constructor(e){this.gt=e}};function OH(t){let e=RH({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?c_(e,e.limit,"L"):e}var Fh=class{constructor(){}bt(e,n){this.Dt(e,n),n.vt()}Dt(e,n){if("nullValue"in e)this.Ct(n,5);else if("booleanValue"in e)this.Ct(n,10),n.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(n,15),n.Ft(Pe(e.integerValue));else if("doubleValue"in e){let r=Pe(e.doubleValue);isNaN(r)?this.Ct(n,13):(this.Ct(n,15),Pc(r)?n.Ft(0):n.Ft(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ct(n,20),typeof r=="string"&&(r=fr(r)),n.Mt(`${r.seconds||""}`),n.Ft(r.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,n),this.Ot(n);else if("bytesValue"in e)this.Ct(n,30),n.Nt(pr(e.bytesValue)),this.Ot(n);else if("referenceValue"in e)this.Bt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ct(n,45),n.Ft(r.latitude||0),n.Ft(r.longitude||0)}else"mapValue"in e?cR(e)?this.Ct(n,Number.MAX_SAFE_INTEGER):aR(e)?this.Lt(e.mapValue,n):(this.kt(e.mapValue,n),this.Ot(n)):"arrayValue"in e?(this.qt(e.arrayValue,n),this.Ot(n)):z(19022,{Qt:e})}xt(e,n){this.Ct(n,25),this.$t(e,n)}$t(e,n){n.Mt(e)}kt(e,n){let r=e.fields||{};this.Ct(n,55);for(let i of Object.keys(r))this.xt(i,n),this.Dt(r[i],n)}Lt(e,n){var r,i;let o=e.fields||{};this.Ct(n,53);let s=ws,a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Ct(n,15),n.Ft(Pe(a)),this.xt(s,n),this.Dt(o[s],n)}qt(e,n){let r=e.values||[];this.Ct(n,50);for(let i of r)this.Dt(i,n)}Bt(e,n){this.Ct(n,37),q.fromName(e).path.forEach(r=>{this.Ct(n,60),this.$t(r,n)})}Ct(e,n){e.Ft(n)}Ot(e){e.Ft(2)}};Fh.Ut=new Fh;var b_=class{constructor(){this.Dn=new D_}addToCollectionParentIndex(e,n){return this.Dn.add(n),P.resolve()}getCollectionParents(e,n){return P.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return P.resolve()}deleteFieldIndex(e,n){return P.resolve()}deleteAllFieldIndexes(e){return P.resolve()}createTargetIndexes(e,n){return P.resolve()}getDocumentsMatchingTarget(e,n){return P.resolve(null)}getIndexType(e,n){return P.resolve(0)}getFieldIndexes(e,n){return P.resolve([])}getNextCollectionGroupToUpdate(e){return P.resolve(null)}getMinOffset(e,n){return P.resolve(Qi.min())}getMinOffsetFromCollectionGroup(e,n){return P.resolve(Qi.min())}updateCollectionGroup(e,n,r){return P.resolve()}updateIndexEntries(e,n){return P.resolve()}},D_=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new ot(Ue.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new ot(Ue.comparator)).toArray()}};var kJ=new Uint8Array(0);var wA={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},OR=41943040,nn=class t{static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}};nn.DEFAULT_COLLECTION_PERCENTILE=10,nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,nn.DEFAULT=new nn(OR,nn.DEFAULT_COLLECTION_PERCENTILE,nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),nn.DISABLED=new nn(-1,0,0);var Vc=class t{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new t(0)}static ur(){return new t(-1)}};var EA="LruGarbageCollector",FH=1048576;function bA([t,e],[n,r]){let i=oe(t,n);return i===0?oe(e,r):i}var T_=class{constructor(e){this.Tr=e,this.buffer=new ot(bA),this.Ir=0}dr(){return++this.Ir}Er(e){let n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{let r=this.buffer.last();bA(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}},C_=class{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){F(EA,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>v(this,null,function*(){this.Ar=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(n){Os(n)?F(EA,"Ignoring IndexedDB error during garbage collection: ",n):yield ks(n)}yield this.Rr(3e5)}))}},S_=class{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return P.resolve(bI.ue);let r=new T_(n);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(F("LruGarbageCollector","Garbage collection skipped; disabled"),P.resolve(wA)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(F("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),wA):this.pr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let r,i,o,s,a,u,l,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(F("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,n))).next(p=>(o=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),hs()<=ue.DEBUG&&F("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(u-a)+`ms
	Removed ${p} documents in `+(l-u)+`ms
Total Duration: ${l-h}ms`),P.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function VH(t,e){return new S_(t,e)}var A_=class{constructor(){this.changes=new gr(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,yn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?P.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var R_=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var M_=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Rc(r.mutation,i,rn.empty(),We.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,he()).next(()=>r))}getLocalViewOfDocuments(e,n,r=he()){let i=zi();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=Tc();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){let r=zi();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,he()))}populateOverlays(e,n,r){let i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{n.set(s,a)})})}computeViews(e,n,r,i){let o=mr(),s=Ac(),a=function(){return Ac()}();return n.forEach((u,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof Hn)?o=o.insert(l.key,l):h!==void 0?(s.set(l.key,h.mutation.getFieldMask()),Rc(h.mutation,l,h.mutation.getFieldMask(),We.now())):s.set(l.key,rn.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,h)=>s.set(l,h)),n.forEach((l,h)=>{var p;return a.set(l,new R_(h,(p=s.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,n){let r=Ac(),i=new Ve((s,a)=>s-a),o=he();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(let a of s)a.keys().forEach(u=>{let l=n.get(u);if(l===null)return;let h=r.get(u)||rn.empty();h=a.applyToLocalView(l,h),r.set(u,h);let p=(i.get(a.batchId)||he()).add(u);i=i.insert(a.batchId,p)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,h=u.value,p=_R();h.forEach(m=>{if(!o.has(m)){let y=TR(n.get(m),r.get(m));y!==null&&p.set(m,y),o=o.add(m)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return P.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(s){return q.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):nH(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):P.resolve(zi()),a=Nc,u=o;return s.next(l=>P.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(h)?P.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{u=u.insert(h,m)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,he())).next(h=>({batchId:a,changes:vR(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new q(n)).next(r=>{let i=Tc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let o=n.collectionGroup,s=Tc();return this.indexManager.getCollectionParents(e,o).next(a=>P.forEach(a,u=>{let l=function(p,m){return new Cs(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,m)=>{s=s.insert(p,m)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((u,l)=>{let h=l.getKey();s.get(h)===null&&(s=s.insert(h,yn.newInvalidDocument(h)))});let a=Tc();return s.forEach((u,l)=>{let h=o.get(u);h!==void 0&&Rc(h.mutation,l,rn.empty(),We.now()),uf(n,l)&&(a=a.insert(u,l))}),a})}};var N_=class{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return P.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Un(i.createTime)}}(n)),P.resolve()}getNamedQuery(e,n){return P.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,function(i){return{name:i.name,query:OH(i.bundledQuery),readTime:Un(i.readTime)}}(n)),P.resolve()}};var P_=class{constructor(){this.overlays=new Ve(q.comparator),this.kr=new Map}getOverlay(e,n){return P.resolve(this.overlays.get(n))}getOverlays(e,n){let r=zi();return P.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.wt(e,n,o)}),P.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.kr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.kr.delete(r)),P.resolve()}getOverlaysForCollection(e,n,r){let i=zi(),o=n.length+1,s=new q(n.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return P.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new Ve((l,h)=>l-h),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let h=o.get(l.largestBatchId);h===null&&(h=zi(),o=o.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=zi(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return P.resolve(a)}wt(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new f_(n,r));let o=this.kr.get(n);o===void 0&&(o=he(),this.kr.set(n,o)),this.kr.set(n,o.add(r.key))}};var x_=class{constructor(){this.sessionToken=_t.EMPTY_BYTE_STRING}getSessionToken(e){return P.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,P.resolve()}};var Lc=class{constructor(){this.qr=new ot(qe.Qr),this.$r=new ot(qe.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){let r=new qe(e,n);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new qe(e,n))}Gr(e,n){e.forEach(r=>this.removeReference(r,n))}zr(e){let n=new q(new Ue([])),r=new qe(n,e),i=new qe(n,e+1),o=[];return this.$r.forEachInRange([r,i],s=>{this.Wr(s),o.push(s.key)}),o}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){let n=new q(new Ue([])),r=new qe(n,e),i=new qe(n,e+1),o=he();return this.$r.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let n=new qe(e,0),r=this.qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},qe=class{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return q.comparator(e.key,n.key)||oe(e.Hr,n.Hr)}static Ur(e,n){return oe(e.Hr,n.Hr)||q.comparator(e.key,n.key)}};var k_=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new ot(qe.Qr)}checkEmpty(e){return P.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let o=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new d_(o,n,r,i);this.mutationQueue.push(s);for(let a of i)this.Yr=this.Yr.add(new qe(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return P.resolve(s)}lookupMutationBatch(e,n){return P.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.Xr(r),o=i<0?0:i;return P.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return P.resolve(this.mutationQueue.length===0?DI:this.er-1)}getAllMutationBatches(e){return P.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new qe(n,0),i=new qe(n,Number.POSITIVE_INFINITY),o=[];return this.Yr.forEachInRange([r,i],s=>{let a=this.Zr(s.Hr);o.push(a)}),P.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ot(oe);return n.forEach(i=>{let o=new qe(i,0),s=new qe(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([o,s],a=>{r=r.add(a.Hr)})}),P.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,o=r;q.isDocumentKey(o)||(o=o.child(""));let s=new qe(new q(o),0),a=new ot(oe);return this.Yr.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.Hr)),!0)},s),P.resolve(this.ei(a))}ei(e){let n=[];return e.forEach(r=>{let i=this.Zr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){we(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return P.forEach(n.mutations,i=>{let o=new qe(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,n){let r=new qe(n,0),i=this.Yr.firstAfterOrEqual(r);return P.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,P.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var O_=class{constructor(e){this.ni=e,this.docs=function(){return new Ve(q.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.ni(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return P.resolve(r?r.document.mutableCopy():yn.newInvalidDocument(n))}getEntries(e,n){let r=mr();return n.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():yn.newInvalidDocument(i))}),P.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=mr(),s=n.path,a=new q(s.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:h}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||F$(O$(h),r)<=0||(i.has(h.key)||uf(n,h))&&(o=o.insert(h.key,h.mutableCopy()))}return P.resolve(o)}getAllFromCollectionGroup(e,n,r,i){z(9500)}ri(e,n){return P.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new F_(this)}getSize(e){return P.resolve(this.size)}},F_=class extends A_{constructor(e){super(),this.Or=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),P.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}};var V_=class{constructor(e){this.persistence=e,this.ii=new gr(n=>RI(n),MI),this.lastRemoteSnapshotVersion=J.min(),this.highestTargetId=0,this.si=0,this.oi=new Lc,this.targetCount=0,this._i=Vc.ar()}forEachTarget(e,n){return this.ii.forEach((r,i)=>n(i)),P.resolve()}getLastRemoteSnapshotVersion(e){return P.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return P.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),P.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.si&&(this.si=n),P.resolve()}hr(e){this.ii.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this._i=new Vc(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,P.resolve()}updateTargetData(e,n){return this.hr(n),P.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,P.resolve()}removeTargets(e,n,r){let i=0,o=[];return this.ii.forEach((s,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.ii.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),P.waitFor(o).next(()=>i)}getTargetCount(e){return P.resolve(this.targetCount)}getTargetData(e,n){let r=this.ii.get(n)||null;return P.resolve(r)}addMatchingKeys(e,n,r){return this.oi.Kr(n,r),P.resolve()}removeMatchingKeys(e,n,r){this.oi.Gr(n,r);let i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),P.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),P.resolve()}getMatchingKeysForTargetId(e,n){let r=this.oi.Jr(n);return P.resolve(r)}containsKey(e,n){return P.resolve(this.oi.containsKey(n))}};var Vh=class{constructor(e,n){this.ai={},this.overlays={},this.ui=new bI(0),this.ci=!1,this.ci=!0,this.li=new x_,this.referenceDelegate=e(this),this.hi=new V_(this),this.indexManager=new b_,this.remoteDocumentCache=function(i){return new O_(i)}(r=>this.referenceDelegate.Pi(r)),this.serializer=new E_(n),this.Ti=new N_(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new P_,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ai[e.toKey()];return r||(r=new k_(n,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,r){F("MemoryPersistence","Starting transaction:",e);let i=new L_(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ei(e,n){return P.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,n)))}},L_=class extends Kv{constructor(e){super(),this.currentSequenceNumber=e}},j_=class t{constructor(e){this.persistence=e,this.Ai=new Lc,this.Ri=null}static Vi(e){return new t(e)}get mi(){if(this.Ri)return this.Ri;throw z(60996)}addReference(e,n,r){return this.Ai.addReference(r,n),this.mi.delete(r.toString()),P.resolve()}removeReference(e,n,r){return this.Ai.removeReference(r,n),this.mi.add(r.toString()),P.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),P.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach(i=>this.mi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.mi.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}Ii(){this.Ri=new Set}di(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return P.forEach(this.mi,r=>{let i=q.fromPath(r);return this.fi(e,i).next(o=>{o||n.removeEntry(i,J.min())})}).next(()=>(this.Ri=null,n.apply(e)))}updateLimboDocument(e,n){return this.fi(e,n).next(r=>{r?this.mi.delete(n.toString()):this.mi.add(n.toString())})}Pi(e){return 0}fi(e,n){return P.or([()=>P.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}},Lh=class t{constructor(e,n){this.persistence=e,this.gi=new gr(r=>U$(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=VH(this,n)}static Vi(e,n){return new t(e,n)}Ii(){}di(e){return P.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){let n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}yr(e){let n=0;return this.gr(e,r=>{n++}).next(()=>n)}gr(e,n){return P.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(o=>o?P.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ri(e,s=>this.Sr(e,s,n).next(a=>{a||(r++,o.removeEntry(s,J.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),P.resolve()}removeTarget(e,n){let r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),P.resolve()}removeReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),P.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),P.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=_h(e.data.value)),n}Sr(e,n,r){return P.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{let i=this.gi.get(n);return P.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var U_=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Is=r,this.ds=i}static Es(e,n){let r=he(),i=he();for(let o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new t(e,n.fromCache,r,i)}};var B_=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var $_=class{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return C0()?8:L$(rt())>0?6:4}()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,r,i){let o={result:null};return this.ps(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ys(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new B_;return this.ws(e,n,s).next(a=>{if(o.result=a,this.Rs)return this.Ss(e,n,s,a.size)})}).next(()=>o.result)}Ss(e,n,r,i){return r.documentReadCount<this.Vs?(hs()<=ue.DEBUG&&F("QueryEngine","SDK will not create cache indexes for query:",fs(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),P.resolve()):(hs()<=ue.DEBUG&&F("QueryEngine","Query:",fs(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(hs()<=ue.DEBUG&&F("QueryEngine","The SDK decides to create cache indexes for query:",fs(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,jn(n))):P.resolve())}ps(e,n){if(dA(n))return P.resolve(null);let r=jn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=c_(n,null,"F"),r=jn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=he(...o);return this.gs.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.bs(n,a);return this.Ds(n,l,s,u.readTime)?this.ps(e,c_(n,null,"F")):this.vs(e,l,n,u)}))})))}ys(e,n,r,i){return dA(n)||i.isEqual(J.min())?P.resolve(null):this.gs.getDocuments(e,r).next(o=>{let s=this.bs(n,o);return this.Ds(n,s,r,i)?P.resolve(null):(hs()<=ue.DEBUG&&F("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),fs(n)),this.vs(e,s,n,k$(i,Nc)).next(a=>a))})}bs(e,n){let r=new ot(mR(e));return n.forEach((i,o)=>{uf(e,o)&&(r=r.add(o))}),r}Ds(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ws(e,n,r){return hs()<=ue.DEBUG&&F("QueryEngine","Using full collection scan to execute query:",fs(n)),this.gs.getDocumentsMatchingQuery(e,n,Qi.min(),r)}vs(e,n,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}};var xI="LocalStore",LH=3e8,H_=class{constructor(e,n,r,i){this.persistence=e,this.Cs=n,this.serializer=i,this.Fs=new Ve(oe),this.Ms=new gr(o=>RI(o),MI),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new M_(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Fs))}};function jH(t,e,n,r){return new H_(t,e,n,r)}function FR(t,e){return v(this,null,function*(){let n=Y(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.Ns(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],u=he();for(let l of i){s.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}for(let l of o){a.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next(l=>({Bs:l,removedBatchIds:s,addedBatchIds:a}))})})})}function UH(t,e){let n=Y(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=n.Os.newChangeBuffer({trackRemovals:!0});return function(a,u,l,h){let p=l.batch,m=p.keys(),y=P.resolve();return m.forEach(T=>{y=y.next(()=>h.getEntry(u,T)).next(M=>{let R=l.docVersions.get(T);we(R!==null,48541),M.version.compareTo(R)<0&&(p.applyToRemoteDocument(M,l),M.isValidDocument()&&(M.setReadTime(l.commitVersion),h.addEntry(M)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(u,p))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=he();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function VR(t){let e=Y(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.hi.getLastRemoteSnapshotVersion(n))}function BH(t,e){let n=Y(t),r=e.snapshotVersion,i=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=n.Os.newChangeBuffer({trackRemovals:!0});i=n.Fs;let a=[];e.targetChanges.forEach((h,p)=>{let m=i.get(p);if(!m)return;a.push(n.hi.removeMatchingKeys(o,h.removedDocuments,p).next(()=>n.hi.addMatchingKeys(o,h.addedDocuments,p)));let y=m.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(_t.EMPTY_BYTE_STRING,J.min()).withLastLimboFreeSnapshotVersion(J.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(p,y),function(M,R,V){return M.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-M.snapshotVersion.toMicroseconds()>=LH?!0:V.addedDocuments.size+V.modifiedDocuments.size+V.removedDocuments.size>0}(m,y,h)&&a.push(n.hi.updateTargetData(o,y))});let u=mr(),l=he();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push($H(o,s,e.documentUpdates).next(h=>{u=h.Ls,l=h.ks})),!r.isEqual(J.min())){let h=n.hi.getLastRemoteSnapshotVersion(o).next(p=>n.hi.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return P.waitFor(a).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(n.Fs=i,o))}function $H(t,e,n){let r=he(),i=he();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=mr();return n.forEach((a,u)=>{let l=o.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(J.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):F(xI,"Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{Ls:s,ks:i}})}function HH(t,e){let n=Y(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=DI),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function zH(t,e){let n=Y(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.hi.getTargetData(r,e).next(o=>o?(i=o,P.resolve(i)):n.hi.allocateTargetId(r).next(s=>(i=new Fc(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(r.targetId,r),n.Ms.set(e,r.targetId)),r})}function z_(t,e,n){return v(this,null,function*(){let r=Y(t),i=r.Fs.get(e),o=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!Os(s))throw s;F(xI,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)})}function DA(t,e,n){let r=Y(t),i=J.min(),o=he();return r.persistence.runTransaction("Execute query","readwrite",s=>function(u,l,h){let p=Y(u),m=p.Ms.get(h);return m!==void 0?P.resolve(p.Fs.get(m)):p.hi.getTargetData(l,h)}(r,s,jn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r.Cs.getDocumentsMatchingQuery(s,e,n?i:J.min(),n?o:he())).next(a=>(qH(r,iH(e),a),{documents:a,qs:o})))}function qH(t,e,n){let r=t.xs.get(e)||J.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.xs.set(e,r)}var jh=class{constructor(){this.activeTargetIds=lH()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var q_=class{constructor(){this.Fo=new jh,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,r){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new jh,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var G_=class{xo(e){}shutdown(){}};var TA="ConnectivityMonitor",Uh=class{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){F(TA,"Network connectivity changed: AVAILABLE");for(let e of this.ko)e(0)}Lo(){F(TA,"Network connectivity changed: UNAVAILABLE");for(let e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var vh=null;function W_(){return vh===null?vh=function(){return 268435456+Math.round(2147483648*Math.random())}():vh++,"0x"+vh.toString(16)}var Vv="RestConnection",GH={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},K_=class{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===Sh?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,n,r,i,o){let s=W_(),a=this.Go(e,n.toUriEncodedString());F(Vv,`Sending RPC '${e}' ${s}:`,a,r);let u={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(u,i,o);let{host:l}=new URL(a),h=Vr(l);return this.jo(e,a,u,r,h).then(p=>(F(Vv,`Received RPC '${e}' ${s}: `,p),p),p=>{throw Yr(Vv,`RPC '${e}' ${s} failed with error: `,p,"url: ",a,"request:",r),p})}Jo(e,n,r,i,o,s){return this.Wo(e,n,r,i,o)}zo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+xs}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}Go(e,n){let r=GH[e];return`${this.$o}/v1/${n}:${r}`}terminate(){}};var Q_=class{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}};var vt="WebChannelConnection",Y_=class extends K_{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,r,i,o){let s=W_();return new Promise((a,u)=>{let l=new Nv;l.setWithCredentials(!0),l.listenOnce(Pv.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Dc.NO_ERROR:let p=l.getResponseJson();F(vt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),a(p);break;case Dc.TIMEOUT:F(vt,`RPC '${e}' ${s} timed out`),u(new j(N.DEADLINE_EXCEEDED,"Request time out"));break;case Dc.HTTP_ERROR:let m=l.getStatus();if(F(vt,`RPC '${e}' ${s} failed with status:`,m,"response text:",l.getResponseText()),m>0){let y=l.getResponseJson();Array.isArray(y)&&(y=y[0]);let T=y?.error;if(T&&T.status&&T.message){let M=function(V){let G=V.toLowerCase().replace(/_/g,"-");return Object.values(N).indexOf(G)>=0?G:N.UNKNOWN}(T.status);u(new j(M,T.message))}else u(new j(N.UNKNOWN,"Server responded with status "+l.getStatus()))}else u(new j(N.UNAVAILABLE,"Connection failed."));break;default:z(9055,{c_:e,streamId:s,l_:l.getLastErrorCode(),h_:l.getLastError()})}}finally{F(vt,`RPC '${e}' ${s} completed.`)}});let h=JSON.stringify(i);F(vt,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",h,r,15)})}P_(e,n,r){let i=W_(),o=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Ov(),a=kv(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.zo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;let h=o.join("");F(vt,`Creating RPC '${e}' stream ${i}: ${h}`,u);let p=s.createWebChannel(h,u);this.T_(p);let m=!1,y=!1,T=new Q_({Ho:R=>{y?F(vt,`Not sending because RPC '${e}' stream ${i} is closed:`,R):(m||(F(vt,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),F(vt,`RPC '${e}' stream ${i} sending:`,R),p.send(R))},Yo:()=>p.close()}),M=(R,V,G)=>{R.listen(V,K=>{try{G(K)}catch(be){setTimeout(()=>{throw be},0)}})};return M(p,ds.EventType.OPEN,()=>{y||(F(vt,`RPC '${e}' stream ${i} transport opened.`),T.s_())}),M(p,ds.EventType.CLOSE,()=>{y||(y=!0,F(vt,`RPC '${e}' stream ${i} transport closed`),T.__(),this.I_(p))}),M(p,ds.EventType.ERROR,R=>{y||(y=!0,Yr(vt,`RPC '${e}' stream ${i} transport errored. Name:`,R.name,"Message:",R.message),T.__(new j(N.UNAVAILABLE,"The operation could not be completed")))}),M(p,ds.EventType.MESSAGE,R=>{var V;if(!y){let G=R.data[0];we(!!G,16349);let K=G,be=K?.error||((V=K[0])===null||V===void 0?void 0:V.error);if(be){F(vt,`RPC '${e}' stream ${i} received error:`,be);let It=be.status,Ee=function(w){let E=ze[w];if(E!==void 0)return SR(E)}(It),b=be.message;Ee===void 0&&(Ee=N.INTERNAL,b="Unknown error status: "+It+" with message "+be.message),y=!0,T.__(new j(Ee,b)),p.close()}else F(vt,`RPC '${e}' stream ${i} received:`,G),T.a_(G)}}),M(a,xv.STAT_EVENT,R=>{R.stat===gh.PROXY?F(vt,`RPC '${e}' stream ${i} detected buffering proxy`):R.stat===gh.NOPROXY&&F(vt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{T.o_()},0),T}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(n=>n===e)}};function Lv(){return typeof document<"u"?document:null}function lf(t){return new y_(t,!0)}var Bh=class{constructor(e,n,r=1e3,i=1.5,o=6e4){this.Fi=e,this.timerId=n,this.d_=r,this.E_=i,this.A_=o,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();let n=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,n-r);i>0&&F("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}};var CA="PersistentStream",$h=class{constructor(e,n,r,i,o,s,a,u){this.Fi=e,this.w_=r,this.S_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new Bh(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}stop(){return v(this,null,function*(){this.M_()&&(yield this.close(0))})}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}L_(){return v(this,null,function*(){if(this.x_())return this.close(0)})}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}close(e,n){return v(this,null,function*(){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===N.RESOURCE_EXHAUSTED?(hr(n.toString()),hr("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===N.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.n_(n)})}U_(){}auth(){this.state=1;let e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===n&&this.W_(r,i)},r=>{e(()=>{let i=new j(N.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,n){let r=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(()=>v(this,null,function*(){this.state=0,this.start()}))}G_(e){return F(CA,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget(()=>this.b_===e?n():(F(CA,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},Z_=class extends $h{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();let n=DH(this.serializer,e),r=function(o){if(!("targetChange"in o))return J.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?J.min():s.readTime?Un(s.readTime):J.min()}(e);return this.listener.J_(n,r)}H_(e){let n={};n.database=w_(this.serializer),n.addTarget=function(o,s){let a,u=s.target;if(a=a_(u)?{documents:SH(o,u)}:{query:AH(o,u).Vt},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=AR(o,s.resumeToken);let l=v_(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(J.min())>0){a.readTime=Oh(o,s.snapshotVersion.toTimestamp());let l=v_(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=MH(this.serializer,e);r&&(n.labels=r),this.k_(n)}Y_(e){let n={};n.database=w_(this.serializer),n.removeTarget=e,this.k_(n)}},J_=class extends $h{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return we(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,we(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){we(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();let n=CH(e.writeResults,e.commitTime),r=Un(e.commitTime);return this.listener.ta(r,n)}na(){let e={};e.database=w_(this.serializer),this.k_(e)}X_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>TH(this.serializer,r))};this.k_(n)}};var X_=class{},eI=class extends X_{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new j(N.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Wo(e,__(n,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new j(N.UNKNOWN,o.toString())})}Jo(e,n,r,i,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Jo(e,__(n,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new j(N.UNKNOWN,s.toString())})}terminate(){this.ra=!0,this.connection.terminate()}},tI=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(hr(n),this._a=!1):F("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}};var Xi="RemoteStore",nI=class{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=o,this.Ea.xo(s=>{r.enqueueAndForget(()=>v(this,null,function*(){eo(this)&&(F(Xi,"Restarting streams for network reachability change."),yield function(u){return v(this,null,function*(){let l=Y(u);l.Ia.add(4),yield Hc(l),l.Aa.set("Unknown"),l.Ia.delete(4),yield df(l)})}(this))}))}),this.Aa=new tI(r,i)}};function df(t){return v(this,null,function*(){if(eo(t))for(let e of t.da)yield e(!0)})}function Hc(t){return v(this,null,function*(){for(let e of t.da)yield e(!1)})}function LR(t,e){let n=Y(t);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),VI(n)?FI(n):Fs(n).x_()&&OI(n,e))}function kI(t,e){let n=Y(t),r=Fs(n);n.Ta.delete(e),r.x_()&&jR(n,e),n.Ta.size===0&&(r.x_()?r.B_():eo(n)&&n.Aa.set("Unknown"))}function OI(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(J.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Fs(t).H_(e)}function jR(t,e){t.Ra.$e(e),Fs(t).Y_(e)}function FI(t){t.Ra=new m_({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),Fs(t).start(),t.Aa.aa()}function VI(t){return eo(t)&&!Fs(t).M_()&&t.Ta.size>0}function eo(t){return Y(t).Ia.size===0}function UR(t){t.Ra=void 0}function WH(t){return v(this,null,function*(){t.Aa.set("Online")})}function KH(t){return v(this,null,function*(){t.Ta.forEach((e,n)=>{OI(t,e)})})}function QH(t,e){return v(this,null,function*(){UR(t),VI(t)?(t.Aa.la(e),FI(t)):t.Aa.set("Unknown")})}function YH(t,e,n){return v(this,null,function*(){if(t.Aa.set("Online"),e instanceof xh&&e.state===2&&e.cause)try{yield function(i,o){return v(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.Ta.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.Ta.delete(a),i.Ra.removeTarget(a))})}(t,e)}catch(r){F(Xi,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Hh(t,r)}else if(e instanceof ys?t.Ra.Ye(e):e instanceof Ph?t.Ra.it(e):t.Ra.et(e),!n.isEqual(J.min()))try{let r=yield VR(t.localStore);n.compareTo(r)>=0&&(yield function(o,s){let a=o.Ra.Pt(s);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let h=o.Ta.get(l);h&&o.Ta.set(l,h.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,l)=>{let h=o.Ta.get(u);if(!h)return;o.Ta.set(u,h.withResumeToken(_t.EMPTY_BYTE_STRING,h.snapshotVersion)),jR(o,u);let p=new Fc(h.target,u,l,h.sequenceNumber);OI(o,p)}),o.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){F(Xi,"Failed to raise snapshot:",r),yield Hh(t,r)}})}function Hh(t,e,n){return v(this,null,function*(){if(!Os(e))throw e;t.Ia.add(1),yield Hc(t),t.Aa.set("Offline"),n||(n=()=>VR(t.localStore)),t.asyncQueue.enqueueRetryable(()=>v(null,null,function*(){F(Xi,"Retrying IndexedDB access"),yield n(),t.Ia.delete(1),yield df(t)}))})}function BR(t,e){return e().catch(n=>Hh(t,n,e))}function hf(t){return v(this,null,function*(){let e=Y(t),n=Jr(e),r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:DI;for(;ZH(e);)try{let i=yield HH(e.localStore,r);if(i===null){e.Pa.length===0&&n.B_();break}r=i.batchId,JH(e,i)}catch(i){yield Hh(e,i)}$R(e)&&HR(e)})}function ZH(t){return eo(t)&&t.Pa.length<10}function JH(t,e){t.Pa.push(e);let n=Jr(t);n.x_()&&n.Z_&&n.X_(e.mutations)}function $R(t){return eo(t)&&!Jr(t).M_()&&t.Pa.length>0}function HR(t){Jr(t).start()}function XH(t){return v(this,null,function*(){Jr(t).na()})}function e4(t){return v(this,null,function*(){let e=Jr(t);for(let n of t.Pa)e.X_(n.mutations)})}function t4(t,e,n){return v(this,null,function*(){let r=t.Pa.shift(),i=h_.from(r,e,n);yield BR(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield hf(t)})}function n4(t,e){return v(this,null,function*(){e&&Jr(t).Z_&&(yield function(r,i){return v(this,null,function*(){if(function(s){return yH(s)&&s!==N.ABORTED}(i.code)){let o=r.Pa.shift();Jr(r).N_(),yield BR(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield hf(r)}})}(t,e)),$R(t)&&HR(t)})}function SA(t,e){return v(this,null,function*(){let n=Y(t);n.asyncQueue.verifyOperationInProgress(),F(Xi,"RemoteStore received new credentials");let r=eo(n);n.Ia.add(3),yield Hc(n),r&&n.Aa.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),yield df(n)})}function r4(t,e){return v(this,null,function*(){let n=Y(t);e?(n.Ia.delete(2),yield df(n)):e||(n.Ia.add(2),yield Hc(n),n.Aa.set("Unknown"))})}function Fs(t){return t.Va||(t.Va=function(n,r,i){let o=Y(n);return o.ia(),new Z_(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Zo:WH.bind(null,t),e_:KH.bind(null,t),n_:QH.bind(null,t),J_:YH.bind(null,t)}),t.da.push(e=>v(null,null,function*(){e?(t.Va.N_(),VI(t)?FI(t):t.Aa.set("Unknown")):(yield t.Va.stop(),UR(t))}))),t.Va}function Jr(t){return t.ma||(t.ma=function(n,r,i){let o=Y(n);return o.ia(),new J_(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:XH.bind(null,t),n_:n4.bind(null,t),ea:e4.bind(null,t),ta:t4.bind(null,t)}),t.da.push(e=>v(null,null,function*(){e?(t.ma.N_(),yield hf(t)):(yield t.ma.stop(),t.Pa.length>0&&(F(Xi,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))}))),t.ma}var rI=class t{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Fn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){let s=Date.now()+r,a=new t(e,n,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new j(N.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function LI(t,e){if(hr("AsyncQueue",`${e}: ${t}`),Os(t))return new j(N.UNAVAILABLE,`${e}: ${t}`);throw t}var zh=class t{static emptySet(e){return new t(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||q.comparator(n.key,r.key):(n,r)=>q.comparator(n.key,r.key),this.keyedMap=Tc(),this.sortedSet=new Ve(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var qh=class{constructor(){this.fa=new Ve(q.comparator)}track(e){let n=e.doc.key,r=this.fa.get(n);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(n,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(n):e.type===1&&r.type===2?this.fa=this.fa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):z(63341,{At:e,ga:r}):this.fa=this.fa.insert(n,e)}pa(){let e=[];return this.fa.inorderTraversal((n,r)=>{e.push(r)}),e}},Ns=class t{constructor(e,n,r,i,o,s,a,u,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,i,o){let s=[];return n.forEach(a=>{s.push({type:0,doc:a})}),new t(e,n,zh.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&cf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var iI=class{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}},oI=class{constructor(){this.queries=AA(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,r){let i=Y(n),o=i.queries;i.queries=AA(),o.forEach((s,a)=>{for(let u of a.wa)u.onError(r)})})(this,new j(N.ABORTED,"Firestore shutting down"))}};function AA(){return new gr(t=>gR(t),cf)}function zR(t,e){return v(this,null,function*(){let n=Y(t),r=3,i=e.query,o=n.queries.get(i);o?!o.Sa()&&e.ba()&&(r=2):(o=new iI,r=e.ba()?0:1);try{switch(r){case 0:o.ya=yield n.onListen(i,!0);break;case 1:o.ya=yield n.onListen(i,!1);break;case 2:yield n.onFirstRemoteStoreListen(i)}}catch(s){let a=LI(s,`Initialization of query '${fs(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,o),o.wa.push(e),e.va(n.onlineState),o.ya&&e.Ca(o.ya)&&jI(n)})}function qR(t,e){return v(this,null,function*(){let n=Y(t),r=e.query,i=3,o=n.queries.get(r);if(o){let s=o.wa.indexOf(e);s>=0&&(o.wa.splice(s,1),o.wa.length===0?i=e.ba()?0:1:!o.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}})}function i4(t,e){let n=Y(t),r=!1;for(let i of e){let o=i.query,s=n.queries.get(o);if(s){for(let a of s.wa)a.Ca(i)&&(r=!0);s.ya=i}}r&&jI(n)}function o4(t,e,n){let r=Y(t),i=r.queries.get(e);if(i)for(let o of i.wa)o.onError(n);r.queries.delete(e)}function jI(t){t.Da.forEach(e=>{e.next()})}var sI,RA;(RA=sI||(sI={})).Fa="default",RA.Cache="cache";var Gh=class{constructor(e,n,r){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Ns(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;let r=n!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;let n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=Ns.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==sI.Cache}};var Wh=class{constructor(e){this.key=e}},Kh=class{constructor(e){this.key=e}},aI=class{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=he(),this.mutatedKeys=he(),this.Xa=mR(e),this.eu=new zh(this.Xa)}get tu(){return this.Ha}nu(e,n){let r=n?n.ru:new qh,i=n?n.eu:this.eu,o=n?n.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let m=i.get(h),y=uf(this.query,p)?p:null,T=!!m&&this.mutatedKeys.has(m.key),M=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),R=!1;m&&y?m.data.isEqual(y.data)?T!==M&&(r.track({type:3,doc:y}),R=!0):this.iu(m,y)||(r.track({type:2,doc:y}),R=!0,(u&&this.Xa(y,u)>0||l&&this.Xa(y,l)<0)&&(a=!0)):!m&&y?(r.track({type:0,doc:y}),R=!0):m&&!y&&(r.track({type:1,doc:m}),R=!0,(u||l)&&(a=!0)),R&&(y?(s=s.add(y),o=M?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{eu:s,ru:r,Ds:a,mutatedKeys:o}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let o=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;let s=e.ru.pa();s.sort((h,p)=>function(y,T){let M=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return z(20277,{At:R})}};return M(y)-M(T)}(h.type,p.type)||this.Xa(h.doc,p.doc)),this.su(r),i=i!=null&&i;let a=n&&!i?this.ou():[],u=this.Za.size===0&&this.current&&!i?1:0,l=u!==this.Ya;return this.Ya=u,s.length!==0||l?{snapshot:new Ns(this.query,e.eu,o,s,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:a}:{_u:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new qh,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}ou(){if(!this.current)return[];let e=this.Za;this.Za=he(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});let n=[];return e.forEach(r=>{this.Za.has(r)||n.push(new Kh(r))}),this.Za.forEach(r=>{e.has(r)||n.push(new Wh(r))}),n}uu(e){this.Ha=e.qs,this.Za=he();let n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return Ns.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}},UI="SyncEngine",cI=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},uI=class{constructor(e){this.key=e,this.lu=!1}},lI=class{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.hu={},this.Pu=new gr(a=>gR(a),cf),this.Tu=new Map,this.Iu=new Set,this.du=new Ve(q.comparator),this.Eu=new Map,this.Au=new Lc,this.Ru={},this.Vu=new Map,this.mu=Vc.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}};function s4(t,e,n=!0){return v(this,null,function*(){let r=ZR(t),i,o=r.Pu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.cu()):i=yield GR(r,e,n,!0),i})}function a4(t,e){return v(this,null,function*(){let n=ZR(t);yield GR(n,e,!0,!1)})}function GR(t,e,n,r){return v(this,null,function*(){let i=yield zH(t.localStore,jn(e)),o=i.targetId,s=t.sharedClientState.addLocalQueryTarget(o,n),a;return r&&(a=yield c4(t,e,o,s==="current",i.resumeToken)),t.isPrimaryClient&&n&&LR(t.remoteStore,i),a})}function c4(t,e,n,r,i){return v(this,null,function*(){t.gu=(p,m,y)=>function(M,R,V,G){return v(this,null,function*(){let K=R.view.nu(V);K.Ds&&(K=yield DA(M.localStore,R.query,!1).then(({documents:b})=>R.view.nu(b,K)));let be=G&&G.targetChanges.get(R.targetId),It=G&&G.targetMismatches.get(R.targetId)!=null,Ee=R.view.applyChanges(K,M.isPrimaryClient,be,It);return NA(M,R.targetId,Ee._u),Ee.snapshot})}(t,p,m,y);let o=yield DA(t.localStore,e,!0),s=new aI(e,o.qs),a=s.nu(o.documents),u=Oc.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),l=s.applyChanges(a,t.isPrimaryClient,u);NA(t,n,l._u);let h=new cI(e,n,s);return t.Pu.set(e,h),t.Tu.has(n)?t.Tu.get(n).push(e):t.Tu.set(n,[e]),l.snapshot})}function u4(t,e,n){return v(this,null,function*(){let r=Y(t),i=r.Pu.get(e),o=r.Tu.get(i.targetId);if(o.length>1)return r.Tu.set(i.targetId,o.filter(s=>!cf(s,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield z_(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&kI(r.remoteStore,i.targetId),dI(r,i.targetId)}).catch(ks))):(dI(r,i.targetId),yield z_(r.localStore,i.targetId,!0))})}function l4(t,e){return v(this,null,function*(){let n=Y(t),r=n.Pu.get(e),i=n.Tu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),kI(n.remoteStore,r.targetId))})}function d4(t,e,n){return v(this,null,function*(){let r=v4(t);try{let i=yield function(s,a){let u=Y(s),l=We.now(),h=a.reduce((y,T)=>y.add(T.key),he()),p,m;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let T=mr(),M=he();return u.Os.getEntries(y,h).next(R=>{T=R,T.forEach((V,G)=>{G.isValidDocument()||(M=M.add(V))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,T)).next(R=>{p=R;let V=[];for(let G of a){let K=mH(G,p.get(G.key).overlayedDocument);K!=null&&V.push(new Hn(G.key,K,uR(K.value.mapValue),Gr.exists(!0)))}return u.mutationQueue.addMutationBatch(y,l,V,a)}).next(R=>{m=R;let V=R.applyToLocalDocumentSet(p,M);return u.documentOverlayCache.saveOverlays(y,R.batchId,V)})}).then(()=>({batchId:m.batchId,changes:vR(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,u){let l=s.Ru[s.currentUser.toKey()];l||(l=new Ve(oe)),l=l.insert(a,u),s.Ru[s.currentUser.toKey()]=l}(r,i.batchId,n),yield zc(r,i.changes),yield hf(r.remoteStore)}catch(i){let o=LI(i,"Failed to persist write");n.reject(o)}})}function WR(t,e){return v(this,null,function*(){let n=Y(t);try{let r=yield BH(n.localStore,e);e.targetChanges.forEach((i,o)=>{let s=n.Eu.get(o);s&&(we(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.lu=!0:i.modifiedDocuments.size>0?we(s.lu,14607):i.removedDocuments.size>0&&(we(s.lu,42227),s.lu=!1))}),yield zc(n,r,e)}catch(r){yield ks(r)}})}function MA(t,e,n){let r=Y(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.Pu.forEach((o,s)=>{let a=s.view.va(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let u=Y(s);u.onlineState=a;let l=!1;u.queries.forEach((h,p)=>{for(let m of p.wa)m.va(a)&&(l=!0)}),l&&jI(u)}(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function h4(t,e,n){return v(this,null,function*(){let r=Y(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Eu.get(e),o=i&&i.key;if(o){let s=new Ve(q.comparator);s=s.insert(o,yn.newNoDocument(o,J.min()));let a=he().add(o),u=new Nh(J.min(),new Map,new Ve(oe),s,a);yield WR(r,u),r.du=r.du.remove(o),r.Eu.delete(e),BI(r)}else yield z_(r.localStore,e,!1).then(()=>dI(r,e,n)).catch(ks)})}function f4(t,e){return v(this,null,function*(){let n=Y(t),r=e.batch.batchId;try{let i=yield UH(n.localStore,e);QR(n,r,null),KR(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield zc(n,i)}catch(i){yield ks(i)}})}function p4(t,e,n){return v(this,null,function*(){let r=Y(t);try{let i=yield function(s,a){let u=Y(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,a).next(p=>(we(p!==null,37113),h=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})}(r.localStore,e);QR(r,e,n),KR(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield zc(r,i)}catch(i){yield ks(i)}})}function KR(t,e){(t.Vu.get(e)||[]).forEach(n=>{n.resolve()}),t.Vu.delete(e)}function QR(t,e,n){let r=Y(t),i=r.Ru[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function dI(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Tu.get(e))t.Pu.delete(r),n&&t.hu.pu(r,n);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach(r=>{t.Au.containsKey(r)||YR(t,r)})}function YR(t,e){t.Iu.delete(e.path.canonicalString());let n=t.du.get(e);n!==null&&(kI(t.remoteStore,n),t.du=t.du.remove(e),t.Eu.delete(n),BI(t))}function NA(t,e,n){for(let r of n)r instanceof Wh?(t.Au.addReference(r.key,e),g4(t,r)):r instanceof Kh?(F(UI,"Document no longer in limbo: "+r.key),t.Au.removeReference(r.key,e),t.Au.containsKey(r.key)||YR(t,r.key)):z(19791,{yu:r})}function g4(t,e){let n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Iu.has(r)||(F(UI,"New document in limbo: "+n),t.Iu.add(r),BI(t))}function BI(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){let e=t.Iu.values().next().value;t.Iu.delete(e);let n=new q(Ue.fromString(e)),r=t.mu.next();t.Eu.set(r,new uI(n)),t.du=t.du.insert(n,r),LR(t.remoteStore,new Fc(jn(af(n.path)),r,"TargetPurposeLimboResolution",bI.ue))}}function zc(t,e,n){return v(this,null,function*(){let r=Y(t),i=[],o=[],s=[];r.Pu.isEmpty()||(r.Pu.forEach((a,u)=>{s.push(r.gu(u,e,n).then(l=>{var h;if((l||n)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=n?.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(l){i.push(l);let p=U_.Es(u.targetId,l);o.push(p)}}))}),yield Promise.all(s),r.hu.J_(i),yield function(u,l){return v(this,null,function*(){let h=Y(u);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>P.forEach(l,m=>P.forEach(m.Is,y=>h.persistence.referenceDelegate.addReference(p,m.targetId,y)).next(()=>P.forEach(m.ds,y=>h.persistence.referenceDelegate.removeReference(p,m.targetId,y)))))}catch(p){if(!Os(p))throw p;F(xI,"Failed to update sequence numbers: "+p)}for(let p of l){let m=p.targetId;if(!p.fromCache){let y=h.Fs.get(m),T=y.snapshotVersion,M=y.withLastLimboFreeSnapshotVersion(T);h.Fs=h.Fs.insert(m,M)}}})}(r.localStore,o))})}function m4(t,e){return v(this,null,function*(){let n=Y(t);if(!n.currentUser.isEqual(e)){F(UI,"User change. New user:",e.toKey());let r=yield FR(n.localStore,e);n.currentUser=e,function(o,s){o.Vu.forEach(a=>{a.forEach(u=>{u.reject(new j(N.CANCELLED,s))})}),o.Vu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield zc(n,r.Bs)}})}function y4(t,e){let n=Y(t),r=n.Eu.get(e);if(r&&r.lu)return he().add(r.key);{let i=he(),o=n.Tu.get(e);if(!o)return i;for(let s of o){let a=n.Pu.get(s);i=i.unionWith(a.view.tu)}return i}}function ZR(t){let e=Y(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=WR.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=y4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=h4.bind(null,e),e.hu.J_=i4.bind(null,e.eventManager),e.hu.pu=o4.bind(null,e.eventManager),e}function v4(t){let e=Y(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=f4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=p4.bind(null,e),e}var JR=(()=>{class t{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(n){return v(this,null,function*(){this.serializer=lf(n.databaseInfo.databaseId),this.sharedClientState=this.bu(n),this.persistence=this.Du(n),yield this.persistence.start(),this.localStore=this.vu(n),this.gcScheduler=this.Cu(n,this.localStore),this.indexBackfillerScheduler=this.Fu(n,this.localStore)})}Cu(n,r){return null}Fu(n,r){return null}vu(n){return jH(this.persistence,new $_,n.initialUser,this.serializer)}Du(n){return new Vh(j_.Vi,this.serializer)}bu(n){return new q_}terminate(){return v(this,null,function*(){var n,r;(n=this.gcScheduler)===null||n===void 0||n.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return t.provider={build:()=>new t},t})(),hI=class extends JR{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){we(this.persistence.referenceDelegate instanceof Lh,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new C_(r,e.asyncQueue,n)}Du(e){let n=this.cacheSizeBytes!==void 0?nn.withCacheSize(this.cacheSizeBytes):nn.DEFAULT;return new Vh(r=>Lh.Vi(r,n),this.serializer)}};var _4=(()=>{class t{initialize(n,r){return v(this,null,function*(){this.localStore||(this.localStore=n.localStore,this.sharedClientState=n.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!n.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>MA(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=m4.bind(null,this.syncEngine),yield r4(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(n){return function(){return new oI}()}createDatastore(n){let r=lf(n.databaseInfo.databaseId),i=function(s){return new Y_(s)}(n.databaseInfo);return function(s,a,u,l){return new eI(s,a,u,l)}(n.authCredentials,n.appCheckCredentials,i,r)}createRemoteStore(n){return function(i,o,s,a,u){return new nI(i,o,s,a,u)}(this.localStore,this.datastore,n.asyncQueue,r=>MA(this.syncEngine,r,0),function(){return Uh.C()?new Uh:new G_}())}createSyncEngine(n,r){return function(o,s,a,u,l,h,p){let m=new lI(o,s,a,u,l,h);return p&&(m.fu=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,n.initialUser,n.maxConcurrentLimboResolutions,r)}terminate(){return v(this,null,function*(){var n,r;yield function(o){return v(this,null,function*(){let s=Y(o);F(Xi,"RemoteStore shutting down."),s.Ia.add(5),yield Hc(s),s.Ea.shutdown(),s.Aa.set("Unknown")})}(this.remoteStore),(n=this.datastore)===null||n===void 0||n.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return t.provider={build:()=>new t},t})();var Qh=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):hr("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout(()=>{this.muted||e(n)},0)}};var Xr="FirestoreClient",fI=class{constructor(e,n,r,i,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=it.UNAUTHENTICATED,this.clientId=Mc.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>v(this,null,function*(){F(Xr,"Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(F(Xr,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Fn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>v(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=LI(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function jv(t,e){return v(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),F(Xr,"Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>v(null,null,function*(){r.isEqual(i)||(yield FR(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>{Yr("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then(()=>{F("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{Yr("Terminating Firestore due to IndexedDb database deletion failed",i)})}),t._offlineComponents=e})}function PA(t,e){return v(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield I4(t);F(Xr,"Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>SA(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>SA(e.remoteStore,i)),t._onlineComponents=e})}function I4(t){return v(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){F(Xr,"Using user provided OfflineComponentProvider");try{yield jv(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!function(i){return i.name==="FirebaseError"?i.code===N.FAILED_PRECONDITION||i.code===N.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Yr("Error using user provided cache. Falling back to memory cache: "+n),yield jv(t,new JR)}}else F(Xr,"Using default OfflineComponentProvider"),yield jv(t,new hI(void 0));return t._offlineComponents})}function XR(t){return v(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(F(Xr,"Using user provided OnlineComponentProvider"),yield PA(t,t._uninitializedComponentsProvider._online)):(F(Xr,"Using default OnlineComponentProvider"),yield PA(t,new _4))),t._onlineComponents})}function w4(t){return XR(t).then(e=>e.syncEngine)}function pI(t){return v(this,null,function*(){let e=yield XR(t),n=e.eventManager;return n.onListen=s4.bind(null,e.syncEngine),n.onUnlisten=u4.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=a4.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=l4.bind(null,e.syncEngine),n})}function E4(t,e,n={}){let r=new Fn;return t.asyncQueue.enqueueAndForget(()=>v(null,null,function*(){return function(o,s,a,u,l){let h=new Qh({next:m=>{h.Ou(),s.enqueueAndForget(()=>qR(o,p));let y=m.docs.has(a);!y&&m.fromCache?l.reject(new j(N.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&m.fromCache&&u&&u.source==="server"?l.reject(new j(N.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new Gh(af(a.path),h,{includeMetadataChanges:!0,ka:!0});return zR(o,p)}(yield pI(t),t.asyncQueue,e,n,r)})),r.promise}function eM(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var xA=new Map;var tM="firestore.googleapis.com",kA=!0,Yh=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new j(N.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=tM,this.ssl=kA}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:kA;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=OR;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<FH)throw new j(N.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}x$("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=eM((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new j(N.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new j(N.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new j(N.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},jc=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Yh({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new j(N.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new j(N.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Yh(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Uv;switch(r.type){case"firstParty":return new zv(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new j(N.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return v(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=xA.get(n);r&&(F("ComponentProvider","Removing Datastore"),xA.delete(n),r.terminate())}(this),Promise.resolve()}};function nM(t,e,n,r={}){var i;t=Vn(t,jc);let o=Vr(e),s=t._getSettings(),a=Object.assign(Object.assign({},s),{emulatorOptions:t._getEmulatorOptions()}),u=`${e}:${n}`;o&&(jd(`https://${u}`),Ud("Firestore",!0)),s.host!==tM&&s.host!==u&&Yr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let l=Object.assign(Object.assign({},s),{host:u,ssl:o,emulatorOptions:r});if(!Jt(l,a)&&(t._setSettings(l),r.mockUserToken)){let h,p;if(typeof r.mockUserToken=="string")h=r.mockUserToken,p=it.MOCK_USER;else{h=w0(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new j(N.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new it(m)}t._authCredentials=new Bv(new Eh(h,p))}}var Zh=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},ht=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Uc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}toJSON(){return{type:t._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if($c(n,t._jsonSchema))return new t(e,r||null,new q(Ue.fromString(n.referencePath)))}};ht._jsonSchemaVersion="firestore/documentReference/1.0",ht._jsonSchema={type:Ge("string",ht._jsonSchemaVersion),referencePath:Ge("string")};var Uc=class t extends Zh{constructor(e,n,r){super(e,n,af(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new ht(this.firestore,null,new q(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function rM(t,e,...n){if(t=He(t),arguments.length===1&&(e=Mc.newId()),P$("doc","path",e),t instanceof jc){let r=Ue.fromString(e,...n);return XS(r),new ht(t,null,new q(r))}{if(!(t instanceof ht||t instanceof Uc))throw new j(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Ue.fromString(e,...n));return XS(r),new ht(t.firestore,t instanceof Uc?t.converter:null,new q(r))}}var OA="AsyncQueue",Jh=class{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new Bh(this,"async_queue_retry"),this.oc=()=>{let r=Lv();r&&F(OA,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;let n=Lv();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;let n=Lv();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});let n=new Fn;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}cc(){return v(this,null,function*(){if(this.Zu.length!==0){try{yield this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Os(e))throw e;F(OA,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}})}uc(e){let n=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,hr("INTERNAL UNHANDLED ERROR: ",FA(r)),r}).then(r=>(this.nc=!1,r))));return this._c=n,n}enqueueAfterDelay(e,n,r){this.ac(),this.sc.indexOf(e)>-1&&(n=0);let i=rI.createAndSchedule(this,e,n,r,o=>this.lc(o));return this.ec.push(i),i}ac(){this.tc&&z(47125,{hc:FA(this.tc)})}verifyOperationInProgress(){}Pc(){return v(this,null,function*(){let e;do e=this._c,yield e;while(e!==this._c)})}Tc(e){for(let n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){let n=this.ec.indexOf(e);this.ec.splice(n,1)}};function FA(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}function VA(t){return function(n,r){if(typeof n!="object"||n===null)return!1;let i=n;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(t,["next","error","complete"])}var ei=class extends jc{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new Jh,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return v(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Jh(e),this._firestoreClient=void 0,yield e}})}};function iM(t,e){let n=typeof t=="object"?t:Pn(),r=typeof t=="string"?t:e||Sh,i=en(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=I0("firestore");o&&nM(i,...o)}return i}function $I(t){if(t._terminated)throw new j(N.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||b4(t),t._firestoreClient}function b4(t){var e,n,r;let i=t._freezeSettings(),o=function(a,u,l,h){return new Qv(a,u,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,eM(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new fI(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&function(a){let u=a?._online.build();return{_offline:a?._offline.build(u),_online:u}}(t._componentsProvider))}var Wr=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(_t.fromBase64String(e))}catch(n){throw new j(N.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(_t.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:t._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if($c(e,t._jsonSchema))return t.fromBase64String(e.bytes)}};Wr._jsonSchemaVersion="firestore/bytes/1.0",Wr._jsonSchema={type:Ge("string",Wr._jsonSchemaVersion),bytes:Ge("string")};var Ps=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new j(N.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ht(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Bc=class{constructor(e){this._methodName=e}};var Kr=class t{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new j(N.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new j(N.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return oe(this._lat,e._lat)||oe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:t._jsonSchemaVersion}}static fromJSON(e){if($c(e,t._jsonSchema))return new t(e.latitude,e.longitude)}};Kr._jsonSchemaVersion="firestore/geoPoint/1.0",Kr._jsonSchema={type:Ge("string",Kr._jsonSchemaVersion),latitude:Ge("number"),longitude:Ge("number")};var Qr=class t{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}toJSON(){return{type:t._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if($c(e,t._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new t(e.vectorValues);throw new j(N.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};Qr._jsonSchemaVersion="firestore/vectorValue/1.0",Qr._jsonSchema={type:Ge("string",Qr._jsonSchemaVersion),vectorValues:Ge("object")};var D4=/^__.*__$/,gI=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Hn(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ji(e,this.data,n,this.fieldTransforms)}},Xh=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Hn(e,this.data,this.fieldMask,n,this.fieldTransforms)}};function oM(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw z(40011,{Ec:t})}}var mI=class t{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Ac(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return tf(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(oM(this.Ec)&&D4.test(e))throw this.wc('Document fields cannot begin and end with "__"')}},yI=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||lf(e)}Dc(e,n,r,i=!1){return new mI({Ec:e,methodName:n,bc:r,path:Ht.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function sM(t){let e=t._freezeSettings(),n=lf(t._databaseId);return new yI(t._databaseId,!!e.ignoreUndefinedProperties,n)}function T4(t,e,n,r,i,o={}){let s=t.Dc(o.merge||o.mergeFields?2:0,e,n,i);HI("Data must be an object, but it was:",s,r);let a=aM(r,s),u,l;if(o.merge)u=new rn(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let p of o.mergeFields){let m=vI(e,p,n);if(!s.contains(m))throw new j(N.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);uM(h,m)||h.push(m)}u=new rn(h),l=s.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=s.fieldTransforms;return new gI(new $t(a),u,l)}var ef=class t extends Bc{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof t}};function C4(t,e,n,r){let i=t.Dc(1,e,n);HI("Data must be an object, but it was:",i,r);let o=[],s=$t.empty();ti(r,(u,l)=>{let h=zI(e,u,n);l=He(l);let p=i.gc(h);if(l instanceof ef)o.push(h);else{let m=ff(l,p);m!=null&&(o.push(h),s.set(h,m))}});let a=new rn(o);return new Xh(s,a,i.fieldTransforms)}function S4(t,e,n,r,i,o){let s=t.Dc(1,e,n),a=[vI(e,r,n)],u=[i];if(o.length%2!=0)throw new j(N.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<o.length;m+=2)a.push(vI(e,o[m])),u.push(o[m+1]);let l=[],h=$t.empty();for(let m=a.length-1;m>=0;--m)if(!uM(l,a[m])){let y=a[m],T=u[m];T=He(T);let M=s.gc(y);if(T instanceof ef)l.push(y);else{let R=ff(T,M);R!=null&&(l.push(y),h.set(y,R))}}let p=new rn(l);return new Xh(h,p,s.fieldTransforms)}function ff(t,e){if(cM(t=He(t)))return HI("Unsupported field value:",e,t),aM(t,e);if(t instanceof Bc)return function(r,i){if(!oM(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let u=ff(a,i.yc(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}}(t,e)}return function(r,i){if((r=He(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return dH(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=We.fromDate(r);return{timestampValue:Oh(i.serializer,o)}}if(r instanceof We){let o=new We(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Oh(i.serializer,o)}}if(r instanceof Kr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Wr)return{bytesValue:AR(i.serializer,r._byteString)};if(r instanceof ht){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.wc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:PI(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Qr)return function(s,a){return{mapValue:{fields:{[CI]:{stringValue:SI},[ws]:{arrayValue:{values:s.toArray().map(l=>{if(typeof l!="number")throw a.wc("VectorValues must only contain numeric values.");return NI(a.serializer,l)})}}}}}}(r,i);throw i.wc(`Unsupported field value: ${EI(r)}`)}(t,e)}function aM(t,e){let n={};return tR(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ti(t,(r,i)=>{let o=ff(i,e.Vc(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function cM(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof We||t instanceof Kr||t instanceof Wr||t instanceof ht||t instanceof Bc||t instanceof Qr)}function HI(t,e,n){if(!cM(n)||!UA(n)){let r=EI(n);throw r==="an object"?e.wc(t+" a custom object"):e.wc(t+" "+r)}}function vI(t,e,n){if((e=He(e))instanceof Ps)return e._internalPath;if(typeof e=="string")return zI(t,e);throw tf("Field path arguments must be of type string or ",t,!1,void 0,n)}var A4=new RegExp("[~\\*/\\[\\]]");function zI(t,e,n){if(e.search(A4)>=0)throw tf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Ps(...e.split("."))._internalPath}catch{throw tf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function tf(t,e,n,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new j(N.INVALID_ARGUMENT,a+t+u)}function uM(t,e){return t.some(n=>n.isEqual(e))}var nf=class{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new ht(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new _I(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(lM("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},_I=class extends nf{data(){return super.data()}};function lM(t,e){return typeof e=="string"?zI(t,e):e instanceof Ps?e._internalPath:e._delegate._internalPath}function R4(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new j(N.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var II=class{convertValue(e,n="none"){switch(Zr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Pe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(pr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw z(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return ti(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertVectorValue(e){var n,r,i;let o=(i=(r=(n=e.fields)===null||n===void 0?void 0:n[ws].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>Pe(s.doubleValue));return new Qr(o)}convertGeoPoint(e){return new Kr(Pe(e.latitude),Pe(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=sf(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(xc(e));default:return null}}convertTimestamp(e){let n=fr(e);return new We(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=Ue.fromString(e);we(kR(r),9688,{name:e});let i=new Ah(r.get(1),r.get(3)),o=new q(r.popFirst(5));return i.isEqual(n)||hr(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}};function M4(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var Gi=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Wi=class t extends nf{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new vs(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(lM("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new j(N.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,n={};return n.type=t._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}};Wi._jsonSchemaVersion="firestore/documentSnapshot/1.0",Wi._jsonSchema={type:Ge("string",Wi._jsonSchemaVersion),bundleSource:Ge("string","DocumentSnapshot"),bundleName:Ge("string"),bundle:Ge("string")};var vs=class extends Wi{data(e={}){return super.data(e)}},_s=class t{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Gi(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new vs(this._firestore,this._userDataWriter,r.key,r,new Gi(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new j(N.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let u=new vs(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Gi(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let u=new vs(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Gi(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:N4(a.type),doc:u,oldIndex:l,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new j(N.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=t._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Mc.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let n=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(n.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function N4(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return z(61501,{type:t})}}function dM(t){t=Vn(t,ht);let e=Vn(t.firestore,ei);return E4($I(e),t._key).then(n=>gM(e,t,n))}_s._jsonSchemaVersion="firestore/querySnapshot/1.0",_s._jsonSchema={type:Ge("string",_s._jsonSchemaVersion),bundleSource:Ge("string","QuerySnapshot"),bundleName:Ge("string"),bundle:Ge("string")};var rf=class extends II{constructor(e){super(),this.firestore=e}convertBytes(e){return new Wr(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new ht(this.firestore,null,n)}};function hM(t,e,n){t=Vn(t,ht);let r=Vn(t.firestore,ei),i=M4(t.converter,e,n);return pM(r,[T4(sM(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Gr.none())])}function fM(t,e,n,...r){t=Vn(t,ht);let i=Vn(t.firestore,ei),o=sM(i),s;return s=typeof(e=He(e))=="string"||e instanceof Ps?S4(o,"updateDoc",t._key,e,n,r):C4(o,"updateDoc",t._key,e),pM(i,[s.toMutation(t._key,Gr.exists(!0))])}function qI(t,...e){var n,r,i;t=He(t);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||VA(e[s])||(o=e[s++]);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(VA(e[s])){let p=e[s];e[s]=(n=p.next)===null||n===void 0?void 0:n.bind(p),e[s+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[s+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let u,l,h;if(t instanceof ht)l=Vn(t.firestore,ei),h=af(t._key.path),u={next:p=>{e[s]&&e[s](gM(l,t,p))},error:e[s+1],complete:e[s+2]};else{let p=Vn(t,Zh);l=Vn(p.firestore,ei),h=p._query;let m=new rf(l);u={next:y=>{e[s]&&e[s](new _s(l,m,p,y))},error:e[s+1],complete:e[s+2]},R4(t._query)}return function(m,y,T,M){let R=new Qh(M),V=new Gh(y,R,T);return m.asyncQueue.enqueueAndForget(()=>v(null,null,function*(){return zR(yield pI(m),V)})),()=>{R.Ou(),m.asyncQueue.enqueueAndForget(()=>v(null,null,function*(){return qR(yield pI(m),V)}))}}($I(l),h,a,u)}function pM(t,e){return function(r,i){let o=new Fn;return r.asyncQueue.enqueueAndForget(()=>v(null,null,function*(){return d4(yield w4(r),i,o)})),o.promise}($I(t),e)}function gM(t,e,n){let r=n.docs.get(e._key),i=new rf(t);return new Wi(t,i,e._key,r,new Gi(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){xs=i})(jr),dt(new je("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new ei(new $v(r.getProvider("auth-internal")),new qv(s,r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new j(N.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ah(l.options.projectId,h)}(s,i),s);return o=Object.assign({useFetchStreams:n},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Ie(QS,YS,e),Ie(QS,YS,"esm2017")})();var pf=function(){return pf=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},pf.apply(this,arguments)};var k4={includeMetadataChanges:!1};function mM(t,e){return e===void 0&&(e=k4),new se(function(n){var r=qI(t,e,{next:n.next.bind(n),error:n.error.bind(n),complete:n.complete.bind(n)});return{unsubscribe:r}})}function yM(t){return mM(t,{includeMetadataChanges:!0})}function vM(t,e){return e===void 0&&(e={}),yM(t).pipe(ce(function(n){return _M(n,e)}))}function _M(t,e){var n;e===void 0&&(e={});var r=t.data(e);return!t.exists()||typeof r!="object"||r===null||!e.idField?r:pf(pf({},r),(n={},n[e.idField]=t.id,n))}var to=class{constructor(e){return e}},IM="firestore",GI=class{constructor(){return Ur(IM)}};var WI=new L("angularfire2.firestore-instances");function O4(t,e){let n=ji(IM,t,e);return n&&new to(n)}function F4(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new to(r)}}var V4={provide:GI,deps:[[new ut,WI]]},L4={provide:to,useFactory:O4,deps:[[new ut,WI],gn]};function wM(t,...e){return Ie("angularfire",xn.full,"fst"),ln([L4,V4,{provide:WI,useFactory:F4(t),multi:!0,deps:[_e,Je,kn,ar,[new ut,bc],[new ut,us],...e]}])}var KI=kt(vM,!0);var Vs=kt(rM,!0,2);var EM=kt(dM,!0);var bM=kt(iM,!0);var DM=kt(hM,!0,2);var TM=kt(fM,!0,2);var ni=class t{constructor(){}firestore=x(to);getPersonalData(){let e=Vs(this.firestore,"DATOS_PERSONALES","Lqxyb4o38VjsdnZrOF5q");return KI(e)}getPersonalDataOnce(){return v(this,null,function*(){let e=Vs(this.firestore,"DATOS_PERSONALES","Lqxyb4o38VjsdnZrOF5q"),n=yield EM(e);return n.exists()?n.data():void 0})}getDocument(e){if(!this.firestore)return console.warn("Firestore no est\xE1 inicializado. Retornando array vac\xEDo."),Q([]);let n=Vs(this.firestore,e);return KI(n)}updateDocument(e,n,r){let i=Vs(this.firestore,e,n);return TM(i,r)}updatePersonalData(e){let n=Vs(this.firestore,"DATOS_PERSONALES","Lqxyb4o38VjsdnZrOF5q");return DM(n,e,{merge:!0})}static \u0275fac=function(n){return new(n||t)};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})};function j4(t,e){if(t&1){let n=Qo();Ma(0),B(1,"div",2),Ne("click",function(){wi(n);let i=Nr();return Ei(i.selectView("experience"))}),B(2,"h2"),ne(3,"Experiencia laboral"),H(),B(4,"p"),ne(5,"Trayectoria profesional y proyectos destacados."),H()(),B(6,"div",3),Ne("click",function(){wi(n);let i=Nr();return Ei(i.selectView("technologies"))}),B(7,"h2"),ne(8,"Tecnolog\xEDas especializadas"),H(),B(9,"p"),ne(10,"Stack t\xE9cnico y herramientas utilizadas."),H()(),Na()}}function U4(t,e){if(t&1){let n=Qo();Ma(0),B(1,"div",4)(2,"button",5),Ne("click",function(){wi(n);let i=Nr();return Ei(i.selectView("menu"))}),ne(3,"\u2190 Volver"),H(),B(4,"div",6)(5,"div",7)(6,"h3"),ne(7,"Desarrollador Full-Stack"),H(),B(8,"h3"),ne(9,"Indra Sistemas"),H(),B(10,"h4"),ne(11,"Octubre 2024 - ACTUALMENTE"),H()(),B(12,"div",8)(13,"p"),ne(14," El proyecto en el que actualmente trabajo es un sistema de mando y control, encargado de gestionar recursos, publicar instrucciones y llevar un seguimiento de las acciones. Ademas de comunicarse con otras plataformas con objetivos similares a nuestro sistema. Los desarrollos principales en los que he trabajado han sido: La migracion de la aplicaci\xF3n de Windows a Linux y Android. Integraci\xF3n en el nuevas tecnolog\xEDas y desarrollado un nuevo frontal m\xE1s din\xE1mico y con apariencia mas moderna usando Angular. Implementar nuevas funcionalidades en un sistema programado en Java con mas de 15 a\xF1os y consolidado. Sin quebrar el funcionamiento de los sistemas ya existentes y otros que estan en desarrollo y comparten servicios en com\xFAn. "),H()()(),B(15,"div",6)(16,"div",7)(17,"h3"),ne(18,"Desarrollador Full-Stack"),H(),B(19,"h3"),ne(20,"Mercanza"),H(),B(21,"h4"),ne(22,"Septiembre 2023 - Diciembre 2023"),H()(),B(23,"div",8)(24,"p"),ne(25," Los proyectos en los que trabaj\xE9 eran encargados de llevar el tratamiento de datos personales y de negocio de diversas empresas con sus empleados o clientes. Estos proyectos usaban diferentes tecnolog\xEDas pero en los que mas desarroll\xE9 usaban Angular y .NET con C#. En estas aplicaciones web realic\xE9 sobre todo tareas de resoluci\xF3n de incidencias, correci\xF3n de componentes de interfaz gr\xE1fica y optimizaci\xF3n de consultas a APIs y Bases de datos relaccionales. "),H()()()(),Na()}}function B4(t,e){if(t&1){let n=Qo();Ma(0),B(1,"div",4)(2,"button",5),Ne("click",function(){wi(n);let i=Nr();return Ei(i.selectView("menu"))}),ne(3,"\u2190 Volver"),H(),B(4,"h2"),ne(5,"Tecnolog\xEDas especializadas"),H(),B(6,"div",9)(7,"p"),ne(8," Especializado en Java con gran conocimiento de gestion multihilo "),Me(9,"br")(10,"br"),ne(11," Conocimientos en typescript y angular "),H()()(),Na()}}var gf=class t{view="menu";selectView(e){this.view=e}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=$e({type:t,selectors:[["app-experience-panel"]],decls:4,vars:3,consts:[[1,"experience-wrapper"],[4,"ngIf"],[1,"experience-card","experience",3,"click"],[1,"experience-card","technologies",3,"click"],[1,"experience-detail"],[1,"back-btn",3,"click"],[1,"detail-panel"],[1,"detail-header"],[1,"detail-content"],[1,"detail-scroll"]],template:function(n,r){n&1&&(B(0,"div",0),hn(1,j4,11,0,"ng-container",1)(2,U4,26,0,"ng-container",1)(3,B4,12,0,"ng-container",1),H()),n&2&&(ye(),Le("ngIf",r.view==="menu"),ye(),Le("ngIf",r.view==="experience"),ye(),Le("ngIf",r.view==="technologies"))},dependencies:[tt,rr],styles:[".experience-wrapper[_ngcontent-%COMP%]{display:flex;gap:2rem;width:100%;height:100%;max-width:900px;margin:0 auto;align-items:anchor-center}.experience-card[_ngcontent-%COMP%]{flex:1;padding:2.5rem;background:#ffffff0a;border:1px solid rgba(255,255,255,.08);cursor:pointer;transition:all .35s ease;position:relative}.experience-card[_ngcontent-%COMP%]:hover{background:#ffffff14;transform:translateY(-6px)}.experience-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.6rem;letter-spacing:.08em;margin-bottom:1rem;text-transform:uppercase}.experience-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;line-height:1.6;opacity:.85}.experience-card.experience[_ngcontent-%COMP%]{border-left:4px solid #6aa9ff}.experience-card.technologies[_ngcontent-%COMP%]{border-left:4px solid #7dffb3}.experience-detail[_ngcontent-%COMP%]{width:100%;max-width:800px;margin:0 auto}.back-btn[_ngcontent-%COMP%]{background:none;border:none;color:#6aa9ff;font-size:1rem;cursor:pointer;margin-bottom:1.5rem}.detail-scroll[_ngcontent-%COMP%]{max-height:320px;overflow-y:auto;padding-right:.75rem}.detail-scroll[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.detail-scroll[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#ffffff40;border-radius:3px}.detail-panel[_ngcontent-%COMP%]{background-color:var(--color-subpanel-dark)}.detail-header[_ngcontent-%COMP%]{background-color:var(--color-subpanel-child-dark)}h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%]{margin:0}"]})};function $4(t,e){t&1&&Me(0,"div")}function H4(t,e){t&1&&Me(0,"app-experience-panel")}var mf=class t{visible=!1;activeTab=void 0;close=new Fe;pathImg="";onClose(){this.close.emit()}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=$e({type:t,selectors:[["app-left-panel"]],inputs:{visible:"visible",activeTab:"activeTab",pathImg:"pathImg"},outputs:{close:"close"},decls:7,vars:8,consts:[[1,"tab-panel"],[1,"tab-panel-inner"],[1,"close-btn",3,"click"],[4,"ngIf"],[1,"tab-image"]],template:function(n,r){n&1&&(B(0,"div",0)(1,"div",1)(2,"button",2),Ne("click",function(){return r.onClose()}),ne(3,"\u2715"),H(),hn(4,$4,1,0,"div",3)(5,H4,1,0,"app-experience-panel",3),H()(),Me(6,"div",4)),n&2&&(fn("is-visible",r.visible),ye(4),Le("ngIf",r.activeTab==="about"),ye(),Le("ngIf",r.activeTab==="experience"),ye(),Sn("background-image","url("+r.pathImg+")"),fn("is-visible",r.visible))},dependencies:[tt,rr,gf],styles:[".tab-panel[_ngcontent-%COMP%]{position:fixed;top:0;left:0;height:100vh;width:70vw;background:var(--color-panel-dark);color:#f5f5f5;box-shadow:8px 0 30px #00000073;transform:translate(-100%);transition:transform 1s ease;z-index:5;display:flex;align-items:center}.tab-image[_ngcontent-%COMP%]{visibility:hidden;position:fixed;top:0;right:0;left:auto;height:100vh;width:30vw;color:#f5f5f5;box-shadow:-8px 0 30px #00000073;transform:translate(-500%);transition:transform 1s ease;z-index:5;display:flex;align-items:center;background-size:cover;background-position:center;background-repeat:no-repeat;z-index:0}.tab-image.is-visible[_ngcontent-%COMP%]{visibility:visible;transform:translate(0)}.tab-panel.is-visible[_ngcontent-%COMP%]{transform:translate(0)}.tab-panel-inner[_ngcontent-%COMP%]{padding:3rem;width:100%;height:100%;box-sizing:border-box;align-content:center}.close-btn[_ngcontent-%COMP%]{position:absolute;top:1.5rem;right:1.5rem;border:none;background:transparent;color:#f5f5f5;font-size:1.8rem;cursor:pointer}.tab-panel[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2.4rem;margin-bottom:1.5rem;letter-spacing:.08em;text-transform:uppercase}.tab-panel[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.05rem;line-height:1.6;max-width:32rem}"]})};function z4(t,e){if(t&1){let n=Qo();B(0,"div",1),Ne("click",function(){let i=wi(n).index,o=Nr();return Ei(o.toggleExpand(i))}),B(1,"div",2)(2,"h2"),ne(3),H(),B(4,"h4"),ne(5),H(),B(6,"h5"),ne(7),H(),B(8,"p"),ne(9),H()(),B(10,"div",3)(11,"p"),ne(12,"Otro texto que aparece al pulsar"),H()()()}if(t&2){let n=e.$implicit,r=e.index,i=Nr();fn("expanded",i.expandedIndex()===r),ye(3),Pa(n.nombre),ye(2),Pa(n.entity),ye(2),Am("",n.start," ",n.end,""),ye(2),Pa(n.description)}}var yf=class t{fireBaseService=x(ni);studiesSignal=Mr([]);dataSubscription;expandedIndex=Mr(null);toggleExpand(e){this.expandedIndex.set(this.expandedIndex()===e?null:e)}ngOnInit(){this.setDocumentData()}ngOnDestroy(){this.dataSubscription?.unsubscribe()}setDocumentData(){this.dataSubscription=this.fireBaseService.getDocument("ESTUDIOS/JsQdBul7oM8HeoebALwJ").subscribe({next:e=>{console.log("VALUE: ",e?.LISTA_DE_ESTUDIOS),this.studiesSignal.set(e?.LISTA_DE_ESTUDIOS??[])},error:e=>{console.error("Error en get document")}})}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=$e({type:t,selectors:[["app-studies-panel"]],decls:1,vars:1,consts:[[3,"expanded","click",4,"ngFor","ngForOf"],[3,"click"],[1,"text","text-primary"],[1,"text","text-secondary"]],template:function(n,r){n&1&&hn(0,z4,13,7,"div",0),n&2&&Le("ngForOf",r.studiesSignal())},dependencies:[tt,Xl],styles:["[_nghost-%COMP%]{display:block;width:100%}div[_ngcontent-%COMP%]{padding:1rem;margin-bottom:1rem;background:var(--color-subpanel-child-dark);border-radius:8px;flex:1;overflow:hidden;position:relative}h2[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%]{margin:6px 0}.text[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;transition:all .35s ease}.text-secondary[_ngcontent-%COMP%]{transform:translate(100%);opacity:0}div.expanded[_ngcontent-%COMP%]   .text-primary[_ngcontent-%COMP%]{transform:translate(-100%);opacity:0}div.expanded[_ngcontent-%COMP%]   .text-secondary[_ngcontent-%COMP%]{transform:translate(0);opacity:1}"]})};function q4(t,e){t&1&&Me(0,"app-studies-panel",6)}function G4(t,e){t&1&&Me(0,"div")}var vf=class t{visible=!1;title="default-text";contents="default-text";activeTab=void 0;close=new Fe;pathImg="";onClose(){this.close.emit()}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=$e({type:t,selectors:[["app-right-panel"]],inputs:{visible:"visible",title:"title",contents:"contents",activeTab:"activeTab",pathImg:"pathImg"},outputs:{close:"close"},decls:7,vars:8,consts:[[1,"tab-panel"],[1,"tab-panel-inner"],[1,"close-btn",3,"click"],["class","studies-wrapper",4,"ngIf"],[4,"ngIf"],[1,"tab-image"],[1,"studies-wrapper"]],template:function(n,r){n&1&&(B(0,"div",0)(1,"div",1)(2,"button",2),Ne("click",function(){return r.onClose()}),ne(3,"\u2715"),H(),hn(4,q4,1,0,"app-studies-panel",3)(5,G4,1,0,"div",4),H()(),Me(6,"div",5)),n&2&&(fn("is-visible",r.visible),ye(4),Le("ngIf",r.activeTab==="studies"),ye(),Le("ngIf",r.activeTab==="contact"),ye(),Sn("background-image","url("+r.pathImg+")"),fn("is-visible",r.visible))},dependencies:[tt,rr,yf],styles:[".tab-panel[_ngcontent-%COMP%]{position:fixed;top:0;right:0;left:auto;height:100vh;width:70vw;background:var(--color-panel-dark);color:#f5f5f5;box-shadow:-8px 0 30px #00000073;transform:translate(100%);transition:transform 1s ease;z-index:5;display:flex;flex-direction:column;align-items:stretch}.tab-image[_ngcontent-%COMP%]{visibility:hidden;position:fixed;top:0;left:0;right:auto;height:100vh;width:30vw;color:#f5f5f5;box-shadow:-8px 0 30px #00000073;transform:translate(500%);transition:transform 1s ease;z-index:5;display:flex;align-items:center;background-size:cover;background-position:center;background-repeat:no-repeat;z-index:0}.tab-image.is-visible[_ngcontent-%COMP%]{visibility:visible;transform:translate(0)}.tab-panel.is-visible[_ngcontent-%COMP%]{transform:translate(0)}.tab-panel-inner[_ngcontent-%COMP%]{padding:3rem;width:100%;box-sizing:border-box;height:100%}.close-btn[_ngcontent-%COMP%]{position:absolute;top:1.5rem;right:1.5rem;border:none;background:transparent;color:#f5f5f5;font-size:1.8rem;cursor:pointer}.tab-panel[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2.4rem;margin-bottom:1.5rem;letter-spacing:.08em;text-transform:uppercase}.tab-panel[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.05rem;line-height:1.6;max-width:32rem}.studies-wrapper[_ngcontent-%COMP%]{width:100%;height:100%;background:var(--color-subpanel-dark);padding:1.5rem;border-radius:12px;box-sizing:border-box;display:flex;flex-direction:column;min-height:min-content;overflow:hidden}"]})};var W4=(t,e,n,r)=>({"is-open-about":t,"is-open-studies":e,"is-open-experience":n,"is-open-contact":r}),_f=class t{activeTab=null;focusedTab=null;openTab(e){this.activeTab=e}closeTab(){this.activeTab=null}focusTab(e){this.focusedTab=e}getImagePath(){switch(this.activeTab){case"about":return"/assets/SobreMi.jpg";case"experience":return"/assets/Experiencia.jpg";case"studies":return"/assets/Estudios.jpg";case"contact":return"/assets/Contacto.jpg";case null:return"";default:return""}}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=$e({type:t,selectors:[["app-radial-tabs"]],decls:23,vars:20,consts:[[1,"grid"],[1,"wrap",3,"ngClass"],[1,"top-span",3,"click","mouseover","mouseout"],[1,"down-span",3,"click","mouseover","mouseout"],[1,"avatar"],[3,"close","visible","activeTab","pathImg"]],template:function(n,r){n&1&&(B(0,"div",0)(1,"div",1)(2,"a",2),Ne("click",function(){return r.openTab("about")})("mouseover",function(){return r.focusTab("about")})("mouseout",function(){return r.focusTab(null)}),Me(3,"div"),B(4,"span"),ne(5,"About"),H()(),B(6,"a",2),Ne("click",function(){return r.openTab("studies")})("mouseover",function(){return r.focusTab("studies")})("mouseout",function(){return r.focusTab(null)}),Me(7,"div"),B(8,"span"),ne(9,"Studies"),H()(),B(10,"a",3),Ne("click",function(){return r.openTab("experience")})("mouseover",function(){return r.focusTab("experience")})("mouseout",function(){return r.focusTab(null)}),Me(11,"div"),B(12,"span"),ne(13,"Experience"),H()(),B(14,"a",3),Ne("click",function(){return r.openTab("contact")})("mouseover",function(){return r.focusTab("contact")})("mouseout",function(){return r.focusTab(null)}),Me(15,"div"),B(16,"span"),ne(17,"Contact"),H()(),B(18,"a"),Me(19,"div"),H(),Me(20,"span",4),H(),B(21,"app-left-panel",5),Ne("close",function(){return r.closeTab()}),H(),B(22,"app-right-panel",5),Ne("close",function(){return r.closeTab()}),H()()),n&2&&(ye(),Le("ngClass",JT(15,W4,r.activeTab==="about",r.activeTab==="studies",r.activeTab==="experience",r.activeTab==="contact")),ye(),Sn("--halo-opacity",r.focusedTab==="about"?.35:.65),ye(4),Sn("--halo-opacity",r.focusedTab==="studies"?.35:.65),ye(4),Sn("--halo-opacity",r.focusedTab==="experience"?.35:.65),ye(4),Sn("--halo-opacity",r.focusedTab==="contact"?.35:.65),ye(7),Le("visible",r.activeTab==="about"||r.activeTab==="experience")("activeTab",r.activeTab==null?null:r.activeTab.valueOf())("pathImg",r.getImagePath()),ye(),Le("visible",r.activeTab==="studies"||r.activeTab==="contact")("activeTab",r.activeTab==null?null:r.activeTab.valueOf())("pathImg",r.getImagePath()))},dependencies:[tt,Lm,mf,vf],styles:['.grid[_ngcontent-%COMP%]{position:fixed;inset:0;background:#e3dfd2;box-shadow:inset 0 0 20vmin #585247;display:flex;align-items:center;justify-content:center;overflow:hidden}.wrap[_ngcontent-%COMP%]{--size-with: 240vmin;--size-height: 240vmin;position:absolute;left:50%;top:50%;width:var(--size-with);height:var(--size-height);background:transparent;transform-origin:center center;transform:translate(-50%,-50%) scale(.2);opacity:1;z-index:1;transition:transform .9s ease,opacity 1s ease,left 1s ease,top 1s ease}a[_ngcontent-%COMP%]{position:absolute;left:0;top:0;width:47.5%;height:47.5%;overflow:hidden;transform:scale(.5) translateZ(0);background:#585247;background-size:cover;background-position:center;background-repeat:no-repeat;display:flex;justify-content:center;align-items:center}a[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{position:relative;z-index:1;color:#fff}a[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:50%;width:250vmin;height:165vmin;transform:translate(-50%,-50%);border-radius:50%;background:radial-gradient(ellipse,rgb(3 3 3 / var(--halo-opacity)),rgb(3 3 3 / var(--halo-opacity-scnd)),#0000);filter:blur(10px);z-index:-1;pointer-events:none}a[_ngcontent-%COMP%]:nth-child(1){border-radius:40vmin 0 0;transform-origin:110% 110%;transition:transform .4s .15s;background-image:url(/assets/SobreMi.jpg)}a[_ngcontent-%COMP%]:nth-child(2){border-radius:0 40vmin 0 0;left:52.5%;transform-origin:-10% 110%;transition:transform .4s .2s;background-image:url(/assets/Estudios.jpg)}a[_ngcontent-%COMP%]:nth-child(3){border-radius:0 0 0 40vmin;top:52.5%;transform-origin:110% -10%;transition:transform .4s .25s;background-image:url(/assets/Experiencia.jpg)}a[_ngcontent-%COMP%]:nth-child(4){border-radius:0 0 40vmin;top:52.5%;left:52.5%;transform-origin:-10% -10%;transition:transform .4s .3s;background-image:url(/assets/Contacto.jpg)}a[_ngcontent-%COMP%]:nth-child(5){width:55%;height:55%;left:22.5%;top:22.5%;border-radius:50vmin;box-shadow:0 0 0 5vmin #e3dfd2;transform:scale(1)}.top-span[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:flex-start;--halo-opacity: .65;--halo-opacity-scnd: .1}.down-span[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:flex-end;--halo-opacity: .65;--halo-opacity-scnd: .1}.wrap[_ngcontent-%COMP%] > .avatar[_ngcontent-%COMP%]{position:absolute;left:50%;top:50%;width:80vmin;height:80vmin;border-radius:50%;transform-origin:center center;transform:translate(-50%,-50%) scale(1);transition:transform .5s;z-index:2;pointer-events:none}.wrap[_ngcontent-%COMP%]:hover{transform:translate(-50%,-50%) scale(.4);opacity:1}.wrap[_ngcontent-%COMP%]:hover   a[_ngcontent-%COMP%]{transform:scale(1) translateZ(0)}a[_ngcontent-%COMP%]:hover   div[_ngcontent-%COMP%]{opacity:1;transform:translateZ(0)}span[_ngcontent-%COMP%]{color:#fff;-webkit-text-stroke:5px black;font-size:30vmin;margin:20vmin 0}.wrap.is-open-about[_ngcontent-%COMP%]{left:80%;top:50%;transform:translate(-46%,-50%) scale(.2)}.wrap.is-open-studies[_ngcontent-%COMP%]{left:20%;top:50%;transform:translate(-54%,-50%) scale(.2)}.wrap.is-open-experience[_ngcontent-%COMP%]{left:80%;top:50%;transform:translate(-46%,-50%) scale(.2)}.wrap.is-open-contact[_ngcontent-%COMP%]{left:20%;top:50%;transform:translate(-54%,-50%) scale(.2)}']})};var xM=(()=>{class t{_renderer;_elementRef;onChange=n=>{};onTouched=()=>{};constructor(n,r){this._renderer=n,this._elementRef=r}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static \u0275fac=function(r){return new(r||t)(Ce(Go),Ce(Ci))};static \u0275dir=jt({type:t})}return t})(),K4=(()=>{class t extends xM{static \u0275fac=(()=>{let n;return function(i){return(n||(n=Aa(t)))(i||t)}})();static \u0275dir=jt({type:t,features:[Ko]})}return t})(),kM=new L("");var Q4={provide:kM,useExisting:Ta(()=>Df),multi:!0};function Y4(){let t=Zt()?Zt().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var Z4=new L(""),Df=(()=>{class t extends xM{_compositionMode;_composing=!1;constructor(n,r,i){super(n,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!Y4())}writeValue(n){let r=n??"";this.setProperty("value",r)}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}static \u0275fac=function(r){return new(r||t)(Ce(Go),Ce(Ci),Ce(Z4,8))};static \u0275dir=jt({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&Ne("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[Rm([Q4]),Ko]})}return t})();var J4=new L(""),X4=new L("");function OM(t){return t!=null}function FM(t){return Ai(t)?xe(t):t}function VM(t){let e={};return t.forEach(n=>{e=n!=null?O(O({},e),n):e}),Object.keys(e).length===0?null:e}function LM(t,e){return e.map(n=>n(t))}function ez(t){return!t.validate}function jM(t){return t.map(e=>ez(e)?e:n=>e.validate(n))}function tz(t){if(!t)return null;let e=t.filter(OM);return e.length==0?null:function(n){return VM(LM(n,e))}}function UM(t){return t!=null?tz(jM(t)):null}function nz(t){if(!t)return null;let e=t.filter(OM);return e.length==0?null:function(n){let r=LM(n,e).map(FM);return Fp(r).pipe(ce(VM))}}function BM(t){return t!=null?nz(jM(t)):null}function CM(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function rz(t){return t._rawValidators}function iz(t){return t._rawAsyncValidators}function QI(t){return t?Array.isArray(t)?t:[t]:[]}function wf(t,e){return Array.isArray(t)?t.includes(e):t===e}function SM(t,e){let n=QI(e);return QI(t).forEach(i=>{wf(n,i)||n.push(i)}),n}function AM(t,e){return QI(e).filter(n=>!wf(t,n))}var Ef=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=UM(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=BM(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},YI=class extends Ef{name;get formDirective(){return null}get path(){return null}},Qc=class extends Ef{_parent=null;name=null;valueAccessor=null},ZI=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},oz={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},pte=re(O({},oz),{"[class.ng-submitted]":"isSubmitted"}),$M=(()=>{class t extends ZI{constructor(n){super(n)}static \u0275fac=function(r){return new(r||t)(Ce(Qc,2))};static \u0275dir=jt({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&fn("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[Ko]})}return t})();var qc="VALID",If="INVALID",Ls="PENDING",Gc="DISABLED",Us=class{},bf=class extends Us{value;source;constructor(e,n){super(),this.value=e,this.source=n}},Wc=class extends Us{pristine;source;constructor(e,n){super(),this.pristine=e,this.source=n}},Kc=class extends Us{touched;source;constructor(e,n){super(),this.touched=e,this.source=n}},js=class extends Us{status;source;constructor(e,n){super(),this.status=e,this.source=n}};function sz(t){return(Tf(t)?t.validators:t)||null}function az(t){return Array.isArray(t)?UM(t):t||null}function cz(t,e){return(Tf(e)?e.asyncValidators:t)||null}function uz(t){return Array.isArray(t)?BM(t):t||null}function Tf(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}var JI=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,n){this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return nr(this.statusReactive)}set status(e){nr(()=>this.statusReactive.set(e))}_status=Fa(()=>this.statusReactive());statusReactive=Mr(void 0);get valid(){return this.status===qc}get invalid(){return this.status===If}get pending(){return this.status==Ls}get disabled(){return this.status===Gc}get enabled(){return this.status!==Gc}errors;get pristine(){return nr(this.pristineReactive)}set pristine(e){nr(()=>this.pristineReactive.set(e))}_pristine=Fa(()=>this.pristineReactive());pristineReactive=Mr(!0);get dirty(){return!this.pristine}get touched(){return nr(this.touchedReactive)}set touched(e){nr(()=>this.touchedReactive.set(e))}_touched=Fa(()=>this.touchedReactive());touchedReactive=Mr(!1);get untouched(){return!this.touched}_events=new Qe;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(SM(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(SM(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(AM(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(AM(e,this._rawAsyncValidators))}hasValidator(e){return wf(this._rawValidators,e)}hasAsyncValidator(e){return wf(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let n=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(re(O({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new Kc(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsTouched(e))}markAsUntouched(e={}){let n=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),n&&e.emitEvent!==!1&&this._events.next(new Kc(!1,r))}markAsDirty(e={}){let n=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(re(O({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new Wc(!1,r))}markAsPristine(e={}){let n=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),n&&e.emitEvent!==!1&&this._events.next(new Wc(!0,r))}markAsPending(e={}){this.status=Ls;let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new js(this.status,n)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(re(O({},e),{sourceControl:n}))}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Gc,this.errors=null,this._forEachChild(i=>{i.disable(re(O({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new bf(this.value,r)),this._events.next(new js(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(re(O({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=qc,this._forEachChild(r=>{r.enable(re(O({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(re(O({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,n){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},n),this._parent._updateTouched({},n))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===qc||this.status===Ls)&&this._runAsyncValidator(r,e.emitEvent)}let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new bf(this.value,n)),this._events.next(new js(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(re(O({},e),{sourceControl:n}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Gc:qc}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,n){if(this.asyncValidator){this.status=Ls,this._hasOwnPendingAsyncValidator={emitEvent:n!==!1};let r=FM(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:n,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1,this,n.shouldHaveEmitted)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,n,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new js(this.status,n)),this._parent&&this._parent._updateControlsErrors(e,n,r)}_initObservables(){this.valueChanges=new Fe,this.statusChanges=new Fe}_calculateStatus(){return this._allControlsDisabled()?Gc:this.errors?If:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ls)?Ls:this._anyControlsHaveStatus(If)?If:qc}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,n){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,n),i&&this._events.next(new Wc(this.pristine,n))}_updateTouched(e={},n){this.touched=this._anyControlsTouched(),this._events.next(new Kc(this.touched,n)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,n)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Tf(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=az(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=uz(this._rawAsyncValidators)}};var HM=new L("",{providedIn:"root",factory:()=>XI}),XI="always";function lz(t,e){return[...e.path,t]}function dz(t,e,n=XI){fz(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),pz(t,e),mz(t,e),gz(t,e),hz(t,e)}function RM(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function hz(t,e){if(e.valueAccessor.setDisabledState){let n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function fz(t,e){let n=rz(t);e.validator!==null?t.setValidators(CM(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let r=iz(t);e.asyncValidator!==null?t.setAsyncValidators(CM(r,e.asyncValidator)):typeof r=="function"&&t.setAsyncValidators([r]);let i=()=>t.updateValueAndValidity();RM(e._rawValidators,i),RM(e._rawAsyncValidators,i)}function pz(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&zM(t,e)})}function gz(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&zM(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function zM(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function mz(t,e){let n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function yz(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function vz(t){return Object.getPrototypeOf(t.constructor)===K4}function _z(t,e){if(!e)return null;Array.isArray(e);let n,r,i;return e.forEach(o=>{o.constructor===Df?n=o:vz(o)?r=o:i=o}),i||r||n||null}function MM(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function NM(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var Iz=class extends JI{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,n,r){super(sz(n),cz(r,n)),this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Tf(n)&&(n.nonNullable||n.initialValueIsDefault)&&(NM(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){MM(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){MM(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){NM(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var wz={provide:Qc,useExisting:Ta(()=>ew)},PM=Promise.resolve(),ew=(()=>{class t extends Qc{_changeDetectorRef;callSetDisabledState;control=new Iz;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new Fe;constructor(n,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=n,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=_z(this,o)}ngOnChanges(n){if(this._checkForErrors(),!this._registered||"name"in n){if(this._registered&&(this._checkName(),this.formDirective)){let r=n.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in n&&this._updateDisabled(n),yz(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){dz(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(n){PM.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(n){let r=n.isDisabled.currentValue,i=r!==0&&km(r);PM.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(n){return this._parent?lz(n,this._parent):[n]}static \u0275fac=function(r){return new(r||t)(Ce(YI,9),Ce(J4,10),Ce(X4,10),Ce(kM,10),Ce(Oa,8),Ce(HM,8))};static \u0275dir=jt({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[Rm([wz]),Ko,Sa]})}return t})();var Ez=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=Si({type:t});static \u0275inj=Ii({})}return t})();var qM=(()=>{class t{static withConfig(n){return{ngModule:t,providers:[{provide:HM,useValue:n.callSetDisabledState??XI}]}}static \u0275fac=function(r){return new(r||t)};static \u0275mod=Si({type:t});static \u0275inj=Ii({imports:[Ez]})}return t})();var Dz=(t,e)=>({top:t,left:e}),Cf=class t{fireBaseService=x(ni);top=100;left=100;dragging=!1;offsetX=0;offsetY=0;field1="ESTUDIOS";field2="JsQdBul7oM8HeoebALwJ";field3="";onDragStart(e){this.dragging=!0,this.offsetX=e.clientX-this.left,this.offsetY=e.clientY-this.top,e.preventDefault()}onDragMove(e){this.dragging&&(this.left=e.clientX-this.offsetX,this.top=e.clientY-this.offsetY)}onDragEnd(){this.dragging=!1}update(){this.fireBaseService.updateDocument(this.field1,this.field2,JSON.parse(this.field3))}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=$e({type:t,selectors:[["app-develop-panel"]],hostBindings:function(n,r){n&1&&Ne("mousemove",function(o){return r.onDragMove(o)},!1,dm)("mouseup",function(){return r.onDragEnd()},!1,dm)},decls:16,vars:7,consts:[[1,"floating-panel",3,"ngStyle"],[1,"panel-header",3,"mousedown"],[1,"panel-body"],["type","text",3,"ngModelChange","ngModel"],[3,"click"]],template:function(n,r){n&1&&(B(0,"div",0)(1,"div",1),Ne("mousedown",function(o){return r.onDragStart(o)}),B(2,"span"),ne(3,"Panel de pruebas Firebase"),H()(),B(4,"div",2)(5,"label"),ne(6," Campo 1 "),B(7,"input",3),ka("ngModelChange",function(o){return Ql(r.field1,o)||(r.field1=o),o}),H()(),B(8,"label"),ne(9," Campo 2 "),B(10,"input",3),ka("ngModelChange",function(o){return Ql(r.field2,o)||(r.field2=o),o}),H()(),B(11,"label"),ne(12," Campo 3 "),B(13,"input",3),ka("ngModelChange",function(o){return Ql(r.field3,o)||(r.field3=o),o}),H()(),B(14,"button",4),Ne("click",function(){return r.update()}),ne(15,"Actualizar"),H()()()),n&2&&(Le("ngStyle",ZT(4,Dz,r.top+"px",r.left+"px")),ye(7),xa("ngModel",r.field1),ye(3),xa("ngModel",r.field2),ye(3),xa("ngModel",r.field3))},dependencies:[tt,jm,qM,Df,$M,ew],styles:[".floating-panel[_ngcontent-%COMP%]{position:fixed;z-index:9999;width:260px;background:#1e1e1e;color:#f5f5f5;border-radius:8px;box-shadow:0 12px 30px #0006;font-family:system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,sans-serif}.panel-header[_ngcontent-%COMP%]{padding:8px 12px;background:#333;border-radius:8px 8px 0 0;cursor:move;font-size:14px;font-weight:600;-webkit-user-select:none;user-select:none}.panel-body[_ngcontent-%COMP%]{padding:10px 12px 12px;display:flex;flex-direction:column;gap:8px}.panel-body[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;flex-direction:column;font-size:12px;gap:2px}.panel-body[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:4px 6px;border-radius:4px;border:1px solid #555;background:#222;color:#f5f5f5;font-size:13px}.panel-body[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#888}"]})};var Sf={production:!1,firebaseConfig:{apiKey:"AIzaSyBF38aXP_jKP6WBKJp78cZGjGmpwvLt_j8",authDomain:"cv-web-angular.firebaseapp.com",projectId:"cv-web-angular",storageBucket:"cv-web-angular.firebasestorage.app",messagingSenderId:"119785680877",appId:"1:119785680877:web:27a7c5644fddd90876c1e4",measurementId:"G-0QL3DQG5NC"}};function Tz(t,e){t&1&&Me(0,"app-develop-panel")}var Af=class t{environment=Sf;fireBaseService=x(ni);personalData=this.fireBaseService.getPersonalData();static \u0275fac=function(n){return new(n||t)};static \u0275cmp=$e({type:t,selectors:[["app-home"]],decls:3,vars:1,consts:[[4,"ngIf"]],template:function(n,r){n&1&&(B(0,"div"),Me(1,"app-radial-tabs"),hn(2,Tz,1,0,"app-develop-panel",0),H()),n&2&&(ye(2),Le("ngIf",!r.environment.production))},dependencies:[tt,rr,_f,Cf],encapsulation:2})};var Rf=class t{static \u0275fac=function(n){return new(n||t)};static \u0275cmp=$e({type:t,selectors:[["app-notfound"]],decls:2,vars:0,template:function(n,r){n&1&&(B(0,"p"),ne(1,"notfound works!"),H())},encapsulation:2})};var GM=[{path:"",redirectTo:"home",pathMatch:"full"},{path:"home",component:Af},{path:"**",component:Rf}];var QM="@firebase/installations",iw="0.6.18";var YM=1e4,ZM=`w:${iw}`,JM="FIS_v2",Cz="https://firebaseinstallations.googleapis.com/v1",Sz=60*60*1e3,Az="installations",Rz="Installations";var Mz={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},ro=new Ct(Az,Rz,Mz);function XM(t){return t instanceof lt&&t.code.includes("request-failed")}function eN({projectId:t}){return`${Cz}/projects/${t}/installations`}function tN(t){return{token:t.token,requestStatus:2,expiresIn:Pz(t.expiresIn),creationTime:Date.now()}}function nN(t,e){return v(this,null,function*(){let r=(yield e.json()).error;return ro.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})})}function rN({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function Nz(t,{refreshToken:e}){let n=rN(t);return n.append("Authorization",xz(e)),n}function iN(t){return v(this,null,function*(){let e=yield t();return e.status>=500&&e.status<600?t():e})}function Pz(t){return Number(t.replace("s","000"))}function xz(t){return`${JM} ${t}`}function kz(r,i){return v(this,arguments,function*({appConfig:t,heartbeatServiceProvider:e},{fid:n}){let o=eN(t),s=rN(t),a=e.getImmediate({optional:!0});if(a){let p=yield a.getHeartbeatsHeader();p&&s.append("x-firebase-client",p)}let u={fid:n,authVersion:JM,appId:t.appId,sdkVersion:ZM},l={method:"POST",headers:s,body:JSON.stringify(u)},h=yield iN(()=>fetch(o,l));if(h.ok){let p=yield h.json();return{fid:p.fid||n,registrationStatus:2,refreshToken:p.refreshToken,authToken:tN(p.authToken)}}else throw yield nN("Create Installation",h)})}function oN(t){return new Promise(e=>{setTimeout(e,t)})}function Oz(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}var Fz=/^[cdef][\w-]{21}$/,rw="";function Vz(){try{let t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;let n=Lz(t);return Fz.test(n)?n:rw}catch{return rw}}function Lz(t){return Oz(t).substr(0,22)}function Nf(t){return`${t.appName}!${t.appId}`}var sN=new Map;function aN(t,e){let n=Nf(t);cN(n,e),jz(n,e)}function cN(t,e){let n=sN.get(t);if(n)for(let r of n)r(e)}function jz(t,e){let n=Uz();n&&n.postMessage({key:t,fid:e}),Bz()}var no=null;function Uz(){return!no&&"BroadcastChannel"in self&&(no=new BroadcastChannel("[Firebase] FID Change"),no.onmessage=t=>{cN(t.data.key,t.data.fid)}),no}function Bz(){sN.size===0&&no&&(no.close(),no=null)}var $z="firebase-installations-database",Hz=1,io="firebase-installations-store",tw=null;function ow(){return tw||(tw=Gd($z,Hz,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(io)}}})),tw}function Mf(t,e){return v(this,null,function*(){let n=Nf(t),i=(yield ow()).transaction(io,"readwrite"),o=i.objectStore(io),s=yield o.get(n);return yield o.put(e,n),yield i.done,(!s||s.fid!==e.fid)&&aN(t,e.fid),e})}function uN(t){return v(this,null,function*(){let e=Nf(t),r=(yield ow()).transaction(io,"readwrite");yield r.objectStore(io).delete(e),yield r.done})}function Pf(t,e){return v(this,null,function*(){let n=Nf(t),i=(yield ow()).transaction(io,"readwrite"),o=i.objectStore(io),s=yield o.get(n),a=e(s);return a===void 0?yield o.delete(n):yield o.put(a,n),yield i.done,a&&(!s||s.fid!==a.fid)&&aN(t,a.fid),a})}function sw(t){return v(this,null,function*(){let e,n=yield Pf(t.appConfig,r=>{let i=zz(r),o=qz(t,i);return e=o.registrationPromise,o.installationEntry});return n.fid===rw?{installationEntry:yield e}:{installationEntry:n,registrationPromise:e}})}function zz(t){let e=t||{fid:Vz(),registrationStatus:0};return lN(e)}function qz(t,e){if(e.registrationStatus===0){if(!navigator.onLine){let i=Promise.reject(ro.create("app-offline"));return{installationEntry:e,registrationPromise:i}}let n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=Gz(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:Wz(t)}:{installationEntry:e}}function Gz(t,e){return v(this,null,function*(){try{let n=yield kz(t,e);return Mf(t.appConfig,n)}catch(n){throw XM(n)&&n.customData.serverCode===409?yield uN(t.appConfig):yield Mf(t.appConfig,{fid:e.fid,registrationStatus:0}),n}})}function Wz(t){return v(this,null,function*(){let e=yield WM(t.appConfig);for(;e.registrationStatus===1;)yield oN(100),e=yield WM(t.appConfig);if(e.registrationStatus===0){let{installationEntry:n,registrationPromise:r}=yield sw(t);return r||n}return e})}function WM(t){return Pf(t,e=>{if(!e)throw ro.create("installation-not-found");return lN(e)})}function lN(t){return Kz(t)?{fid:t.fid,registrationStatus:0}:t}function Kz(t){return t.registrationStatus===1&&t.registrationTime+YM<Date.now()}function Qz(r,i){return v(this,arguments,function*({appConfig:t,heartbeatServiceProvider:e},n){let o=Yz(t,n),s=Nz(t,n),a=e.getImmediate({optional:!0});if(a){let p=yield a.getHeartbeatsHeader();p&&s.append("x-firebase-client",p)}let u={installation:{sdkVersion:ZM,appId:t.appId}},l={method:"POST",headers:s,body:JSON.stringify(u)},h=yield iN(()=>fetch(o,l));if(h.ok){let p=yield h.json();return tN(p)}else throw yield nN("Generate Auth Token",h)})}function Yz(t,{fid:e}){return`${eN(t)}/${e}/authTokens:generate`}function aw(t,e=!1){return v(this,null,function*(){let n,r=yield Pf(t.appConfig,o=>{if(!dN(o))throw ro.create("not-registered");let s=o.authToken;if(!e&&Xz(s))return o;if(s.requestStatus===1)return n=Zz(t,e),o;{if(!navigator.onLine)throw ro.create("app-offline");let a=tq(o);return n=Jz(t,a),a}});return n?yield n:r.authToken})}function Zz(t,e){return v(this,null,function*(){let n=yield KM(t.appConfig);for(;n.authToken.requestStatus===1;)yield oN(100),n=yield KM(t.appConfig);let r=n.authToken;return r.requestStatus===0?aw(t,e):r})}function KM(t){return Pf(t,e=>{if(!dN(e))throw ro.create("not-registered");let n=e.authToken;return nq(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}function Jz(t,e){return v(this,null,function*(){try{let n=yield Qz(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return yield Mf(t.appConfig,r),n}catch(n){if(XM(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))yield uN(t.appConfig);else{let r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});yield Mf(t.appConfig,r)}throw n}})}function dN(t){return t!==void 0&&t.registrationStatus===2}function Xz(t){return t.requestStatus===2&&!eq(t)}function eq(t){let e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+Sz}function tq(t){let e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function nq(t){return t.requestStatus===1&&t.requestTime+YM<Date.now()}function rq(t){return v(this,null,function*(){let e=t,{installationEntry:n,registrationPromise:r}=yield sw(e);return r?r.catch(console.error):aw(e).catch(console.error),n.fid})}function iq(t,e=!1){return v(this,null,function*(){let n=t;return yield oq(n),(yield aw(n,e)).token})}function oq(t){return v(this,null,function*(){let{registrationPromise:e}=yield sw(t);e&&(yield e)})}function sq(t){if(!t||!t.options)throw nw("App Configuration");if(!t.name)throw nw("App Name");let e=["projectId","apiKey","appId"];for(let n of e)if(!t.options[n])throw nw(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function nw(t){return ro.create("missing-app-config-values",{valueName:t})}var hN="installations",aq="installations-internal",cq=t=>{let e=t.getProvider("app").getImmediate(),n=sq(e),r=en(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},uq=t=>{let e=t.getProvider("app").getImmediate(),n=en(e,hN).getImmediate();return{getId:()=>rq(n),getToken:i=>iq(n,i)}};function lq(){dt(new je(hN,cq,"PUBLIC")),dt(new je(aq,uq,"PRIVATE"))}lq();Ie(QM,iw);Ie(QM,iw,"esm2017");var xf="analytics",dq="firebase_id",hq="origin",fq=60*1e3,pq="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",pw="https://www.googletagmanager.com/gtag/js";var Ot=new Xt("@firebase/analytics");var gq={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},zt=new Ct("analytics","Analytics",gq);function mq(t){if(!t.startsWith(pw)){let e=zt.create("invalid-gtag-resource",{gtagURL:t});return Ot.warn(e.message),""}return t}function _N(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function yq(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function vq(t,e){let n=yq("firebase-js-sdk-policy",{createScriptURL:mq}),r=document.createElement("script"),i=`${pw}?l=${t}&id=${e}`;r.src=n?n?.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function _q(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}function Iq(t,e,n,r,i,o){return v(this,null,function*(){let s=r[i];try{if(s)yield e[s];else{let u=(yield _N(n)).find(l=>l.measurementId===i);u&&(yield e[u.appId])}}catch(a){Ot.error(a)}t("config",i,o)})}function wq(t,e,n,r,i){return v(this,null,function*(){try{let o=[];if(i&&i.send_to){let s=i.send_to;Array.isArray(s)||(s=[s]);let a=yield _N(n);for(let u of s){let l=a.find(p=>p.measurementId===u),h=l&&e[l.appId];if(h)o.push(h);else{o=[];break}}}o.length===0&&(o=Object.values(e)),yield Promise.all(o),t("event",r,i||{})}catch(o){Ot.error(o)}})}function Eq(t,e,n,r){function i(o,...s){return v(this,null,function*(){try{if(o==="event"){let[a,u]=s;yield wq(t,e,n,a,u)}else if(o==="config"){let[a,u]=s;yield Iq(t,e,n,r,a,u)}else if(o==="consent"){let[a,u]=s;t("consent",a,u)}else if(o==="get"){let[a,u,l]=s;t("get",a,u,l)}else if(o==="set"){let[a]=s;t("set",a)}else t(o,...s)}catch(a){Ot.error(a)}})}return i}function bq(t,e,n,r,i){let o=function(...s){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(o=window[i]),window[i]=Eq(o,t,e,n),{gtagCore:o,wrappedGtag:window[i]}}function Dq(t){let e=window.document.getElementsByTagName("script");for(let n of Object.values(e))if(n.src&&n.src.includes(pw)&&n.src.includes(t))return n;return null}var Tq=30,Cq=1e3,uw=class{constructor(e={},n=Cq){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}},IN=new uw;function Sq(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}function Aq(t){return v(this,null,function*(){var e;let{appId:n,apiKey:r}=t,i={method:"GET",headers:Sq(r)},o=pq.replace("{app-id}",n),s=yield fetch(o,i);if(s.status!==200&&s.status!==304){let a="";try{let u=yield s.json();!((e=u.error)===null||e===void 0)&&e.message&&(a=u.error.message)}catch{}throw zt.create("config-fetch-failed",{httpStatus:s.status,responseMessage:a})}return s.json()})}function Rq(r){return v(this,arguments,function*(t,e=IN,n){let{appId:i,apiKey:o,measurementId:s}=t.options;if(!i)throw zt.create("no-app-id");if(!o){if(s)return{measurementId:s,appId:i};throw zt.create("no-api-key")}let a=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},u=new lw;return setTimeout(()=>v(null,null,function*(){u.abort()}),n!==void 0?n:fq),wN({appId:i,apiKey:o,measurementId:s},a,u,e)})}function wN(o,s,a){return v(this,arguments,function*(t,{throttleEndTimeMillis:e,backoffCount:n},r,i=IN){var u;let{appId:l,measurementId:h}=t;try{yield Mq(r,e)}catch(p){if(h)return Ot.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${h} provided in the "measurementId" field in the local Firebase config. [${p?.message}]`),{appId:l,measurementId:h};throw p}try{let p=yield Aq(t);return i.deleteThrottleMetadata(l),p}catch(p){let m=p;if(!Nq(m)){if(i.deleteThrottleMetadata(l),h)return Ot.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${h} provided in the "measurementId" field in the local Firebase config. [${m?.message}]`),{appId:l,measurementId:h};throw p}let y=Number((u=m?.customData)===null||u===void 0?void 0:u.httpStatus)===503?Hd(n,i.intervalMillis,Tq):Hd(n,i.intervalMillis),T={throttleEndTimeMillis:Date.now()+y,backoffCount:n+1};return i.setThrottleMetadata(l,T),Ot.debug(`Calling attemptFetch again in ${y} millis`),wN(t,T,r,i)}})}function Mq(t,e){return new Promise((n,r)=>{let i=Math.max(e-Date.now(),0),o=setTimeout(n,i);t.addEventListener(()=>{clearTimeout(o),r(zt.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function Nq(t){if(!(t instanceof lt)||!t.customData)return!1;let e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}var lw=class{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}};var dw;function Pq(t,e,n,r,i){return v(this,null,function*(){if(i&&i.global){t("event",n,r);return}else{let o=yield e,s=Object.assign(Object.assign({},r),{send_to:o});t("event",n,s)}})}var hw;function xq(t){hw=t}function kq(t){dw=t}function Oq(){return v(this,null,function*(){if(Fi())try{yield $d()}catch(t){return Ot.warn(zt.create("indexeddb-unavailable",{errorInfo:t?.toString()}).message),!1}else return Ot.warn(zt.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0})}function Fq(t,e,n,r,i,o,s){return v(this,null,function*(){var a;let u=Rq(t);u.then(y=>{n[y.measurementId]=y.appId,t.options.measurementId&&y.measurementId!==t.options.measurementId&&Ot.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${y.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(y=>Ot.error(y)),e.push(u);let l=Oq().then(y=>{if(y)return r.getId()}),[h,p]=yield Promise.all([u,l]);Dq(o)||vq(o,h.measurementId),hw&&(i("consent","default",hw),xq(void 0)),i("js",new Date);let m=(a=s?.config)!==null&&a!==void 0?a:{};return m[hq]="firebase",m.update=!0,p!=null&&(m[dq]=p),i("config",h.measurementId,m),dw&&(i("set",dw),kq(void 0)),h.measurementId})}var fw=class{constructor(e){this.app=e}_delete(){return delete Yc[this.app.options.appId],Promise.resolve()}},Yc={},fN=[],pN={},cw="dataLayer",Vq="gtag",gN,EN,mN=!1;function Lq(){let t=[];if(Bd()&&t.push("This is a browser extension environment."),S0()||t.push("Cookies are not available."),t.length>0){let e=t.map((r,i)=>`(${i+1}) ${r}`).join(" "),n=zt.create("invalid-analytics-context",{errorInfo:e});Ot.warn(n.message)}}function jq(t,e,n){Lq();let r=t.options.appId;if(!r)throw zt.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)Ot.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw zt.create("no-api-key");if(Yc[r]!=null)throw zt.create("already-exists",{id:r});if(!mN){_q(cw);let{wrappedGtag:o,gtagCore:s}=bq(Yc,fN,pN,cw,Vq);EN=o,gN=s,mN=!0}return Yc[r]=Fq(t,fN,pN,e,gN,cw,n),new fw(t)}function bN(t=Pn()){t=He(t);let e=en(t,xf);return e.isInitialized()?e.getImmediate():DN(t)}function DN(t,e={}){let n=en(t,xf);if(n.isInitialized()){let i=n.getImmediate();if(Jt(e,n.getOptions()))return i;throw zt.create("already-initialized")}return n.initialize({options:e})}function TN(t,e,n,r){t=He(t),Pq(EN,Yc[t.app.options.appId],e,n,r).catch(i=>Ot.error(i))}var yN="@firebase/analytics",vN="0.10.17";function Uq(){dt(new je(xf,(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return jq(r,i,n)},"PUBLIC")),dt(new je("analytics-internal",t,"PRIVATE")),Ie(yN,vN),Ie(yN,vN,"esm2017");function t(e){try{let n=e.getProvider(xf).getImmediate();return{logEvent:(r,i,o)=>TN(n,r,i,o)}}catch(n){throw zt.create("interop-component-reg-failed",{reason:n})}}}Uq();var Zc=class{constructor(e){return e}},CN="analytics",gw=class{constructor(){return Ur(CN)}};var SN=kt(bN,!0);var yne=Math.floor(Math.random()*(2**32-1))-2**31;var mw=new L("angularfire2.analytics-instances");function Bq(t,e,n){if(!td(n))return null;let r=ji(CN,t,e);return r&&new Zc(r)}function $q(t){return(e,n,r)=>{if(!td(r))return null;let i=e.runOutsideAngular(()=>t(n));return new Zc(i)}}var Hq={provide:gw,deps:[[new ut,mw]]},zq={provide:Zc,useFactory:Bq,deps:[[new ut,mw],gn,Cn]};function AN(t,...e){return Ie("angularfire",xn.full,"analytics"),ln([zq,Hq,{provide:mw,useFactory:$q(t),multi:!0,deps:[_e,Je,Cn,kn,ar,...e]}])}Km(Od,{providers:[vy(GM),rC({eventCoalescing:!0}),q0(()=>G0(Sf.firebaseConfig)),wM(()=>bM()),qS(()=>GS()),AN(()=>SN())]}).catch(t=>console.error(t));
